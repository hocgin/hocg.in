<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>hocgin (à¹‘`ç¬Â´à¹‘)</title>
  <icon>https://www.gravatar.com/avatar/c00cd16720e00537b9bbb0f8b46e39fe</icon>
  <subtitle>Great minds have purpose, others have wishes.</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://hocg.in/"/>
  <updated>2019-04-10T10:04:38.417Z</updated>
  <id>https://hocg.in/</id>
  
  <author>
    <name>hocgin</name>
    <email>hocgin@gamil.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Linux ä¸‹ç½‘ç»œç›¸å…³çš„å‘½ä»¤</title>
    <link href="https://hocg.in/2019/04/01/Linux%20%E4%B8%8B%E7%BD%91%E7%BB%9C%E7%9B%B8%E5%85%B3%E7%9A%84%E5%91%BD%E4%BB%A4/"/>
    <id>https://hocg.in/2019/04/01/Linux ä¸‹ç½‘ç»œç›¸å…³çš„å‘½ä»¤/</id>
    <published>2019-04-01T00:07:00.000Z</published>
    <updated>2019-04-10T10:04:38.417Z</updated>
    
    <content type="html"><![CDATA[<p>Linux ä¸‹ç½‘ç»œç›¸å…³çš„å‘½ä»¤<br><a id="more"></a></p><h2 id="ğŸ”—"><a href="#ğŸ”—" class="headerlink" title="ğŸ”—"></a>ğŸ”—</h2><p><a href="https://linoxide.com/linux-command/use-ip-command-linux/" target="_blank" rel="external">Linux-Nettools vs Iproute2</a></p><h2 id="net-tools"><a href="#net-tools" class="headerlink" title="net-tools"></a>net-tools</h2><h3 id="ifconfig"><a href="#ifconfig" class="headerlink" title="ifconfig"></a><code>ifconfig</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">enp2s0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.8.23  netmask 255.255.255.0  broadcast 192.168.8.255</span><br><span class="line">        inet6 fe80::794c:57e0:a7ca:518e  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 50:9a:4c:17:e9:da  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 4412700  bytes 3603093632 (3.3 GiB)</span><br><span class="line">        RX errors 0  dropped 20  overruns 0  frame 0</span><br><span class="line">        TX packets 1877167  bytes 507480177 (483.9 MiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536</span><br><span class="line">        inet 127.0.0.1  netmask 255.0.0.0</span><br><span class="line">        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;</span><br><span class="line">        loop  txqueuelen 1000  (Local Loopback)</span><br><span class="line">        RX packets 14009901  bytes 2441347518 (2.2 GiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 14009901  bytes 2441347518 (2.2 GiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">wlp3s0: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500</span><br><span class="line">        ether 54:13:79:5b:c3:29  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 6  bytes 1296 (1.2 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 34  bytes 5037 (4.9 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br></pre></td></tr></table></figure><ul><li>enp2s0: ç½‘ç»œè®¾å¤‡å·</li><li>flags=4163<up,broadcast,running,multicast>: ç½‘ç»œè®¾å¤‡çŠ¶æ€æ ‡è¯†</up,broadcast,running,multicast></li><li>mtu 1500: mtu</li><li>inet 192.168.8.23  netmask 255.255.255.0  broadcast 192.168.8.255: IPv4 åè®®</li><li>inet6 fe80::794c:57e0:a7ca:518e: IPv6 åè®®</li><li>ether 50:9a:4c:17:e9:da </li><li>TX: å‘é€/ä¸Šè¡Œ  </li><li>RX: æ¥æ”¶/ä¸‹è¡Œ <ul><li>packets 4412700: åŒ…æ€»æ•°é‡</li><li>bytes 2441347518 (2.2 GiB): æµé‡å¤§å°</li><li>errors 0: é”™è¯¯åŒ…æ•°é‡</li><li>dropped 0: ä¸¢åŒ…æ•°é‡</li><li>overruns 0: è¶…æ—¶åŒ…æ•°é‡</li><li>collisions 0: å†²çªåŒ…æ•°é‡</li><li>frame 0: å¸§æ•°é‡</li></ul></li><li>txqueuelen 1000  (Ethernet): å­˜å‚¨ä¼ è¾“æ•°æ®ç¼“å­˜çš„å¤§å°</li><li>prefixlen 64</li><li>scopeid 0x20<link></li></ul><h3 id="route"><a href="#route" class="headerlink" title="route"></a><code>route</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Kernel IP routing table</span><br><span class="line">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class="line">default         192.168.8.1     0.0.0.0         UG    100    0        0 enp2s0</span><br><span class="line">192.168.8.0     0.0.0.0         255.255.255.0   U     100    0        0 enp2s0</span><br></pre></td></tr></table></figure><ul><li>Genmask: å­ç½‘æ©ç </li><li>Destination: ç›®çš„åœ°  <code>Destination/Genmask ç»„æˆå±€åŸŸç½‘</code><ul><li>default = 0.0.0.0/0.0.0.0</li></ul></li><li>Gateway: ç½‘å…³</li><li>Flags: ç½‘ç»œæ ‡è¯†<ul><li>U (route is up): è·¯ç”±å¯åŠ¨çŠ¶æ€</li><li>H (target is a host): ç›®æ ‡æ˜¯ä¸»æœº</li><li>G (use gateway): éœ€è¦ä½¿ç”¨ç½‘å…³æ¥ä¼ è¾“</li><li>R (reinstate route for dynamic routing): </li><li>D (dynamically installed by daemon or redirect): </li><li>M (modified from routing daemon or redirect): </li><li>! (reject route): æ‹’ç»/é»‘åå•</li></ul></li><li>Metric: ç›®æ ‡çš„è·ç¦»</li><li>Ref: </li><li>Use: è·¯çº¿æŸ¥æ‰¾è®¡æ•°</li><li>Iface: æ¥æ”¶æ•°æ®çš„ç½‘ç»œæ¥å£ <code>ç½‘ç»œå‡ºå£ç½‘å¡</code></li></ul><h2 id="iproute2"><a href="#iproute2" class="headerlink" title="iproute2"></a>iproute2</h2><h3 id="ip-link"><a href="#ip-link" class="headerlink" title="ip link"></a><code>ip link</code></h3><blockquote><p>é…ç½®ç½‘ç»œè®¾å¤‡å‚æ•°<br>OSI ä¸ƒå±‚åè®®ä¸­, äºŒå±‚ç›¸å…³ä¿¡æ¯<br>eg. MTU, MAC, å¼€å…³â€¦<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">ip link show</span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">2: enp2s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP mode DEFAULT group default qlen 1000</span><br><span class="line">    link/ether 50:9a:4c:17:e9:da brd ff:ff:ff:ff:ff:ff</span><br><span class="line">3: wlp3s0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN mode DORMANT group default qlen 1000</span><br><span class="line">    link/ether 54:13:79:5b:c3:29 brd ff:ff:ff:ff:ff:ff</span><br><span class="line"></span><br><span class="line"># æ˜¾ç¤ºçŠ¶æ€è¯¦æƒ…</span><br><span class="line">ip -s link show</span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    RX: bytes  packets  errors  dropped overrun mcast   </span><br><span class="line">    2507975007 14838472 0       0       0       0       </span><br><span class="line">    TX: bytes  packets  errors  dropped carrier collsns </span><br><span class="line">    2507975007 14838472 0       0       0       0       </span><br><span class="line">2: enp2s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP mode DEFAULT group default qlen 1000</span><br><span class="line">    link/ether 50:9a:4c:17:e9:da brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    RX: bytes  packets  errors  dropped overrun mcast   </span><br><span class="line">    3657508487 4607298  0       23      0       154201  </span><br><span class="line">    TX: bytes  packets  errors  dropped carrier collsns </span><br><span class="line">    536627449  1943192  0       0       0       0       </span><br><span class="line">3: wlp3s0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN mode DORMANT group default qlen 1000</span><br><span class="line">    link/ether 54:13:79:5b:c3:29 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    RX: bytes  packets  errors  dropped overrun mcast   </span><br><span class="line">    1296       6        0       0       0       0       </span><br><span class="line">    TX: bytes  packets  errors  dropped carrier collsns </span><br><span class="line">    5037       34       0       0       0       0</span><br><span class="line">    </span><br><span class="line"># æ“ä½œç‰¹å®šç½‘å¡ eg. ip link set eth0 up</span><br><span class="line">ip link set &#123;ç½‘ç»œè®¾å¤‡&#125; &#123;æ“ä½œ&#125;</span><br><span class="line">- ç½‘ç»œè®¾å¤‡: eg. enp2s0</span><br><span class="line">    - æ“ä½œ</span><br><span class="line">        - up: å¼€å¯</span><br><span class="line">        - down: å…³é—­</span><br><span class="line">        - address: Mac åœ°å€`ff:ff:ff:ff:ff:ff`</span><br><span class="line">        - name: ç½‘ç»œè®¾å¤‡åç§°</span><br><span class="line">        - mtu: mtuå€¼`1500`</span><br></pre></td></tr></table></figure></p></blockquote><h3 id="ip-addr"><a href="#ip-addr" class="headerlink" title="ip addr"></a><code>ip addr</code></h3><blockquote><p>é…ç½®ç½‘ç»œç›¸å…³ä¿¡æ¯<br>OSI ä¸ƒå±‚åè®®ä¸­, ä¸‰å±‚ç›¸å…³ä¿¡æ¯<br>eg. ç½‘å…³, å­ç½‘æ©ç ..</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 ::1/128 scope host </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">2: enp2s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000</span><br><span class="line">    link/ether 50:9a:4c:17:e9:da brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.8.23/24 brd 192.168.8.255 scope global noprefixroute enp2s0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::794c:57e0:a7ca:518e/64 scope link noprefixroute </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">3: wlp3s0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN group default qlen 1000</span><br><span class="line">    link/ether 54:13:79:5b:c3:29 brd ff:ff:ff:ff:ff:ff</span><br><span class="line"></span><br><span class="line"># è®¾å®šIPç›¸å…³å‚æ•°</span><br><span class="line">ip address &#123;add|del&#125; &#123;IPç›¸å…³é…ç½®&#125; &#123;ç½‘ç»œè®¾å¤‡&#125; &#123;ç›¸å…³å‚æ•°&#125;</span><br><span class="line">- add|del: æ–°å¢æˆ–åˆ é™¤</span><br><span class="line">- IPç›¸å…³é…ç½®: eg. 192.168.8.23/24</span><br><span class="line">- ç½‘ç»œè®¾å¤‡: eg. enp2s0</span><br><span class="line">- ç›¸å…³å‚æ•°:</span><br><span class="line">    - broadcast: å¹¿æ’­åœ°å€, &quot;+&quot;ä¸ºè‡ªåŠ¨è®¡ç®—</span><br><span class="line">    - label: åˆ¥ååˆ«å</span><br><span class="line">    - scope: ä½œç”¨åŸŸ</span><br><span class="line">        - global</span><br><span class="line">        - site  </span><br><span class="line">        - link</span><br><span class="line">        - host</span><br></pre></td></tr></table></figure><ul><li>lo: ç½‘å¡label. </li><li><broadcast,multicast,up,lower_up>: ç½‘ç»œè®¾å¤‡çŠ¶æ€æ ‡è¯† <ul><li>BROADCAST, MULTICAST: å¯ä»¥å‘é€å¹¿æ’­, å¯ä»¥å‘é€å¤šæ’­åŒ…<ul><li>LOOPBACK: æœ¬åœ°ç¯å›</li></ul></li><li>UP: ç½‘ç»œè®¾å¤‡çŠ¶æ€</li><li>LOWER_UP: å·²è¿çº¿</li></ul></broadcast,multicast,up,lower_up></li><li>mtu 65536:  æœ€å¤§ä¼ è¾“å•å…ƒ</li><li>qdisc pfifo_fast: æ’é˜Ÿè§„åˆ™. <ul><li>noqueue</li><li>pfifo_fast</li></ul></li><li>group default: æ‰€åœ¨ç»„. </li><li>inet 127.0.0.1/8: IPv4 åœ°å€åŠå­ç½‘æ©ç </li><li>inet6 fe80::794c:57e0:a7ca:518e/64: IPv6 åœ°å€åŠå­ç½‘æ©ç </li><li>brd ff:ff:ff:ff:ff:ff: å¹¿æ’­åœ°å€</li><li><p>scope global: ä½œç”¨åŸŸ. </p><ul><li>global: å…è®¸æ‰€æœ‰æ¥æº</li><li>site: ä»…IPv6, å…è®¸ä»…æœ¬æœºè¿æ¥ </li><li>link: ä»…å…è®¸è‡ªæˆ‘è¿æ¥</li><li>host: ä»…å…è®¸æœ¬ä¸»æœºå†…éƒ¨è¿æ¥</li></ul></li><li><p>noprefixroute enp2s0</p></li><li>preferred_lft forever: </li><li>valid_lft forever: æœ‰æ•ˆæœŸé™</li><li>qlen 1000</li></ul><h3 id="ip-route"><a href="#ip-route" class="headerlink" title="ip route"></a><code>ip route</code></h3><blockquote><p>è·¯ç”±ç›¸å…³è®¾ç½®</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ip route</span><br><span class="line">default via 192.168.8.1 dev enp2s0 proto static metric 100 </span><br><span class="line">192.168.8.0/24 dev enp2s0 proto kernel scope link src 192.168.8.23 metric 100</span><br><span class="line"></span><br><span class="line"># è®¾å®šrouteç›¸å…³å‚æ•°</span><br><span class="line">ip route &#123;add|del&#125; &#123;IP|ç½‘ç»œ&#125; &#123;via ç½‘å…³&#125; &#123;ç½‘ç»œè®¾å¤‡&#125;</span><br><span class="line">- add|del: æ–°å¢æˆ–åˆ é™¤</span><br><span class="line">- IP|ç½‘ç»œ: eg. IP æˆ– 192.168.8.23/24</span><br><span class="line">- ç½‘å…³: æŒ‡å®šå‡ºå£ç½‘å…³(å¯é€‰)</span><br><span class="line">- ç½‘ç»œè®¾å¤‡: æŒ‡å®šå‡ºå£ç½‘ç»œè®¾å¤‡ eg. enp2s0</span><br><span class="line">- mtu: é…ç½®mtuå‚æ•°</span><br></pre></td></tr></table></figure><ul><li>192.168.8.0/24: ç½‘ç»œ</li><li>dev enp2s0: ç½‘ç»œè®¾å¤‡</li><li>proto kernel: è·¯ç”±åè®® [redirect, kernel, boot, static, ra]</li><li>scope link: ä½œç”¨åŸŸ</li></ul><h2 id="ç½‘ç»œä¾¦æŸ¥"><a href="#ç½‘ç»œä¾¦æŸ¥" class="headerlink" title="ç½‘ç»œä¾¦æŸ¥"></a>ç½‘ç»œä¾¦æŸ¥</h2><h3 id="ping"><a href="#ping" class="headerlink" title="ping"></a>ping</h3><blockquote><p>ç½‘ç»œçŠ¶æ€</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ ping www.baidu.com -c 5</span><br><span class="line">PING www.a.shifen.com (14.215.177.39) 56(84) bytes of data.</span><br><span class="line">64 bytes from 14.215.177.39 (14.215.177.39): icmp_seq=1 ttl=54 time=20.6 ms</span><br><span class="line">64 bytes from 14.215.177.39 (14.215.177.39): icmp_seq=2 ttl=54 time=20.5 ms</span><br><span class="line">64 bytes from 14.215.177.39 (14.215.177.39): icmp_seq=3 ttl=54 time=20.4 ms</span><br></pre></td></tr></table></figure><ul><li>64 bytes: ICMPå°åŒ…å¤§å°</li><li>icmp_seq=3: ä¾¦æµ‹åºå·</li><li>ttl=54: é»˜è®¤255, æ¯ç»è¿‡ä¸€ä¸ªå«MACåœ°å€æ—¶-1</li><li>time=20.5 ms: è€—æ—¶</li></ul><h3 id="traceroute"><a href="#traceroute" class="headerlink" title="traceroute"></a>traceroute</h3><blockquote><p>ç½‘è·¯çŠ¶æ€<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~  traceroute www.baidu.com </span><br><span class="line">traceroute to www.baidu.com (14.215.177.39), 30 hops max, 60 byte packets</span><br><span class="line"> 1  192.168.8.1 (192.168.8.1)  0.784 ms  1.348 ms  1.866 ms</span><br><span class="line"> 2  192.168.5.1 (192.168.5.1)  0.138 ms  0.174 ms  0.217 ms</span><br><span class="line"> 3  1.224.77.125.broad.xm.fj.dynamic.163data.com.cn (125.77.224.1)  1.458 ms  1.486 ms  1.694 ms</span><br><span class="line"> 4  61.154.238.229 (61.154.238.229)  4.692 ms  4.704 ms 61.154.238.225 (61.154.238.225)  2.400 ms</span><br><span class="line"> 5  61.154.238.77 (61.154.238.77)  5.834 ms 117.30.27.185 (117.30.27.185)  1.948 ms 61.154.238.77 (61.154.238.77)  6.106 ms</span><br><span class="line"> 6  * 202.97.40.169 (202.97.40.169)  19.847 ms 202.97.78.37 (202.97.78.37)  19.233 ms</span><br><span class="line"> 7  113.96.4.90 (113.96.4.90)  32.771 ms  28.773 ms 113.96.4.106 (113.96.4.106)  42.485 ms</span><br><span class="line"> 8  * * *</span><br><span class="line"> 9  14.29.117.234 (14.29.117.234)  19.359 ms 14.29.121.182 (14.29.121.182)  17.646 ms 14.29.121.190 (14.29.121.190)  28.106 ms</span><br><span class="line">10  * * *</span><br><span class="line">11  * * *</span><br></pre></td></tr></table></figure></p></blockquote><ul><li>æ¯ä¸ªåºå·éƒ½æ˜¯åŒä¸€å±‚è¿›è¡Œä¸‰æ¬¡è¿æ¥çš„è€—æ—¶</li><li><code>* * *</code>: å¯èƒ½æ˜¯é˜²ç«å¢™é—®é¢˜æˆ–è·¯ç”±é—®é¢˜</li></ul><h3 id="netstat"><a href="#netstat" class="headerlink" title="netstat"></a>netstat</h3><blockquote><p>æŸ¥çœ‹æœ¬æœºçš„ç½‘ç»œè¿æ¥<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># ç›®å‰æ‰€æœ‰çš„ç½‘ç»œçº¿è·¯çŠ¶æ€</span><br><span class="line"># netstat -tulnp</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    </span><br><span class="line">tcp        0      0 0.0.0.0:8000            0.0.0.0:*               LISTEN      10247/node</span><br></pre></td></tr></table></figure></p></blockquote><ul><li>Proto: ç½‘ç»œåè®®</li><li>Recv-Q: æœªä½¿ç”¨å­—èŠ‚</li><li>Send-Q: æ²¡æœ‰ç¡®è®¤çš„å­—èŠ‚</li><li>Local Address: æœ¬åœ°åœ°å€+ç«¯å£</li><li>Foreign Address: ç›®æ ‡åœ°å€+ç«¯å£</li><li>stat: çŠ¶æ€<ul><li>ESTABLISED: å·²è¿çº¿</li><li>SYN_SENT: å‘é€è¿çº¿ç¡®è®¤åŒ…</li><li>SYN_RECV: æ¥æ”¶è¿çº¿ç¡®è®¤åŒ…</li><li>FIN_WAIT1: æ­£åœ¨æ–­çº¿ä¸­-ç¬¬ä¸€æ­¥</li><li>FIN_WAIT2: æ­£åœ¨æ–­çº¿ä¸­(ç­‰å¾…å¯¹æ–¹ç¡®è®¤)-ç¬¬äºŒæ­¥</li><li>TIME_WAIT: å·²æ–­çº¿(ç­‰å¾…å…³é—­)-ç¬¬ä¸‰æ­¥</li><li>LISTEN: æ­£åœ¨ç›‘å¬</li></ul></li><li>PID/Program name: è¿›ç¨‹å’ŒPID</li></ul><h2 id="host-nslookup-dig"><a href="#host-nslookup-dig" class="headerlink" title="host, nslookup, dig"></a>host, nslookup, dig</h2><blockquote><p>åŸŸåè½¬IP</p></blockquote><h3 id="host"><a href="#host" class="headerlink" title="host"></a>host</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ host www.baidu.com 114.114.114.114</span><br><span class="line">Using domain server:</span><br><span class="line">Name: 114.114.114.114</span><br><span class="line">Address: 114.114.114.114#53</span><br><span class="line">Aliases: </span><br><span class="line"></span><br><span class="line">www.baidu.com is an alias for www.a.shifen.com.</span><br><span class="line">www.a.shifen.com has address 14.215.177.39</span><br><span class="line">www.a.shifen.com has address 14.215.177.38</span><br></pre></td></tr></table></figure><h3 id="nslookup"><a href="#nslookup" class="headerlink" title="nslookup"></a>nslookup</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ nslookup www.google.com</span><br><span class="line">Server:218.85.152.99</span><br><span class="line">Address:218.85.152.99#53</span><br><span class="line"></span><br><span class="line">Non-authoritative answer:</span><br><span class="line">Name:www.google.com</span><br><span class="line">Address: 75.126.150.210</span><br><span class="line">Name:www.google.com</span><br><span class="line">Address: 2400:cb00:2048:1::6814:224e</span><br></pre></td></tr></table></figure><h3 id="dig"><a href="#dig" class="headerlink" title="dig"></a>dig</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ dig www.google.com</span><br><span class="line"></span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.11.3-1-Debian &lt;&lt;&gt;&gt; www.google.com</span><br><span class="line">;; global options: +cmd</span><br><span class="line">;; Got answer:</span><br><span class="line">;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 26052</span><br><span class="line">;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 4, ADDITIONAL: 8</span><br><span class="line"></span><br><span class="line">;; QUESTION SECTION:</span><br><span class="line">;www.google.com.INA</span><br><span class="line"></span><br><span class="line">;; ANSWER SECTION:</span><br><span class="line">www.google.com.600INA75.126.150.210</span><br><span class="line"></span><br><span class="line">;; AUTHORITY SECTION:</span><br><span class="line">google.com.153873INNSns2.google.com.</span><br><span class="line">google.com.153873INNSns1.google.com.</span><br><span class="line">google.com.153873INNSns3.google.com.</span><br><span class="line">google.com.153873INNSns4.google.com.</span><br><span class="line"></span><br><span class="line">;; ADDITIONAL SECTION:</span><br><span class="line">ns1.google.com.340640INA216.239.32.10</span><br><span class="line">ns1.google.com.160867INAAAA2001:4860:4802:32::a</span><br><span class="line">ns2.google.com.147310INA216.239.34.10</span><br><span class="line">ns2.google.com.167153INAAAA2001:4860:4802:34::a</span><br><span class="line">ns3.google.com.170088INA216.239.36.10</span><br><span class="line">ns3.google.com.343381INAAAA2001:4860:4802:36::a</span><br><span class="line">ns4.google.com.342199INA216.239.38.10</span><br><span class="line">ns4.google.com.340238INAAAA2001:4860:4802:38::a</span><br><span class="line"></span><br><span class="line">;; Query time: 3 msec</span><br><span class="line">;; SERVER: 218.85.152.99#53(218.85.152.99)</span><br><span class="line">;; WHEN: Tue Apr 02 11:54:08 CST 2019</span><br><span class="line">;; MSG SIZE  rcvd: 296</span><br></pre></td></tr></table></figure><h2 id="Hook"><a href="#Hook" class="headerlink" title="Hook"></a>Hook</h2><ul><li><p>tcpdump</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ sudo tcpdump -i enp2s0</span><br><span class="line">tcpdump: verbose output suppressed, use -v or -vv for full protocol decode</span><br><span class="line">listening on enp2s0, link-type EN10MB (Ethernet), capture size 262144 bytes</span><br><span class="line">16:03:36.920320 IP 192.168.8.23.32842 &gt; 106.37.75.114.80: Flags [.], ack 1334, win 1134, options [nop,nop,TS val 2465645746 ecr 4170196622], length 0</span><br><span class="line">16:07:25.848706 IP 192.168.8.23.45512 &gt; 203.107.41.32.9015: Flags [P.], seq 858:897, ack 771, win 37440, length 39</span><br><span class="line">15:23:53.248962 IP6 fe80::485c:9c0f:61ce:2886 &gt; ff02::1:ffb6:3f84: ICMP6, neighbor solicitation, who has fe80::32e1:71ff:feb6:3f84, length 32</span><br><span class="line">15:23:53.249199 IP 192.168.8.23.55804 &gt; FJ-DNS.xm.fj.cn.domain: 41679+ PTR? 4.8.f.3.6.b.f.f.1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.2.0.f.f.ip6.arpa. (90)</span><br><span class="line">15:23:53.251749 IP FJ-DNS.xm.fj.cn.domain &gt; 192.168.8.23.55804: 41679 NXDomain* 0/1/0 (154)</span><br><span class="line">15:23:53.251809 IP 192.168.8.23.57994 &gt; FJ-DNS.xm.fj.cn.domain: 8140+ PTR? 6.8.8.2.e.c.1.6.f.0.c.9.c.5.8.4.0.0.0.0.0.0.0.0.0.0.0.0.0.8.e.f.ip6.arpa. (90)</span><br><span class="line">15:23:53.254241 ARP, Request who-has 192.168.8.250 tell 192.168.8.134, length 46</span><br><span class="line">15:23:53.255081 IP FJ-DNS.xm.fj.cn.domain &gt; 192.168.8.23.57994: 8140 NXDomain* 0/1/0 (139)</span><br><span class="line"></span><br><span class="line"># æŒ‡ä»¤</span><br><span class="line">tcpdump [-AennqX] [-i ç½‘ç»œæ¥å£] [-w å¯¼å‡ºæ–‡ä»¶] [-c æ¬¡æ•°] \</span><br><span class="line">                      [-r å¯¼å…¥æ–‡ä»¶] [è¿‡æ»¤è§„åˆ™]</span><br><span class="line">-Aï¼š æ˜¾ç¤ºä¸ºASCIIç </span><br><span class="line">-e: OSI äºŒå±‚æ˜¾ç¤ºMACå°åŒ…</span><br><span class="line">-nn: è§£æåœ°å€(æ˜¾ç¤ºä¸ºipå’Œç«¯å£)</span><br><span class="line">-q: æ‰“å°ç®€çŸ­çš„ä¿¡æ¯</span><br><span class="line">-X: æ˜¾ç¤º16è¿›åˆ¶åŠASCIIç </span><br><span class="line">-i: éœ€è¦ç›‘å¬çš„ç½‘ç»œæ¥å£</span><br><span class="line">-w: å†™å‡ºå­˜å‚¨æ–‡ä»¶</span><br><span class="line">-r: è¯»å–å­˜å‚¨æ–‡ä»¶</span><br><span class="line">-c: ç›‘å¬æ•°é‡</span><br><span class="line">è¿‡æ»¤è§„åˆ™: å¯ä»¥ä½¿ç”¨ and å’Œ or è¿›è¡Œç»„åˆ</span><br><span class="line">    - &apos;host foo&apos;, &apos;host 127.0.0.1&apos; ï¼šç›‘å¬ç‰¹å®šçš„ä¸»æœº</span><br><span class="line">    - &apos;net 192.168&apos; ï¼šç›‘å¬ç‰¹å®šçš„ç½‘æ®µ</span><br><span class="line">    - &apos;src host 127.0.0.1&apos; &apos;dst net 192.168&apos;ï¼š ç›‘å¬ç‰¹å®šçš„æ¥æº(src)æˆ–ç›®çš„åœ°(dst)</span><br><span class="line">    - &apos;tcp port 21&apos;ï¼šç›‘å¬ç‰¹å®šçš„åè®®ï¼Œå¦‚ tcp, udp, arp, ether..</span><br></pre></td></tr></table></figure></li><li><p>15:23:53.248962: æ—¶:åˆ†:ç§’.æ¯«ç§’</p></li><li>IP: ä½¿ç”¨çš„åè®®</li><li>192.168.8.23.32842 &gt;: å‘èµ·ç«¯</li><li>106.37.75.114.80: æ¥æ”¶ç«¯</li><li>Flags [.]: ä¼ è¾“æ ‡è¯†<ul><li>[.P]: æ¨é€<code>PUSH</code></li></ul></li><li>ack 1334: ack å·</li><li>seq 858:897: ä¼ è¾“èµ„æ–™ 858~897 byte</li></ul><h3 id="iptables"><a href="#iptables" class="headerlink" title="iptables"></a>iptables</h3><blockquote><p>è®¿é—®æ§åˆ¶</p></blockquote><h3 id="tc"><a href="#tc" class="headerlink" title="tc"></a>tc</h3><blockquote><p>æµé‡æ§åˆ¶  </p></blockquote><h3 id="mtr"><a href="#mtr" class="headerlink" title="mtr"></a>mtr</h3><blockquote><p>æ˜¾ç¤ºç½‘ç»œè·¯å¾„çš„çŠ¶å†µ</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Linux ä¸‹ç½‘ç»œç›¸å…³çš„å‘½ä»¤&lt;br&gt;
    
    </summary>
    
      <category term="Linux" scheme="https://hocg.in/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://hocg.in/tags/Linux/"/>
    
      <category term="TCP/IP" scheme="https://hocg.in/tags/TCP-IP/"/>
    
  </entry>
  
  <entry>
    <title>Elasticsearch éšæ‰‹è®°</title>
    <link href="https://hocg.in/2019/03/23/Elasticsearch%20%E9%9A%8F%E6%89%8B%E8%AE%B0/"/>
    <id>https://hocg.in/2019/03/23/Elasticsearch éšæ‰‹è®°/</id>
    <published>2019-03-23T05:53:00.000Z</published>
    <updated>2019-03-23T07:33:38.002Z</updated>
    
    <content type="html"><![CDATA[<p>Elasticsearch éšæ‰‹è®° ğŸ˜‹<br><a id="more"></a></p><h2 id="ElasticSearch-å¯¹æ¯”-MySQL"><a href="#ElasticSearch-å¯¹æ¯”-MySQL" class="headerlink" title="ElasticSearch å¯¹æ¯” MySQL"></a>ElasticSearch å¯¹æ¯” MySQL</h2><ul><li>Index -&gt; Database</li><li>Type -&gt; Table</li><li>Document -&gt; Row</li></ul><hr><h2 id="ç´¢å¼•æ¨¡ç‰ˆæ•°æ®ç±»å‹"><a href="#ç´¢å¼•æ¨¡ç‰ˆæ•°æ®ç±»å‹" class="headerlink" title="ç´¢å¼•æ¨¡ç‰ˆæ•°æ®ç±»å‹"></a>ç´¢å¼•æ¨¡ç‰ˆæ•°æ®ç±»å‹</h2><ul><li>å­—ç¬¦ä¸²ç±»å‹ <del>string</del>,text,keyword </li><li>æ•´æ•°ç±»å‹ integer,long,short,byte </li><li>æµ®ç‚¹ç±»å‹ double,float,half_float,scaled_float </li><li>é€»è¾‘ç±»å‹ boolean </li><li>æ—¥æœŸç±»å‹ date </li><li>èŒƒå›´ç±»å‹ range </li><li>äºŒè¿›åˆ¶ç±»å‹ binary </li><li>å¤åˆç±»å‹ æ•°ç»„ç±»å‹ array </li><li>å¯¹è±¡ç±»å‹ object </li><li>åµŒå¥—ç±»å‹ nested </li><li>åœ°ç†ç±»å‹ åœ°ç†åæ ‡ç±»å‹ geo_point </li><li>åœ°ç†åœ°å›¾ geo_shape </li><li>ç‰¹æ®Šç±»å‹ IPç±»å‹ ip </li><li>èŒƒå›´ç±»å‹ completion </li><li>ä»¤ç‰Œè®¡æ•°ç±»å‹ token_count </li><li>é™„ä»¶ç±»å‹ attachment </li><li>æŠ½å–ç±»å‹ percolator </li></ul><hr><h2 id="API-æ¥å£"><a href="#API-æ¥å£" class="headerlink" title="API æ¥å£"></a>API æ¥å£</h2><blockquote><p>pretty æ ¼å¼åŒ–<br>explain=true åˆ†æ</p><ul><li>é€šé…ç¬¦</li></ul></blockquote><h3 id="ç›‘æ§æ“ä½œ"><a href="#ç›‘æ§æ“ä½œ" class="headerlink" title="ç›‘æ§æ“ä½œ"></a>ç›‘æ§æ“ä½œ</h3><ul><li>ç›‘æ§<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># æŸ¥è¯¢æ‰€æœ‰ç›‘æ§æŒ‡ä»¤</span><br><span class="line">curl --user elastic:changeme -XGET http://127.0.0.1:9200/_cat</span><br></pre></td></tr></table></figure></li></ul><h3 id="èŠ‚ç‚¹æ“ä½œ"><a href="#èŠ‚ç‚¹æ“ä½œ" class="headerlink" title="èŠ‚ç‚¹æ“ä½œ"></a>èŠ‚ç‚¹æ“ä½œ</h3><ul><li><p>æŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># æŸ¥çœ‹è®¾ç½®</span><br><span class="line">curl --user elastic:changeme -XGET http://127.0.0.1:9200/_cluster/settings?pretty</span><br></pre></td></tr></table></figure></li><li><p>å®æ—¶æ›´æ”¹é…ç½®</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># æ°¸ä¹…ç”Ÿæ•ˆ</span><br><span class="line">curl --user elastic:changeme -XPUT http://127.0.0.1:9200/_cluster/settings -H "Content-type: application/json" -d '&#123;</span><br><span class="line">    "persistent": &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;'</span><br><span class="line"># æš‚æ—¶ç”Ÿæ•ˆ</span><br><span class="line">curl --user elastic:changeme -XPUT http://127.0.0.1:9200/_cluster/settings -H "Content-type: application/json" -d '&#123;</span><br><span class="line">    "transient": &#123;&#125;</span><br><span class="line">&#125;'</span><br></pre></td></tr></table></figure></li></ul><h3 id="æ•°æ®æ“ä½œ"><a href="#æ•°æ®æ“ä½œ" class="headerlink" title="æ•°æ®æ“ä½œ"></a>æ•°æ®æ“ä½œ</h3><ul><li><p>åˆ›å»ºç´¢å¼•æ¨¡ç‰ˆ</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">curl --user elastic:changeme -XPUT http://127.0.0.1:9200/db_test2 -H "Content-type: application/json" -d '&#123;</span><br><span class="line">    "settings":&#123;</span><br><span class="line">        # èŠ‚ç‚¹æ•°é‡</span><br><span class="line">        "number_of_replicas": 0,</span><br><span class="line">        # åˆ†ç‰‡æ•°é‡</span><br><span class="line">        # "number_of_shards": 5,</span><br><span class="line">        # ç´¢å¼•å­˜å‚¨ç±»å‹</span><br><span class="line">        # "index.store.type": "niofs",</span><br><span class="line">        # é»˜è®¤æ£€ç´¢å­—æ®µ</span><br><span class="line">        # "index.query.default_field": "title"</span><br><span class="line">        # "index.unassigned.node_left.delayed_timeout": "5m"</span><br><span class="line">    &#125;,</span><br><span class="line">    "mappings": &#123;</span><br><span class="line">        "example": &#123;</span><br><span class="line">            # åŠ¨æ€å˜æ›´</span><br><span class="line">            "dynamic": false,</span><br><span class="line">            # 5.x ä»¥ä¸ŠåºŸé™¤</span><br><span class="line">            "_all": &#123;</span><br><span class="line">                "enabled": false</span><br><span class="line">            &#125;,</span><br><span class="line">            "properties": &#123;</span><br><span class="line">                "example_id": &#123;</span><br><span class="line">                    "type": "long"</span><br><span class="line">                &#125;,</span><br><span class="line">                "name": &#123;</span><br><span class="line">                    "type": "text",</span><br><span class="line">                    # æŒ‡å®šåˆ†è¯å™¨</span><br><span class="line">                    "analyzer": "ik_max_word",</span><br><span class="line">                    "search_analyzer": "ik_max_word"</span><br><span class="line">                &#125;,</span><br><span class="line">                "text": &#123;</span><br><span class="line">                    "type": "keyword"</span><br><span class="line">                &#125;,</span><br><span class="line">                "title": &#123;</span><br><span class="line">                    "type": "text",</span><br><span class="line">                    "index": true</span><br><span class="line">                &#125;,</span><br><span class="line">                "createdAt": &#123;</span><br><span class="line">                    "type": "date",</span><br><span class="line">                    "format": "strict_date_optional_time||epoch_millis"</span><br><span class="line">                &#125;,</span><br><span class="line">                "age": &#123;</span><br><span class="line">                    "type": "integer"</span><br><span class="line">                &#125;,</span><br><span class="line">                "location": &#123;</span><br><span class="line">                    # es ä¸­å­˜å‚¨ç»“æ„ä¸º: &#123;lon: 0.000, lat: 0.000&#125;</span><br><span class="line">                    "type": "geo_point"</span><br><span class="line">                &#125;,</span><br><span class="line">                "suggest": &#123;</span><br><span class="line">                    "type": "completion"</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;'</span><br></pre></td></tr></table></figure></li><li><p>åˆ é™¤ç´¢å¼•æ¨¡ç‰ˆ</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl --user elastic:changeme -XDELETE http://127.0.0.1:9200/db_test</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥è¯¢ç´¢å¼•æ¨¡ç‰ˆ</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl --user elastic:changeme -XGET http://127.0.0.1:9200/db_test\?pretty</span><br></pre></td></tr></table></figure></li><li><p>æ’å…¥æ•°æ®</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl --user elastic:changeme -XPOST http://127.0.0.1:9200/db_test/example -H "Content-type: application/json" -d '&#123;</span><br><span class="line">    "example_id": 666</span><br><span class="line">&#125;'</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥è¯¢æ•°æ®</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># æŸ¥è¯¢æ‰€æœ‰</span><br><span class="line">curl --user elastic:changeme -XPOST http://127.0.0.1:9200/db_test/example/_search?pretty</span><br><span class="line"># æŒ‰æ¡ä»¶æŸ¥è¯¢</span><br><span class="line">curl --user elastic:changeme -XPOST http://127.0.0.1:9200/db_test/example/_search?pretty&amp;explain=true -H "Content-type: application/json" -d '&#123;</span><br><span class="line">    "query": &#123;</span><br><span class="line">        "match": &#123;</span><br><span class="line">            "example_id": 666</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;'</span><br><span class="line"></span><br><span class="line"># æŸ¥è¯¢æŒ‡å®š</span><br><span class="line">curl --user elastic:changeme -XGET http://127.0.0.1:9200/db_test/example/PiAmoGkBJAdUJ3wD4CMC?pretty=true</span><br></pre></td></tr></table></figure></li></ul><h3 id="åˆ†ææ“ä½œ"><a href="#åˆ†ææ“ä½œ" class="headerlink" title="åˆ†ææ“ä½œ"></a>åˆ†ææ“ä½œ</h3><ul><li>åˆ†è¯å™¨æ¥å£<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># ä½¿ç”¨é»˜è®¤åˆ†è¯å™¨</span><br><span class="line">curl --user elastic:changeme -XPOST http://127.0.0.1:9200/_analyze?pretty -H 'Content-Type:application/json' -d'&#123; </span><br><span class="line">    "text": "Hello World" </span><br><span class="line">&#125;'</span><br><span class="line"># ä½¿ç”¨æŒ‡å®šåˆ†è¯å™¨</span><br><span class="line">curl --user elastic:changeme -XPOST http://127.0.0.1:9200/_analyze?pretty -H 'Content-Type:application/json' -d'&#123;</span><br><span class="line">    "analyzer": "ik_max_word",</span><br><span class="line">    "text": "Hello World" </span><br><span class="line">&#125;'</span><br></pre></td></tr></table></figure></li></ul><hr><h2 id="Java-è°ƒç”¨"><a href="#Java-è°ƒç”¨" class="headerlink" title="Java è°ƒç”¨"></a>Java è°ƒç”¨</h2><ul><li><p>åˆ›å»ºç´¢å¼•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">createOrUpdateIndex</span><span class="params">(Long id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (house == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ExampleIndexTemplate template = <span class="comment">// .. é€šè¿‡æ„å»ºå¾—å‡º</span></span><br><span class="line"></span><br><span class="line">        SearchRequestBuilder requestBuilder = <span class="keyword">this</span>.esClient.prepareSearch(INDEX_NAME)</span><br><span class="line">                .setTypes(INDEX_TYPE)</span><br><span class="line">                .setQuery(QueryBuilders.termQuery(<span class="string">"example_id"</span>, id));</span><br><span class="line"></span><br><span class="line">        logger.debug(requestBuilder.toString());</span><br><span class="line">        SearchResponse searchResponse = requestBuilder.get();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">boolean</span> success;</span><br><span class="line">        <span class="keyword">long</span> totalHit = searchResponse.getHits().getTotalHits();</span><br><span class="line">        <span class="keyword">if</span> (totalHit == <span class="number">0</span>) &#123;</span><br><span class="line">            success = create(template);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (totalHit == <span class="number">1</span>) &#123;</span><br><span class="line">            String esId = searchResponse.getHits().getAt(<span class="number">0</span>).getId();</span><br><span class="line">            success = update(id, template);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            success = deleteAndCreate(totalHit, template);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// --</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">create</span><span class="params">(ExampleIndexTemplate indexTemplate)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            IndexResponse response = <span class="keyword">this</span>.esClient.prepareIndex(INDEX_NAME, INDEX_TYPE)</span><br><span class="line">                    .setSource(objectMapper.writeValueAsBytes(indexTemplate), XContentType.JSON).get();</span><br><span class="line">            <span class="keyword">if</span> (response.status() == RestStatus.CREATED) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (JsonProcessingException e) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">update</span><span class="params">(Long id, ExampleIndexTemplate indexTemplate)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            UpdateResponse response = <span class="keyword">this</span>.esClient.prepareUpdate(INDEX_NAME, INDEX_TYPE, id).setDoc(objectMapper.writeValueAsBytes(indexTemplate), XContentType.JSON).get();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (response.status() == RestStatus.OK) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (JsonProcessingException e) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">deleteAndCreate</span><span class="params">(<span class="keyword">long</span> totalHit, ExampleIndexTemplate indexTemplate)</span> </span>&#123;</span><br><span class="line">        DeleteByQueryRequestBuilder builder = DeleteByQueryAction.INSTANCE</span><br><span class="line">                .newRequestBuilder(esClient)</span><br><span class="line">                .filter(QueryBuilders.termQuery(<span class="string">"example_id"</span>, indexTemplate.getId()))</span><br><span class="line">                .source(INDEX_NAME);</span><br><span class="line"></span><br><span class="line">        BulkByScrollResponse response = builder.get();</span><br><span class="line">        <span class="keyword">long</span> deleted = response.getDeleted();</span><br><span class="line">        <span class="keyword">if</span> (deleted != totalHit) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> create(indexTemplate);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li><li><p>ç§»é™¤ç´¢å¼•æ¨¡ç‰ˆ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(Long id)</span> </span>&#123;</span><br><span class="line">    DeleteByQueryRequestBuilder builder = DeleteByQueryAction.INSTANCE</span><br><span class="line">            .newRequestBuilder(esClient)</span><br><span class="line">            .filter(QueryBuilders.termQuery(<span class="string">"example_id"</span>, id))</span><br><span class="line">            .source(INDEX_NAME);</span><br><span class="line">    BulkByScrollResponse response = builder.get();</span><br><span class="line">    <span class="keyword">long</span> deleted = response.getDeleted();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç®€å•æœç´¢</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// é€šè¿‡æœç´¢æŸ¥è¯¢å‡ºidï¼Œ ç„¶åäº mysql ä¹‹ç±»æ•°æ®åº“è¿›è¡Œèšåˆ</span></span><br><span class="line"><span class="function">List&lt;Serializable&gt; <span class="title">search</span><span class="params">(SearchBody body)</span></span>&#123;</span><br><span class="line">        BoolQueryBuilder boolQuery = QueryBuilders.boolQuery();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ»¡è¶³filterå­å¥çš„æ¡ä»¶ã€‚ä½†æ˜¯ä¸ä¼šåƒMustä¸€æ ·ï¼Œå‚ä¸è®¡ç®—åˆ†å€¼</span></span><br><span class="line">        boolQuery.filter(</span><br><span class="line">            <span class="comment">// QueryBuilders.termQuery</span></span><br><span class="line">            <span class="comment">// QueryBuilders.rangeQuery</span></span><br><span class="line">            <span class="comment">//..</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line"><span class="comment">//        æé«˜æƒé‡, å¦‚æœéœ€è¦çš„è¯</span></span><br><span class="line"><span class="comment">//        boolQuery.must(</span></span><br><span class="line"><span class="comment">//                QueryBuilders.matchQuery("title", body.getKeywords())</span></span><br><span class="line"><span class="comment">//                        .boost(2.0f)</span></span><br><span class="line"><span class="comment">//        );</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// [å¿…é¡»æ»¡è¶³çš„æ„æ€] æ»¡è¶³mustå­å¥çš„æ¡ä»¶ï¼Œå¹¶ä¸”å‚ä¸è®¡ç®—åˆ†å€¼</span></span><br><span class="line">        boolQuery.must(</span><br><span class="line">            <span class="comment">// QueryBuilders.multiMatchQuery  å…³é”®è¯åŒ¹é…å¤šä¸ªå­—æ®µ</span></span><br><span class="line">            <span class="comment">//..</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ»¡è¶³shouldå­å¥çš„æ¡ä»¶ã€‚åœ¨ä¸€ä¸ªBoolæŸ¥è¯¢ä¸­ï¼Œå¦‚æœæ²¡æœ‰mustæˆ–è€…filterï¼Œæœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªshouldå­å¥ï¼Œé‚£ä¹ˆåªè¦æ»¡è¶³ä¸€ä¸ªå°±å¯ä»¥è¿”å›</span></span><br><span class="line">        boolQuery.should(</span><br><span class="line">            <span class="comment">//..</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä¸æ»¡è¶³must_notå®šä¹‰çš„æ¡ä»¶</span></span><br><span class="line">        boolQuery.should(</span><br><span class="line">            <span class="comment">//..</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        SearchRequestBuilder requestBuilder = <span class="keyword">this</span>.esClient.prepareSearch(INDEX_NAME)</span><br><span class="line">                .setTypes(INDEX_TYPE)</span><br><span class="line">                <span class="comment">// æŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line">                .setQuery(boolQuery)</span><br><span class="line">                <span class="comment">// æ’åº</span></span><br><span class="line">                .addSort(</span><br><span class="line">                        <span class="string">"createdAt"</span>, <span class="string">"DESC"</span></span><br><span class="line">                )</span><br><span class="line">                <span class="comment">// å¼€å§‹ä½ç½®</span></span><br><span class="line">                .setFrom(<span class="number">0</span>)</span><br><span class="line">                .setSize(<span class="number">100</span>)</span><br><span class="line">                <span class="comment">// è®¾ç½®è¯¥å­—æ®µå¯ä»¥æœ‰æ•ˆå‡å°‘è¿”å›æ•°æ®é‡</span></span><br><span class="line">                .setFetchSource(<span class="string">"id"</span>, <span class="keyword">null</span>);</span><br><span class="line">        SearchResponse response = requestBuilder.get();</span><br><span class="line"></span><br><span class="line">        List&lt;Long&gt; ids = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (SearchHit hit : response.getHits()) &#123;</span><br><span class="line">            System.out.println(hit.getSource());</span><br><span class="line">            ids.add(Longs.tryParse(String.valueOf(hit.getSource().get(<span class="string">"example_id"</span>))));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ids;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è‡ªåŠ¨è¡¥å…¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŒ¹é…</span></span><br><span class="line"><span class="function">Collection&lt;String&gt; <span class="title">suggest</span><span class="params">(String prefix)</span></span>&#123;</span><br><span class="line">    CompletionSuggestionBuilder suggestion = SuggestBuilders.completionSuggestion(<span class="string">"suggest"</span>).prefix(prefix).size(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">        SuggestBuilder suggestBuilder = <span class="keyword">new</span> SuggestBuilder();</span><br><span class="line">        suggestBuilder.addSuggestion(<span class="string">"autocomplete"</span>, suggestion);</span><br><span class="line"></span><br><span class="line">        SearchRequestBuilder requestBuilder = <span class="keyword">this</span>.esClient.prepareSearch(INDEX_NAME)</span><br><span class="line">                .setTypes(INDEX_TYPE)</span><br><span class="line">                .suggest(suggestBuilder);</span><br><span class="line"></span><br><span class="line">        SearchResponse response = requestBuilder.get();</span><br><span class="line">        Suggest suggest = response.getSuggest();</span><br><span class="line">        <span class="keyword">if</span> (suggest == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> ServiceResult.of(<span class="keyword">new</span> ArrayList&lt;&gt;());</span><br><span class="line">        &#125;</span><br><span class="line">        Suggest.Suggestion result = suggest.getSuggestion(<span class="string">"autocomplete"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> maxSuggest = <span class="number">0</span>;</span><br><span class="line">        Set&lt;String&gt; suggestSet = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Object term : result.getEntries()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (term <span class="keyword">instanceof</span> CompletionSuggestion.Entry) &#123;</span><br><span class="line">                CompletionSuggestion.Entry item = (CompletionSuggestion.Entry) term;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (item.getOptions().isEmpty()) &#123;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">for</span> (CompletionSuggestion.Entry.Option option : item.getOptions()) &#123;</span><br><span class="line">                    String tip = option.getText().string();</span><br><span class="line">                    <span class="keyword">if</span> (suggestSet.contains(tip)) &#123;</span><br><span class="line">                        <span class="keyword">continue</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    suggestSet.add(tip);</span><br><span class="line">                    maxSuggest++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (maxSuggest &gt; <span class="number">5</span>) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> suggestSet;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®æƒé‡</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">updateSuggest</span><span class="params">(ExampleIndexTemplate indexTemplate)</span> </span>&#123;</span><br><span class="line">    AnalyzeRequestBuilder requestBuilder = <span class="keyword">new</span> AnalyzeRequestBuilder(</span><br><span class="line">            <span class="keyword">this</span>.esClient, AnalyzeAction.INSTANCE, INDEX_NAME, </span><br><span class="line">            <span class="comment">// ä¼šè¢«æœç´¢çš„å­—æ®µçš„å€¼..</span></span><br><span class="line">            );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½¿ç”¨çš„åˆ†è¯å™¨</span></span><br><span class="line">    requestBuilder.setAnalyzer(<span class="string">"ik_smart"</span>);</span><br><span class="line"></span><br><span class="line">    AnalyzeResponse response = requestBuilder.get();</span><br><span class="line">    List&lt;AnalyzeResponse.AnalyzeToken&gt; tokens = response.getTokens();</span><br><span class="line">    <span class="keyword">if</span> (tokens == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    List&lt;HouseSuggest&gt; suggests = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (AnalyzeResponse.AnalyzeToken token : tokens) &#123;</span><br><span class="line">        <span class="comment">// ç”Ÿæ•ˆé™åˆ¶</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="string">"&lt;NUM&gt;"</span>.equals(token.getType()) || token.getTerm().length() &lt; <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ExampleSuggest suggest = <span class="comment">// ..</span></span><br><span class="line">        suggests.add(suggest);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…¶ä»–å½±å“å› ç´ </span></span><br><span class="line">    ExampleSuggest suggest = <span class="comment">// ..</span></span><br><span class="line">    suggests.add(suggest);</span><br><span class="line"></span><br><span class="line">    indexTemplate.setSuggest(suggests);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>èšåˆç»Ÿè®¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">long</span> <span class="title">aggregateNumber</span><span class="params">(String c1, String c2, String c3)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        BoolQueryBuilder boolQuery = QueryBuilders.boolQuery()</span><br><span class="line">                .filter(QueryBuilders.termQuery(</span><br><span class="line">                    <span class="comment">// èšåˆæ¡ä»¶</span></span><br><span class="line">                ))</span><br><span class="line">                .filter(QueryBuilders.termQuery(</span><br><span class="line">                    <span class="comment">// èšåˆæ¡ä»¶</span></span><br><span class="line">                ))</span><br><span class="line">                .filter(QueryBuilders.termQuery(</span><br><span class="line">                    <span class="string">"field_name"</span>,</span><br><span class="line">                    c1</span><br><span class="line">                ));</span><br><span class="line"></span><br><span class="line">        SearchRequestBuilder requestBuilder = <span class="keyword">this</span>.esClient.prepareSearch(INDEX_NAME)</span><br><span class="line">                .setTypes(INDEX_TYPE)</span><br><span class="line">                .setQuery(boolQuery)</span><br><span class="line">                .addAggregation(</span><br><span class="line">                        AggregationBuilders.terms(<span class="string">"agg_number"</span>)</span><br><span class="line">                        .field(<span class="string">"field_name"</span>)</span><br><span class="line">                ).setSize(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        logger.debug(requestBuilder.toString());</span><br><span class="line"></span><br><span class="line">        SearchResponse response = requestBuilder.get();</span><br><span class="line">        <span class="keyword">if</span> (response.status() == RestStatus.OK) &#123;</span><br><span class="line">            Terms terms = response.getAggregations().get(<span class="string">"agg_number"</span>);</span><br><span class="line">            <span class="keyword">if</span> (terms.getBuckets() != <span class="keyword">null</span> &amp;&amp; !terms.getBuckets().isEmpty()) &#123;</span><br><span class="line">                <span class="keyword">return</span> terms.getBucketByKey(c1).getDocCount();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0L</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0L</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä½ç½®èŒƒå›´æŸ¥è¯¢</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Collection&lt;Long&gt; <span class="title">mapQuery</span><span class="params">(SearchBody body)</span> </span>&#123;</span><br><span class="line">    BoolQueryBuilder boolQuery = QueryBuilders.boolQuery();</span><br><span class="line">    boolQuery.filter(QueryBuilders.termQuery(</span><br><span class="line">        <span class="comment">// ..</span></span><br><span class="line">    ));</span><br><span class="line"></span><br><span class="line">    boolQuery.filter(</span><br><span class="line">        QueryBuilders.geoBoundingBoxQuery(<span class="string">"location"</span>)</span><br><span class="line">            .setCorners(</span><br><span class="line">                    <span class="comment">// å·¦ä¸Šè§’</span></span><br><span class="line">                    <span class="keyword">new</span> GeoPoint(body.getLeftLatitude(), body.getLeftLongitude()),</span><br><span class="line">                    <span class="comment">// å³ä¸‹è§’</span></span><br><span class="line">                    <span class="keyword">new</span> GeoPoint(body.getRightLatitude(), body.getRightLongitude())</span><br><span class="line">            ));</span><br><span class="line"></span><br><span class="line">    SearchRequestBuilder builder = <span class="keyword">this</span>.esClient.prepareSearch(INDEX_NAME)</span><br><span class="line">            .setTypes(INDEX_TYPE)</span><br><span class="line">            .setQuery(boolQuery)</span><br><span class="line">            .addSort(</span><br><span class="line">                <span class="comment">// ..</span></span><br><span class="line">            )</span><br><span class="line">            .setFrom(<span class="number">0</span>)</span><br><span class="line">            .setSize(<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">    List&lt;Long&gt; ids = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    SearchResponse response = builder.get();</span><br><span class="line">    <span class="keyword">if</span> (RestStatus.OK != response.status()) &#123;</span><br><span class="line">        <span class="keyword">return</span> ids;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (SearchHit hit : response.getHits()) &#123;</span><br><span class="line">        ids.add(hit.getSource().get(<span class="string">"example_id"</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ids;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><hr><h2 id="JSONæ ¼å¼æŸ¥è¯¢è¯­æ³•"><a href="#JSONæ ¼å¼æŸ¥è¯¢è¯­æ³•" class="headerlink" title="JSONæ ¼å¼æŸ¥è¯¢è¯­æ³•"></a>JSONæ ¼å¼æŸ¥è¯¢è¯­æ³•</h2><p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl.html" target="_blank" rel="external">å®˜æ–¹æ–‡æ¡£</a></p><h3 id="æ¦‚è¦"><a href="#æ¦‚è¦" class="headerlink" title="æ¦‚è¦"></a>æ¦‚è¦</h3><blockquote><ul><li>must<code>å‚ä¸è®¡ç®—åˆ†å€¼</code> -&gt; and</li><li>filter<code>ä¸å‚ä¸è®¡ç®—åˆ†å€¼</code> -&gt; and</li><li>should -&gt; or</li><li>must_not -&gt; not<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">// å¸ƒå°”æŸ¥è¯¢</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"query"</span>: &#123; </span><br><span class="line">    <span class="attr">"bool"</span>: &#123; </span><br><span class="line">      // The clause (query) must appear in matching documents and will contribute to the score.</span><br><span class="line">      // æ‰€æœ‰"must"æ¡ä»¶å¿…é¡»åŒ¹é…æˆåŠŸ, ä¸”è®¡ç®—åˆ†æ•°</span><br><span class="line">      "must": [</span><br><span class="line">        &#123; "match": &#123; "title":   "Search"        &#125;&#125;, </span><br><span class="line">        &#123; <span class="attr">"match"</span>: &#123; <span class="attr">"content"</span>: <span class="string">"Elasticsearch"</span> &#125;&#125;  </span><br><span class="line">      ],</span><br><span class="line">      // The clause (query) must appear in matching documents. However unlike must the score of the query will be ignored. Filter clauses are executed in filter context, meaning that scoring is ignored and clauses are considered for caching.</span><br><span class="line">      // æ‰€æœ‰"filter"æ¡ä»¶å¿…é¡»åŒ¹é…æˆåŠŸ, ä¸è®¡ç®—åˆ†æ•°(å› æ­¤æŸ¥è¯¢é€Ÿåº¦è¾ƒå¿«)</span><br><span class="line">      "filter": [ </span><br><span class="line">        &#123; "term":  &#123; "status": "published" &#125;&#125;, </span><br><span class="line">        &#123; <span class="attr">"range"</span>: &#123; <span class="attr">"publish_date"</span>: &#123; <span class="attr">"gte"</span>: <span class="string">"2015-01-01"</span> &#125;&#125;&#125; </span><br><span class="line">      ],</span><br><span class="line">      // The clause (query) should appear in the matching document. If the bool query is in a query context and has a must or filter clause then a document will match the bool query even if none of the should queries match. In this case these clauses are only used to influence the score. If the bool query is a filter context or has neither must or filter then at least one of the should queries must match a document for it to match the bool query. This behavior may be explicitly controlled by settings the minimum_should_match parameter.</span><br><span class="line">      // æƒ…å†µä¸€(åµŒå¥—bool): å½“"should"æ¡ä»¶åœ¨"must"æ¡ä»¶æˆ–è€…"filter"æ¡ä»¶å†…, æ­¤æ—¶ä¸è¦æ±‚æ»¡è¶³"should"æ¡ä»¶, ä½†æ˜¯ä¼šå½±å“åˆ°æŸ¥è¯¢åˆ†æ•°</span><br><span class="line">      // æƒ…å†µäºŒ(å•æ¡bool): å½“"should"æ¡ä»¶ä¸åœ¨"must"æ¡ä»¶æˆ–è€…"filter"æ¡ä»¶å†…, é»˜è®¤æƒ…å†µè‡³å°‘æœ‰ä¸€ä¸ª"should"å­å¥éœ€è¦æ»¡è¶³(å¯é€šè¿‡é…ç½®`minimum_should_match`å‚æ•°è¿›è¡Œå˜æ›´)</span><br><span class="line">      "should": [</span><br><span class="line">        &#123; <span class="attr">"range"</span>: &#123;<span class="attr">"age"</span> : &#123; <span class="attr">"gte"</span> : <span class="number">10</span>, <span class="attr">"lte"</span> : <span class="number">20</span> &#125;&#125;&#125;</span><br><span class="line">      ],</span><br><span class="line">      "minimum_should_match": 1,</span><br><span class="line">      // The clause (query) must not appear in the matching documents. Clauses are executed in filter context meaning that scoring is ignored and clauses are considered for caching. Because scoring is ignored, a score of 0 for all documents is returned.</span><br><span class="line">      // æ‰€æœ‰"must_not"æ¡ä»¶ä¸èƒ½åŒ¹é…æˆåŠŸ</span><br><span class="line">      "must_not": [</span><br><span class="line">        &#123; "term": &#123; "tag" : "wow" &#125;&#125;,</span><br><span class="line">        &#123; <span class="attr">"term"</span>: &#123; <span class="attr">"tag"</span> : <span class="string">"elasticsearch"</span> &#125;&#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></blockquote><h3 id="å…¨æ–‡æœç´¢"><a href="#å…¨æ–‡æœç´¢" class="headerlink" title="å…¨æ–‡æœç´¢"></a>å…¨æ–‡æœç´¢</h3><blockquote><p>ä¼šèµ°åˆ†æå™¨</p><ul><li>match<br>æè¿°: åŒ¹é…æŸ¥è¯¢, åªéœ€åŒ…å«éƒ¨åˆ†ã€‚eg: hello world, åªåŒ¹é…â€helloâ€æˆ–è€…â€worldâ€<br>å¯æ¥å—ç±»å‹: text/numerics/dates<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">GET /_search</span><br><span class="line">// ç®€å•æŸ¥è¯¢</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"match"</span> : &#123;</span><br><span class="line">            <span class="attr">"message"</span> : <span class="string">"this is a test"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">// å¤æ‚æŸ¥è¯¢</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"match"</span> : &#123;</span><br><span class="line">            <span class="attr">"message"</span> : &#123;</span><br><span class="line">                <span class="attr">"query"</span>: <span class="string">"this is a test"</span>,</span><br><span class="line">                <span class="attr">"å‚æ•°"</span>: <span class="string">"å€¼"</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></blockquote><ul><li><p>match_phrase</p><blockquote><p>æè¿°: åŒ¹é…è¯ç»„æŸ¥è¯¢, å¤šä¸ªè¯ä¸€èµ·è¢«æŸ¥è¯¢. eg: hello world, åŒ¹é…â€hello worldâ€</p></blockquote></li><li><p>match_phrase_prefix</p><blockquote><p>æè¿°: åŒ<code>match_phrase</code>ä½†æ˜¯æœ€åä¸€ä¸ªè¯ä¼šè¢«å½“ä½œå‰ç¼€å»åŒ¹é…. eg: hello wo, å¯åŒ¹é…åˆ°â€hello worldâ€</p></blockquote></li><li><p>multi_match</p><blockquote><p>æè¿°: åŒ<code>match</code>ä½†æ˜¯å¯ä»¥ä½œç”¨åœ¨å¤šä¸ªå­—æ®µä¸Šï¼Œä¸”å­—æ®µæ”¯æŒè¡¨è¾¾å¼</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">GET /_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"query"</span>: &#123;</span><br><span class="line">    <span class="attr">"multi_match"</span> : &#123;</span><br><span class="line">      <span class="attr">"query"</span>:    <span class="string">"this is a test"</span>, </span><br><span class="line">      <span class="attr">"fields"</span>: [ <span class="string">"subject"</span>, <span class="string">"*_name"</span> ],</span><br><span class="line">      <span class="attr">"å‚æ•°"</span>: <span class="string">"å€¼"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></blockquote></li><li><p>common</p><blockquote><p>æè¿°: æ ¹æ®è¯é¢‘è¿›è¡ŒåŒ¹é….</p></blockquote></li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">GET /_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"common"</span>: &#123;</span><br><span class="line">            <span class="attr">"body"</span>: &#123;</span><br><span class="line">                <span class="attr">"query"</span>: <span class="string">"this is bonsai cool"</span>,</span><br><span class="line">                // è¯é¢‘ç‡: [0, 1]</span><br><span class="line">                "cutoff_frequency": 0.001</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>query_string<blockquote><p>æè¿°: æ ¹æ®è¡¨è¾¾å¼è¿›è¡ŒåŒ¹é…, è¾“å…¥çš„å€¼ä¸ºè¡¨è¾¾å¼, æ”¯æŒä¸€äº›å†…ç½®å‚æ•°å’Œè¯­æ³•ã€‚</p></blockquote></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GET /_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"query_string"</span>: &#123;</span><br><span class="line">            <span class="attr">"query"</span>: <span class="string">"(content:this OR name:this) AND (content:that OR name:that)"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>simple_query_string<blockquote><p>æè¿°: ä¸<code>query_string</code>ç±»ä¼¼, æ”¯æŒä¸€äº›æ›´ç®€ä¾¿çš„ç¬¦å·ã€‚</p></blockquote></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">GET /_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"query"</span>: &#123;</span><br><span class="line">    <span class="attr">"simple_query_string"</span> : &#123;</span><br><span class="line">        <span class="attr">"query"</span>: <span class="string">"\"fried eggs\" +(eggplant | potato) -frittata"</span>,</span><br><span class="line">        <span class="attr">"fields"</span>: [<span class="string">"title^5"</span>, <span class="string">"body"</span>],</span><br><span class="line">        <span class="attr">"default_operator"</span>: <span class="string">"and"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ¡ä»¶æŸ¥è¯¢"><a href="#æ¡ä»¶æŸ¥è¯¢" class="headerlink" title="æ¡ä»¶æŸ¥è¯¢"></a>æ¡ä»¶æŸ¥è¯¢</h3><blockquote><p>ç²¾å‡†æœç´¢<br>ä¸€èˆ¬ç”¨äºç»“æ„åŒ–æ•°æ®è€Œéå…¨æ–‡åŒ¹é…: numbers, dates, and enums</p></blockquote><ul><li><p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-term-query.html" target="_blank" rel="external">term</a></p><blockquote><p>æè¿°: åŒ¹é…å•ä¸ªå€¼, ç±»ä¼¼â€=â€, ä½†æ˜¯å…¶å…·å¤‡<code>Elasticsearch</code>çš„ç‰¹æ€§å¦‚: åˆ†æ•°</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">// ç®€å•</span><br><span class="line">POST _search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"query"</span>: &#123;</span><br><span class="line">    <span class="attr">"term"</span> : &#123; <span class="attr">"user"</span> : <span class="string">"Kimchy"</span> &#125; </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">// å¤æ‚ï¼Œè®¾å®šåŒ¹é…åˆ†æ•°ä¹‹ç±»çš„</span><br><span class="line">GET _search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"query"</span>: &#123;</span><br><span class="line">    <span class="attr">"bool"</span>: &#123;</span><br><span class="line">      <span class="attr">"should"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">"term"</span>: &#123;</span><br><span class="line">            <span class="attr">"status"</span>: &#123;</span><br><span class="line">              <span class="attr">"value"</span>: <span class="string">"urgent"</span>,</span><br><span class="line">              <span class="attr">"boost"</span>: <span class="number">2.0</span> </span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">"term"</span>: &#123;</span><br><span class="line">            <span class="attr">"status"</span>: <span class="string">"normal"</span> </span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></blockquote></li><li><p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-terms-query.html" target="_blank" rel="external">terms</a></p><blockquote><p>æè¿°: åŒ¹é…å¤šä¸ªå€¼, ç±»ä¼¼â€inâ€</p></blockquote></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// ç®€å•</span><br><span class="line">GET /_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"terms"</span> : &#123; <span class="attr">"user"</span> : [<span class="string">"kimchy"</span>, <span class="string">"elasticsearch"</span>]&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-terms-set-query.html" target="_blank" rel="external">terms_set</a><blockquote><p>æè¿°: å®šåˆ¶åŒ–åŒ¹é…è§„åˆ™</p></blockquote></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">GET /my-index/_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"terms_set"</span>: &#123;</span><br><span class="line">            <span class="attr">"codes"</span> : &#123;</span><br><span class="line">                <span class="attr">"terms"</span> : [<span class="string">"abc"</span>, <span class="string">"def"</span>, <span class="string">"ghi"</span>],</span><br><span class="line">                <span class="attr">"minimum_should_match_field"</span>: <span class="string">"required_matches"</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-range-query.html" target="_blank" rel="external">range</a><blockquote><p>æè¿°: èŒƒå›´åŒ¹é…, æ”¯æŒ: stringï¼Œdateï¼Œnumeric</p></blockquote></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">GET _search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"range"</span> : &#123;</span><br><span class="line">            <span class="attr">"age"</span> : &#123;</span><br><span class="line">                <span class="attr">"gte"</span> : <span class="number">10</span>,</span><br><span class="line">                <span class="attr">"lte"</span> : <span class="number">20</span>,</span><br><span class="line">                <span class="attr">"boost"</span> : <span class="number">2.0</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-exists-query.html" target="_blank" rel="external">exists</a><blockquote><p>æè¿°: å­˜åœ¨æŸ¥è¯¢, å¿…é¡»è‡³å°‘å­˜åœ¨ä¸€ä¸ªé<code>null</code>å€¼. eg: user: [null, â€˜hocginâ€™]</p></blockquote></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">GET /_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"exists"</span> : &#123; <span class="attr">"field"</span> : <span class="string">"user"</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-prefix-query.html" target="_blank" rel="external">prefix</a><blockquote><p>æè¿°: å‰ç¼€åŒ¹é….</p></blockquote></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">GET /_search</span><br><span class="line">&#123; <span class="attr">"query"</span>: &#123;</span><br><span class="line">    <span class="attr">"prefix"</span> : &#123; <span class="attr">"user"</span> : <span class="string">"ki"</span> &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-wildcard-query.html" target="_blank" rel="external">wildcard</a></p><blockquote><p>æè¿°: é€šé…ç¬¦åŒ¹é…ã€‚ç±»ä¼¼<code>like</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">GET /_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"wildcard"</span> : &#123; <span class="attr">"user"</span> : <span class="string">"ki*y"</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></blockquote></li><li><p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-regexp-query.html" target="_blank" rel="external">regexp</a></p><blockquote><p>æè¿°: æ­£åˆ™åŒ¹é…ï¼Œå…è®¸ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ã€‚<br>âš ï¸: æ€§èƒ½å–å†³äºæ­£åˆ™è¡¨è¾¾å¼å†™æ³•ï¼Œå»ºè®®ç”¨<code>é¥¥é¥¿æ¨¡å¼</code></p></blockquote></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GET /_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"regexp"</span>:&#123;</span><br><span class="line">            <span class="attr">"name.first"</span>: <span class="string">"s.*y?"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-fuzzy-query.html" target="_blank" rel="external">fuzzy</a><blockquote><p>æè¿°: æ¨¡ç³ŠæŸ¥è¯¢. é€‚ç”¨äºæ‹¼å†™é”™è¯¯æ—¶æœç´¢ã€‚</p></blockquote></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">GET /_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">       <span class="attr">"fuzzy"</span> : &#123; <span class="attr">"user"</span> : <span class="string">"ki"</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-type-query.html" target="_blank" rel="external">type</a><blockquote><p>æè¿°: æ–‡æ¡£ç±»å‹æŸ¥è¯¢</p></blockquote></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GET /_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"type"</span> : &#123;</span><br><span class="line">            <span class="attr">"value"</span> : <span class="string">"_doc"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-ids-query.html" target="_blank" rel="external">ids</a><blockquote><p>æè¿°: æ ¹æ®<code>id</code>å­—æ®µè¿‡æ»¤æ–‡æ¡£æ•°æ®</p></blockquote></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">GET /_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"ids"</span> : &#123;</span><br><span class="line">            <span class="attr">"type"</span> : <span class="string">"_doc"</span>,</span><br><span class="line">            <span class="attr">"values"</span> : [<span class="string">"1"</span>, <span class="string">"4"</span>, <span class="string">"100"</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¤åˆæŸ¥è¯¢"><a href="#å¤åˆæŸ¥è¯¢" class="headerlink" title="å¤åˆæŸ¥è¯¢"></a>å¤åˆæŸ¥è¯¢</h3><ul><li><p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-constant-score-query.html#query-dsl-constant-score-query" target="_blank" rel="external">constant_score</a></p><blockquote><p>æè¿°: å¿½ç•¥è¯„åˆ†æŸ¥è¯¢, æŸ¥è¯¢é€Ÿåº¦æ›´å¿«(ä½¿ç”¨ç¼“å­˜)ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">GET /_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"constant_score"</span> : &#123;</span><br><span class="line">            <span class="attr">"filter"</span> : &#123;</span><br><span class="line">                <span class="attr">"term"</span> : &#123; <span class="attr">"user"</span> : <span class="string">"kimchy"</span>&#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">"boost"</span> : <span class="number">1.2</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></blockquote></li><li><p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-bool-query.html" target="_blank" rel="external">Bool æŸ¥è¯¢</a></p><blockquote><p>æè¿°: ä½¿ç”¨å…¶ä»–æŸ¥è¯¢çš„boolå€¼ç»„åˆçš„æŸ¥è¯¢ã€‚è¯¦ç»†å‚è€ƒ<code>æ¦‚è¦</code></p></blockquote></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">POST _search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"query"</span>: &#123;</span><br><span class="line">    <span class="attr">"bool"</span> : &#123;</span><br><span class="line">      <span class="attr">"must"</span> : &#123;</span><br><span class="line">        <span class="attr">"term"</span> : &#123; <span class="attr">"user"</span> : <span class="string">"kimchy"</span> &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">"filter"</span>: &#123;</span><br><span class="line">        <span class="attr">"term"</span> : &#123; <span class="attr">"tag"</span> : <span class="string">"tech"</span> &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">"must_not"</span> : &#123;</span><br><span class="line">        <span class="attr">"range"</span> : &#123;</span><br><span class="line">          <span class="attr">"age"</span> : &#123; <span class="attr">"gte"</span> : <span class="number">10</span>, <span class="attr">"lte"</span> : <span class="number">20</span> &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">"should"</span> : [</span><br><span class="line">        &#123; <span class="attr">"term"</span> : &#123; <span class="attr">"tag"</span> : <span class="string">"wow"</span> &#125; &#125;,</span><br><span class="line">        &#123; <span class="attr">"term"</span> : &#123; <span class="attr">"tag"</span> : <span class="string">"elasticsearch"</span> &#125; &#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">"minimum_should_match"</span> : <span class="number">1</span>,</span><br><span class="line">      <span class="attr">"boost"</span> : <span class="number">1.0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-dis-max-query.html" target="_blank" rel="external">Dis Max Query</a><blockquote><p>æè¿°: å–å¤šä¸ªæ¡ä»¶æŸ¥è¯¢ç»“æœä¸­ï¼Œå¾—åˆ†æœ€é«˜çš„æŸ¥è¯¢ç»“æœã€‚å¯ä»¥é€šè¿‡: <code>tie_breaker</code> æ¥å…³è”å…¶ä»–æŸ¥è¯¢ç»“æœçš„åˆ†æ•°ã€‚</p></blockquote></li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">GET /_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"dis_max"</span> : &#123;</span><br><span class="line">            // æ­¤å¤„ç›¸å½“äºé™¤æœ€ä½³åŒ¹é…å¤–ï¼Œå…¶ä»–åŒ¹é…ç»“æœçš„å‚ä¸ç¨‹åº¦.   --- è¨€å¤–ä¹‹æ„, å¤šæ–¹é¢è€ƒè™‘</span><br><span class="line">            "tie_breaker" : 0.7,</span><br><span class="line">            "boost" : 1.2,</span><br><span class="line">            "queries" : [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">"term"</span> : &#123; <span class="attr">"age"</span> : <span class="number">34</span> &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">"term"</span> : &#123; <span class="attr">"age"</span> : <span class="number">35</span> &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-function-score-query.html" target="_blank" rel="external">Function Score Query</a></p><blockquote><p>æè¿°: æ‰“åˆ†å™¨. æœ€åæ‰“åˆ†é˜¶æ®µï¼Œå¼•å…¥ä¸€äº›æœ€ä½³å€¼çš„è®¡ç®—æ–¹å¼.         â€” è¨€å¤–ä¹‹æ„ï¼Œä½œå¼Šå™¨</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">GET /_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"function_score"</span>: &#123;</span><br><span class="line">            <span class="attr">"query"</span>: &#123; <span class="attr">"match_all"</span>: &#123;&#125; &#125;,</span><br><span class="line">            <span class="attr">"boost"</span>: <span class="string">"5"</span>,</span><br><span class="line">            <span class="attr">"random_score"</span>: &#123;&#125;, </span><br><span class="line">            <span class="attr">"boost_mode"</span>:<span class="string">"multiply"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></blockquote></li><li><p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-boosting-query.html" target="_blank" rel="external">Boosting Query</a></p><blockquote><p>æè¿°: è®¾ç½®æ¡ä»¶çš„æƒé‡.</p></blockquote></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">GET /_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"boosting"</span> : &#123;</span><br><span class="line">            <span class="attr">"positive"</span> : &#123;</span><br><span class="line">                <span class="attr">"term"</span> : &#123;</span><br><span class="line">                    <span class="attr">"field1"</span> : <span class="string">"value1"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">"negative"</span> : &#123;</span><br><span class="line">                 <span class="attr">"term"</span> : &#123;</span><br><span class="line">                     <span class="attr">"field2"</span> : <span class="string">"value2"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">"negative_boost"</span> : <span class="number">0.2</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è¿æ¥æŸ¥è¯¢"><a href="#è¿æ¥æŸ¥è¯¢" class="headerlink" title="è¿æ¥æŸ¥è¯¢"></a>è¿æ¥æŸ¥è¯¢</h3><ul><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-nested-query.html#query-dsl-nested-query" target="_blank" rel="external">Nested Query</a><blockquote><p>æè¿°</p></blockquote></li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">GET /_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"nested"</span> : &#123;</span><br><span class="line">            // åµŒå¥—å¯¹è±¡è·¯å¾„</span><br><span class="line">            "path" : "obj1",</span><br><span class="line">            // å½±å“çš„è®¡åˆ†æ–¹å¼</span><br><span class="line">            "score_mode" : "avg",</span><br><span class="line">            "query" : &#123;</span><br><span class="line">                "bool" : &#123;</span><br><span class="line">                    "must" : [</span><br><span class="line">                        // âš ï¸: å­—æ®µå¿…é¡»æ˜¯å®Œæ•´è·¯å¾„</span><br><span class="line">                    &#123; "match" : &#123;"obj1.name" : "blue"&#125; &#125;,</span><br><span class="line">                    &#123; <span class="attr">"range"</span> : &#123;<span class="attr">"obj1.count"</span> : &#123;<span class="attr">"gt"</span> : <span class="number">5</span>&#125;&#125; &#125;</span><br><span class="line">                    ]</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><ul><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-has-child-query.html" target="_blank" rel="external">Has Child Query</a><blockquote><p>æè¿°: è¿›è¡Œå­æ–‡æ¡£æŸ¥è¯¢, è¿”å›çˆ¶æ–‡æ¡£. æ…¢æŸ¥è¯¢ï¼Œæ…ç”¨</p></blockquote></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">GET /_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"has_child"</span> : &#123;</span><br><span class="line">            <span class="attr">"type"</span> : <span class="string">"blog_tag"</span>,</span><br><span class="line">            <span class="attr">"score_mode"</span> : <span class="string">"min"</span>,</span><br><span class="line">            <span class="attr">"query"</span> : &#123;</span><br><span class="line">                <span class="attr">"term"</span> : &#123;</span><br><span class="line">                    <span class="attr">"tag"</span> : <span class="string">"something"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><ul><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-has-parent-query.html" target="_blank" rel="external">Has Parent Query</a><blockquote><p>æè¿°: çˆ¶æ–‡æ¡£æŸ¥è¯¢ï¼Œè¿”å›å­æ–‡æ¡£. </p></blockquote></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">GET /_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"has_parent"</span> : &#123;</span><br><span class="line">            <span class="attr">"parent_type"</span> : <span class="string">"blog"</span>,</span><br><span class="line">            <span class="attr">"query"</span> : &#123;</span><br><span class="line">                <span class="attr">"term"</span> : &#123;</span><br><span class="line">                    <span class="attr">"tag"</span> : <span class="string">"something"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><ul><li><a href="">Parent Id Query</a><blockquote><p>æè¿°: çˆ¶IDæŸ¥è¯¢ï¼Œè¿”å›å­æ–‡æ¡£</p></blockquote></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">GET /my_index/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"query"</span>: &#123;</span><br><span class="line">    <span class="attr">"parent_id"</span>: &#123;</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"my_child"</span>,</span><br><span class="line">      <span class="attr">"id"</span>: <span class="string">"1"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="åœ°ç†ä½ç½®æŸ¥è¯¢"><a href="#åœ°ç†ä½ç½®æŸ¥è¯¢" class="headerlink" title="åœ°ç†ä½ç½®æŸ¥è¯¢"></a>åœ°ç†ä½ç½®æŸ¥è¯¢</h3><blockquote><p>éœ€è¦<code>geo_shape</code>ç±»å‹</p><ul><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-geo-shape-query.html" target="_blank" rel="external">GeoShape Query</a><br>æè¿°: GeoShape æŸ¥è¯¢ï¼ŒæŸ¥è¯¢åœ¨å¤šè¾¹å½¢(åŸºäºGeoJSON)å†…çš„ç‚¹ã€‚æ—¢: ç”¨ä¸€ä¸ªå¤šè¾¹å½¢å»æœç´¢ã€‚</li></ul></blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">GET /example/_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>:&#123;</span><br><span class="line">        <span class="attr">"bool"</span>: &#123;</span><br><span class="line">            <span class="attr">"must"</span>: &#123;</span><br><span class="line">                <span class="attr">"match_all"</span>: &#123;&#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">"filter"</span>: &#123;</span><br><span class="line">                <span class="attr">"geo_shape"</span>: &#123;</span><br><span class="line">                    <span class="attr">"location"</span>: &#123;</span><br><span class="line">                        <span class="attr">"shape"</span>: &#123;</span><br><span class="line">                            <span class="attr">"type"</span>: <span class="string">"envelope"</span>,</span><br><span class="line">                            <span class="attr">"coordinates"</span> : [[<span class="number">13.0</span>, <span class="number">53.0</span>], [<span class="number">14.0</span>, <span class="number">52.0</span>]]</span><br><span class="line">                        &#125;,</span><br><span class="line">                        <span class="attr">"relation"</span>: <span class="string">"within"</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><ul><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-geo-bounding-box-query.html#query-dsl-geo-bounding-box-query" target="_blank" rel="external">Geo Bounding Box Query</a><blockquote><p>æè¿°: åœ°ç†è¾¹ç•Œæ¡†æŸ¥è¯¢ï¼Œå³ç”¨ä¸€ä¸ªè¾¹ç•ŒèŒƒå›´å»æœç´¢ã€‚</p></blockquote></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">GET /_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"bool"</span> : &#123;</span><br><span class="line">            <span class="attr">"must"</span> : &#123;</span><br><span class="line">                <span class="attr">"match_all"</span> : &#123;&#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">"filter"</span> : &#123;</span><br><span class="line">                <span class="attr">"geo_bounding_box"</span> : &#123;</span><br><span class="line">                    <span class="attr">"pin.location"</span> : &#123;</span><br><span class="line">                        <span class="attr">"top_left"</span> : &#123;</span><br><span class="line">                            <span class="attr">"lat"</span> : <span class="number">40.73</span>,</span><br><span class="line">                            <span class="attr">"lon"</span> : <span class="number">-74.1</span></span><br><span class="line">                        &#125;,</span><br><span class="line">                        <span class="attr">"bottom_right"</span> : &#123;</span><br><span class="line">                            <span class="attr">"lat"</span> : <span class="number">40.01</span>,</span><br><span class="line">                            <span class="attr">"lon"</span> : <span class="number">-71.12</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><ul><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-geo-distance-query.html" target="_blank" rel="external">Geo Distance Query</a><blockquote><p>æè¿°: åœ°ç†è·ç¦»æŸ¥è¯¢</p></blockquote></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">GET /my_locations/_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"bool"</span> : &#123;</span><br><span class="line">            <span class="attr">"must"</span> : &#123;</span><br><span class="line">                <span class="attr">"match_all"</span> : &#123;&#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">"filter"</span> : &#123;</span><br><span class="line">                <span class="attr">"geo_distance"</span> : &#123;</span><br><span class="line">                    <span class="attr">"distance"</span> : <span class="string">"200km"</span>,</span><br><span class="line">                    <span class="attr">"pin.location"</span> : &#123;</span><br><span class="line">                        <span class="attr">"lat"</span> : <span class="number">40</span>,</span><br><span class="line">                        <span class="attr">"lon"</span> : <span class="number">-70</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><ul><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-geo-polygon-query.html" target="_blank" rel="external">Geo Polygon Query</a><blockquote><p>æè¿°: åœ°ç†å¤šè¾¹å½¢æŸ¥è¯¢, è¿”å›å›´æ å†…çš„æ•°æ®</p></blockquote></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">GET /_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"bool"</span> : &#123;</span><br><span class="line">            <span class="attr">"must"</span> : &#123;</span><br><span class="line">                <span class="attr">"match_all"</span> : &#123;&#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">"filter"</span> : &#123;</span><br><span class="line">                <span class="attr">"geo_polygon"</span> : &#123;</span><br><span class="line">                    <span class="attr">"person.location"</span> : &#123;</span><br><span class="line">                        <span class="attr">"points"</span> : [</span><br><span class="line">                            &#123;<span class="attr">"lat"</span> : <span class="number">40</span>, <span class="attr">"lon"</span> : <span class="number">-70</span>&#125;,</span><br><span class="line">                            &#123;<span class="attr">"lat"</span> : <span class="number">30</span>, <span class="attr">"lon"</span> : <span class="number">-80</span>&#125;,</span><br><span class="line">                            &#123;<span class="attr">"lat"</span> : <span class="number">20</span>, <span class="attr">"lon"</span> : <span class="number">-90</span>&#125;</span><br><span class="line">                        ]</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="å®šåˆ¶åŒ–æŸ¥è¯¢"><a href="#å®šåˆ¶åŒ–æŸ¥è¯¢" class="headerlink" title="å®šåˆ¶åŒ–æŸ¥è¯¢"></a>å®šåˆ¶åŒ–æŸ¥è¯¢</h3><ul><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-mlt-query.html" target="_blank" rel="external">More Like This Query</a><blockquote><p>æè¿°: æ ¹æ®å­—æ®µè¿›è¡ŒåŒ¹é…æ–‡å­—çš„ç›¸è¯†åº¦ï¼Œä¸€èˆ¬ç”¨äºè¿›è¡Œæ–‡ç« æˆ–å†…å®¹çš„ç›¸è¯†åº¦æ¨è</p></blockquote></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">GET /_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"more_like_this"</span> : &#123;</span><br><span class="line">            <span class="attr">"fields"</span> : [<span class="string">"title"</span>, <span class="string">"description"</span>],</span><br><span class="line">            <span class="attr">"like"</span> : <span class="string">"Once upon a time"</span>,</span><br><span class="line">            <span class="attr">"min_term_freq"</span> : <span class="number">1</span>,</span><br><span class="line">            <span class="attr">"max_query_terms"</span> : <span class="number">12</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><ul><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-script-query.html" target="_blank" rel="external">Script Query</a><blockquote><p>æè¿°: è„šæœ¬æŸ¥è¯¢ï¼Œä½¿ç”¨ç‰¹å®šçš„è¯­æ³•è„šæœ¬è¿›è¡ŒæŸ¥è¯¢ã€‚</p></blockquote></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">GET /_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"bool"</span> : &#123;</span><br><span class="line">            <span class="attr">"filter"</span> : &#123;</span><br><span class="line">                <span class="attr">"script"</span> : &#123;</span><br><span class="line">                    <span class="attr">"script"</span> : &#123;</span><br><span class="line">                        <span class="attr">"source"</span>: <span class="string">"doc['num1'].value &gt; 1"</span>,</span><br><span class="line">                        <span class="attr">"lang"</span>: <span class="string">"painless"</span></span><br><span class="line">                     &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><ul><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-percolate-query.html" target="_blank" rel="external">Percolate Query</a><blockquote><p>æè¿°: PercolateæŸ¥è¯¢ï¼Œå¯ç”¨äºåŒ¹é…å­˜å‚¨åœ¨ç´¢å¼•ä¸­çš„æŸ¥è¯¢, </p></blockquote></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">GET /my-index/_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span> : &#123;</span><br><span class="line">        <span class="attr">"percolate"</span> : &#123;</span><br><span class="line">            <span class="attr">"field"</span> : <span class="string">"query"</span>,</span><br><span class="line">            <span class="attr">"document"</span> : &#123;</span><br><span class="line">                <span class="attr">"message"</span> : <span class="string">"A new bonsai tree in the office"</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><ul><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-wrapper-query.html" target="_blank" rel="external">Wrapper Query</a><blockquote><p>æè¿°: åŒ…è£…å™¨æŸ¥è¯¢, å°†æŸ¥è¯¢æ¡ä»¶å­—ç¬¦ä¸² base64 ç¼–ç </p></blockquote></li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">GET /_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span> : &#123;</span><br><span class="line">        <span class="attr">"wrapper"</span>: &#123;</span><br><span class="line">            // &#123;"term" : &#123; "user" : "Kimchy" &#125;&#125;</span><br><span class="line">            "query" : "eyJ0ZXJtIiA6IHsgInVzZXIiIDogIktpbWNoeSIgfX0=" </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="è·¨åº¦æŸ¥è¯¢"><a href="#è·¨åº¦æŸ¥è¯¢" class="headerlink" title="è·¨åº¦æŸ¥è¯¢"></a>è·¨åº¦æŸ¥è¯¢</h3><ul><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-span-term-query.html" target="_blank" rel="external">Span Term Query</a><blockquote><p>æè¿°: ç­‰ä»·äº<code>term</code></p></blockquote></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">GET /_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"span_term"</span> : &#123; <span class="attr">"user"</span> : <span class="string">"kimchy"</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><ul><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-span-multi-term-query.html" target="_blank" rel="external">Span Multi Term Query</a><blockquote><p>æè¿°: å¤šä¸ªè·¨åº¦æŸ¥è¯¢ç»„åˆ, å…è®¸ (wildcard, fuzzy, prefix, range or regexp query) ä¹‹ä¸€</p></blockquote></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">GET /_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"span_multi"</span>:&#123;</span><br><span class="line">            <span class="attr">"match"</span>:&#123;</span><br><span class="line">                <span class="attr">"prefix"</span> : &#123; <span class="attr">"user"</span> :  &#123; <span class="attr">"value"</span> : <span class="string">"ki"</span>, <span class="attr">"boost"</span> : <span class="number">1.08</span> &#125; &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><ul><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-span-first-query.html#query-dsl-span-first-query" target="_blank" rel="external">Span First Query</a><blockquote><p>æè¿°: è·¨åº¦ä¼˜å…ˆæŸ¥è¯¢ï¼Œ</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">GET /_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"span_first"</span> : &#123;</span><br><span class="line">            <span class="attr">"match"</span> : &#123;</span><br><span class="line">                <span class="attr">"span_term"</span> : &#123; <span class="attr">"user"</span> : <span class="string">"kimchy"</span> &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">"end"</span> : <span class="number">3</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></blockquote></li></ul><hr><ul><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-span-near-query.html" target="_blank" rel="external">Span Near Query</a><blockquote><p>æè¿°: æ¥å—å¤šä¸ªè·¨åº¦æŸ¥è¯¢ï¼Œå…¶åŒ¹é…å¿…é¡»åœ¨å½¼æ­¤çš„æŒ‡å®šè·ç¦»å†…ï¼Œå¹¶ä¸”å¯èƒ½ä»¥ç›¸åŒçš„é¡ºåºã€‚</p></blockquote></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">GET /_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"span_near"</span> : &#123;</span><br><span class="line">            <span class="attr">"clauses"</span> : [</span><br><span class="line">                &#123; <span class="attr">"span_term"</span> : &#123; <span class="attr">"field"</span> : <span class="string">"value1"</span> &#125; &#125;,</span><br><span class="line">                &#123; <span class="attr">"span_term"</span> : &#123; <span class="attr">"field"</span> : <span class="string">"value2"</span> &#125; &#125;,</span><br><span class="line">                &#123; <span class="attr">"span_term"</span> : &#123; <span class="attr">"field"</span> : <span class="string">"value3"</span> &#125; &#125;</span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">"slop"</span> : <span class="number">12</span>,</span><br><span class="line">            <span class="attr">"in_order"</span> : <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><ul><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-span-or-query.html" target="_blank" rel="external">Span Or Query</a><blockquote><p>æè¿°: ç»„åˆå¤šä¸ªè·¨åº¦æŸ¥è¯¢ - è¿”å›ä¸ä»»ä½•æŒ‡å®šæŸ¥è¯¢åŒ¹é…çš„æ–‡æ¡£ã€‚</p></blockquote></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">GET /_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"span_or"</span> : &#123;</span><br><span class="line">            <span class="attr">"clauses"</span> : [</span><br><span class="line">                &#123; <span class="attr">"span_term"</span> : &#123; <span class="attr">"field"</span> : <span class="string">"value1"</span> &#125; &#125;,</span><br><span class="line">                &#123; <span class="attr">"span_term"</span> : &#123; <span class="attr">"field"</span> : <span class="string">"value2"</span> &#125; &#125;,</span><br><span class="line">                &#123; <span class="attr">"span_term"</span> : &#123; <span class="attr">"field"</span> : <span class="string">"value3"</span> &#125; &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><ul><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-span-not-query.html" target="_blank" rel="external">Span Not Query</a><blockquote><p>æè¿°: åŒ…è£…å¦ä¸€ä¸ªspanæŸ¥è¯¢ï¼Œå¹¶æ’é™¤ä¸è¯¥æŸ¥è¯¢åŒ¹é…çš„ä»»ä½•æ–‡æ¡£ã€‚</p></blockquote></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">GET /_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"span_not"</span> : &#123;</span><br><span class="line">            <span class="attr">"include"</span> : &#123;</span><br><span class="line">                <span class="attr">"span_term"</span> : &#123; <span class="attr">"field1"</span> : <span class="string">"hoya"</span> &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">"exclude"</span> : &#123;</span><br><span class="line">                <span class="attr">"span_near"</span> : &#123;</span><br><span class="line">                    <span class="attr">"clauses"</span> : [</span><br><span class="line">                        &#123; <span class="attr">"span_term"</span> : &#123; <span class="attr">"field1"</span> : <span class="string">"la"</span> &#125; &#125;,</span><br><span class="line">                        &#123; <span class="attr">"span_term"</span> : &#123; <span class="attr">"field1"</span> : <span class="string">"hoya"</span> &#125; &#125;</span><br><span class="line">                    ],</span><br><span class="line">                    <span class="attr">"slop"</span> : <span class="number">0</span>,</span><br><span class="line">                    <span class="attr">"in_order"</span> : <span class="literal">true</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><ul><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-span-containing-query.html" target="_blank" rel="external">Span Containing Query</a><blockquote><p>æè¿°: æ¥å—è·¨åº¦æŸ¥è¯¢åˆ—è¡¨ï¼Œä½†ä»…è¿”å›ä¸ç¬¬äºŒä¸ªè·¨åº¦æŸ¥è¯¢åŒ¹é…çš„è·¨åº¦ã€‚</p></blockquote></li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">curl -X GET "localhost:9200/_search" -H 'Content-Type: application/json' -d'</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"span_containing"</span> : &#123;</span><br><span class="line">            <span class="attr">"little"</span> : &#123;</span><br><span class="line">                <span class="attr">"span_term"</span> : &#123; <span class="attr">"field1"</span> : <span class="string">"foo"</span> &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">"big"</span> : &#123;</span><br><span class="line">                <span class="attr">"span_near"</span> : &#123;</span><br><span class="line">                    <span class="attr">"clauses"</span> : [</span><br><span class="line">                        &#123; <span class="attr">"span_term"</span> : &#123; <span class="attr">"field1"</span> : <span class="string">"bar"</span> &#125; &#125;,</span><br><span class="line">                        &#123; <span class="attr">"span_term"</span> : &#123; <span class="attr">"field1"</span> : <span class="string">"baz"</span> &#125; &#125;</span><br><span class="line">                    ],</span><br><span class="line">                    <span class="attr">"slop"</span> : <span class="number">5</span>,</span><br><span class="line">                    <span class="attr">"in_order"</span> : <span class="literal">true</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">'</span><br></pre></td></tr></table></figure><hr><ul><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-span-within-query.html" target="_blank" rel="external">Span Within Query</a><blockquote><p>æè¿°: åªè¦å…¶è·¨åº¦è½åœ¨ç”±å…¶ä»–è·¨åº¦æŸ¥è¯¢åˆ—è¡¨è¿”å›çš„è·¨åº¦å†…ï¼Œå°±ä¼šè¿”å›å•è·¨åº¦æŸ¥è¯¢çš„ç»“æœã€‚</p></blockquote></li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">curl -X GET "localhost:9200/_search" -H 'Content-Type: application/json' -d'</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"span_within"</span> : &#123;</span><br><span class="line">            <span class="attr">"little"</span> : &#123;</span><br><span class="line">                <span class="attr">"span_term"</span> : &#123; <span class="attr">"field1"</span> : <span class="string">"foo"</span> &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">"big"</span> : &#123;</span><br><span class="line">                <span class="attr">"span_near"</span> : &#123;</span><br><span class="line">                    <span class="attr">"clauses"</span> : [</span><br><span class="line">                        &#123; <span class="attr">"span_term"</span> : &#123; <span class="attr">"field1"</span> : <span class="string">"bar"</span> &#125; &#125;,</span><br><span class="line">                        &#123; <span class="attr">"span_term"</span> : &#123; <span class="attr">"field1"</span> : <span class="string">"baz"</span> &#125; &#125;</span><br><span class="line">                    ],</span><br><span class="line">                    <span class="attr">"slop"</span> : <span class="number">5</span>,</span><br><span class="line">                    <span class="attr">"in_order"</span> : <span class="literal">true</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">'</span><br></pre></td></tr></table></figure><hr><ul><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-span-field-masking-query.html" target="_blank" rel="external">Span Field Masking Query</a><blockquote><p>æè¿°: å…è®¸æŸ¥è¯¢ä¸åŒçš„å­—æ®µspan-nearæˆ–span-orè·¨ä¸åŒå­—æ®µã€‚</p></blockquote></li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">curl -X GET "localhost:9200/_search" -H 'Content-Type: application/json' -d'</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"query"</span>: &#123;</span><br><span class="line">    <span class="attr">"span_near"</span>: &#123;</span><br><span class="line">      <span class="attr">"clauses"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">"span_term"</span>: &#123;</span><br><span class="line">            <span class="attr">"text"</span>: <span class="string">"quick brown"</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">"field_masking_span"</span>: &#123;</span><br><span class="line">            <span class="attr">"query"</span>: &#123;</span><br><span class="line">              <span class="attr">"span_term"</span>: &#123;</span><br><span class="line">                <span class="attr">"text.stems"</span>: <span class="string">"fox"</span></span><br><span class="line">              &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">"field"</span>: <span class="string">"text"</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">"slop"</span>: <span class="number">5</span>,</span><br><span class="line">      <span class="attr">"in_order"</span>: <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">'</span><br></pre></td></tr></table></figure><h2 id="æ’ä»¶"><a href="#æ’ä»¶" class="headerlink" title="æ’ä»¶"></a>æ’ä»¶</h2><blockquote><p>elasticsearch-plugin install {url}</p><ul><li><a href="https://github.com/medcl/elasticsearch-analysis-ik" target="_blank" rel="external">ä¸­æ–‡åˆ†è¯æ’ä»¶</a></li></ul></blockquote><hr><h2 id="æ–‡æ¡£"><a href="#æ–‡æ¡£" class="headerlink" title="æ–‡æ¡£"></a>æ–‡æ¡£</h2><p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html" target="_blank" rel="external">ElasticSearch å®˜æ–¹æ–‡æ¡£</a><br><a href="http://www.ruanyifeng.com/blog/2017/08/elasticsearch.html" target="_blank" rel="external">å…¨æ–‡æœç´¢å¼•æ“ Elasticsearch å…¥é—¨æ•™ç¨‹</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Elasticsearch éšæ‰‹è®° ğŸ˜‹&lt;br&gt;
    
    </summary>
    
      <category term="æœåŠ¡ç«¯" scheme="https://hocg.in/categories/%E6%9C%8D%E5%8A%A1%E7%AB%AF/"/>
    
    
      <category term="Elasticsearch" scheme="https://hocg.in/tags/Elasticsearch/"/>
    
  </entry>
  
  <entry>
    <title>K8s ä¸ kubeadm ä½¿ç”¨çš„ä¸€äº›è®°å½•</title>
    <link href="https://hocg.in/2019/03/08/k8s%E4%B8%8Ekubeadm%E4%BD%BF%E7%94%A8%E7%9A%84%E4%B8%80%E4%BA%9B%E8%AE%B0%E5%BD%95/"/>
    <id>https://hocg.in/2019/03/08/k8sä¸kubeadmä½¿ç”¨çš„ä¸€äº›è®°å½•/</id>
    <published>2019-03-08T01:13:00.000Z</published>
    <updated>2019-04-09T03:00:39.738Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ç¯‡æ˜¯äº†è§£ k8s è¿‡ç¨‹éšæ‰‹è®°å½•ä¸ä¹‹ç›¸å…³çš„ä¸€äº›æ¦‚å¿µ<br><a id="more"></a></p><h2 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h2><h3 id="åº•å±‚æŠ€æœ¯"><a href="#åº•å±‚æŠ€æœ¯" class="headerlink" title="åº•å±‚æŠ€æœ¯"></a>åº•å±‚æŠ€æœ¯</h3><ul><li>é™åˆ¶, Cgoups <code>ç”¨æ¥åˆ†é…èµ„æºçš„, å¦‚cpu,å†…å­˜</code> </li><li>éš”ç¦», NamespaceæŠ€æœ¯ <code>æœ‰ç‚¹ç±»ä¼¼å‘½åç©ºé—´çš„æ¦‚å¿µ, éš”ç¦»è¿›ç¨‹</code> å®¹å™¨æœ¬è´¨æ—¢ç‰¹æ®Šè¿›ç¨‹<ul><li>pid=1</li></ul></li><li>æ–‡ä»¶ç³»ç»Ÿ, pivot_root/chroot æ„å»ºæ–‡ä»¶ç³»ç»Ÿ</li><li>æ–‡ä»¶å±‚, Union File System</li></ul><h2 id="k8s"><a href="#k8s" class="headerlink" title="k8s"></a>k8s</h2><blockquote><p>å¤„ç†å®¹å™¨é—´çš„å…³ç³», æ—¢ç¼–æ’</p><ul><li>Master</li><li>Node</li></ul></blockquote><h3 id="ç»„ä»¶å’ŒèŒè´£"><a href="#ç»„ä»¶å’ŒèŒè´£" class="headerlink" title="ç»„ä»¶å’ŒèŒè´£"></a>ç»„ä»¶å’ŒèŒè´£</h3><ul><li>Master èŠ‚ç‚¹<ul><li>kube-apiserver è´Ÿè´£APIæœåŠ¡</li><li>etcd æŒä¹…åŒ–æ•°æ®</li><li>kubelet æ ¸å¿ƒ<ul><li>ä¸å®¹å™¨äº¤äº’(CRI)</li><li>ç®¡ç†å®¿ä¸»æœº(Device Plugin)</li><li>ç½‘ç»œé…ç½®(CNI)</li><li>æŒä¹…åŒ–å­˜å‚¨(CSI)</li></ul></li><li>kube-scheduler è´Ÿè´£è°ƒåº¦</li><li>kube-controller-manager è´Ÿè´£å®¹å™¨ç¼–æ’</li></ul></li><li>Worker èŠ‚ç‚¹</li></ul><h2 id="kubeadm"><a href="#kubeadm" class="headerlink" title="kubeadm"></a>kubeadm</h2><h3 id="å‡†å¤‡æºç¯å¢ƒ"><a href="#å‡†å¤‡æºç¯å¢ƒ" class="headerlink" title="å‡†å¤‡æºç¯å¢ƒ"></a>å‡†å¤‡æºç¯å¢ƒ</h3><blockquote><p>OS: Ubuntu 16.04 LTS</p></blockquote><ul><li>Master èŠ‚ç‚¹</li></ul><ol><li><p>å‡†å¤‡æºç¯å¢ƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add -</span><br><span class="line">cat &lt;&lt;EOF &gt; /etc/apt/sources.list.d/kubernetes.list</span><br><span class="line">deb http://apt.kubernetes.io/ kubernetes-xenial main</span><br><span class="line">EOF</span><br><span class="line">apt-get update</span><br><span class="line"><span class="meta">#</span> E: The method driver /usr/lib/apt/methods/https could not be found.</span><br><span class="line"><span class="meta">#</span> sudo apt-get install apt-transport-https</span><br><span class="line"></span><br><span class="line">apt-get install -y docker.io kubeadm</span><br></pre></td></tr></table></figure></li><li><p>å‡†å¤‡<code>kubeadm.yml</code>è„šæœ¬</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">kubeadm.k8s.io/v1alpha1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">MasterConfiguration</span></span><br><span class="line"><span class="attr">controllerManagerExtraArgs:</span></span><br><span class="line"><span class="attr">  horizontal-pod-autoscaler-use-rest-clients:</span> <span class="string">"true"</span></span><br><span class="line"><span class="attr">  horizontal-pod-autoscaler-sync-period:</span> <span class="string">"10s"</span></span><br><span class="line"><span class="attr">  node-monitor-grace-period:</span> <span class="string">"10s"</span></span><br><span class="line"><span class="attr">apiServerExtraArgs:</span></span><br><span class="line"><span class="attr">  runtime-config:</span> <span class="string">"api/all=true"</span></span><br><span class="line"><span class="attr">kubernetesVersion:</span> <span class="string">"stable-1.11"</span></span><br></pre></td></tr></table></figure></li><li><p>æ‰§è¡Œ kubeadm åˆå§‹åŒ–</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubeadm init config kubeadm.yml</span><br></pre></td></tr></table></figure></li><li><p>æ‰§è¡Œç»“æœ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> ...</span><br><span class="line">Your Kubernetes master has initialized successfully!</span><br><span class="line"></span><br><span class="line">To start using your cluster, you need to run the following as a regular user:</span><br><span class="line"></span><br><span class="line">  mkdir -p $HOME/.kube</span><br><span class="line">  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config</span><br><span class="line">  sudo chown $(id -u):$(id -g) $HOME/.kube/config</span><br><span class="line"></span><br><span class="line">You should now deploy a pod network to the cluster.</span><br><span class="line">Run "kubectl apply -f [podnetwork].yaml" with one of the options listed at:</span><br><span class="line">  https://kubernetes.io/docs/concepts/cluster-administration/addons/</span><br><span class="line"></span><br><span class="line">You can now join any number of machines by running the following on each node</span><br><span class="line">as root:</span><br><span class="line"></span><br><span class="line">  kubeadm join 10.140.0.2:6443 --token 9tf8vg.633b2jjzzsglp9n6 --discovery-token-ca-cert-hash sha256:7bc87892cf9715e1393da6c9aace18e13bc6eeeec2ed8bbf8f01d3bccc5b0c20</span><br></pre></td></tr></table></figure></li><li><p>éœ€è¦çš„é›†ç¾¤é…ç½®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p $HOME/.kube</span><br><span class="line">sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config</span><br><span class="line">sudo chown $(id -u):$(id -g) $HOME/.kube/config</span><br></pre></td></tr></table></figure></li><li><p>éƒ¨ç½²ç½‘ç»œæ’ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f https://git.io/weave-kube-1.6</span><br></pre></td></tr></table></figure></li></ol><ul><li>Cluster èŠ‚ç‚¹</li></ul><ol><li><p>åŒ [Master èŠ‚ç‚¹ 1. å‡†å¤‡æºç¯å¢ƒ]</p></li><li><p>å°† Cluster åŠ å…¥ Master ç®¡ç†</p><blockquote><p>æ‰§è¡Œ [Master èŠ‚ç‚¹ 4. æ‰§è¡Œç»“æœ ä¸­çš„ <code>kubeadm join ...</code>]<br>:é‡ç‚¹: æœ‰ä¸€ç§æƒ…å†µ, å½“<code>kubeadm init</code>ç”Ÿæˆçš„<code>token</code>è¿‡æœŸæ—¶, å¯ä½¿ç”¨<code>kubeadm token create</code>é‡æ–°ç”Ÿæˆ</p></blockquote></li></ol><h3 id="åŸºæœ¬æŒ‡ä»¤"><a href="#åŸºæœ¬æŒ‡ä»¤" class="headerlink" title="åŸºæœ¬æŒ‡ä»¤"></a>åŸºæœ¬æŒ‡ä»¤</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> æŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€</span><br><span class="line">kubectl get nodes</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> æŸ¥çœ‹èŠ‚ç‚¹å¯¹è±¡çš„è¯¦æƒ…</span><br><span class="line">kubectl describe node k8s-3</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> æŸ¥çœ‹è¯¥èŠ‚ç‚¹, kube-system ç³»ç»Ÿä¸Š pods çŠ¶æ€</span><br><span class="line">kubectl get pods -n kube-system</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> å®‰è£…æ’ä»¶, ä¾‹å¦‚: å®‰è£…ç½‘ç»œæ’ä»¶</span><br><span class="line">kubectl apply -f https://git.io/weave-kube-1.6</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> ç§»é™¤æ‰€æœ‰ Taint, "-" åŒ¹é… ":xx"</span><br><span class="line"><span class="meta">#</span> æ³¨æ„: å•æœº Master éœ€è¦ä½¿ç”¨</span><br><span class="line">kubectl taint nodes --all node-role.kubernetes.io/master-</span><br></pre></td></tr></table></figure><h3 id="æ’ä»¶"><a href="#æ’ä»¶" class="headerlink" title="æ’ä»¶"></a>æ’ä»¶</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> Dashboard, ä»ªè¡¨ç›˜, é¡¹ç›®åœ°å€: https://github.com/kubernetes/dashboard</span><br><span class="line">kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v1.10.1/src/deploy/recommended/kubernetes-dashboard.yaml</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> Rook, äº‘å­˜å‚¨, é¡¹ç›®åœ°å€: https://github.com/rook/rook</span><br><span class="line">kubectl apply -f https://raw.githubusercontent.com/rook/rook/master/cluster/examples/kubernetes/ceph/operator.yaml</span><br><span class="line"></span><br><span class="line">kubectl apply -f https://raw.githubusercontent.com/rook/rook/master/cluster/examples/kubernetes/ceph/cluster.yaml</span><br></pre></td></tr></table></figure><h3 id="é«˜å¯ç”¨é¡¹ç›®"><a href="#é«˜å¯ç”¨é¡¹ç›®" class="headerlink" title="é«˜å¯ç”¨é¡¹ç›®"></a>é«˜å¯ç”¨é¡¹ç›®</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> RocketMQ</span><br><span class="line">kubectl apply -f https://raw.githubusercontent.com/apache/rocketmq-externals/master/rocketmq-docker/4.4.0/kubernetes/deployment.yaml</span><br></pre></td></tr></table></figure><h2 id="ç¼–æ’æ–‡ä»¶"><a href="#ç¼–æ’æ–‡ä»¶" class="headerlink" title="ç¼–æ’æ–‡ä»¶"></a>ç¼–æ’æ–‡ä»¶</h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">extensions/v1beta1</span> <span class="comment"># å¿…é€‰ï¼Œç‰ˆæœ¬å·</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span> <span class="comment"># å¿…é€‰</span></span><br><span class="line"><span class="attr">metadata:</span> <span class="comment"># å…ƒæ•°æ®</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">rocketmq</span></span><br><span class="line"><span class="comment"># =========== æ§åˆ¶å™¨éƒ¨åˆ† ===========</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  replicas:</span> <span class="number">1</span> <span class="comment"># Pods æ•°é‡</span></span><br><span class="line"><span class="comment"># =========== Pods éƒ¨åˆ† ===========</span></span><br><span class="line"><span class="attr">  template:</span></span><br><span class="line"><span class="attr">    metadata:</span></span><br><span class="line"><span class="attr">     labels:</span></span><br><span class="line"><span class="attr">       app:</span> <span class="string">rocketmq</span></span><br><span class="line"><span class="attr">    spec:</span></span><br><span class="line"><span class="attr">      containers:</span></span><br><span class="line"><span class="attr">      - name:</span> <span class="string">broker</span></span><br><span class="line"><span class="attr">        image:</span> <span class="string">rocketmqinc/rocketmq:4.4.0</span></span><br><span class="line"><span class="attr">        command:</span> <span class="string">["sh","mqbroker",</span> <span class="string">"-n"</span><span class="string">,"localhost:9876"]</span></span><br><span class="line"><span class="attr">        imagePullPolicy:</span> <span class="string">IfNotPresent</span></span><br><span class="line"><span class="attr">        ports:</span></span><br><span class="line"><span class="attr">          - containerPort:</span> <span class="number">10909</span> <span class="comment"># å®¹å™¨ç«¯å£</span></span><br><span class="line">        <span class="comment">#   - hostPort: 10909 # ä¸»æœºç«¯å£</span></span><br><span class="line"><span class="attr">          - containerPort:</span> <span class="number">10911</span></span><br><span class="line"><span class="attr">        volumeMounts:</span></span><br><span class="line"><span class="attr">          - mountPath:</span> <span class="string">/root/logs</span></span><br><span class="line"><span class="attr">            name:</span> <span class="string">brokeroptlogs</span></span><br><span class="line"><span class="attr">          - mountPath:</span> <span class="string">/root/store</span></span><br><span class="line"><span class="attr">            name:</span> <span class="string">brokeroptstore</span></span><br><span class="line"><span class="attr">      - name:</span> <span class="string">namesrv</span></span><br><span class="line"><span class="attr">        image:</span> <span class="string">rocketmqinc/rocketmq:4.4.0</span></span><br><span class="line"><span class="attr">        command:</span> <span class="string">["sh","mqnamesrv"]</span></span><br><span class="line"><span class="attr">        imagePullPolicy:</span> <span class="string">IfNotPresent</span></span><br><span class="line"><span class="attr">        ports:</span></span><br><span class="line"><span class="attr">          - containerPort:</span> <span class="number">9876</span></span><br><span class="line"><span class="attr">        volumeMounts:</span></span><br><span class="line"><span class="attr">          - mountPath:</span> <span class="string">/root/logs</span></span><br><span class="line"><span class="attr">            name:</span> <span class="string">namesrvoptlogs</span></span><br><span class="line"><span class="attr">          - mountPath:</span> <span class="string">/root/store</span></span><br><span class="line"><span class="attr">            name:</span> <span class="string">namesrvoptstore</span></span><br><span class="line"><span class="attr">      volumes:</span></span><br><span class="line"><span class="attr">      - name:</span> <span class="string">brokeroptlogs</span></span><br><span class="line"><span class="attr">        hostPath:</span></span><br><span class="line"><span class="attr">          path:</span> <span class="string">/data/broker/logs</span></span><br><span class="line"><span class="attr">      - name:</span> <span class="string">brokeroptstore</span></span><br><span class="line"><span class="attr">        hostPath:</span></span><br><span class="line"><span class="attr">          path:</span> <span class="string">/data/broker/store</span></span><br><span class="line"><span class="attr">      - name:</span> <span class="string">namesrvoptlogs</span></span><br><span class="line"><span class="attr">        hostPath:</span></span><br><span class="line"><span class="attr">          path:</span> <span class="string">/data/namesrv/logs</span></span><br><span class="line"><span class="attr">      - name:</span> <span class="string">namesrvoptstore</span></span><br><span class="line"><span class="attr">        hostPath:</span></span><br><span class="line"><span class="attr">          path:</span> <span class="string">/data/namesrv/store</span></span><br></pre></td></tr></table></figure><h3 id="çŸ¥è¯†ç‚¹-serviceÂ·podsÂ·nodeÂ·clusterÂ·container"><a href="#çŸ¥è¯†ç‚¹-serviceÂ·podsÂ·nodeÂ·clusterÂ·container" class="headerlink" title="çŸ¥è¯†ç‚¹: serviceÂ·podsÂ·nodeÂ·clusterÂ·container"></a>çŸ¥è¯†ç‚¹: serviceÂ·podsÂ·nodeÂ·clusterÂ·container</h3><ul><li>Service: ä¸€ç»„ pods.</li></ul><h3 id="çŸ¥è¯†ç‚¹-nodePortÂ·portÂ·targetPortÂ·containerPort"><a href="#çŸ¥è¯†ç‚¹-nodePortÂ·portÂ·targetPortÂ·containerPort" class="headerlink" title="çŸ¥è¯†ç‚¹: nodePortÂ·portÂ·targetPortÂ·containerPort"></a>çŸ¥è¯†ç‚¹: nodePortÂ·portÂ·targetPortÂ·containerPort</h3><h4 id="serviceç›¸å…³"><a href="#serviceç›¸å…³" class="headerlink" title="serviceç›¸å…³"></a>serviceç›¸å…³</h4><ol><li>Service çš„ç±»å‹ä¸º ClusterIP</li></ol><ul><li><p>port: æš´éœ²åœ¨ Service(Cluster IP) ä¸Šçš„ç«¯å£, å³é›†ç¾¤ä¸­ä½¿ç”¨.</p><blockquote><p>service æš´éœ²åœ¨ cluster ip ä¸Šçš„ç«¯å£ï¼Œ<cluster ip="">:port æ˜¯æä¾›ç»™é›†ç¾¤å†…éƒ¨å®¢æˆ·è®¿é—® service çš„å…¥å£</cluster></p></blockquote></li><li><p>targetPort: æŒ‡å®š pod ä¸Šçš„ç«¯å£, ä¼šè¢«æ˜ å°„åˆ° port ä¸Š.</p><blockquote><p>targetPort æ˜¯ pod ä¸Šçš„ç«¯å£ï¼Œä» port å’Œ nodePort ä¸Šåˆ°æ¥çš„æ•°æ®æœ€ç»ˆç»è¿‡ kube-proxy æµå…¥åˆ°åç«¯ pod çš„ targetPort ä¸Šè¿›å…¥å®¹å™¨</p></blockquote></li></ul><ol><li>Service çš„ç±»å‹ä¸º NodePort</li></ol><ul><li>nodePort: ç”¨äºé›†ç¾¤å¤–éƒ¨è®¿é—®<blockquote><p>Cluster IP åªèƒ½é›†ç¾¤å†…éƒ¨è®¿é—®(æºä¸ç›®æ ‡éœ€è¦æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶: kube-proxyæ­£å¸¸è¿è¡Œï¼Œè·¨ä¸»æœºå®¹å™¨ç½‘ç»œé€šä¿¡æ­£å¸¸)ï¼ŒNodePort ä¼šåœ¨æ¯ä¸ª kubelet èŠ‚ç‚¹çš„å®¿ä¸»æœºå¼€å¯ä¸€ä¸ªç«¯å£ï¼Œç”¨äºåº”ç”¨é›†ç¾¤å¤–éƒ¨è®¿é—®ã€‚</p></blockquote></li></ul><h4 id="å®¹å™¨ç›¸å…³ç±»ä¼¼docker-p"><a href="#å®¹å™¨ç›¸å…³ç±»ä¼¼docker-p" class="headerlink" title="å®¹å™¨ç›¸å…³ç±»ä¼¼docker -p"></a>å®¹å™¨ç›¸å…³<code>ç±»ä¼¼docker -p</code></h4><ul><li>containerPort: å®¹å™¨éœ€è¦æš´éœ²çš„ç«¯å£</li><li>hostPort: å®¹å™¨æš´éœ²çš„ç«¯å£æ˜ å°„åˆ°çš„ä¸»æœºç«¯å£ï¼Œé»˜è®¤ä¸Containerç›¸åŒ</li></ul><hr><h3 id="éšç¬”"><a href="#éšç¬”" class="headerlink" title="éšç¬”"></a>éšç¬”</h3><ul><li>ç´§å¯†äº¤äº’å…³ç³», Pod å…±äº«ä¸€ç»„ Network Namespace, ä¸€ç»„æ•°æ®å·</li><li>Service åˆ†é… Pod å›ºå®šçš„è™šæ‹ŸIP</li><li>Pod æ´ç™–æœºåˆ¶, Taint/Toleration</li><li>kubeadm æ–¹æ¡ˆ, ä¸€é”®éƒ¨ç½², å¯é€šè¿‡é…ç½®å®ç°ç”Ÿäº§ç¯å¢ƒä½¿ç”¨(æœªåˆ°GAé˜¶æ®µ)</li><li>minikuke æ–¹æ¡ˆ, ä¸€é”®éƒ¨ç½², ä»…èƒ½ç”¨äºæœ¬åœ°å®éªŒ</li><li>kops æ–¹æ¡ˆ, å¯ç”¨äºéƒ¨ç½²ç”Ÿäº§ç¯å¢ƒ</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™ç¯‡æ˜¯äº†è§£ k8s è¿‡ç¨‹éšæ‰‹è®°å½•ä¸ä¹‹ç›¸å…³çš„ä¸€äº›æ¦‚å¿µ&lt;br&gt;
    
    </summary>
    
      <category term="K8s" scheme="https://hocg.in/categories/K8s/"/>
    
    
      <category term="K8s" scheme="https://hocg.in/tags/K8s/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•åšå•å…ƒæµ‹è¯•</title>
    <link href="https://hocg.in/2019/02/02/%E5%A6%82%E4%BD%95%E5%81%9A%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"/>
    <id>https://hocg.in/2019/02/02/å¦‚ä½•åšå•å…ƒæµ‹è¯•/</id>
    <published>2019-02-02T05:17:21.000Z</published>
    <updated>2019-04-09T03:18:06.278Z</updated>
    
    <content type="html"><![CDATA[<p>å¦‚ä½•åœ¨é¡¹ç›®ä¸­åšå¥½å•å…ƒæµ‹è¯•ï¼Œåœ¨æ­¤æ€»ç»“å’Œè®°å½•<br><a id="more"></a></p><h1 id="å•å…ƒæµ‹è¯•"><a href="#å•å…ƒæµ‹è¯•" class="headerlink" title="å•å…ƒæµ‹è¯•"></a>å•å…ƒæµ‹è¯•</h1><p><a href="https://github.com/hocgin/SpringBootUnitTesting" target="_blank" rel="external">æ —å­</a></p><h2 id="å„å±‚æµ‹è¯•æ–¹å¼"><a href="#å„å±‚æµ‹è¯•æ–¹å¼" class="headerlink" title="å„å±‚æµ‹è¯•æ–¹å¼"></a>å„å±‚æµ‹è¯•æ–¹å¼</h2><h3 id="Controller-å±‚"><a href="#Controller-å±‚" class="headerlink" title="Controller å±‚"></a>Controller å±‚</h3><ul><li>ä½¿ç”¨ Rest æ¨¡æ‹Ÿè¯·æ±‚</li><li>Mock ç›¸å…³ Service æ¥å£</li></ul><h3 id="Service-å±‚"><a href="#Service-å±‚" class="headerlink" title="Service å±‚"></a>Service å±‚</h3><ul><li>ä½¿ç”¨ Mockit Mock å‡½æ•°</li></ul><h3 id="Mapper-å±‚"><a href="#Mapper-å±‚" class="headerlink" title="Mapper å±‚"></a>Mapper å±‚</h3><h2 id="ä½¿ç”¨-Sql-åˆ¶é€ æ•°æ®"><a href="#ä½¿ç”¨-Sql-åˆ¶é€ æ•°æ®" class="headerlink" title="- ä½¿ç”¨ @Sql åˆ¶é€ æ•°æ®"></a>- ä½¿ç”¨ @Sql åˆ¶é€ æ•°æ®</h2><h2 id="é“¾æ¥"><a href="#é“¾æ¥" class="headerlink" title="é“¾æ¥"></a>é“¾æ¥</h2><ul><li><a href="https://github.com/hocgin/SpringBootUnitTesting" target="_blank" rel="external">å‚è€ƒç¤ºä¾‹</a></li><li><a href="https://blog.csdn.net/x5fnncxzq4/article/details/81437393" target="_blank" rel="external">å°è°ˆ Java å•å…ƒæµ‹è¯• - èŠ‹é“æºç  - CSDNåšå®¢</a></li><li><a href="https://github.com/ctripcorp/apollo" target="_blank" rel="external">Apolloï¼ˆé˜¿æ³¢ç½—ï¼‰</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¦‚ä½•åœ¨é¡¹ç›®ä¸­åšå¥½å•å…ƒæµ‹è¯•ï¼Œåœ¨æ­¤æ€»ç»“å’Œè®°å½•&lt;br&gt;
    
    </summary>
    
      <category term="Java" scheme="https://hocg.in/categories/Java/"/>
    
    
      <category term="Tips" scheme="https://hocg.in/tags/Tips/"/>
    
      <category term="Java" scheme="https://hocg.in/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>å…³äºé¡¹ç›®ç»“æ„åˆ’åˆ†</title>
    <link href="https://hocg.in/2019/01/12/%E5%85%B3%E4%BA%8E%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E5%88%92%E5%88%86/"/>
    <id>https://hocg.in/2019/01/12/å…³äºé¡¹ç›®ç»“æ„åˆ’åˆ†/</id>
    <published>2019-01-12T04:24:23.000Z</published>
    <updated>2019-04-09T03:14:36.640Z</updated>
    
    <content type="html"><![CDATA[<p>å…³äºé¡¹ç›®ç»“æ„åˆ’åˆ†çš„æ€è€ƒå’Œæ€»ç»“<br><a id="more"></a></p><h2 id="é¡¹ç›®åˆ†å±‚"><a href="#é¡¹ç›®åˆ†å±‚" class="headerlink" title="é¡¹ç›®åˆ†å±‚"></a>é¡¹ç›®åˆ†å±‚</h2><p><img src="http://cdn.hocgin.top/image.png" alt="image.png"></p><ul><li><strong>Controller</strong></li></ul><ol><li>å‚æ•°å¸¸è§„åˆæ³•æ€§æ ¡éªŒ</li><li>æ¯ä¸ªControllerå‡½æ•°å¯¹åº”ä¸€ä¸ªServiceå‡½æ•°</li></ol><ul><li><strong>Service</strong> ä¸šåŠ¡å±‚ï¼Œå¤ç”¨æ€§ä½</li></ul><ol><li>å‚æ•°ä¸šåŠ¡åˆæ³•æ€§æ ¡éªŒï¼Œä½¿ç”¨ throw å¤„ç†å¼‚å¸¸</li></ol><ul><li><strong>Manager</strong> å¯å¤ç”¨é€»è¾‘å±‚</li></ul><ol><li>ä¸»è¦æ˜¯Cacheã€MQã€å¤åˆManagerã€RCPã€HTTPç­‰æœåŠ¡</li></ol><ul><li><strong>Mapper</strong> æ•°æ®åº“è®¿é—®å±‚</li></ul><h2 id="1-åªå…è®¸è‡ªå·±çš„Serviceè®¿é—®ï¼Œå…¶ä»–Serviceè®¿é—®ä»…èƒ½é€šè¿‡å…¶Service"><a href="#1-åªå…è®¸è‡ªå·±çš„Serviceè®¿é—®ï¼Œå…¶ä»–Serviceè®¿é—®ä»…èƒ½é€šè¿‡å…¶Service" class="headerlink" title="1. åªå…è®¸è‡ªå·±çš„Serviceè®¿é—®ï¼Œå…¶ä»–Serviceè®¿é—®ä»…èƒ½é€šè¿‡å…¶Service"></a>1. åªå…è®¸è‡ªå·±çš„Serviceè®¿é—®ï¼Œå…¶ä»–Serviceè®¿é—®ä»…èƒ½é€šè¿‡å…¶Service</h2><h2 id="é¢†åŸŸæ¨¡å‹"><a href="#é¢†åŸŸæ¨¡å‹" class="headerlink" title="é¢†åŸŸæ¨¡å‹"></a>é¢†åŸŸæ¨¡å‹</h2><p><strong>DO</strong> Data Object</p><blockquote><p>ä¸æ•°æ®åº“è¡¨ç»“æ„å¯¹åº”ï¼Œä½œä¸º Mapper çš„è¿”å›å€¼</p></blockquote><p><strong>DTO</strong> Data Transfer Object</p><blockquote><p>æ•°æ®ä¼ è¾“å¯¹è±¡ï¼Œä½œä¸º Service æˆ– Manager çš„è¿”å›å€¼</p></blockquote><p><strong>BO</strong> Business Object</p><blockquote><p>ä¸šåŠ¡å¯¹è±¡ï¼Œä½œä¸º Service çš„è¿”å›å€¼ï¼Œå°è£…äº†ä¸šåŠ¡é€»è¾‘çš„å¯¹è±¡</p></blockquote><p><strong>AO</strong> Application Object</p><blockquote><p>åº”ç”¨å¯¹è±¡ï¼Œ</p></blockquote><p><strong>VO</strong> View Object</p><blockquote><p>æ˜¾ç¤ºå±‚å¯¹è±¡ï¼Œé€šå¸¸ä¸º Web å±‚è¿”å›å†…å®¹æˆ–æ¨¡ç‰ˆæ¸²æŸ“ä¼ è¾“å¯¹è±¡</p></blockquote><p><strong>Query</strong> </p><blockquote><p>æ•°æ®æŸ¥è¯¢å¯¹è±¡ï¼Œä¸Šå±‚å°è£…çš„æŸ¥è¯¢å¯¹è±¡</p></blockquote><h3 id="ç®€åŒ–åçš„æ–¹æ¡ˆ"><a href="#ç®€åŒ–åçš„æ–¹æ¡ˆ" class="headerlink" title="ç®€åŒ–åçš„æ–¹æ¡ˆ"></a>ç®€åŒ–åçš„æ–¹æ¡ˆ</h3><p><img src="http://cdn.hocgin.top/image.png" alt="image.png"></p><ul><li>Mapper å±‚è¿”å›çš„ DO ä»…å…è®¸ä¼ å…¥åˆ° Service æˆ– Manager</li><li>Service æˆ– Manager è¿”å›çš„ VO ä»…å…è®¸ä¼ å…¥åˆ° Controller æˆ– TService</li></ul><hr><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C -Queryâ€”&gt; S â€”DTOâ€”&gt; M</span><br><span class="line">C &lt;â€”VO- S &lt;â€”DO- M</span><br></pre></td></tr></table></figure><hr><h2 id="é“¾æ¥"><a href="#é“¾æ¥" class="headerlink" title="é“¾æ¥"></a>é“¾æ¥</h2><p><a href="https://juejin.im/post/5b44e62e6fb9a04fc030f216" target="_blank" rel="external">åŸæ–‡åœ°å€</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å…³äºé¡¹ç›®ç»“æ„åˆ’åˆ†çš„æ€è€ƒå’Œæ€»ç»“&lt;br&gt;
    
    </summary>
    
      <category term="Java" scheme="https://hocg.in/categories/Java/"/>
    
    
      <category term="Tips" scheme="https://hocg.in/tags/Tips/"/>
    
      <category term="Java" scheme="https://hocg.in/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>2018 å›¾ç‰‡å¢™</title>
    <link href="https://hocg.in/2018/12/31/2018%20%E5%9B%BE%E7%89%87%E5%A2%99/"/>
    <id>https://hocg.in/2018/12/31/2018 å›¾ç‰‡å¢™/</id>
    <published>2018-12-31T15:59:59.000Z</published>
    <updated>2018-10-11T13:39:15.374Z</updated>
    
    <summary type="html">
    
    </summary>
    
      <category term="ç”Ÿæ´»" scheme="https://hocg.in/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
      <category term="å›¾ç‰‡å¢™" scheme="https://hocg.in/tags/%E5%9B%BE%E7%89%87%E5%A2%99/"/>
    
  </entry>
  
  <entry>
    <title>Reactä½¿ç”¨è¿‡ç¨‹ä¸­çš„è®°å½•ç‚¹</title>
    <link href="https://hocg.in/2018/11/20/React%E4%BD%BF%E7%94%A8%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84%E8%AE%B0%E5%BD%95%E7%82%B9/"/>
    <id>https://hocg.in/2018/11/20/Reactä½¿ç”¨è¿‡ç¨‹ä¸­çš„è®°å½•ç‚¹/</id>
    <published>2018-11-20T11:15:36.000Z</published>
    <updated>2019-04-09T03:09:26.162Z</updated>
    
    <content type="html"><![CDATA[<p>  React ä½¿ç”¨è¿‡ç¨‹ä¸­çš„ä¸€äº›è®°å½•..<br><a id="more"></a></p><h2 id="å®šä¹‰æ¸…æ™°å¯ç»´æŠ¤çš„æ¥å£"><a href="#å®šä¹‰æ¸…æ™°å¯ç»´æŠ¤çš„æ¥å£" class="headerlink" title="å®šä¹‰æ¸…æ™°å¯ç»´æŠ¤çš„æ¥å£"></a>å®šä¹‰æ¸…æ™°å¯ç»´æŠ¤çš„æ¥å£</h2><ul><li><p>é¿å… <code>render</code>æ›¿ä»£æ–¹å¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> SplitTimes = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//<span class="doctag">TODO:</span> è¿”å›JSX</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å›è°ƒç±» props å±æ€§ä½¿ç”¨å‰ç¼€<code>on</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onDone</span>=<span class="string">&#123;&#125;/</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>å°½é‡å†™ props-type</p></li></ul><hr><h2 id="ç»„ä»¶çš„å†…éƒ¨å®ç°"><a href="#ç»„ä»¶çš„å†…éƒ¨å®ç°" class="headerlink" title="ç»„ä»¶çš„å†…éƒ¨å®ç°"></a>ç»„ä»¶çš„å†…éƒ¨å®ç°</h2><ul><li><p>è§£æ„èµ‹å€¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">constructor</span>() &#123;</span><br><span class="line">  <span class="keyword">super</span>(...arguments); <span class="comment">//æ°¸è¿œæ­£ç¡®ï¼</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>é¿å…å†…è”å‡½æ•°</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;ControlButtons</span><br><span class="line">  activated=&#123;<span class="keyword">this</span>.state.isStarted&#125;</span><br><span class="line">  onStart=&#123;() =&gt; &#123; <span class="comment">/* TODO */</span>&#125;&#125;</span><br><span class="line">  onPause=&#123;() =&gt; &#123; <span class="comment">/* TODO */</span>&#125;&#125;</span><br><span class="line">  onReset=&#123;() =&gt; &#123; <span class="comment">/* TODO */</span>&#125;&#125;</span><br><span class="line">  onSplit=&#123;() =&gt; &#123; <span class="comment">/* TODO */</span>&#125;&#125;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure></li><li><p>åˆ©ç”¨<strong>å±æ€§åˆå§‹åŒ–</strong>ï¼ˆproperty initializerï¼‰æ¥å®šä¹‰ state å’Œæˆå‘˜å‡½æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">state = &#123;</span><br><span class="line">    isStarted: <span class="literal">false</span>,</span><br><span class="line">    startTime: <span class="literal">null</span>,</span><br><span class="line">    currentTime: <span class="literal">null</span>,</span><br><span class="line">    splits: [],</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">onReset = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">      startTime: <span class="literal">null</span>,</span><br><span class="line">      currentTime: <span class="literal">null</span>,</span><br><span class="line">      splits: [],</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li></ul><hr><h2 id="ç»„ä»¶åŒ–æ ·å¼"><a href="#ç»„ä»¶åŒ–æ ·å¼" class="headerlink" title="ç»„ä»¶åŒ–æ ·å¼"></a>ç»„ä»¶åŒ–æ ·å¼</h2><ul><li>é¿å…å†…è” <code>style</code><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1 style=&#123;&#123;</span><br><span class="line">   <span class="string">'font-family'</span>: <span class="string">'monospace'</span></span><br><span class="line"> &#125;&#125;&gt;&#123;ms2Time(milliseconds)&#125;&lt;<span class="regexp">/h1&gt;</span></span><br></pre></td></tr></table></figure></li></ul><hr><h2 id="èªæ˜ç»„ä»¶å’Œå‚»ç“œç»„ä»¶"><a href="#èªæ˜ç»„ä»¶å’Œå‚»ç“œç»„ä»¶" class="headerlink" title="èªæ˜ç»„ä»¶å’Œå‚»ç“œç»„ä»¶"></a>èªæ˜ç»„ä»¶å’Œå‚»ç“œç»„ä»¶</h2><ul><li>ä¸ç”¨ PureComponent å†™ä¸€ä¸ªå‚»ç“œç»„ä»¶<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Joke = React.memo(<span class="function"><span class="params">()</span> =&gt;</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;img src=&#123;SmileFace&#125; /&gt;</span><br><span class="line">        &#123;<span class="keyword">this</span>.props.value || <span class="string">'loading...'</span> &#125;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">));</span></span><br></pre></td></tr></table></figure></li></ul><hr><h2 id="render-props-æ¨¡å¼"><a href="#render-props-æ¨¡å¼" class="headerlink" title="render props æ¨¡å¼"></a>render props æ¨¡å¼</h2><ul><li>é«˜é˜¶ç»„ä»¶<blockquote><p>å¯ä»¥æ˜¯æ™®é€šå±æ€§ï¼Œä¹Ÿå¯ä»¥æ˜¯<code>children</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Auth= <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> userName = getUserName();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (userName) &#123;</span><br><span class="line">    <span class="keyword">const</span> allProps = &#123;userName, ...props&#125;;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;React.Fragment&gt;</span><br><span class="line">        &#123;props.login(allProps)&#125;</span><br><span class="line">      &lt;<span class="regexp">/React.Fragment&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125; else &#123;</span></span><br><span class="line"><span class="regexp">    &lt;React.Fragment&gt;</span></span><br><span class="line"><span class="regexp">      &#123;props.nologin(props)&#125;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>React.Fragment&gt;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">  &lt;Auth</span><br><span class="line">    login=&#123;(&#123;userName&#125;) =&gt; <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello &#123;userName&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>&#125;</span><br><span class="line">    nologin=&#123;() =&gt; <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Please login<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>&#125;</span><br><span class="line">  /&gt;</span><br></pre></td></tr></table></figure></blockquote></li></ul><hr><h2 id="æä¾›è€…æ¨¡å¼"><a href="#æä¾›è€…æ¨¡å¼" class="headerlink" title="æä¾›è€…æ¨¡å¼"></a>æä¾›è€…æ¨¡å¼</h2><ul><li>æ–°ç‰ˆ-æä¾›è€…æ¨¡å¼<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ThemeContext = React.createContext();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ThemeProvider = ThemeContext.Provider;</span><br><span class="line"><span class="keyword">const</span> ThemeConsumer = ThemeContext.Consumer;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Subject</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;ThemeConsumer&gt;</span><br><span class="line">        &#123;</span><br><span class="line">          (theme) =&gt; (</span><br><span class="line">            &lt;h1 style=&#123;&#123;<span class="attr">color</span>: theme.mainColor&#125;&#125;&gt;</span><br><span class="line">              &#123;<span class="keyword">this</span>.props.children&#125;</span><br><span class="line">            &lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">          )</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>ThemeConsumer&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><hr><h2 id="ç»„åˆç»„ä»¶"><a href="#ç»„åˆç»„ä»¶" class="headerlink" title="ç»„åˆç»„ä»¶"></a>ç»„åˆç»„ä»¶</h2><blockquote><p>æ¨¡å¼ = é—®é¢˜åœºæ™¯ + è§£å†³åŠæ³•</p></blockquote><ul><li>ç»„åˆç»„ä»¶<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¡ˆä¾‹</span></span><br><span class="line">    &lt;Tabs&gt;</span><br><span class="line">      &lt;TabItem&gt;One&lt;<span class="regexp">/TabItem&gt;</span></span><br><span class="line"><span class="regexp">      &lt;TabItem&gt;Two&lt;/</span>TabItem&gt;</span><br><span class="line">      &lt;TabItem&gt;Three&lt;<span class="regexp">/TabItem&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>Tabs&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// TabItem</span></span><br><span class="line"><span class="keyword">const</span> TabItem = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;active, onClick&#125; = props;</span><br><span class="line">  <span class="keyword">const</span> tabStyle = &#123;</span><br><span class="line">    <span class="string">'max-width'</span>: <span class="string">'150px'</span>,</span><br><span class="line">    color: active ? <span class="string">'red'</span> : <span class="string">'green'</span>,</span><br><span class="line">    border: active ? <span class="string">'1px red solid'</span> : <span class="string">'0px'</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;h1 style=&#123;tabStyle&#125; onClick=&#123;onClick&#125;&gt;</span><br><span class="line">      &#123;props.children&#125;</span><br><span class="line">    &lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ Tabs</span></span><br><span class="line"><span class="regexp">class Tabs extends React.Component &#123;</span></span><br><span class="line"><span class="regexp">  state = &#123;</span></span><br><span class="line"><span class="regexp">    activeIndex:  0</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  render() &#123;</span></span><br><span class="line"><span class="regexp">    const newChildren = React.Children.map(this.props.children, (child, index) =&gt; &#123;</span></span><br><span class="line"><span class="regexp">      if (child.type) &#123;</span></span><br><span class="line"><span class="regexp">        return React.cloneElement(child, &#123;</span></span><br><span class="line"><span class="regexp">          active: this.state.activeIndex === index,</span></span><br><span class="line"><span class="regexp">          onClick: () =&gt; this.setState(&#123;activeIndex: index&#125;)</span></span><br><span class="line"><span class="regexp">        &#125;);</span></span><br><span class="line"><span class="regexp">      &#125; else &#123;</span></span><br><span class="line"><span class="regexp">        return child;</span></span><br><span class="line"><span class="regexp">      &#125;</span></span><br><span class="line"><span class="regexp">    &#125;);</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    return (</span></span><br><span class="line"><span class="regexp">      &lt;Fragment&gt;</span></span><br><span class="line"><span class="regexp">        &#123;newChildren&#125;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>Fragment&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><hr><h2 id="React-å•å…ƒæµ‹è¯•"><a href="#React-å•å…ƒæµ‹è¯•" class="headerlink" title="React å•å…ƒæµ‹è¯•"></a>React å•å…ƒæµ‹è¯•</h2><ul><li>æµ‹è¯•æ¡†æ¶<ul><li>Jest</li></ul></li></ul><hr><h2 id="ç»„ä»¶çŠ¶æ€"><a href="#ç»„ä»¶çŠ¶æ€" class="headerlink" title="ç»„ä»¶çŠ¶æ€"></a>ç»„ä»¶çŠ¶æ€</h2><blockquote><p>props æ˜¯ç»„ä»¶å¤–ä¼ é€’è¿›æ¥çš„æ•°æ®ï¼Œstate ä»£è¡¨çš„å°±æ˜¯ React ç»„ä»¶çš„å†…éƒ¨çŠ¶æ€ã€‚</p></blockquote><ul><li>åˆ¤æ–­ä¸€ä¸ªæ•°æ®æ”¾åœ¨å“ª<ol><li>å¦‚æœæ•°æ®ç”±å¤–éƒ¨ä¼ å…¥ï¼Œæ”¾åœ¨ props ä¸­ï¼›</li><li>å¦‚æœæ˜¯ç»„ä»¶å†…éƒ¨çŠ¶æ€ï¼Œæ˜¯å¦è¿™ä¸ªçŠ¶æ€æ›´æ”¹åº”è¯¥ç«‹åˆ»å¼•å‘ä¸€æ¬¡ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Ÿå¦‚æœæ˜¯ï¼Œæ”¾åœ¨ state ä¸­ï¼›ä¸æ˜¯ï¼Œæ”¾åœ¨æˆå‘˜å˜é‡ä¸­ã€‚</li></ol></li><li>å‡½æ•°å‚æ•°çš„ state æ›´æ–°<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">increment</span>(<span class="params">state, props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;<span class="attr">count</span>: state.count + <span class="number">1</span>&#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">this</span>.setState(increment);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2 </span></span><br><span class="line"><span class="keyword">this</span>.setState(<span class="function">(<span class="params">preState, props</span>) =&gt;</span> (&#123;&#125;)</span><br></pre></td></tr></table></figure></li></ul><h2 id="Redux-ä½¿ç”¨æ¨¡å¼"><a href="#Redux-ä½¿ç”¨æ¨¡å¼" class="headerlink" title="Redux ä½¿ç”¨æ¨¡å¼"></a>Redux ä½¿ç”¨æ¨¡å¼</h2><ul><li>connect( mapStateToProps , mapDispatchToProps )<ol><li>å‰è€…æŠŠ state æ˜ å°„åˆ° props ä¸Š</li><li>åè€…æŠŠ dispatch æ˜ å°„åˆ° props ä¸Š<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åç»­å†™æ³•</span></span><br><span class="line">connect(<span class="function">(<span class="params"> state </span>)=&gt;</span>(&#123;</span><br><span class="line">count: state.count,</span><br><span class="line">&#125;), ( dispatch )=&gt;(&#123;</span><br><span class="line"> onIncrement: <span class="function"><span class="params">()</span> =&gt;</span> dispatch(&#123;<span class="attr">type</span>: <span class="string">'INCREMENT'</span>&#125;),</span><br><span class="line">   $fetch: <span class="function">(<span class="params">&#123;payload, callback&#125;</span>)=&gt;</span> dispatch(&#123;<span class="attr">type</span>: <span class="string">'fetch'</span>, payload, callback&#125;),</span><br><span class="line">&#125;))</span><br><span class="line"></span><br><span class="line"><span class="comment">// this.props.$fetch(&#123;&#125;)</span></span><br></pre></td></tr></table></figure></li></ol></li></ul><h2 id="React-Router"><a href="#React-Router" class="headerlink" title="React Router"></a>React Router</h2><ul><li>è·¯ç”±çš„ç§ç±»<ul><li>HashRouter <code>/#/about</code></li><li>BrowserRouter <code>/about</code> <strong>æ¨è</strong></li></ul></li></ul><h2 id="æ‹¥æŠ±å¼‚æ­¥æ¸²æŸ“"><a href="#æ‹¥æŠ±å¼‚æ­¥æ¸²æŸ“" class="headerlink" title="æ‹¥æŠ±å¼‚æ­¥æ¸²æŸ“"></a>æ‹¥æŠ±å¼‚æ­¥æ¸²æŸ“</h2><ul><li>åœ¨ <code>componentDidMount</code> å‘èµ·ç½‘ç»œè¯·æ±‚</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;  React ä½¿ç”¨è¿‡ç¨‹ä¸­çš„ä¸€äº›è®°å½•..&lt;br&gt;
    
    </summary>
    
      <category term="React" scheme="https://hocg.in/categories/React/"/>
    
    
      <category term="Tips" scheme="https://hocg.in/tags/Tips/"/>
    
      <category term="React" scheme="https://hocg.in/tags/React/"/>
    
  </entry>
  
  <entry>
    <title>å…³äºJava IOã€NIOã€AIO</title>
    <link href="https://hocg.in/2018/07/02/%E5%85%B3%E4%BA%8EJava%20IO%E3%80%81NIO%E3%80%81AIO/"/>
    <id>https://hocg.in/2018/07/02/å…³äºJava IOã€NIOã€AIO/</id>
    <published>2018-07-02T00:10:39.000Z</published>
    <updated>2018-07-03T05:31:16.752Z</updated>
    
    <content type="html"><![CDATA[<p>å…³äºJavaå¸¸ç”¨æ•°æ®ç»“æ„ï¼ŒåæœŸç»§ç»­æ•´ç†</p><a id="more"></a><h2 id="å…³äº-IO"><a href="#å…³äº-IO" class="headerlink" title="å…³äº IO"></a>å…³äº IO</h2><ul><li>BIO åŒæ­¥å¹¶é˜»å¡</li><li>NIO åŒæ­¥éé˜»å¡</li><li>AIO(NIO.2) <code>JDK7</code>, å¼‚æ­¥éé˜»å¡</li></ul><h2 id="NIO"><a href="#NIO" class="headerlink" title="NIO"></a>NIO</h2><ul><li>Channel <code>é€šé“</code> ä¼ è¾“</li><li>Buffer <code>ç¼“å†²åŒº</code> å­˜å‚¨</li><li>Selectors <code>å¤šè·¯å¤ç”¨å™¨</code> ç›‘å¬ Channel IO çŠ¶å†µ</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by hocgin on 2018/7/2.</span></span><br><span class="line"><span class="comment"> * email: hocgin@gmail.com</span></span><br><span class="line"><span class="comment"> * NIO</span></span><br><span class="line"><span class="comment"> * Non-blocking IOï¼ˆéé˜»å¡IOï¼‰</span></span><br><span class="line"><span class="comment"> * - Selectors å¤šè·¯å¤ç”¨å™¨ï¼Œç”¨äºç›‘æ§ SelectableChannel IOçŠ¶å†µ</span></span><br><span class="line"><span class="comment"> * -- SelectableChannel</span></span><br><span class="line"><span class="comment"> * ----SocketChannel</span></span><br><span class="line"><span class="comment"> * ----ServerSocketChannel</span></span><br><span class="line"><span class="comment"> * ----DatagramChannel</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * ----Pipe.SinkChannel å•å‘ç®¡é“-å†™</span></span><br><span class="line"><span class="comment"> * ----Pipe.SourceChannel å•å‘ç®¡é“-è¯»</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * - Channels</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * - Buffers</span></span><br><span class="line"><span class="comment"> * -- capacity æ€»å®¹é‡</span></span><br><span class="line"><span class="comment"> * -- limit ç•Œé™ï¼Œå¯æ“ä½œæœ€å¤§èŒƒå›´</span></span><br><span class="line"><span class="comment"> * -- position å½“å‰æ“ä½œä½ç½®</span></span><br><span class="line"><span class="comment"> * -- mark æ ‡è®°ï¼Œè®°å½•position</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * 0 &lt;= mark &lt;= position &lt;= limit &lt;= capacity</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NIOTest</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é˜»å¡æ¨¡å¼çš„ Socket NIO</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">nio_client</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String path = <span class="string">"/Users/hocgin/Document/Projects/GitHub/23-Day/src/test/java/in/hocg/Test.java"</span>;</span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">                SocketChannel channel = SocketChannel.open(<span class="keyword">new</span> InetSocketAddress(<span class="string">"127.0.0.1"</span>, <span class="number">9898</span>));</span><br><span class="line">                FileChannel inChannel = FileChannel.open(Paths.get(path), StandardOpenOption.READ);</span><br><span class="line">        ) &#123;</span><br><span class="line">            ByteBuffer buffer = ByteBuffer.allocate(<span class="number">1024</span>);</span><br><span class="line">            <span class="keyword">while</span> (inChannel.read(buffer) != -<span class="number">1</span>) &#123;</span><br><span class="line">                buffer.flip();</span><br><span class="line">                channel.write(buffer);</span><br><span class="line">                buffer.clear();</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            channel.shutdownOutput();</span><br><span class="line">            </span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * æ¥æ”¶åé¦ˆ</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="keyword">while</span> (channel.read(buffer) != -<span class="number">1</span>) &#123;</span><br><span class="line">                buffer.flip();</span><br><span class="line">                System.out.println(<span class="keyword">new</span> String(buffer.array(), <span class="number">0</span>, buffer.limit()));</span><br><span class="line">                buffer.clear();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é˜»å¡æ¨¡å¼çš„ Socket NIO</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">nio_server</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">                ServerSocketChannel channel = ServerSocketChannel.open();</span><br><span class="line">        ) &#123;</span><br><span class="line">            channel.bind(<span class="keyword">new</span> InetSocketAddress(<span class="number">9898</span>));</span><br><span class="line">            SocketChannel socketChannel = channel.accept();</span><br><span class="line">            ByteBuffer buffer = ByteBuffer.allocate(<span class="number">1024</span>);</span><br><span class="line">            <span class="keyword">while</span> (socketChannel.read(buffer) != -<span class="number">1</span>) &#123;</span><br><span class="line">                buffer.flip();</span><br><span class="line">                System.out.println(<span class="keyword">new</span> String(buffer.array(), <span class="number">0</span>, buffer.limit()));</span><br><span class="line">                buffer.clear();</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            buffer.put(<span class="string">"æ¥æ”¶å®Œæ¯•"</span>.getBytes());</span><br><span class="line">            buffer.flip();</span><br><span class="line">            socketChannel.write(buffer);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * éé˜»å¡æ¨¡å¼çš„ Socket NIO</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">nio_client2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">                SocketChannel channel = SocketChannel.open(<span class="keyword">new</span> InetSocketAddress(<span class="string">"127.0.0.1"</span>, <span class="number">9898</span>));</span><br><span class="line">        ) &#123;</span><br><span class="line">            <span class="comment">// éé˜»å¡</span></span><br><span class="line">            channel.configureBlocking(<span class="keyword">false</span>);</span><br><span class="line">            ByteBuffer buffer = ByteBuffer.allocate(<span class="number">1024</span>);</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * å‘é€ä¿¡æ¯</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            buffer.put(LocalDateTime.now().toString().getBytes());</span><br><span class="line">            buffer.flip();</span><br><span class="line">            channel.write(buffer);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * æ¥æ”¶åé¦ˆ</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * éé˜»å¡æ¨¡å¼çš„ Socket NIO</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">nio_server2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">                ServerSocketChannel channel = ServerSocketChannel.open();</span><br><span class="line">        ) &#123;</span><br><span class="line">            <span class="comment">// éé˜»å¡</span></span><br><span class="line">            channel.configureBlocking(<span class="keyword">false</span>);</span><br><span class="line">            </span><br><span class="line">            channel.bind(<span class="keyword">new</span> InetSocketAddress(<span class="number">9898</span>));</span><br><span class="line">            </span><br><span class="line">            Selector selector = Selector.open();</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * æ³¨å†Œé€šé“ æŒ‡å®šäº‹ä»¶ç±»å‹</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            channel.register(selector, SelectionKey.OP_ACCEPT);</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">while</span> (selector.select() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                Iterator&lt;SelectionKey&gt; iterator = selector.selectedKeys().iterator();</span><br><span class="line">                <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">                    SelectionKey action = iterator.next();</span><br><span class="line">                    <span class="keyword">if</span> (action.isAcceptable()) &#123;</span><br><span class="line">                        SocketChannel socketChannel = channel.accept();</span><br><span class="line">                        socketChannel.configureBlocking(<span class="keyword">false</span>);</span><br><span class="line">                        socketChannel.register(selector, SelectionKey.OP_READ);</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (action.isReadable()) &#123;</span><br><span class="line">                        SocketChannel socketChannel = (SocketChannel) action.channel();</span><br><span class="line">                        ByteBuffer buffer = ByteBuffer.allocate(<span class="number">1024</span>);</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            <span class="keyword">while</span> (socketChannel.read(buffer) != -<span class="number">1</span>) &#123;</span><br><span class="line">                                buffer.flip();</span><br><span class="line">                                String s = <span class="keyword">new</span> String(buffer.array(), <span class="number">0</span>, buffer.limit());</span><br><span class="line">                                <span class="keyword">if</span> (!Strings.isNullOrEmpty(s)) &#123;</span><br><span class="line">                                    System.out.println(s);</span><br><span class="line">                                &#125;</span><br><span class="line">                                buffer.clear();</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    iterator.remove();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">aio_server</span><span class="params">()</span> <span class="keyword">throws</span> IOException, InterruptedException </span>&#123;</span><br><span class="line"><span class="comment">//        AsynchronousChannelGroup group = AsynchronousChannelGroup.withCachedThreadPool(Executors.newCachedThreadPool(), 10);</span></span><br><span class="line">        AsynchronousServerSocketChannel channel = AsynchronousServerSocketChannel.open();</span><br><span class="line">        channel.bind(<span class="keyword">new</span> InetSocketAddress(<span class="number">9898</span>));</span><br><span class="line">        channel.accept(<span class="keyword">null</span>, <span class="keyword">new</span> CompletionHandler&lt;AsynchronousSocketChannel, Void&gt;() &#123;</span><br><span class="line">            <span class="keyword">final</span> ByteBuffer buffer = ByteBuffer.allocate(<span class="number">1024</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">completed</span><span class="params">(AsynchronousSocketChannel result, Void attachment)</span> </span>&#123;</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    result.read(buffer).get();</span><br><span class="line">                    buffer.flip();</span><br><span class="line">                    System.out.println(String.format(<span class="string">"æœåŠ¡ç«¯ æˆåŠŸ :%s"</span>, <span class="keyword">new</span> String(buffer.array()).trim()));</span><br><span class="line">                    result.close();</span><br><span class="line">                    channel.accept(<span class="keyword">null</span>, <span class="keyword">this</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException | InterruptedException | ExecutionException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">failed</span><span class="params">(Throwable exc, Void attachment)</span> </span>&#123;</span><br><span class="line">                System.out.println(<span class="string">"failed"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        </span><br><span class="line">        LockSupport.park();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">aio_client</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        AsynchronousSocketChannel channel = AsynchronousSocketChannel.open();</span><br><span class="line">        channel.connect(<span class="keyword">new</span> InetSocketAddress(<span class="string">"127.0.0.1"</span>, <span class="number">9898</span>), <span class="keyword">null</span>, <span class="keyword">new</span> CompletionHandler&lt;Void, Void&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">completed</span><span class="params">(Void result, Void attachment)</span> </span>&#123;</span><br><span class="line">                ByteBuffer buffer = ByteBuffer.allocate(<span class="number">1024</span>);</span><br><span class="line">                buffer.put(<span class="string">"ä½ å¥½"</span>.getBytes());</span><br><span class="line">                buffer.flip();</span><br><span class="line">                channel.write(buffer);</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">failed</span><span class="params">(Throwable exc, Void attachment)</span> </span>&#123;</span><br><span class="line">                System.out.println(exc);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Buffer</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buffer</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        ByteBuffer buffer = ByteBuffer.allocate(<span class="number">1024</span>);</span><br><span class="line">        System.out.println(buffer.position()); <span class="comment">// 0</span></span><br><span class="line">        System.out.println(buffer.limit());    <span class="comment">// 1024</span></span><br><span class="line">        System.out.println(buffer.capacity());  <span class="comment">// 1024</span></span><br><span class="line">        buffer.put(<span class="string">"asd"</span>.getBytes());</span><br><span class="line">        </span><br><span class="line">        buffer.flip(); <span class="comment">// è®¾ç½®è¯»å–çš„èŒƒå›´é™åˆ¶è‡³ position</span></span><br><span class="line">        <span class="keyword">byte</span>[] dst = <span class="keyword">new</span> <span class="keyword">byte</span>[buffer.limit()];</span><br><span class="line">        buffer.get(dst);</span><br><span class="line">        System.out.println(<span class="keyword">new</span> String(dst, <span class="number">0</span>, dst.length));</span><br><span class="line">        </span><br><span class="line">        buffer.rewind(); <span class="comment">// é‡è¯» position = 0 mark = -1</span></span><br><span class="line">        </span><br><span class="line">        buffer.clear(); <span class="comment">// æ¸…ç©º position = 0  limit = capacity mark = -1</span></span><br><span class="line">        </span><br><span class="line">        buffer.mark(); <span class="comment">// æ ‡è®° mark = position</span></span><br><span class="line">        </span><br><span class="line">        buffer.reset(); <span class="comment">// positionæ¢å¤ä¸ºæ ‡è®°ä½ç½® position = mark</span></span><br><span class="line">        </span><br><span class="line">        buffer.hasRemaining(); <span class="comment">// æ˜¯å¦æœ‰å‰©ä½™æ•°æ® position &lt; limit</span></span><br><span class="line">        </span><br><span class="line">        buffer.remaining(); <span class="comment">// å‰©ä½™æ•°é‡ limit - position</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * getChannel</span></span><br><span class="line"><span class="comment">     * - æœ¬åœ°</span></span><br><span class="line"><span class="comment">     * - FileInputStream/FileOutputStream</span></span><br><span class="line"><span class="comment">     * - RandomAccessFile</span></span><br><span class="line"><span class="comment">     * - ç½‘ç»œ</span></span><br><span class="line"><span class="comment">     * - Socket</span></span><br><span class="line"><span class="comment">     * - ServerSocket</span></span><br><span class="line"><span class="comment">     * - DatagramSocket</span></span><br><span class="line"><span class="comment">     * - JDK 7</span></span><br><span class="line"><span class="comment">     * - xxChannel.open()</span></span><br><span class="line"><span class="comment">     * - Files.newByteChannel()</span></span><br><span class="line"><span class="comment">     * - Channels.newXXX</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">channel</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        String path = <span class="string">"/Users/hocgin/Document/Projects/GitHub/23-Day/src/test/java/in/hocg/Test.java"</span>;</span><br><span class="line">        FileInputStream in = <span class="keyword">new</span> FileInputStream(path);</span><br><span class="line">        ReadableByteChannel channel = Channels.newChannel(in);</span><br><span class="line">        ByteBuffer buffer = ByteBuffer.allocate(<span class="number">1024</span>);</span><br><span class="line">        <span class="keyword">while</span> (channel.read(buffer) != -<span class="number">1</span>) &#123;</span><br><span class="line">            buffer.flip();</span><br><span class="line">            System.out.println(String.format(<span class="string">"%s"</span>, <span class="keyword">new</span> String(buffer.array(), <span class="number">0</span>, buffer.limit())));</span><br><span class="line">            buffer.clear();</span><br><span class="line">        &#125;</span><br><span class="line">        channel.close();</span><br><span class="line">        in.close();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç›´æ¥ç¼“å†²åŒº</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">channel2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String path = <span class="string">"/Users/hocgin/Document/Projects/GitHub/23-Day/src/test/java/in/hocg/Test.java"</span>;</span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">                FileChannel inChannel = FileChannel.open(Paths.get(path), StandardOpenOption.READ);</span><br><span class="line">                FileChannel outChannel = FileChannel.open(Paths.get(path), StandardOpenOption.READ, StandardOpenOption.WRITE, StandardOpenOption.CREATE)</span><br><span class="line">        ) &#123;</span><br><span class="line">            MappedByteBuffer inMap = inChannel.map(FileChannel.MapMode.READ_ONLY, <span class="number">0</span>, inChannel.size());</span><br><span class="line">            MappedByteBuffer outMap = outChannel.map(FileChannel.MapMode.READ_WRITE, <span class="number">0</span>, inChannel.size());</span><br><span class="line">            <span class="keyword">byte</span>[] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[inMap.limit()];</span><br><span class="line">            inMap.get(bytes);</span><br><span class="line">            outMap.put(bytes);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€šé“é—´çš„æ•°æ®ä¼ è¾“(ç›´æ¥ç¼“å†²åŒº)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">transfer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String path = <span class="string">"/Users/hocgin/Document/Projects/GitHub/23-Day/src/test/java/in/hocg/Test.java"</span>;</span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">                FileChannel inChannel = FileChannel.open(Paths.get(path), StandardOpenOption.READ);</span><br><span class="line">                FileChannel outChannel = FileChannel.open(Paths.get(path), StandardOpenOption.READ, StandardOpenOption.WRITE, StandardOpenOption.CREATE)</span><br><span class="line">        ) &#123;</span><br><span class="line">            inChannel.transferTo(<span class="number">0</span>, inChannel.size(), outChannel);</span><br><span class="line"><span class="comment">//            inChannel.transferFrom(outChannel,0, inChannel.size());</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ†æ•£è¯»å–(Scatter)</span></span><br><span class="line"><span class="comment">     * èšé›†å†™å…¥(Gather)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">scatter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String path = <span class="string">"/Users/hocgin/Document/Projects/GitHub/23-Day/src/test/java/in/hocg/Test.java"</span>;</span><br><span class="line">        <span class="keyword">try</span> (</span><br><span class="line">                RandomAccessFile f = <span class="keyword">new</span> RandomAccessFile(path, <span class="string">"rw"</span>);</span><br><span class="line">        ) &#123;</span><br><span class="line">            FileChannel channel = f.getChannel();</span><br><span class="line">            ByteBuffer allocate1 = ByteBuffer.allocate(<span class="number">1024</span>);</span><br><span class="line">            ByteBuffer allocate2 = ByteBuffer.allocate(<span class="number">1024</span>);</span><br><span class="line">            ByteBuffer[] all = &#123;allocate1, allocate2&#125;;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// åˆ†æ•£è¯»å–</span></span><br><span class="line">            channel.read(all);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// èšé›†å†™å…¥</span></span><br><span class="line">            channel.write(all);</span><br><span class="line">            </span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SortedMap&lt;String, Charset&gt; map = Charset.availableCharsets();</span><br><span class="line">        System.out.println(map);</span><br><span class="line">        System.out.println(Charset.defaultCharset());</span><br><span class="line">        Charset charset = Charset.forName(<span class="string">"UTF-8"</span>);</span><br><span class="line">        CharsetEncoder charsetEncoder = charset.newEncoder();</span><br><span class="line">        CharsetDecoder charsetDecoder = charset.newDecoder();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å…³äºJavaå¸¸ç”¨æ•°æ®ç»“æ„ï¼ŒåæœŸç»§ç»­æ•´ç†&lt;/p&gt;
    
    </summary>
    
      <category term="Java" scheme="https://hocg.in/categories/Java/"/>
    
    
      <category term="Java" scheme="https://hocg.in/tags/Java/"/>
    
      <category term="IO" scheme="https://hocg.in/tags/IO/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ GitLab æ¥å¯¹ Spring Boot é¡¹ç›®è¿›è¡Œ CI/CD</title>
    <link href="https://hocg.in/2018/06/20/%E4%BD%BF%E7%94%A8%20GitLab%20%E6%9D%A5%E5%AF%B9%20Spring%20Boot%20%E9%A1%B9%E7%9B%AE%E8%BF%9B%E8%A1%8C%20CI:CD/"/>
    <id>https://hocg.in/2018/06/20/ä½¿ç”¨ GitLab æ¥å¯¹ Spring Boot é¡¹ç›®è¿›è¡Œ CI:CD/</id>
    <published>2018-06-20T14:34:20.000Z</published>
    <updated>2018-06-20T14:44:41.968Z</updated>
    
    <content type="html"><![CDATA[<p>åˆ©ç”¨ GitLab Pipelines æ¥è¿›è¡Œé¡¹ç›®çš„æŒç»­é›†æˆå’Œéƒ¨ç½²ã€‚<br><a id="more"></a></p><h2 id="ä½¿ç”¨-GitLab-CI-æ„å»º-Spring-Boot-é¡¹ç›®"><a href="#ä½¿ç”¨-GitLab-CI-æ„å»º-Spring-Boot-é¡¹ç›®" class="headerlink" title="ä½¿ç”¨ GitLab CI æ„å»º Spring Boot é¡¹ç›®"></a>ä½¿ç”¨ GitLab CI æ„å»º Spring Boot é¡¹ç›®</h2><h3 id="æ­å»º-GitLab-CE"><a href="#æ­å»º-GitLab-CE" class="headerlink" title="æ­å»º GitLab CE"></a>æ­å»º GitLab CE</h3><blockquote><p>ä½¿ç”¨ Docker æ–¹å¼æ­å»º GitLab CE</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run --detach \</span><br><span class="line">    --publish 443:443 \</span><br><span class="line">    --publish 80:80 \</span><br><span class="line">    --publish 2222:22 \</span><br><span class="line">    --name gitlab \</span><br><span class="line">    --restart always \</span><br><span class="line">    --volume /data/gitlab/config:/etc/gitlab \</span><br><span class="line">    --volume /data/gitlab/logs:/var/log/gitlab \</span><br><span class="line">    --volume /data/gitlab/data:/var/opt/gitlab \</span><br><span class="line">    gitlab/gitlab-ce:latest</span><br></pre></td></tr></table></figure><h3 id="æ­å»º-GitLab-Runner"><a href="#æ­å»º-GitLab-Runner" class="headerlink" title="æ­å»º GitLab Runner"></a>æ­å»º GitLab Runner</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run --rm -t -d -i -p 8084:8080 \</span><br><span class="line">    -v /data/gitlab-runner:/etc/gitlab-runner \</span><br><span class="line">    -v /var/run/docker.sock:/var/run/docker.sock \</span><br><span class="line">    --add-host ad4aac43c567:172.17.0.2 \</span><br><span class="line">    --name gitlab-runner \</span><br><span class="line">    gitlab/gitlab-runner</span><br></pre></td></tr></table></figure><ul><li><ol><li>æ­¤å¤„éœ€æ³¨æ„<code>--add-host</code>è¯·è‡ªè¡Œæ›¿æ¢ä¸ºGitLab CE Docker å®¹å™¨ IDï¼Œæ­¤å¤„æ˜¯ä¸ºäº†è®© GitLab CE Docker å®¹å™¨å¯ä»¥è¢« GitLab Runner è®¿é—®åˆ°, å¦‚æœä½¿ç”¨å…¬ç½‘ IP å¯ä»¥å¿½ç•¥ã€‚</li></ol></li><li><ol><li>å¦‚æœé€šè¿‡<code>/etc/hosts</code>ä»ç„¶æ— æ³•è§£å†³HOSTé—®é¢˜, è¯·è‡ªè¡Œæ›´æ”¹<code>/data/gitlab-runner/config.toml</code>æ–‡ä»¶ï¼Œåœ¨<code>[runners.docker]</code>èŠ‚ç‚¹ä¸‹é¢æ·»åŠ <code>extra_hosts = [&quot;ad4aac43c567:172.17.0.2&quot;]</code>ã€‚</li></ol></li></ul><h3 id="æ³¨å†Œ-Runner"><a href="#æ³¨å†Œ-Runner" class="headerlink" title="æ³¨å†Œ Runner"></a>æ³¨å†Œ Runner</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">sudo docker exec -it gitlab-runner  gitlab-runner register -n \</span><br><span class="line">      --url http://192.168.1.13/ \</span><br><span class="line">      --registration-token pfHxurfRMBctWwkqrt1c \</span><br><span class="line">      --tag-list=docker-privileged \</span><br><span class="line">      --description "dockersock" \</span><br><span class="line">      --docker-privileged=false \</span><br><span class="line">      --docker-image "docker:latest" \</span><br><span class="line">      --docker-volumes /var/run/docker.sock:/var/run/docker.sock \</span><br><span class="line">      --docker-volumes /root/m2:/root/.m2 \</span><br><span class="line">      --executor docker</span><br></pre></td></tr></table></figure><ul><li>url: GitLab CE é‡Œé¢ CI æ ç›®æŸ¥çœ‹</li><li>registration-token: GitLab CE é‡Œé¢ CI æ ç›®æŸ¥çœ‹</li><li>tag-list: æ ‡ç­¾, åç»­ç”¨äºæ‰§è¡Œæ­¥éª¤æ—¶æŒ‡å®š Runner</li><li>description: æè¿°</li><li>docker-image: å¤–å±‚ä½¿ç”¨çš„ Docker é•œåƒ</li><li>executor: æ‰§è¡Œå™¨</li></ul><h3 id="ç¼–å†™-gitlab-ci-yml"><a href="#ç¼–å†™-gitlab-ci-yml" class="headerlink" title="ç¼–å†™ .gitlab-ci.yml"></a>ç¼–å†™ <code>.gitlab-ci.yml</code></h3><p>ç‚¹å‡»<a href="https://github.com/hocgin/GitLab-CI/blob/master/.gitlab-ci.yml" target="_blank" rel="external">.gitlab-ci.yml</a>æŸ¥çœ‹</p><h3 id="ä¸€é”®éƒ¨ç½²"><a href="#ä¸€é”®éƒ¨ç½²" class="headerlink" title="ä¸€é”®éƒ¨ç½²"></a>ä¸€é”®éƒ¨ç½²</h3><p><a href="https://github.com/hocgin/GitLab-CI/blob/master/docker-compose.yml" target="_blank" rel="external">ç‚¹å‡»è·å–</a>, è®°å¾—ä¿®æ”¹HOSTã€‚</p><h3 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h3><p><a href="https://github.com/hocgin/GitLab-CI" target="_blank" rel="external">GitLab-CI</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åˆ©ç”¨ GitLab Pipelines æ¥è¿›è¡Œé¡¹ç›®çš„æŒç»­é›†æˆå’Œéƒ¨ç½²ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="DevOps" scheme="https://hocg.in/categories/DevOps/"/>
    
    
      <category term="DevOps" scheme="https://hocg.in/tags/DevOps/"/>
    
      <category term="GitLab" scheme="https://hocg.in/tags/GitLab/"/>
    
      <category term="CI/CD" scheme="https://hocg.in/tags/CI-CD/"/>
    
  </entry>
  
  <entry>
    <title>å…³äºJava-æ•°æ®ç»“æ„</title>
    <link href="https://hocg.in/2018/03/20/%E5%85%B3%E4%BA%8EJava-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    <id>https://hocg.in/2018/03/20/å…³äºJava-æ•°æ®ç»“æ„/</id>
    <published>2018-03-20T09:10:39.000Z</published>
    <updated>2019-04-17T13:47:54.957Z</updated>
    
    <content type="html"><![CDATA[<p>å…³äºJavaå¸¸ç”¨æ•°æ®ç»“æ„ï¼ŒåæœŸç»§ç»­æ•´ç†</p><a id="more"></a><h2 id="List"><a href="#List" class="headerlink" title="List"></a>List</h2><blockquote><p>Listå¿…é¡»ä¿æŒå…ƒç´ ç‰¹å®šçš„é¡ºåº</p></blockquote><h3 id="LinkedList-Listã€Queue"><a href="#LinkedList-Listã€Queue" class="headerlink" title="LinkedList Listã€Queue"></a>LinkedList <code>List</code>ã€<code>Queue</code></h3><ul><li>åŒé“¾è¡¨<code>Node</code></li><li>éçº¿ç¨‹å®‰å…¨çš„</li><li>è½¬æ¢ä¸ºçº¿ç¨‹å®‰å…¨<code>Collections.synchronizedList(new LinkedList(...));</code></li><li>ç‰¹ç‚¹: å®ç°äº†Listã€Dequeæ¥å£ï¼ŒåŒå‘é“¾è¡¨ï¼Œé€‚åˆé¢‘ç¹æ’å…¥/åˆ é™¤ï¼Œä¸é€‚åˆä½¿ç”¨setã€setã€‚</li></ul><h3 id="ArrayList-List"><a href="#ArrayList-List" class="headerlink" title="ArrayList List"></a>ArrayList <code>List</code></h3><ul><li>æ•°ç»„å®ç°</li><li>éçº¿ç¨‹å®‰å…¨çš„</li><li>ç‰¹ç‚¹: åŠ¨æ€é•¿åº¦(é»˜è®¤é•¿åº¦ä¸º10ï¼Œå¢é•¿é»˜è®¤ä¸ºå½“å‰é•¿åº¦çš„1/2ï¼Œä¸å¯å¤§äºInteger.MAX_VALUE - 8ï¼Œå¦åˆ™ OutOfMemoryError), getã€setç›´æ¥è®¿é—®ã€‚</li></ul><h3 id="Vector-List"><a href="#Vector-List" class="headerlink" title="Vector List"></a>Vector <code>List</code></h3><ul><li>çº¿ç¨‹å®‰å…¨</li><li>ç”¨<code>synchronized</code>ä¿®é¥°å‡½æ•°</li><li><h3 id="CopyOnWriteArrayList-List"><a href="#CopyOnWriteArrayList-List" class="headerlink" title="CopyOnWriteArrayList List"></a>CopyOnWriteArrayList <code>List</code></h3></li><li>æ•°ç»„å®ç°</li><li>çº¿ç¨‹å®‰å…¨</li><li>ç‰¹ç‚¹: æ•°ç»„é•¿åº¦é»˜è®¤ä¸º0ï¼Œæ¯æ¬¡ä¿®æ”¹éƒ½ä¼šé‡æ–°å¢é•¿é•¿åº¦å’Œæ‹·è´æ•°ç»„ã€‚</li></ul><h3 id="Stack"><a href="#Stack" class="headerlink" title="Stack"></a>Stack</h3><ul><li>çº¿ç¨‹å®‰å…¨</li><li>æ•°ç»„å®ç°</li><li>ç‰¹ç‚¹: æ¨¡æ‹Ÿæ ˆã€‚</li></ul><h3 id="å·¥å…·ç±»"><a href="#å·¥å…·ç±»" class="headerlink" title="å·¥å…·ç±»"></a>å·¥å…·ç±»</h3><ul><li>è½¬æ¢ä¸ºçº¿ç¨‹å®‰å…¨<code>Collections.synchronizedList(new ArrayList(...));</code><ul><li>å†…éƒ¨æ˜¯ç”¨Listå®ç°å­˜å‚¨çš„</li><li>ä¸<code>Vector</code>å·®åˆ«æ˜¯å¯ä»¥ä¼ å…¥å®šåˆ¶çš„é”ã€‚</li></ul></li><li>è½¬ä¸ºä¸å¯å˜List <code>Collections.unmodifiableList(new ArrayList&lt;&gt;())</code><ul><li>é—¨é¢æ¨¡å¼(List)</li><li>çº¿ç¨‹å®‰å…¨</li><li>ç‰¹ç‚¹: ä¸å¯å˜ã€‚</li></ul></li></ul><h3 id="å¸¸ç”¨æŠ€å·§"><a href="#å¸¸ç”¨æŠ€å·§" class="headerlink" title="å¸¸ç”¨æŠ€å·§"></a>å¸¸ç”¨æŠ€å·§</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">lists</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰“ä¹±æ•°ç»„</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    List&lt;Integer&gt; list = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">    Collections.shuffle(list);</span><br><span class="line">    System.out.println(String.format(<span class="string">"æ‰“ä¹± %s"</span>, list));</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç§»é™¤æ‰€æœ‰ NULL</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    list.removeIf(Objects::isNull);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å»é‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    list = list.stream().distinct().collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ†ç»„</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Map&lt;String, List&lt;Integer&gt;&gt; collect = list.stream()</span><br><span class="line">            .collect(Collectors.groupingBy(Object::toString));</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥æ‰¾ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Integer integer = list.stream().filter(item -&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> item == <span class="number">1</span>;</span><br><span class="line">    &#125;).findAny().orElse(<span class="keyword">null</span>);</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><blockquote><p>Setä¸èƒ½æœ‰é‡å¤å…ƒç´ </p></blockquote><h3 id="HashSet-Set"><a href="#HashSet-Set" class="headerlink" title="HashSet Set"></a>HashSet <code>Set</code></h3><ul><li>çº¿ç¨‹ä¸å®‰å…¨</li><li>åˆ©ç”¨ HashMap çš„ Key å€¼è¿›è¡Œå­˜å‚¨ã€‚</li><li>æ— åº</li><li>åˆ©ç”¨Hashå­˜å‚¨ï¼Œå­˜å–å’ŒæŸ¥æ‰¾é«˜æ•ˆã€‚</li></ul><h3 id="LinkedHashSet-Set"><a href="#LinkedHashSet-Set" class="headerlink" title="LinkedHashSet Set"></a>LinkedHashSet <code>Set</code></h3><ul><li>çº¿ç¨‹ä¸å®‰å…¨</li><li>åˆ©ç”¨ LinkedHashMap çš„ Key å€¼è¿›è¡Œå­˜å‚¨ã€‚</li><li>æŒ‰æ’å…¥æ’åº</li></ul><h3 id="TreeSet-Set"><a href="#TreeSet-Set" class="headerlink" title="TreeSet Set"></a>TreeSet <code>Set</code></h3><ul><li>çº¿ç¨‹ä¸å®‰å…¨</li><li>åˆ©ç”¨ TreeMap çš„ Key å€¼è¿›è¡Œå­˜å‚¨ã€‚</li><li>æ’å…¥æœ‰åº, é»˜è®¤è‡ªç„¶æ’åºã€‚</li></ul><h2 id="Queue"><a href="#Queue" class="headerlink" title="Queue"></a>Queue</h2><blockquote><p>Queueä¿æŒä¸€ä¸ªé˜Ÿåˆ—(å…ˆè¿›å…ˆå‡º)çš„é¡ºåº.</p></blockquote><h3 id="PriorityQueue-Queue"><a href="#PriorityQueue-Queue" class="headerlink" title="PriorityQueue Queue"></a>PriorityQueue <code>Queue</code></h3><ul><li>çº¿ç¨‹ä¸å®‰å…¨</li><li>æ•°ç»„å®ç°</li></ul><h3 id="Deque-Queue"><a href="#Deque-Queue" class="headerlink" title="Deque Queue"></a>Deque <code>Queue</code></h3><ul><li>åŒç«¯é˜Ÿåˆ—<h5 id="ArrayDeque-Queue"><a href="#ArrayDeque-Queue" class="headerlink" title="ArrayDeque Queue"></a>ArrayDeque <code>Queue</code></h5></li><li>æ•°ç»„å®ç°</li><li>çº¿ç¨‹ä¸å®‰å…¨</li><li>åŠ¨æ€é•¿åº¦</li></ul><h3 id="BlockingQueue"><a href="#BlockingQueue" class="headerlink" title="BlockingQueue"></a>BlockingQueue</h3><h3 id="DelayQueue"><a href="#DelayQueue" class="headerlink" title="DelayQueue"></a>DelayQueue</h3><h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><blockquote><p>ç”¨äºä¿å­˜å…·æœ‰â€æ˜ å°„å…³ç³»â€çš„æ•°æ®</p><h3 id="HashMap"><a href="#HashMap" class="headerlink" title="HashMap"></a>HashMap</h3><ul><li>ä¸èƒ½ä¿è¯key-valueå¯¹çš„é¡ºåº</li><li>çº¿ç¨‹ä¸å®‰å…¨</li></ul></blockquote><h3 id="LinkedHashMap"><a href="#LinkedHashMap" class="headerlink" title="LinkedHashMap"></a>LinkedHashMap</h3><ul><li>æ’å…¥é¡ºåº</li><li>çº¿ç¨‹ä¸å®‰å…¨</li></ul><h3 id="TreeMap"><a href="#TreeMap" class="headerlink" title="TreeMap"></a>TreeMap</h3><ul><li>çº¿ç¨‹ä¸å®‰å…¨</li><li>æ’å…¥æœ‰åº, é»˜è®¤è‡ªç„¶æ’åºã€‚</li></ul><h3 id="ConcurrentHashMap"><a href="#ConcurrentHashMap" class="headerlink" title="ConcurrentHashMap"></a>ConcurrentHashMap</h3><ul><li>çº¿ç¨‹å®‰å…¨</li><li>ç‰¹ç‚¹: åˆ†å¤šä¸ªå—</li></ul><p><a href="https://www.kancloud.cn/this_is_lxf/javabase/210926" target="_blank" rel="external">æ¨è</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å…³äºJavaå¸¸ç”¨æ•°æ®ç»“æ„ï¼ŒåæœŸç»§ç»­æ•´ç†&lt;/p&gt;
    
    </summary>
    
      <category term="Java" scheme="https://hocg.in/categories/Java/"/>
    
    
      <category term="Java" scheme="https://hocg.in/tags/Java/"/>
    
      <category term="æ•°æ®ç»“æ„" scheme="https://hocg.in/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
  </entry>
  
  <entry>
    <title>å…³äºJavaå¤šçº¿ç¨‹-å‡ ä¸ªè¾…åŠ©ç±»</title>
    <link href="https://hocg.in/2018/03/06/%E5%85%B3%E4%BA%8EJava%E5%A4%9A%E7%BA%BF%E7%A8%8B-%E5%87%A0%E4%B8%AA%E8%BE%85%E5%8A%A9%E7%B1%BB/"/>
    <id>https://hocg.in/2018/03/06/å…³äºJavaå¤šçº¿ç¨‹-å‡ ä¸ªè¾…åŠ©ç±»/</id>
    <published>2018-03-06T09:13:39.000Z</published>
    <updated>2018-07-03T05:24:51.368Z</updated>
    
    <content type="html"><![CDATA[<p>å…³äºJavaå¤šçº¿ç¨‹-å‡ ä¸ªè¾…åŠ©ç±»ï¼ŒåæœŸç»§ç»­æ•´ç†</p><a id="more"></a><h2 id="å‡ ä¸ªè¾…åŠ©ç±»"><a href="#å‡ ä¸ªè¾…åŠ©ç±»" class="headerlink" title="å‡ ä¸ªè¾…åŠ©ç±»"></a>å‡ ä¸ªè¾…åŠ©ç±»</h2><ul><li>CountDownLatch è®¡æ•°å™¨</li><li>CyclicBarrier åŒæ­¥å™¨</li><li>Phaser <code>1.7</code> é˜¶æ®µæ€§ã€åŒæ­¥ã€è®¡æ•°</li></ul><h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br></pre></td><td class="code"><pre><span class="line">    ExecutorService executorService = Executors.newFixedThreadPool(<span class="number">4</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¡æ•°å™¨ latch.await() ä¼šç­‰å¾…è®¡æ•°ä¸º 0</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> InterruptedException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">countDownLatch</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        CountDownLatch latch = <span class="keyword">new</span> CountDownLatch(<span class="number">4</span>);</span><br><span class="line">        LongStream.range(<span class="number">0</span>, <span class="number">4</span>).forEach((i)-&gt;&#123;</span><br><span class="line">            executorService.submit(latch::countDown);</span><br><span class="line">            System.out.println(String.format(<span class="string">"index: %d"</span>, latch.getCount()));</span><br><span class="line">        &#125;);</span><br><span class="line">    </span><br><span class="line">        latch.await();</span><br><span class="line">        System.out.println(String.format(<span class="string">"index: %d"</span>, latch.getCount()));</span><br><span class="line"><span class="comment">//        index: 4</span></span><br><span class="line"><span class="comment">//        index: 3</span></span><br><span class="line"><span class="comment">//        index: 2</span></span><br><span class="line"><span class="comment">//        index: 1</span></span><br><span class="line"><span class="comment">//        index: 0</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç­‰å¾…æŒ‡å®šæ•°ç›®çš„çº¿ç¨‹å®Œæˆå, æ‰ç»§ç»­æ‰§è¡Œ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> InterruptedException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cyclicBarrier</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        CyclicBarrier cyclicBarrier = <span class="keyword">new</span> CyclicBarrier(<span class="number">4</span>, ()-&gt;&#123;</span><br><span class="line">            System.out.println(<span class="string">"æ‰€æœ‰ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œç»§ç»­"</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">        LongStream.range(<span class="number">0</span>, <span class="number">4</span>).forEach((i)-&gt;&#123;</span><br><span class="line">            executorService.submit(()-&gt;&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    System.out.println(String.format(<span class="string">"å·²ç»å®Œæˆæ•°ç›®: %d/%d"</span>, cyclicBarrier.getNumberWaiting(), cyclicBarrier.getParties()));</span><br><span class="line">                    Thread.sleep(<span class="number">100</span>);</span><br><span class="line">                    cyclicBarrier.await();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException | BrokenBarrierException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(String.format(<span class="string">"è¿›è¡Œå…¶ä»–ä»»åŠ¡ %s"</span>, Thread.currentThread().getName()));</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    </span><br><span class="line">        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        </span><br><span class="line"><span class="comment">//        å·²ç»å®Œæˆæ•°ç›®: 0/4</span></span><br><span class="line"><span class="comment">//        å·²ç»å®Œæˆæ•°ç›®: 0/4</span></span><br><span class="line"><span class="comment">//        å·²ç»å®Œæˆæ•°ç›®: 0/4</span></span><br><span class="line"><span class="comment">//        å·²ç»å®Œæˆæ•°ç›®: 0/4</span></span><br><span class="line"><span class="comment">//        æ‰€æœ‰ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œç»§ç»­</span></span><br><span class="line"><span class="comment">//        è¿›è¡Œå…¶ä»–ä»»åŠ¡ pool-1-thread-4</span></span><br><span class="line"><span class="comment">//        è¿›è¡Œå…¶ä»–ä»»åŠ¡ pool-1-thread-2</span></span><br><span class="line"><span class="comment">//        è¿›è¡Œå…¶ä»–ä»»åŠ¡ pool-1-thread-1</span></span><br><span class="line"><span class="comment">//        è¿›è¡Œå…¶ä»–ä»»åŠ¡ pool-1-thread-3</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é…ç½®åŒæ—¶å…è®¸ç”³è¯·è®¸å¯çš„æ•°ç›®ï¼Œå¦‚æœæ•°ç›®å·²æ»¡åˆ™è¿›è¡Œé˜»å¡ç­‰å¾…é‡Šæ”¾è®¸å¯ã€‚</span></span><br><span class="line"><span class="comment">     * Semaphore å¯é…ç½®æ˜¯å¦ä½¿ç”¨å…¬å¹³æœºåˆ¶ï¼Œç±»ä¼¼Lock</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> InterruptedException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">semaphore</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Semaphore semaphore = <span class="keyword">new</span> Semaphore(<span class="number">2</span>);</span><br><span class="line">        LongStream.range(<span class="number">0</span>, <span class="number">4</span>).forEach((i)-&gt;&#123;</span><br><span class="line">            executorService.submit(()-&gt;&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    System.out.println(String.format(<span class="string">"æ­£åœ¨ç”³è¯·è®¸å¯ ID:%s"</span>, Thread.currentThread().getName()));</span><br><span class="line">                    semaphore.acquire();</span><br><span class="line">                    System.out.println(String.format(<span class="string">"ç”³è¯·è®¸å¯æˆåŠŸ %s"</span>, Thread.currentThread().getName()));</span><br><span class="line">                    Thread.sleep(<span class="number">100</span>);</span><br><span class="line">                    System.out.println(String.format(<span class="string">"è¿›è¡Œä»»åŠ¡ %s"</span>, Thread.currentThread().getName()));</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">                    System.out.println(String.format(<span class="string">"é‡Šæ”¾è®¸å¯ %s"</span>, Thread.currentThread().getName()));</span><br><span class="line">                    semaphore.release();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">        </span><br><span class="line">        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">    </span><br><span class="line"><span class="comment">//        æ­£åœ¨ç”³è¯·è®¸å¯ ID:pool-1-thread-2</span></span><br><span class="line"><span class="comment">//        æ­£åœ¨ç”³è¯·è®¸å¯ ID:pool-1-thread-1</span></span><br><span class="line"><span class="comment">//        ç”³è¯·è®¸å¯æˆåŠŸ pool-1-thread-2</span></span><br><span class="line"><span class="comment">//        æ­£åœ¨ç”³è¯·è®¸å¯ ID:pool-1-thread-4</span></span><br><span class="line"><span class="comment">//        æ­£åœ¨ç”³è¯·è®¸å¯ ID:pool-1-thread-3</span></span><br><span class="line"><span class="comment">//        ç”³è¯·è®¸å¯æˆåŠŸ pool-1-thread-1</span></span><br><span class="line"><span class="comment">//        è¿›è¡Œä»»åŠ¡ pool-1-thread-1</span></span><br><span class="line"><span class="comment">//        è¿›è¡Œä»»åŠ¡ pool-1-thread-2</span></span><br><span class="line"><span class="comment">//        é‡Šæ”¾è®¸å¯ pool-1-thread-1</span></span><br><span class="line"><span class="comment">//        é‡Šæ”¾è®¸å¯ pool-1-thread-2</span></span><br><span class="line"><span class="comment">//        ç”³è¯·è®¸å¯æˆåŠŸ pool-1-thread-4</span></span><br><span class="line"><span class="comment">//        ç”³è¯·è®¸å¯æˆåŠŸ pool-1-thread-3</span></span><br><span class="line"><span class="comment">//        è¿›è¡Œä»»åŠ¡ pool-1-thread-4</span></span><br><span class="line"><span class="comment">//        è¿›è¡Œä»»åŠ¡ pool-1-thread-3</span></span><br><span class="line"><span class="comment">//        é‡Šæ”¾è®¸å¯ pool-1-thread-4</span></span><br><span class="line"><span class="comment">//        é‡Šæ”¾è®¸å¯ pool-1-thread-3</span></span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é˜¶æ®µæ€§, ä¼šç­‰å¾…æ‰€æœ‰äººå®Œæˆè¯¥æ­¥éª¤å†è¿›å…¥ä¸‹ä¸€ä¸ªæ­¥éª¤</span></span><br><span class="line"><span class="comment">     * - æ¯ä¸ªé˜¶æ®µå‡å¯è¿›è¡ŒåŠ å…¥æˆ–ç§»é™¤</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * å‡½æ•°</span></span><br><span class="line"><span class="comment">     * - arriveAndAwaitAdvance ç­‰å¾…é˜¶æ®µ</span></span><br><span class="line"><span class="comment">     * - arriveAndDeregister ç§»é™¤</span></span><br><span class="line"><span class="comment">     * - bulkRegister åŠ å…¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">phaser</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Phaser phaser = <span class="keyword">new</span> Phaser(<span class="number">4</span>);</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * é˜¶æ®µæ€§ä»»åŠ¡</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        System.out.println(<span class="string">"ã€é˜¶æ®µæ€§ä»»åŠ¡ã€‘"</span>);</span><br><span class="line">        LongStream.range(<span class="number">0</span>, <span class="number">4</span>).forEach((i)-&gt;&#123;</span><br><span class="line">            executorService.submit(()-&gt;&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    System.out.println(String.format(<span class="string">"ç¬¬ä¸€æ­¥ %s"</span>, Thread.currentThread().getName()));</span><br><span class="line">                    Thread.sleep(<span class="number">100</span>);</span><br><span class="line">                    phaser.arriveAndAwaitAdvance();</span><br><span class="line">                    </span><br><span class="line">                    Thread.sleep(<span class="number">100</span>);</span><br><span class="line">                    System.out.println(String.format(<span class="string">"ç¬¬2æ­¥ %s"</span>, Thread.currentThread().getName()));</span><br><span class="line">                    phaser.arriveAndAwaitAdvance();</span><br><span class="line">                    </span><br><span class="line">                    Thread.sleep(<span class="number">100</span>);</span><br><span class="line">                    System.out.println(String.format(<span class="string">"ç¬¬ä¸‰æ­¥ %s"</span>, Thread.currentThread().getName()));</span><br><span class="line">                    phaser.arriveAndAwaitAdvance();</span><br><span class="line">                    </span><br><span class="line">                    System.out.println(<span class="string">"Done"</span>);</span><br><span class="line">                &#125;<span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">    </span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    </span><br><span class="line">        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * è®¡æ•°ä»»åŠ¡</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        System.out.println(<span class="string">"ã€è®¡æ•°ä»»åŠ¡ã€‘"</span>);</span><br><span class="line">        LongStream.range(<span class="number">0</span>, <span class="number">4</span>).forEach((i)-&gt;&#123;</span><br><span class="line">            executorService.submit(()-&gt;&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    System.out.println(String.format(<span class="string">"å·²ç»å®Œæˆ %s"</span>, Thread.currentThread().getName()));</span><br><span class="line">                    Thread.sleep(<span class="number">100</span>);</span><br><span class="line">                    phaser.awaitAdvance(phaser.getPhase()); <span class="comment">//cyclicBarrier.await();</span></span><br><span class="line">                &#125;<span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">        phaser.arrive();</span><br><span class="line">        System.out.println(<span class="string">"è®¡æ•°å®Œæˆ"</span>);</span><br><span class="line">        </span><br><span class="line"><span class="comment">//        ã€é˜¶æ®µæ€§ä»»åŠ¡ã€‘</span></span><br><span class="line"><span class="comment">//        ç¬¬ä¸€æ­¥ pool-1-thread-2</span></span><br><span class="line"><span class="comment">//        ç¬¬ä¸€æ­¥ pool-1-thread-3</span></span><br><span class="line"><span class="comment">//        ç¬¬ä¸€æ­¥ pool-1-thread-1</span></span><br><span class="line"><span class="comment">//        ç¬¬ä¸€æ­¥ pool-1-thread-4</span></span><br><span class="line"><span class="comment">//        ç¬¬2æ­¥ pool-1-thread-2</span></span><br><span class="line"><span class="comment">//        ç¬¬2æ­¥ pool-1-thread-1</span></span><br><span class="line"><span class="comment">//        ç¬¬2æ­¥ pool-1-thread-4</span></span><br><span class="line"><span class="comment">//        ç¬¬2æ­¥ pool-1-thread-3</span></span><br><span class="line"><span class="comment">//        ç¬¬ä¸‰æ­¥ pool-1-thread-1</span></span><br><span class="line"><span class="comment">//        ç¬¬ä¸‰æ­¥ pool-1-thread-4</span></span><br><span class="line"><span class="comment">//        ç¬¬ä¸‰æ­¥ pool-1-thread-2</span></span><br><span class="line"><span class="comment">//        ç¬¬ä¸‰æ­¥ pool-1-thread-3</span></span><br><span class="line"><span class="comment">//        Done</span></span><br><span class="line"><span class="comment">//        Done</span></span><br><span class="line"><span class="comment">//        Done</span></span><br><span class="line"><span class="comment">//        Done</span></span><br><span class="line"><span class="comment">//       ã€è®¡æ•°ä»»åŠ¡ã€‘</span></span><br><span class="line"><span class="comment">//        è®¡æ•°å®Œæˆ</span></span><br><span class="line"><span class="comment">//        å·²ç»å®Œæˆ pool-1-thread-2</span></span><br><span class="line"><span class="comment">//        å·²ç»å®Œæˆ pool-1-thread-4</span></span><br><span class="line"><span class="comment">//        å·²ç»å®Œæˆ pool-1-thread-3</span></span><br><span class="line"><span class="comment">//        å·²ç»å®Œæˆ pool-1-thread-1</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å…³äºJavaå¤šçº¿ç¨‹-å‡ ä¸ªè¾…åŠ©ç±»ï¼ŒåæœŸç»§ç»­æ•´ç†&lt;/p&gt;
    
    </summary>
    
      <category term="Java" scheme="https://hocg.in/categories/Java/"/>
    
    
      <category term="Java" scheme="https://hocg.in/tags/Java/"/>
    
      <category term="å¤šçº¿ç¨‹" scheme="https://hocg.in/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>å…³äºJavaå¤šçº¿ç¨‹-å¯è§æ€§ã€CASã€AQSã€é”</title>
    <link href="https://hocg.in/2018/03/03/%E5%85%B3%E4%BA%8EJava%E5%A4%9A%E7%BA%BF%E7%A8%8B-%E5%8F%AF%E8%A7%81%E6%80%A7%E3%80%81CAS%E3%80%81AQS%E3%80%81%E9%94%81/"/>
    <id>https://hocg.in/2018/03/03/å…³äºJavaå¤šçº¿ç¨‹-å¯è§æ€§ã€CASã€AQSã€é”/</id>
    <published>2018-03-03T01:13:39.000Z</published>
    <updated>2018-07-03T05:25:02.728Z</updated>
    
    <content type="html"><![CDATA[<p>å…³äºJavaå¤šçº¿ç¨‹-å¯è§æ€§ã€CASã€AQSã€é”</p><a id="more"></a><h2 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a>å‰æ</h2><blockquote><p>è§£å†³å¤šçº¿ç¨‹æ“ä½œå‡ºç°çš„è„è¯»å’Œæ•°æ®ã€æ“ä½œä¸ä¸€è‡´é—®é¢˜ã€‚</p></blockquote><h3 id="volatileå¯è§æ€§"><a href="#volatileå¯è§æ€§" class="headerlink" title="volatileå¯è§æ€§"></a>volatile<code>å¯è§æ€§</code></h3><blockquote><p>Java å†…å­˜åˆ†ä¸ºä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜ã€‚<br>æ­£å¸¸æƒ…å†µæ¯ä¸ªçº¿ç¨‹éƒ½æ‹¥æœ‰è‡ªå·±çš„å·¥ä½œå†…å­˜ï¼Œç„¶åæ¯éš”ä¸€æ®µæ—¶é—´ä¼šåŒæ­¥åˆ°ä¸»å†…å­˜ä¸Šï¼Œå› æ­¤ä¼šå­˜åœ¨ä¸ä¸€è‡´çš„æƒ…å†µã€‚è€Œ<code>volatile</code>åˆ™æ˜¯ä¸ºäº†è®©æ ‡è®°å­—æ®µçš„è¯»å–å’Œå†™å…¥éƒ½æ˜¯åœ¨ä¸»å†…å­˜ä¸­ï¼Œä¿è¯å…¶ä¸€è‡´æ€§ã€‚<br><code>æ³¨æ„:</code>ä½†å…¶ä»ä¸èƒ½ä¿è¯å†™å…¥æ“ä½œçš„åŸå­æ€§ã€‚</p></blockquote><h3 id="CAS"><a href="#CAS" class="headerlink" title="CAS"></a>CAS</h3><blockquote><p><code>Compare And Swap</code>, æ¯”è¾ƒå¹¶äº¤æ¢ã€‚ç”¨äºè§£å†³å¤šçº¿ç¨‹ä½¿ç”¨é”é€ æˆçš„æ€§èƒ½æŸè€—ã€‚<br>Java æ˜¯åˆ©ç”¨<code>Unsafe</code>æ¥å®ç°CASï¼Œè¿›è¡Œç¡¬ä»¶çº§åˆ«çš„åŸå­æ€§æ“ä½œã€‚</p></blockquote><h3 id="AQS"><a href="#AQS" class="headerlink" title="AQS"></a>AQS</h3><blockquote><p><code>AbstractQueuedSynchronizer</code>, è¿™ä¸ªä¸º Java ç±», å…¬å¹³é”<code>FairSync</code>å’Œéå…¬å¹³é”<code>NonfairSync</code>å‡æ˜¯é€šè¿‡æ­¤å®ç°çš„ã€‚<br>å…¶åˆ©ç”¨é˜Ÿåˆ—æ¥å®ç°é˜»å¡é”å’ŒåŒæ­¥ã€‚</p></blockquote><h4 id="ABA-é—®é¢˜"><a href="#ABA-é—®é¢˜" class="headerlink" title="ABA é—®é¢˜"></a>ABA é—®é¢˜</h4><blockquote><p>æƒ…æ™¯: åˆå§‹å€¼ä¸ºA[çº¿ç¨‹1è·å–çš„å€¼ä¸ºA][çº¿ç¨‹2è·å–çš„å€¼ä¸ºA,å¹¶æ›´æ”¹å€¼Aä¸ºå€¼B,å†æ›´æ”¹å€¼Bä¸ºå€¼A][çº¿ç¨‹1æ›´æ”¹å€¼Aä¸ºå€¼B]ã€‚<br>å‡ºç°é—®é¢˜: çº¿ç¨‹1æ„Ÿè§‰ä¸åˆ°å€¼æœ‰ä¸€æ®µå˜åŒ–çš„è¿‡ç¨‹ï¼Œè¿™æ˜¯<code>ä¹è§‚é”</code>å‡ºç°çš„é—®é¢˜ã€‚<br>è§£å†³æ–¹æ¡ˆ: <code>AtomicStampedReference</code>/<code>AtomicMarkableReference</code>ä½ å€¼å¾—æ‹¥æœ‰ã€‚</p></blockquote><ul><li>AtomicStampedReference æ¯æ¬¡ä¿®æ”¹ä¼šå­˜å‚¨ç‰ˆæœ¬å·,ç‰ˆæœ¬å·å®ç°ç”¨intã€‚</li><li>AtomicMarkableReference æ¯æ¬¡ä¿®æ”¹ä¼šå­˜å‚¨ç‰ˆæœ¬å·,ç‰ˆæœ¬å·å®ç°ç”¨booleanã€‚</li></ul><hr><h2 id="é”çš„åè¯"><a href="#é”çš„åè¯" class="headerlink" title="é”çš„åè¯"></a>é”çš„åè¯</h2><h3 id="å¯é‡å…¥é”"><a href="#å¯é‡å…¥é”" class="headerlink" title="å¯é‡å…¥é”"></a>å¯é‡å…¥é”</h3><ul><li>å·²è·å–çš„é”å¯ä»¥ä¸å¿…å»é‡æ–°ç”³è¯·ã€‚  </li><li>synchronized/ReentrantLock æ˜¯å¯é‡å…¥é”.</li></ul><h3 id="å¯ä¸­æ–­é”"><a href="#å¯ä¸­æ–­é”" class="headerlink" title="å¯ä¸­æ–­é”"></a>å¯ä¸­æ–­é”</h3><ul><li>å¯ä»¥å–æ¶ˆç”³è¯·é”çš„æ“ä½œã€‚</li><li>synchronized ä¸æ˜¯å¯ä¸­æ–­é”ã€‚</li></ul><h3 id="å…¬å¹³é”"><a href="#å…¬å¹³é”" class="headerlink" title="å…¬å¹³é”"></a>å…¬å¹³é”</h3><ul><li>å…¬å¹³é”æ˜¯æ ¹æ®è¯·æ±‚é¡ºåºåˆ†å‘é”, å”¤é†’éœ€è¦æ—¶é—´ï¼Œèƒ½ä¿- è¯æ“ä½œçš„é¡ºåºã€‚  </li><li>éå…¬å¹³é”ä¼šå‡ºç°æ’é˜Ÿæƒ…å†µï¼Œæ€§èƒ½é«˜ï¼Œä½†æ˜¯ä¸èƒ½ä¿è¯æ“ä½œçš„é¡ºåºã€‚  </li><li>synchronized ä¸æ˜¯å…¬å¹³é”ã€‚</li><li><code>ReentrantLock</code>/<code>ReentrantReadWriteLock</code>é»˜è®¤æƒ…å†µæ˜¯éå…¬å¹³é”<code>NonfairSync</code>,ä½†å¯ä»¥è®¾ç½®ä¸ºå…¬å¹³é”<code>FairSync</code></li></ul><h3 id="ä¹è§‚é”"><a href="#ä¹è§‚é”" class="headerlink" title="ä¹è§‚é”"></a>ä¹è§‚é”</h3><blockquote><p>æ¯æ¬¡ä¸åŠ é”ï¼Œå‡è®¾æ²¡æœ‰å†²çªå»å®ŒæˆæŸé¡¹æ“ä½œï¼Œå¦‚æœå› ä¸ºå†²çªå¤±è´¥å°±é‡è¯•ï¼Œç›´åˆ°æˆåŠŸä¸ºæ­¢ã€‚</p></blockquote><h4 id="Atomic-ä¹è§‚é”"><a href="#Atomic-ä¹è§‚é”" class="headerlink" title="Atomic* ä¹è§‚é”"></a>Atomic* <code>ä¹è§‚é”</code></h4><blockquote><p>ç”±äºåœ¨å¤šçº¿ç¨‹æ“ä½œä¸­æ— æ³•ä¿è¯æ“ä½œçš„åŸå­æ€§ï¼Œå› æ­¤å¼•å…¥äº†é”å’ŒCASã€‚<br><code>AtomicStampedReference</code>/<code>AtomicMarkableReference</code> ç”¨äºè§£å†³ CAS çš„ ABA é—®é¢˜</p></blockquote><h5 id="å•"><a href="#å•" class="headerlink" title="å•"></a>å•</h5><ul><li>AtomicInteger <code>Integerç±»å‹</code></li><li>AtomicLong <code>Longç±»å‹</code></li><li>AtomicBoolean <code>Booleanç±»å‹</code>,å†…éƒ¨ä½¿ç”¨intå®ç°ã€‚</li><li>AtomicReference <code>å¯¹è±¡ç±»å‹</code></li></ul><h5 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h5><ul><li>AtomicIntegerArray <code>Integeræ•°ç»„</code></li><li>AtomicLongArray <code>Longæ•°ç»„</code></li><li>AtomicReferenceArray <code>å¯¹è±¡æ•°ç»„</code></li></ul><h5 id="å¯¹è±¡å†…å­—æ®µ"><a href="#å¯¹è±¡å†…å­—æ®µ" class="headerlink" title="å¯¹è±¡å†…å­—æ®µ"></a>å¯¹è±¡å†…å­—æ®µ</h5><ul><li>AtomicIntegerFieldUpdater <code>å¯¹è±¡å†…Integerç±»å‹å­—æ®µ</code></li><li>AtomicLongFieldUpdater <code>å¯¹è±¡å†…Longç±»å‹å­—æ®µ</code></li><li>AtomicReferenceFieldUpdater <code>å¯¹è±¡å†…å¯¹è±¡ç±»å‹å­—æ®µ</code></li></ul><h5 id="æ ¹æ®ç‰ˆæœ¬å·è¿›è¡Œæ“ä½œ"><a href="#æ ¹æ®ç‰ˆæœ¬å·è¿›è¡Œæ“ä½œ" class="headerlink" title="æ ¹æ®ç‰ˆæœ¬å·è¿›è¡Œæ“ä½œ"></a>æ ¹æ®ç‰ˆæœ¬å·è¿›è¡Œæ“ä½œ</h5><ul><li>AtomicStampedReference æ¯æ¬¡ä¿®æ”¹ä¼šå­˜å‚¨ç‰ˆæœ¬å·,ç‰ˆæœ¬å·å®ç°ç”¨intã€‚</li><li>AtomicMarkableReference æ¯æ¬¡ä¿®æ”¹ä¼šå­˜å‚¨ç‰ˆæœ¬å·,ç‰ˆæœ¬å·å®ç°ç”¨booleanã€‚</li></ul><hr><h2 id="é”å’ŒåŒæ­¥"><a href="#é”å’ŒåŒæ­¥" class="headerlink" title="é”å’ŒåŒæ­¥"></a>é”å’ŒåŒæ­¥</h2><ol><li><p>é”å’ŒåŒæ­¥çš„ä½œç”¨<br>ä¿è¯ä»£ç åŒºåŸŸåœ¨åŒä¸€æ—¶é—´åªè¿è¡Œä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œ,<code>å…¶ä½™çº¿ç¨‹å¤„äºé˜»å¡çŠ¶æ€(BLOCKED)</code>ã€‚</p></li><li><p>é”å’ŒåŒæ­¥çš„å·®å¼‚ã€‚</p></li></ol><ul><li>ä½œç”¨èŒƒå›´, Lock å¯ä»¥è·¨æ–¹æ³•ï¼Œsynchronized åªèƒ½åœ¨åŒä¸€ä¸ªæ–¹æ³•ä¸­ã€‚</li><li>å…¬å¹³é”, Lock ä½¿ç”¨å…¬å¹³é”ï¼Œsynchronized ä½¿ç”¨éå…¬å¹³é”ã€‚</li><li>å¯ä¸­æ–­ï¼ŒLock å¯ä»¥ä½¿ç”¨<code>lockInterruptibly()</code>ä¸­æ–­é”ï¼Œsynchronized æ— æ³•ä¸­æ–­ã€‚</li><li>å½“ synchronized æ— æ³•è®¿é—®æ—¶ä¼šè¢«é˜»å¡ï¼ŒLock æä¾›<code>tryLock()</code>å‡å°‘é˜»å¡æ—¶é—´ã€‚</li></ul><ol><li>ä¸é‡Šæ”¾é”æ“ä½œ</li></ol><ul><li>åŒæ­¥ä»£ç ä¸­ä½¿ç”¨<code>Thread.sleep</code>/<code>Thread.yield</code>, çº¿ç¨‹å¤„äº<code>WAITING</code>/<code>TIMED_WAITING</code>çŠ¶æ€</li><li>åŒæ­¥ä»£ç ä¸­çº¿ç¨‹è¢«<code>suspend()</code></li></ul><ol><li>ä¼šé‡Šæ”¾é”æ“ä½œ</li></ol><ul><li>åŒæ­¥ä»£ç è¢«breakã€return</li><li>åŒæ­¥ä»£ç è¢«å¼‚å¸¸æˆ–é”™è¯¯ç»ˆæ­¢</li><li>åŒæ­¥ä»£ç å—æ‰§è¡Œç»“æŸ</li><li>åŒæ­¥ä»£ç å—è¢« wait(), çº¿ç¨‹å¤„äº<code>WAITING</code>/<code>TIMED_WAITING</code>çŠ¶æ€</li></ul><hr><h2 id="é”Lockçš„ç›¸å…³å®ç°"><a href="#é”Lockçš„ç›¸å…³å®ç°" class="headerlink" title="é”Lockçš„ç›¸å…³å®ç°"></a>é”<code>Lock</code>çš„ç›¸å…³å®ç°</h2><blockquote><p><code>NonfairSync</code>ã€<code>FairSync</code></p></blockquote><h3 id="ReentrantLock"><a href="#ReentrantLock" class="headerlink" title="ReentrantLock"></a>ReentrantLock</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">    </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯é‡å…¥é”</span></span><br><span class="line"><span class="comment"> * å·²è·å–çš„é”å¯ä»¥ä¸å¿…å»é‡æ–°ç”³è¯·ã€‚</span></span><br><span class="line"><span class="comment"> * ä¾‹å¦‚ï¼š</span></span><br><span class="line"><span class="comment"> * synchronized(lock)&#123;</span></span><br><span class="line"><span class="comment"> *     synchronized(lock)&#123;</span></span><br><span class="line"><span class="comment"> *         //..</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">reentrantLock</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ReentrantLock lock = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line">    System.out.println(String.format(<span class="string">"æ˜¯å¦å…¬å¹³é” %b"</span>, lock.isFair())); <span class="comment">// æ˜¯å¦å…¬å¹³é” false</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¯é‡å…¥é”, åœ¨åŒä¸€ä¸ªçº¿ç¨‹å†…ä¸ç”¨åå¤ç”³è¯·é”(åªæ˜¯è®¡æ•°+1)ã€‚</span></span><br><span class="line"><span class="comment">     * å¦‚æœä¸åŒçº¿ç¨‹ä¼šå°è¯•å…³æ‰å½“å‰çº¿ç¨‹(interrupt)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    lock.lock();</span><br><span class="line">    System.out.println(String.format(<span class="string">"è¯¥é”æ˜¯å¦å·²è¢«è·å– %b"</span>, lock.isHeldByCurrentThread())); <span class="comment">// è¯¥é”æ˜¯å¦å·²è¢«è·å– true</span></span><br><span class="line">    System.out.println(String.format(<span class="string">"æ˜¯å¦æœ‰çº¿ç¨‹åœ¨ç­‰å¾…è·å–è¯¥é” %b"</span>, lock.hasQueuedThreads())); <span class="comment">// æ˜¯å¦æœ‰çº¿ç¨‹åœ¨ç­‰å¾…è·å–è¯¥é” false</span></span><br><span class="line">    lock.lock();</span><br><span class="line">    System.out.println(String.format(<span class="string">"è¯¥é”æ˜¯å¦å·²è¢«è·å– %b"</span>, lock.isHeldByCurrentThread())); <span class="comment">// è¯¥é”æ˜¯å¦å·²è¢«è·å– true</span></span><br><span class="line">    System.out.println(String.format(<span class="string">"æ˜¯å¦æœ‰çº¿ç¨‹åœ¨ç­‰å¾…è·å–è¯¥é” %b"</span>, lock.hasQueuedThreads())); <span class="comment">// æ˜¯å¦æœ‰çº¿ç¨‹åœ¨ç­‰å¾…è·å–è¯¥é” false</span></span><br><span class="line">    lock.unlock();</span><br><span class="line">    System.out.println(String.format(<span class="string">"è¯¥é”æ˜¯å¦å·²è¢«è·å– %b"</span>, lock.isHeldByCurrentThread())); <span class="comment">// è¯¥é”æ˜¯å¦å·²è¢«è·å– true</span></span><br><span class="line">    System.out.println(String.format(<span class="string">"æ˜¯å¦æœ‰çº¿ç¨‹åœ¨ç­‰å¾…è·å–è¯¥é” %b"</span>, lock.hasQueuedThreads())); <span class="comment">// æ˜¯å¦æœ‰çº¿ç¨‹åœ¨ç­‰å¾…è·å–è¯¥é” false</span></span><br><span class="line">    lock.unlock();</span><br><span class="line">    System.out.println(String.format(<span class="string">"è¯¥é”æ˜¯å¦å·²è¢«è·å– %b"</span>, lock.isHeldByCurrentThread())); <span class="comment">// è¯¥é”æ˜¯å¦å·²è¢«è·å– false</span></span><br><span class="line">    System.out.println(String.format(<span class="string">"æ˜¯å¦æœ‰çº¿ç¨‹åœ¨ç­‰å¾…è·å–è¯¥é” %b"</span>, lock.hasQueuedThreads())); <span class="comment">// æ˜¯å¦æœ‰çº¿ç¨‹åœ¨ç­‰å¾…è·å–è¯¥é” false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ReentrantReadWriteLock"><a href="#ReentrantReadWriteLock" class="headerlink" title="ReentrantReadWriteLock"></a>ReentrantReadWriteLock</h3><blockquote><p>è¯»å†™é”</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¯»å†™é”</span></span><br><span class="line"><span class="comment">     * è¯»é” &amp; è¯»é” ä¹‹é—´ä¸ä¼šå µå¡</span></span><br><span class="line"><span class="comment">     * å†™é” &amp; è¯»é”/å†™é” éƒ½ä¼šå‘ç”Ÿå µå¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">reentrantReadWriteLock</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        ReentrantReadWriteLock lock = <span class="keyword">new</span> ReentrantReadWriteLock();</span><br><span class="line">    </span><br><span class="line">        Runnable rRunable = () -&gt; &#123;</span><br><span class="line">            lock.readLock().lock();</span><br><span class="line">            System.out.println(String.format(<span class="string">"è·å– %sé” %s"</span>, lock.isWriteLocked()?<span class="string">"å†™"</span>:<span class="string">"è¯»"</span>, Thread.currentThread().getName()));</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(String.format(<span class="string">"å…³æ‰ %sé” %s"</span>, lock.isWriteLocked()?<span class="string">"å†™"</span>:<span class="string">"è¯»"</span>, Thread.currentThread().getName()));</span><br><span class="line">            lock.readLock().unlock();</span><br><span class="line">        &#125;;</span><br><span class="line">        Runnable wRunable = () -&gt; &#123;</span><br><span class="line">            lock.writeLock().lock();</span><br><span class="line">            System.out.println(String.format(<span class="string">"è·å– %sé” %s"</span>, lock.isWriteLocked()?<span class="string">"å†™"</span>:<span class="string">"è¯»"</span>, Thread.currentThread().getName()));</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(String.format(<span class="string">"å…³æ‰ %sé” %s"</span>, lock.isWriteLocked()?<span class="string">"å†™"</span>:<span class="string">"è¯»"</span>, Thread.currentThread().getName()));</span><br><span class="line">            lock.writeLock().unlock();</span><br><span class="line">        &#125;;</span><br><span class="line">        Thread rthread = <span class="keyword">new</span> Thread(rRunable);</span><br><span class="line">        Thread rthread2 = <span class="keyword">new</span> Thread(rRunable);</span><br><span class="line">        Thread wthread = <span class="keyword">new</span> Thread(wRunable);</span><br><span class="line">        Thread wthread2 = <span class="keyword">new</span> Thread(wRunable);</span><br><span class="line">    </span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * è¯»-&gt;å†™-&gt;è¯»</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * è·å– è¯»é” Thread-1</span></span><br><span class="line"><span class="comment">         * å…³æ‰ è¯»é” Thread-1</span></span><br><span class="line"><span class="comment">         * è·å– å†™é” Thread-3</span></span><br><span class="line"><span class="comment">         * å…³æ‰ å†™é” Thread-3</span></span><br><span class="line"><span class="comment">         * è·å– è¯»é” Thread-2</span></span><br><span class="line"><span class="comment">         * å…³æ‰ è¯»é” Thread-2</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"><span class="comment">//        System.out.println("è¯»-&gt;å†™-&gt;è¯»");</span></span><br><span class="line"><span class="comment">//        rthread.start();</span></span><br><span class="line"><span class="comment">//        Thread.sleep(100);</span></span><br><span class="line"><span class="comment">//        wthread.start();</span></span><br><span class="line"><span class="comment">//        Thread.sleep(100);</span></span><br><span class="line"><span class="comment">//        rthread2.start();</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * è¯»-&gt;è¯»-&gt;å†™</span></span><br><span class="line"><span class="comment">         * è·å– è¯»é” Thread-1</span></span><br><span class="line"><span class="comment">         * è·å– è¯»é” Thread-2</span></span><br><span class="line"><span class="comment">         * å…³æ‰ è¯»é” Thread-1</span></span><br><span class="line"><span class="comment">         * å…³æ‰ è¯»é” Thread-2</span></span><br><span class="line"><span class="comment">         * è·å– å†™é” Thread-3</span></span><br><span class="line"><span class="comment">         * å…³æ‰ å†™é” Thread-3</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"><span class="comment">//        System.out.println("è¯»-&gt;è¯»-&gt;å†™");</span></span><br><span class="line"><span class="comment">//        rthread.start();</span></span><br><span class="line"><span class="comment">//        Thread.sleep(100);</span></span><br><span class="line"><span class="comment">//        rthread2.start();</span></span><br><span class="line"><span class="comment">//        Thread.sleep(100);</span></span><br><span class="line"><span class="comment">//        wthread.start();</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * å†™-&gt;å†™-&gt;è¯»</span></span><br><span class="line"><span class="comment">         * è·å– å†™é” Thread-3</span></span><br><span class="line"><span class="comment">         * å…³æ‰ å†™é” Thread-3</span></span><br><span class="line"><span class="comment">         * è·å– å†™é” Thread-4</span></span><br><span class="line"><span class="comment">         * å…³æ‰ å†™é” Thread-4</span></span><br><span class="line"><span class="comment">         * è·å– è¯»é” Thread-1</span></span><br><span class="line"><span class="comment">         * å…³æ‰ è¯»é” Thread-1</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        System.out.println(<span class="string">"å†™-&gt;å†™-&gt;è¯»"</span>);</span><br><span class="line">        wthread.start();</span><br><span class="line">        Thread.sleep(<span class="number">100</span>);</span><br><span class="line">        wthread2.start();</span><br><span class="line">        Thread.sleep(<span class="number">100</span>);</span><br><span class="line">        rthread.start();</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">        Thread.sleep(<span class="number">5000</span>);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="StampedLock"><a href="#StampedLock" class="headerlink" title="StampedLock"></a>StampedLock</h3><blockquote><p>é‚®ç¥¨é”, ReentrantReadWriteLock çš„å‡çº§ç‰ˆ<br>å†™é”ã€è¯»é”ã€æ–°å¢(ä¹è§‚è¯»é”ã€é”çš„è½¬æ¢)</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é‚®ç¥¨é”</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> InterruptedException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stampedLock</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    StampedLock lock = <span class="keyword">new</span> StampedLock();</span><br><span class="line">    <span class="keyword">int</span> demo = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å†™é”</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">long</span> stamp = lock.writeLock();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        demo = <span class="number">1</span>;</span><br><span class="line">    &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">        lock.unlockWrite(stamp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¯»é”</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    stamp = lock.readLock();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        System.out.println(demo);</span><br><span class="line">    &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">        lock.unlockRead(stamp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¹è§‚è¯»é”</span></span><br><span class="line"><span class="comment">     * ä¸€èˆ¬æƒ…å†µè¯»å†™å¹¶ä¸å†²çªï¼Œä½†ä¹Ÿå¯ä»¥é€šè¿‡æ£€æµ‹ç”³è¯·ä¹è§‚è¯»é”åæ˜¯å¦æœ‰å†™é”è¢«ç”³è¯·ï¼Œå¦‚æœæœ‰å¯ä»¥å†è¿›è¡Œé‡æ–°ç”³è¯·ä¸ºè¯»é”ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    stamp = lock.tryOptimisticRead();</span><br><span class="line">    <span class="keyword">if</span> (!lock.validate(stamp)) &#123;</span><br><span class="line">        stamp = lock.readLock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(demo);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlockRead(stamp);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        System.out.println(demo);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="Synchronized"><a href="#Synchronized" class="headerlink" title="Synchronized"></a>Synchronized</h2><h3 id="ä½¿ç”¨çº§åˆ«"><a href="#ä½¿ç”¨çº§åˆ«" class="headerlink" title="ä½¿ç”¨çº§åˆ«"></a>ä½¿ç”¨çº§åˆ«</h3><ul><li>å®ä¾‹å¯¹è±¡å‡½æ•°<code>thisé”</code></li><li>é™æ€å‡½æ•°<code>classé”</code></li><li>ä»£ç å—<code>æŒ‡å®šçš„é”</code></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SynchronizedTest</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å½“çº¿ç¨‹1åŒæ­¥å—æ­£åœ¨æ‰§è¡Œï¼Œçº¿ç¨‹2å¤„äºé˜»å¡çŠ¶æ€(BLOCKED)</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> InterruptedException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">state</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Runnable runnable = () -&gt; &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (SynchronizedTest.class) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="comment">// ä¸ä¼šè®©å‡ºé”</span></span><br><span class="line">                    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread(runnable);</span><br><span class="line">        Thread thread2 = <span class="keyword">new</span> Thread(runnable);</span><br><span class="line">        thread.start();</span><br><span class="line">        thread2.start();</span><br><span class="line">        Thread.sleep(<span class="number">100</span>);</span><br><span class="line">        System.out.println(String.format(<span class="string">"é˜»å¡çš„çº¿ç¨‹2(%s) çŠ¶æ€: %s"</span>, thread2.getName(), thread2.getState())); <span class="comment">// é˜»å¡çš„çº¿ç¨‹2(Thread-2) çŠ¶æ€: BLOCKED</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤šä¸ªåŒæ­¥å—å…±ç”¨ä¸€æŠŠé”, å½“çº¿ç¨‹1åŒæ­¥å—1æ­£åœ¨æ‰§è¡Œï¼Œçº¿ç¨‹2åœ¨åŒæ­¥å—2å¤„äºé˜»å¡çŠ¶æ€(BLOCKED)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">multiSync</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>&#123;</span><br><span class="line">            <span class="keyword">private</span> <span class="keyword">final</span> Object LOCK = <span class="keyword">new</span> Object();</span><br><span class="line">            </span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sync1</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (LOCK) &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sync2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (LOCK) &#123;</span><br><span class="line">                    System.out.println(<span class="string">"æ‰§è¡Œä¸­.."</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        Demo demo = <span class="keyword">new</span> Demo();</span><br><span class="line">        </span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                demo.sync1();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        Thread thread2 = <span class="keyword">new</span> Thread(demo::sync2);</span><br><span class="line">        thread.start();</span><br><span class="line">        thread2.start();</span><br><span class="line">        </span><br><span class="line">        Thread.sleep(<span class="number">100</span>);</span><br><span class="line">        System.out.println(String.format(<span class="string">"é˜»å¡çš„çº¿ç¨‹2(%s) çŠ¶æ€: %s"</span>, thread2.getName(), thread2.getState())); <span class="comment">// é˜»å¡çš„çº¿ç¨‹2(Thread-2) çŠ¶æ€: BLOCKED</span></span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ­»é”</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> InterruptedException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deadlock</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Object LOCK = <span class="keyword">new</span> Object();</span><br><span class="line">        Object LOCK2 = <span class="keyword">new</span> Object();</span><br><span class="line">        </span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (LOCK) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">10</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">synchronized</span> (LOCK2) &#123;</span><br><span class="line">                    ;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        Thread thread2 = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (LOCK2) &#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (LOCK) &#123;</span><br><span class="line">                    ;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        thread.start();</span><br><span class="line">        thread2.start();</span><br><span class="line">        </span><br><span class="line">        Thread.sleep(<span class="number">100</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">boolean</span> b = thread.getState().equals(Thread.State.BLOCKED) &amp;&amp; thread2.getState().equals(Thread.State.BLOCKED);</span><br><span class="line">        <span class="keyword">if</span> (b) &#123;</span><br><span class="line">            System.out.println(String.format(<span class="string">"%s å’Œ %s æ­»é”"</span>, thread.getName(), thread2.getName()));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"æœªå‘ç”Ÿæ­»é”"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// Thread-1 å’Œ Thread-2 æ­»é”</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å…³äºJavaå¤šçº¿ç¨‹-å¯è§æ€§ã€CASã€AQSã€é”&lt;/p&gt;
    
    </summary>
    
      <category term="Java" scheme="https://hocg.in/categories/Java/"/>
    
    
      <category term="Java" scheme="https://hocg.in/tags/Java/"/>
    
      <category term="å¤šçº¿ç¨‹" scheme="https://hocg.in/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>å…³äºJava-Unsafe/LockSupport</title>
    <link href="https://hocg.in/2018/03/02/%E5%85%B3%E4%BA%8EJava-Unsafe:LockSupport/"/>
    <id>https://hocg.in/2018/03/02/å…³äºJava-Unsafe:LockSupport/</id>
    <published>2018-03-02T02:02:39.000Z</published>
    <updated>2018-07-03T05:29:39.417Z</updated>
    
    <content type="html"><![CDATA[<p>å…³äºJava Unsafe/LockSupport</p><a id="more"></a><h2 id="Unsafe"><a href="#Unsafe" class="headerlink" title="Unsafe"></a>Unsafe</h2><blockquote><p>ä¸€ä¸ªé«˜æ•ˆåº•å±‚å‡½æ•°ï¼Œå¯ä»¥å®ç°å†…å­˜ç®¡ç†ã€å¯¹è±¡å®ä¾‹åŒ–(ä¸é€šè¿‡æ„é€ å‡½æ•°)ã€æ“ä½œå‡½æ•°+ç±»+å˜é‡(é€šè¿‡ä½¿ç”¨åœ°å€)ã€å¤šçº¿ç¨‹åŒæ­¥(æŒ‚èµ·<code>é”</code>ã€CAS)ã€æŒ‚èµ·å’Œæ¢å¤ã€æ•°ç»„ã€å†…å­˜å±éšœã€‚</p></blockquote><h3 id="å…·ä½“å®è·µä»£ç "><a href="#å…·ä½“å®è·µä»£ç " class="headerlink" title="å…·ä½“å®è·µä»£ç "></a>å…·ä½“å®è·µä»£ç </h3><blockquote><p>Unsafe ä¸­åœ¨é«˜å¹¶å‘å’Œé«˜æ€§èƒ½çš„åœºæ™¯ä¸‹å…·æœ‰æ˜¾è‘—çš„æ•ˆæœã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> in.hocg.lock;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"><span class="keyword">import</span> sun.misc.Unsafe;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by hocgin on 2018/3/2.</span></span><br><span class="line"><span class="comment"> * email: hocgin@gmail.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UnsafeTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> Integer integer;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">static</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"static&#123;&#125;"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(<span class="string">"&#123;&#125;"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Demo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            integer = <span class="number">0</span>;</span><br><span class="line">            System.out.println(<span class="string">"Demo()"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">public</span> Integer <span class="title">getInteger</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"getInteger()"</span>);</span><br><span class="line">            <span class="keyword">return</span> integer;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setInteger</span><span class="params">(Integer integer)</span> </span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"setInteger()"</span>);</span><br><span class="line">            <span class="keyword">this</span>.integer = integer;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨ Unsafe åˆ›å»ºå¯¹è±¡ï¼Œä¸ä¼šè°ƒç”¨æ„é€ å‡½æ•°ã€‚</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> NoSuchFieldException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IllegalAccessException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> InstantiationException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">instantiation</span><span class="params">()</span> <span class="keyword">throws</span> NoSuchFieldException, IllegalAccessException, InstantiationException </span>&#123;</span><br><span class="line">        Demo o = ((Demo) getUnsafe().allocateInstance(Demo.class));</span><br><span class="line">        System.out.println(String.format(<span class="string">"hashCode:: %d"</span>, o.hashCode()));</span><br><span class="line">        <span class="comment">// æ­¤å¤„ä¼šæ‰“å° "static&#123;&#125;" å› æ­¤ä»ç„¶ä¼šæ‰§è¡Œé™æ€ä»£ç å—å†…å®¹</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨ Unsafe ä¿®æ”¹ç§æœ‰å­—æ®µ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">altering</span><span class="params">()</span> <span class="keyword">throws</span> NoSuchFieldException, IllegalAccessException </span>&#123;</span><br><span class="line">        Demo demo = <span class="keyword">new</span> Demo();</span><br><span class="line">        Field field = demo.getClass().getDeclaredField(<span class="string">"integer"</span>);</span><br><span class="line">        </span><br><span class="line">        Unsafe unsafe = getUnsafe();</span><br><span class="line">        unsafe.putObject(demo, unsafe.objectFieldOffset(field), <span class="number">1</span>);</span><br><span class="line">        System.out.println(String.format(<span class="string">"getInteger() = %d"</span>, demo.getInteger()));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨ Unsafe æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> NoSuchFieldException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IllegalAccessException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">throwing</span><span class="params">()</span> <span class="keyword">throws</span> NoSuchFieldException, IllegalAccessException </span>&#123;</span><br><span class="line">        getUnsafe().throwException(<span class="keyword">new</span> NullPointerException());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ†é…ä¸€å—GCæ— æ³•ç®¡ç†çš„å†…å­˜åŒºåŸŸ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">memory</span><span class="params">()</span> <span class="keyword">throws</span> NoSuchFieldException, IllegalAccessException </span>&#123;</span><br><span class="line">        Unsafe unsafe = getUnsafe();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> size = <span class="number">1024</span>;</span><br><span class="line">        <span class="comment">// åˆ†é…å†…å­˜åœ°å€</span></span><br><span class="line">        <span class="keyword">long</span> address = unsafe.allocateMemory(size * <span class="number">1</span>);</span><br><span class="line">        <span class="comment">// å†™å…¥</span></span><br><span class="line">        unsafe.putInt(address + <span class="number">4</span> * <span class="number">1</span>, <span class="number">100</span>);</span><br><span class="line">        <span class="comment">// è¯»å–</span></span><br><span class="line">        <span class="keyword">int</span> i = unsafe.getInt(address + <span class="number">4</span> * <span class="number">1</span>);</span><br><span class="line">        System.out.println(i);</span><br><span class="line">    </span><br><span class="line">        <span class="comment">// é‡Šæ”¾å†…å­˜</span></span><br><span class="line">        unsafe.freeMemory(address);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿›è¡ŒCASæ“ä½œï¼Œå•çº¯ä½¿ç”¨ Java å¹¶ä¸èƒ½æœ‰æ•ˆçš„è§£å†³CASæ“ä½œ, å…¶ä¸»è¦é€šè¿‡ Unsafe ä½¿ç”¨ç¡¬ä»¶çº§åˆ«æ¥è§£å†³CASæ“ä½œ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> NoSuchFieldException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IllegalAccessException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cas</span><span class="params">()</span> <span class="keyword">throws</span> NoSuchFieldException, IllegalAccessException </span>&#123;</span><br><span class="line">        Unsafe unsafe = getUnsafe();</span><br><span class="line">        Demo demo = <span class="keyword">new</span> Demo();</span><br><span class="line">        Field field = demo.getClass().getDeclaredField(<span class="string">"integer"</span>);</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * compareAndSwapXXX</span></span><br><span class="line"><span class="comment">         * å‚æ•°</span></span><br><span class="line"><span class="comment">         * 1. æŒ‡å®šå¯¹è±¡</span></span><br><span class="line"><span class="comment">         * 2. å­—æ®µçš„åç§»åœ°å€</span></span><br><span class="line"><span class="comment">         * 3. å½“å‰å€¼</span></span><br><span class="line"><span class="comment">         * 4. æœŸæœ›å€¼</span></span><br><span class="line"><span class="comment">         * è¿”å›å€¼</span></span><br><span class="line"><span class="comment">         *   "è®¤ä¸ºçš„æ—§å€¼"=="å®é™…æ—§å€¼",ä¿®æ”¹æˆ"æœŸæœ›å€¼"å†è¿”å› True: ä¿®æ”¹æˆåŠŸ</span></span><br><span class="line"><span class="comment">         *   "è®¤ä¸ºçš„æ—§å€¼"!="å®é™…æ—§å€¼",ç›´æ¥è¿”å› False: ä¿®æ”¹å¤±è´¥</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">boolean</span> state; <span class="comment">// CAS çŠ¶æ€</span></span><br><span class="line">        Integer integer1 = <span class="number">0</span>; <span class="comment">// è®¤ä¸ºçš„æ—§å€¼</span></span><br><span class="line">        Integer integer2 = demo.getInteger(); <span class="comment">// å®é™…æ—§å€¼</span></span><br><span class="line">        <span class="keyword">int</span> o1 = <span class="number">1</span>; <span class="comment">// æœŸæœ›å€¼</span></span><br><span class="line">        <span class="keyword">while</span> (!(state = unsafe.compareAndSwapObject(demo, unsafe.objectFieldOffset(field), integer1, o1))) &#123;</span><br><span class="line">            System.out.println(<span class="string">"å†æ¬¡å°è¯•ä¿®æ”¹"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(String.format(<span class="string">"1 .CAS State: %b, è®¤ä¸ºçš„æ—§å€¼ %d, å®é™…æ—§å€¼ %d, æœŸæœ›å€¼ %d"</span>, state, integer1, integer2, o1));</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">        integer2 = demo.getInteger(); <span class="comment">// å®é™…æ—§å€¼</span></span><br><span class="line">        state = unsafe.compareAndSwapObject(demo, unsafe.objectFieldOffset(field), integer1, o1);</span><br><span class="line">        System.out.println(String.format(<span class="string">"2 .CAS State: %b, è®¤ä¸ºçš„æ—§å€¼ %d, å®é™…æ—§å€¼ %d, æœŸæœ›å€¼ %d"</span>, state, integer1, integer2, o1));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ©ç”¨OSåº•å±‚çš„æ–¹å¼æ¥å®ç°æŒ‚èµ·ï¼Œç›¸è¾ƒäºObject.wait()æ‹¥æœ‰æ›´å¥½çš„æ€§èƒ½</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> NoSuchFieldException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IllegalAccessException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> InterruptedException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">park</span><span class="params">()</span> <span class="keyword">throws</span> NoSuchFieldException, IllegalAccessException, InterruptedException </span>&#123;</span><br><span class="line">        Unsafe unsafe = getUnsafe();</span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * å‚æ•°</span></span><br><span class="line"><span class="comment">             * 1. isAbsolute, æ˜¯å¦ä¸ºç»å¯¹æ—¶é—´ã€‚</span></span><br><span class="line"><span class="comment">             * 2. time, ç¬¬ä¸€ä¸ªå‚æ•°(isAbsolute)ä¸º True æ—¶è¯¥å‚æ•°åº”ä¸ºçº³ç§’, False æ—¶è¯¥å‚æ•°åº”ä¸ºæ¯«ç§’ã€‚0ä¸ºæ— çº¿ç­‰å¾…ï¼Œç›´åˆ°unparkã€‚</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            unsafe.park(<span class="keyword">false</span>, <span class="number">0</span>); <span class="comment">// æŒ‚èµ· -&gt; WAITING</span></span><br><span class="line">        &#125;);</span><br><span class="line">    </span><br><span class="line">        thread.start();</span><br><span class="line">        Thread.sleep(<span class="number">100</span>);</span><br><span class="line">        System.out.println(String.format(<span class="string">"çº¿ç¨‹ %s çŠ¶æ€ %s"</span>, thread.getName(), thread.getState()));</span><br><span class="line">    </span><br><span class="line">        Thread.sleep(<span class="number">100</span>);</span><br><span class="line">        unsafe.unpark(thread);</span><br><span class="line">        Thread.sleep(<span class="number">100</span>);</span><br><span class="line">        System.out.println(String.format(<span class="string">"çº¿ç¨‹ %s çŠ¶æ€ %s"</span>, thread.getName(), thread.getState()));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Basic</span></span><br><span class="line"><span class="comment">     * Unsafe unsafe = Unsafe.getUnsafe();</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IllegalAccessException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> NoSuchFieldException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Unsafe <span class="title">getUnsafe</span><span class="params">()</span> <span class="keyword">throws</span> IllegalAccessException, NoSuchFieldException </span>&#123;</span><br><span class="line">        Field f = Unsafe.class.getDeclaredField(<span class="string">"theUnsafe"</span>);</span><br><span class="line">        f.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">        <span class="keyword">return</span> (Unsafe) f.get(<span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LockSupport"><a href="#LockSupport" class="headerlink" title="LockSupport"></a>LockSupport</h2><blockquote><p>å…¶æœ¬è´¨æ˜¯<code>Unsafe</code>çš„è–„å°è£…ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">park</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    Thread thread = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * è¿›è¡ŒæŒ‚èµ·</span></span><br><span class="line"><span class="comment">         * æœ¬è´¨ä½¿ç”¨ UNSAFE.park(false, 0L);</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        LockSupport.park();</span><br><span class="line">    &#125;);</span><br><span class="line">    thread.start();</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">    System.out.println(String.format(<span class="string">"æŒ‚èµ·çº¿ç¨‹çŠ¶æ€ %s"</span>, thread.getState())); <span class="comment">// WAITING</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿›è¡Œè§£é™¤</span></span><br><span class="line"><span class="comment">     * æœ¬è´¨ä½¿ç”¨ UNSAFE.unpark(thread)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    LockSupport.unpark(thread);</span><br><span class="line">    Thread.sleep(<span class="number">100</span>);</span><br><span class="line">    System.out.println(String.format(<span class="string">"è§£é™¤æŒ‚èµ·çº¿ç¨‹çŠ¶æ€ %s"</span>, thread.getState())); <span class="comment">// TERMINATED</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">blocker</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    Thread thread = <span class="keyword">new</span> Thread(()-&gt;&#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * çº¿ç¨‹å†…éƒ¨æœ‰ä¸ª parkBlocker å­—æ®µ, LockSupport æœ¬è´¨ä¸Šä½¿ç”¨ Unsafe è¿›è¡Œå†…å­˜ä¿®æ”¹ã€‚</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        LockSupport.park(<span class="string">"sdas"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    thread.start();</span><br><span class="line">    Thread.sleep(<span class="number">100</span>);</span><br><span class="line">    System.out.println(String.format(<span class="string">"æŒ‚èµ· %s"</span>, LockSupport.getBlocker(thread))); <span class="comment">// æŒ‚èµ· sdas</span></span><br><span class="line">    </span><br><span class="line">    LockSupport.unpark(thread);</span><br><span class="line">    Thread.sleep(<span class="number">100</span>);</span><br><span class="line">    System.out.println(String.format(<span class="string">"è§£é™¤æŒ‚èµ· %s"</span>, LockSupport.getBlocker(thread))); <span class="comment">// è§£é™¤æŒ‚èµ· null</span></span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é˜»å¡å’Œè§£é™¤é˜»å¡"><a href="#é˜»å¡å’Œè§£é™¤é˜»å¡" class="headerlink" title="é˜»å¡å’Œè§£é™¤é˜»å¡"></a>é˜»å¡å’Œè§£é™¤é˜»å¡</h3><blockquote><p>æ€»ç»“: ä½¿ç”¨<code>LockSupport</code>æ›´å…·æœ‰çµæ´»æ€§ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Object LOCK = <span class="keyword">new</span> Object();</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * notifyAll å®ç°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> InterruptedException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">notifyAll2</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    Runnable runnable = () -&gt; &#123;</span><br><span class="line">        System.out.println(String.format(<span class="string">"å¼€å§‹è¿è¡Œ %s"</span>, Thread.currentThread().getName()));</span><br><span class="line">        <span class="keyword">synchronized</span> (LOCK) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                LOCK.wait();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(String.format(<span class="string">"è§£é™¤é” %s"</span>, Thread.currentThread().getName()));</span><br><span class="line">    &#125;;</span><br><span class="line">    CompletableFuture.allOf(CompletableFuture.runAsync(runnable),</span><br><span class="line">            CompletableFuture.runAsync(runnable), CompletableFuture.runAsync(runnable), CompletableFuture.runAsync(runnable));</span><br><span class="line">    </span><br><span class="line">    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">    <span class="keyword">synchronized</span> (LOCK) &#123;</span><br><span class="line">        LOCK.notify();</span><br><span class="line">        System.out.println(<span class="string">"é€šçŸ¥å®Œæ¯•"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * unpark é€šçŸ¥æ‰€æœ‰éœ€è‡ªå·±å®ç°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> InterruptedException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">unparkAll</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    List&lt;Thread&gt; threads = Collections.synchronizedList(<span class="keyword">new</span> ArrayList&lt;&gt;());</span><br><span class="line">    </span><br><span class="line">    Runnable runnable = () -&gt; &#123;</span><br><span class="line">        Thread thread = Thread.currentThread();</span><br><span class="line">        threads.add(thread);</span><br><span class="line">        System.out.println(String.format(<span class="string">"å¼€å§‹è¿è¡Œ %s"</span>, thread.getName()));</span><br><span class="line">        LockSupport.park();</span><br><span class="line">        System.out.println(String.format(<span class="string">"è§£é™¤é” %s"</span>, thread.getName()));</span><br><span class="line">    &#125;;</span><br><span class="line">    CompletableFuture&lt;Void&gt; future = CompletableFuture.allOf(CompletableFuture.runAsync(runnable),</span><br><span class="line">            CompletableFuture.runAsync(runnable), CompletableFuture.runAsync(runnable), CompletableFuture.runAsync(runnable));</span><br><span class="line"></span><br><span class="line">    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">    <span class="keyword">for</span> (Thread thread : threads) &#123;</span><br><span class="line">        LockSupport.unpark(thread);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">"é€šçŸ¥å®Œæ¯•"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="park-unpark-ä¸-wait-notify-æ€»ç»“"><a href="#park-unpark-ä¸-wait-notify-æ€»ç»“" class="headerlink" title="park/unpark ä¸ wait/notify æ€»ç»“"></a>park/unpark ä¸ wait/notify æ€»ç»“</h3><p>ç›¸æ¯”äºä½¿ç”¨ <code>Object.wait</code>/<code>Object.notify</code>,<code>LockSupport.unpark</code>/<code>LockSupport.park</code> æ›´å…·æœ‰çµæ´»æ€§ã€‚</p><ol><li>ä¸å±€é™äºåŒæ­¥å—å†…</li><li>çµæ´»çš„ API(ä¾‹å¦‚æ—¶é—´)</li><li>å¯æŒ‡å®šå”¤é†’(å½“å¤šä¸ªè¿›å…¥waitæ—¶Object.notifyæ˜¯éšæœºå”¤é†’å…¶ä¸­ä¸€ä¸ª)ã€‚</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å…³äºJava Unsafe/LockSupport&lt;/p&gt;
    
    </summary>
    
      <category term="Java" scheme="https://hocg.in/categories/Java/"/>
    
    
      <category term="å¤šçº¿ç¨‹" scheme="https://hocg.in/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"/>
    
      <category term="é”" scheme="https://hocg.in/tags/%E9%94%81/"/>
    
  </entry>
  
  <entry>
    <title>å…³äºJavaå¹¶å‘-çº¿ç¨‹</title>
    <link href="https://hocg.in/2018/02/27/%E5%85%B3%E4%BA%8EJava%E5%A4%9A%E7%BA%BF%E7%A8%8B-%E7%BA%BF%E7%A8%8B/"/>
    <id>https://hocg.in/2018/02/27/å…³äºJavaå¤šçº¿ç¨‹-çº¿ç¨‹/</id>
    <published>2018-02-26T17:13:39.000Z</published>
    <updated>2018-10-11T13:39:15.386Z</updated>
    
    <content type="html"><![CDATA[<p>å…³äºJavaå¹¶å‘-çº¿ç¨‹</p><a id="more"></a><h2 id="å¹¶å‘å’Œå¹¶è¡Œ"><a href="#å¹¶å‘å’Œå¹¶è¡Œ" class="headerlink" title="å¹¶å‘å’Œå¹¶è¡Œ"></a>å¹¶å‘å’Œå¹¶è¡Œ</h2><p>å¹¶è¡Œ: å¤šæ ¸åŒæ—¶æ‰§è¡Œ<br>å¹¶å‘: å•æ ¸åˆ‡æ¢æ‰§è¡Œ</p><p><img src="http://cdn.hocgin.top/v2-674f0d37fca4fac1bd2df28a2b78e633_hd.jpg" alt="v2-674f0d37fca4fac1bd2df28a2b78e633_hd.jpg"></p><hr><h2 id="çº¿ç¨‹"><a href="#çº¿ç¨‹" class="headerlink" title="çº¿ç¨‹"></a>çº¿ç¨‹</h2><h3 id="çº¿ç¨‹çŠ¶æ€Thread-State"><a href="#çº¿ç¨‹çŠ¶æ€Thread-State" class="headerlink" title="çº¿ç¨‹çŠ¶æ€Thread.State"></a>çº¿ç¨‹çŠ¶æ€<code>Thread.State</code></h3><blockquote><p><code>@since 1.5</code><br>å…³äº Java Thread çŠ¶æ€ä¸å¾—ä¸è¯´çš„æ•…äº‹(ç½‘ç»œä¸Šå„ç§ç‰ˆæœ¬)..</p></blockquote><p><strong>çº¿ç¨‹çš„çŠ¶æ€</strong><br><img src="http://www.baeldung.com/wp-content/uploads/2018/02/Life_cycle_of_a_Thread_in_Java.jpg" alt="çº¿ç¨‹çŠ¶æ€å›¾ç‰‡"><br><a href="http://www.baeldung.com/java-thread-lifecycle" target="_blank" rel="external">åŸæ–‡URL</a></p><h3 id="å¤šçº¿ç¨‹æ“ä½œ"><a href="#å¤šçº¿ç¨‹æ“ä½œ" class="headerlink" title="å¤šçº¿ç¨‹æ“ä½œ"></a>å¤šçº¿ç¨‹æ“ä½œ</h3><blockquote><p>å…³äº<code>wait</code>å’Œ<code>notify</code>æ­¤å¤„æ¶‰åŠåˆ°çº¿ç¨‹ä¸­çš„å‡ ä¸ªçŠ¶æ€ï¼Œè¯·å‹¿æ··æ·†ã€‚</p></blockquote><p><strong>ä½¿ç”¨<code>wait</code>/<code>notify</code>å¯¹çº¿ç¨‹è¿›è¡Œæ“ä½œ</strong><br><img src="http://www.baeldung.com/wp-content/uploads/2018/02/Java_-_Wait_and_Notify.png" alt="ä½¿ç”¨wait/notifyå¯¹çº¿ç¨‹è¿›è¡Œæ“ä½œ"><br><a href="http://www.baeldung.com/java-wait-notify" target="_blank" rel="external">ä½¿ç”¨wait/notifyå¯¹çº¿ç¨‹è¿›è¡Œæ“ä½œ</a></p><h3 id="å¯èƒ½çš„è¯¯åŒº"><a href="#å¯èƒ½çš„è¯¯åŒº" class="headerlink" title="å¯èƒ½çš„è¯¯åŒº"></a>å¯èƒ½çš„è¯¯åŒº</h3><ol><li><p>å­çº¿ç¨‹è¢«å…³é—­ï¼Œå­çº¿ç¨‹æ‰€å¼€å¯çš„å­çº¿ç¨‹(å­å­çº¿ç¨‹)ä¼šä¸ä¼šè¢«å…³é—­ï¼Ÿ<br>ç­”æ¡ˆ: ä¸ä¼šçš„, å­çº¿ç¨‹çš„å­çº¿ç¨‹æœ¬è´¨ä¸Šå’Œå­çº¿ç¨‹æ˜¯åŒä¸€ç­‰çº§çš„å¹¶ä¸ä¼šè¢«å…¶å½±å“ã€‚</p></li><li><p>å®ˆæŠ¤çº¿ç¨‹ä»€ä¹ˆæƒ…å†µä¼šè¢«å…³é—­ï¼Ÿ<br>ç­”æ¡ˆ: 1. å®ˆæŠ¤çº¿ç¨‹æ‰§è¡Œå®Œ(è‡ªç„¶å…³é—­)ã€‚ 2.æ‰€æœ‰ç”¨æˆ·çº¿ç¨‹çš„å…³é—­(å¼ºè¡Œå…³é—­)</p></li><li><p>ä»€ä¹ˆæ˜¯å®ˆæŠ¤çº¿ç¨‹ï¼Ÿ<br>ç­”æ¡ˆ: å½“çº¿ç¨‹<code>t.setDaemon(true)</code>è¯¥çº¿ç¨‹å³ä¸ºå®ˆæŠ¤çº¿ç¨‹ã€‚é“›é“›é“›ï¼Œæœ€å‡ºåçš„å®ˆæŠ¤çº¿ç¨‹GCã€‚</p></li><li><p>ç”¨æˆ·çº¿ç¨‹ å’Œ å®ˆæŠ¤çº¿ç¨‹ çš„åŒºåˆ«ï¼Ÿ<br>ç­”æ¡ˆ: <code>å®ˆæŠ¤çº¿ç¨‹[setDaemon(true)]</code>å’Œ<code>ç”¨æˆ·çº¿ç¨‹</code>å¤§ä½“å¹¶æ²¡å•¥åŒºåˆ«, ä½†æ˜¯å®ˆæŠ¤çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸæ˜¯éšç€æ‰€æœ‰ç”¨æˆ·çº¿ç¨‹çš„å…³é—­è€Œé€€å‡ºçš„ã€‚</p></li><li><p>å¦‚ä½•æ€æ­»ä¸€ä¸ªJavaçº¿ç¨‹ï¼Ÿ<br>ç­”æ¡ˆ: Javaå·²ç»ä¸æ¨èä½¿ç”¨<code>stop</code>è¿›è¡Œçº¿ç¨‹çš„å…³é—­äº†ã€‚å¦‚æœçº¿ç¨‹æ˜¯é‚£ç§æŒä¹…å‹æ“ä½œç±»å‹çš„ï¼Œå»ºè®®å¼€è¾Ÿä¸€ä¸ªå®ˆæŠ¤ç±»å‹çš„çº¿ç¨‹è¿›è¡Œå›æ”¶(æƒ³æ³•å‚ç…§Go)ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">interrupt</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    Thread thread = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">        <span class="keyword">while</span> (!Thread.currentThread().isInterrupted()) &#123;</span><br><span class="line">            System.out.println(<span class="string">"Do something"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    thread.start();</span><br><span class="line">    </span><br><span class="line">    Thread.sleep(<span class="number">100</span>);</span><br><span class="line">    System.out.println(String.format(<span class="string">"çº¿ç¨‹ %s çŠ¶æ€ %s"</span>, thread.getName(), thread.getState()));</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * çº¿ç¨‹ RUNNABLE çŠ¶æ€ä¼šæ ‡è®°ä¸ºå…³é—­ï¼Œå¹¶ä¸è¿›è¡Œå…³é—­ã€‚</span></span><br><span class="line"><span class="comment">     * çº¿ç¨‹ å…¶ä»– çŠ¶æ€ä¼šæ ‡è®°å¹¶è¿›è¡Œå…³é—­ã€‚</span></span><br><span class="line"><span class="comment">     * - å·²ç»ä¸æ¨èä½¿ç”¨ thread.stop(); å¯èƒ½ä¼šå¼•èµ·èµ„æºé—®é¢˜ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    thread.interrupt();</span><br><span class="line">    Thread.sleep(<span class="number">100</span>);</span><br><span class="line">    System.out.println(String.format(<span class="string">"çº¿ç¨‹ %s çŠ¶æ€ %s"</span>, thread.getName(), thread.getState()));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><hr><h2 id="çº¿ç¨‹æ± "><a href="#çº¿ç¨‹æ± " class="headerlink" title="çº¿ç¨‹æ± "></a>çº¿ç¨‹æ± </h2><h3 id="å‰ç½®"><a href="#å‰ç½®" class="headerlink" title="å‰ç½®"></a>å‰ç½®</h3><ul><li>Runable æ— è¿”å›å€¼</li><li>Callable æœ‰è¿”å›å€¼</li><li>Future è¿”å›ç»“æœ</li></ul><h3 id="newCachedThreadPool"><a href="#newCachedThreadPool" class="headerlink" title="newCachedThreadPool()"></a>newCachedThreadPool()</h3><blockquote><p>åˆ›å»ºä¸€ä¸ªå¯ç¼“å­˜çš„çº¿ç¨‹æ± ï¼Œå…¶æŒ‡å®šçº¿ç¨‹æ± ä¸­çº¿ç¨‹çš„å­˜æ´»æ—¶é—´ï¼Œé»˜è®¤ä¸º 60sã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ExecutorService <span class="title">newCachedThreadPool</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ThreadPoolExecutor(<span class="number">0</span>, Integer.MAX_VALUE,</span><br><span class="line">                                  <span class="number">60L</span>, TimeUnit.SECONDS,</span><br><span class="line">                                  <span class="keyword">new</span> SynchronousQueue&lt;Runnable&gt;());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è¿™è¾¹æºç æœ‰æ³¨é‡Š:å½“ä½ æƒ³å®ç°ä¸€äº›ç¼“å­˜ç›¸å…³çš„ç»†èŠ‚(å¦‚è¶…æ—¶æ—¶é—´)ï¼Œåº”è¯¥è‡ªå·±ä½¿ç”¨<code>ThreadPoolExecutor</code>çš„æ„é€ å‡½æ•°æ¥åˆ›å»ºã€‚</p></blockquote><h3 id="newSingleThreadExecutor"><a href="#newSingleThreadExecutor" class="headerlink" title="newSingleThreadExecutor"></a>newSingleThreadExecutor</h3><blockquote><p>åˆ›å»ºä¸€ä¸ªæ–°çš„å•çº¿ç¨‹Executorï¼Œå…¶æŒ‡å®šçº¿ç¨‹æ± ä¸­çº¿ç¨‹æœ€å¤§æ•°é‡ä¸º1ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ExecutorService <span class="title">newSingleThreadExecutor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> FinalizableDelegatedExecutorService</span><br><span class="line">        (<span class="keyword">new</span> ThreadPoolExecutor(<span class="number">1</span>, <span class="number">1</span>,</span><br><span class="line">                                <span class="number">0L</span>, TimeUnit.MILLISECONDS,</span><br><span class="line">                                <span class="keyword">new</span> LinkedBlockingQueue&lt;Runnable&gt;()));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><ol><li>æ­¤å¤„ä¸ºä½•ä½¿ç”¨<code>é—¨é¢æ¨¡å¼</code>å‘¢ï¼Ÿæ³¨é‡Šå†™æ˜åªæš´éœ²<code>ExecutorService</code>æ¥å£çš„æ–¹æ³•, åº”è¯¥æ˜¯ä¸ºäº†é˜²æ­¢å¼ºåˆ¶ä½¿ç”¨<code>ThreadPoolExecutor</code>ç›¸å…³å‡½æ•°ã€‚</li><li>ç›¸æ¯”äº<code>newFixedThreadPool(1)</code>, è¯¥å‡½æ•°ä¿è¯ä¸ä¼šè¢«é‡æ–°åˆ†é…åˆ°å…¶ä»–çš„çº¿ç¨‹ã€‚</li></ol></blockquote><h3 id="newFixedThreadPool"><a href="#newFixedThreadPool" class="headerlink" title="newFixedThreadPool"></a>newFixedThreadPool</h3><blockquote><p>åˆ›å»ºä¸€ä¸ªå›ºå®šå¤§å°çš„çº¿ç¨‹æ± <br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ExecutorService <span class="title">newFixedThreadPool</span><span class="params">(<span class="keyword">int</span> nThreads)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ThreadPoolExecutor(nThreads, nThreads,</span><br><span class="line">                                  <span class="number">0L</span>, TimeUnit.MILLISECONDS,</span><br><span class="line">                                  <span class="keyword">new</span> LinkedBlockingQueue&lt;Runnable&gt;());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ³¨é‡Šä¸­è¯´æ˜: æäº¤çš„ä»»åŠ¡çº¿ç¨‹å°†ä¸€ç›´å­˜åœ¨ï¼Œç›´åˆ°ä½¿ç”¨ ExecutorService#shutdown è¿›è¡Œé€€å‡º</p></blockquote><h3 id="newScheduledThreadPool"><a href="#newScheduledThreadPool" class="headerlink" title="newScheduledThreadPool"></a>newScheduledThreadPool</h3><blockquote><p>åˆ›å»ºä¸€ä¸ªå›ºå®šå¤§å°ä¸”å¯å®šæ—¶çš„çº¿ç¨‹æ± </p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ScheduledExecutorService <span class="title">newScheduledThreadPool</span><span class="params">(<span class="keyword">int</span> corePoolSize)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ScheduledThreadPoolExecutor(corePoolSize);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="newSingleThreadScheduledExecutor"><a href="#newSingleThreadScheduledExecutor" class="headerlink" title="newSingleThreadScheduledExecutor"></a>newSingleThreadScheduledExecutor</h3><blockquote><p>åˆ›å»ºä¸€ä¸ªå¤§å°ä¸º1ä¸”å¯å®šæ—¶çš„çº¿ç¨‹æ± </p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ScheduledExecutorService <span class="title">newSingleThreadScheduledExecutor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> DelegatedScheduledExecutorService</span><br><span class="line">        (<span class="keyword">new</span> ScheduledThreadPoolExecutor(<span class="number">1</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>åŒæ ·ä½¿ç”¨äº†<code>é—¨é¢æ¨¡å¼</code></p></blockquote><h3 id="newWorkStealingPool-å¹¶è¡Œ"><a href="#newWorkStealingPool-å¹¶è¡Œ" class="headerlink" title="newWorkStealingPool å¹¶è¡Œ"></a>newWorkStealingPool <code>å¹¶è¡Œ</code></h3><blockquote><p>åˆ›å»ºä¸€ä¸ªå¹¶è¡Œçº¿ç¨‹æ± (å¹¶è¡Œæ•°ç›®é»˜è®¤ä¸º:ç³»ç»Ÿå¯ç”¨çº¿ç¨‹æ•°ç›®)<br><code>@since 1.8</code></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ExecutorService <span class="title">newWorkStealingPool</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ForkJoinPool</span><br><span class="line">        (Runtime.getRuntime().availableProcessors(),</span><br><span class="line">         ForkJoinPool.defaultForkJoinWorkerThreadFactory,</span><br><span class="line">         <span class="keyword">null</span>, <span class="keyword">true</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="Fork-Join-å¹¶è¡Œ"><a href="#Fork-Join-å¹¶è¡Œ" class="headerlink" title="Fork/Join å¹¶è¡Œ"></a>Fork/Join <code>å¹¶è¡Œ</code></h2><blockquote><p>ä½¿ç”¨å¹¶è¡Œè¿›è¡Œæ“ä½œ<br><code>@since 1.7</code></p></blockquote><h3 id="ç›¸å…³ç±»-æ¥å£è¯´æ˜"><a href="#ç›¸å…³ç±»-æ¥å£è¯´æ˜" class="headerlink" title="ç›¸å…³ç±»/æ¥å£è¯´æ˜"></a>ç›¸å…³ç±»/æ¥å£è¯´æ˜</h3><ul><li>ForkJoinTask é¡¶å±‚æ¥å£, å…¶å®ç°äº†<code>Future</code>ã€‚<ul><li>RecursiveTask æœ‰è¿”å›å€¼</li><li>RecursiveAction æ— è¿”å›å€¼</li></ul></li><li>ForkJoinPool ç±»ä¼¼<code>Executor</code></li></ul><h4 id="æ¡ˆä¾‹"><a href="#æ¡ˆä¾‹" class="headerlink" title="æ¡ˆä¾‹"></a>æ¡ˆä¾‹</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* Main.java</span></span><br><span class="line"><span class="comment">* å“åº”ç»“æœ:</span></span><br><span class="line"><span class="comment">*   TASK:ForkJoinPool.commonPool-worker-1</span></span><br><span class="line"><span class="comment">*   TASK:ForkJoinPool.commonPool-worker-1</span></span><br><span class="line"><span class="comment">*   TASK:ForkJoinPool.commonPool-worker-2</span></span><br><span class="line"><span class="comment">*   TASK:ForkJoinPool.commonPool-worker-1</span></span><br><span class="line"><span class="comment">*   æœ‰æ•ˆå€¼ 4</span></span><br><span class="line"><span class="comment">*   TASK:ForkJoinPool.commonPool-worker-2</span></span><br><span class="line"><span class="comment">*   æœ‰æ•ˆå€¼ 5</span></span><br><span class="line"><span class="comment">*   TASK:ForkJoinPool.commonPool-worker-1</span></span><br><span class="line"><span class="comment">*   æœ‰æ•ˆå€¼ 6</span></span><br><span class="line"><span class="comment">*   TASK:ForkJoinPool.commonPool-worker-1</span></span><br><span class="line"><span class="comment">*   æœ‰æ•ˆå€¼ 7</span></span><br><span class="line"><span class="comment">*   22</span></span><br><span class="line"><span class="comment">**/</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">forkJoinPool</span><span class="params">()</span> <span class="keyword">throws</span> ExecutionException, InterruptedException </span>&#123;</span><br><span class="line">        ForkJoinPool forkJoinPool = ForkJoinPool.commonPool();</span><br><span class="line">        IRecursiveTask iRecursiveTask = <span class="keyword">new</span> IRecursiveTask();</span><br><span class="line">        ForkJoinTask&lt;Integer&gt; task = forkJoinPool.submit(iRecursiveTask);</span><br><span class="line">        System.out.println(task.get());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* IRecursiveTask.java</span></span><br><span class="line"><span class="comment">* .fork() è¿›è¡Œä»»åŠ¡åˆ†è£‚ï¼Œå¹¶ä½¿ç”¨çº¿ç¨‹è¿›è¡Œæ‰§è¡Œ</span></span><br><span class="line"><span class="comment">* .join() ç­‰å¾…æ‰§è¡Œå®Œæˆå¹¶è·å–ç»“æœ</span></span><br><span class="line"><span class="comment">**/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IRecursiveTask</span> <span class="keyword">extends</span> <span class="title">RecursiveTask</span>&lt;<span class="title">Integer</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> AtomicInteger FLAG = <span class="keyword">new</span> AtomicInteger(<span class="number">0</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Integer <span class="title">compute</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"TASK:"</span> + Thread.currentThread().getName());</span><br><span class="line">        FLAG.addAndGet(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (FLAG.get() &gt; <span class="number">3</span>) &#123;</span><br><span class="line">            System.out.println(String.format(<span class="string">"æœ‰æ•ˆå€¼ %d"</span>, FLAG.get()));</span><br><span class="line">            <span class="keyword">return</span> FLAG.get();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ä¸ºä»€ä¹ˆä¸ç”¨ this.fork()ï¼Ÿ</span></span><br><span class="line">        <span class="comment">// this.fork() è¿”å›çš„æ˜¯ this</span></span><br><span class="line">        Integer join1 = <span class="keyword">new</span> IRecursiveTask().fork().join();</span><br><span class="line">        Integer join2 = <span class="keyword">new</span> IRecursiveTask().fork().join();</span><br><span class="line">        <span class="keyword">return</span> join1 + join2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="CompletableFuture-CompletionStage-å¼‚æ­¥-å¹¶è¡Œ"><a href="#CompletableFuture-CompletionStage-å¼‚æ­¥-å¹¶è¡Œ" class="headerlink" title="CompletableFuture/CompletionStage å¼‚æ­¥+å¹¶è¡Œ"></a>CompletableFuture/CompletionStage <code>å¼‚æ­¥+å¹¶è¡Œ</code></h2><blockquote><p>ç›¸æ¯”äº<code>1.7</code>è¿›è¡Œäº†æ›´ç®€ä¾¿ã€å‹å¥½çš„å°è£…ï¼Œå¹¶å¢åŠ äº†å¼‚æ­¥é€šçŸ¥çš„åŠŸèƒ½ï¼Œæ‘†è„±äº†é˜»å¡é—®é¢˜ã€‚<br><code>@since 1.8</code></p></blockquote><h3 id="CompletableFuture"><a href="#CompletableFuture" class="headerlink" title="CompletableFuture"></a>CompletableFuture</h3><blockquote><ol><li><code>CompletableFuture</code>å®ç°äº†<code>CompletionStage</code>ç”¨äºè¿›è¡Œå¼‚æ­¥å¹¶è¡Œ,å¹¶æä¾›å‡½æ•°è®©å¤šä¸ª<code>CompletionStage</code>å¯ä»¥è¿›è¡Œç»„åˆæ“ä½œå’Œæˆ–æ“ä½œã€‚</li></ol></blockquote><h3 id="é™æ€å‡½æ•°-è¿”å›CompletionStage"><a href="#é™æ€å‡½æ•°-è¿”å›CompletionStage" class="headerlink" title="é™æ€å‡½æ•°, è¿”å›CompletionStage"></a>é™æ€å‡½æ•°, è¿”å›<code>CompletionStage</code></h3><ul><li>CompletableFuture.anyOf ä»»æ„ä¸€ä¸ªæ‰§è¡Œå®Œæˆ</li><li>CompletableFuture.allOf æ‰€æœ‰æ‰§è¡Œå®Œæˆ</li><li>CompletableFuture.supplyAsync æ‰§è¡Œå•ä¸ªå¼‚æ­¥,æœ‰è¿”å›å€¼(é»˜è®¤ä½¿ç”¨:ForkJoinPool#commonPool())ã€‚</li><li>CompletableFuture.runAsync æ‰§è¡Œå•ä¸ªå¼‚æ­¥,æ— è¿”å›å€¼</li><li>CompletableFuture.completedFuture è®¾å®šç»“æœ</li></ul><h3 id="CompletionStage-å‡½æ•°"><a href="#CompletionStage-å‡½æ•°" class="headerlink" title="CompletionStage å‡½æ•°"></a>CompletionStage å‡½æ•°</h3><ul><li>thenXXX æµçš„æµå‘(ç­‰å¾…ä¸Šä¸€æ­¥æ‰§è¡Œå®Œæˆ)<ul><li>thenApplyXXX è¿›è¡Œè¾“å…¥çš„è½¬æ¢(Applyï¼š<code>æœ‰è¾“å…¥æœ‰è¾“å‡º</code>)</li><li>thenRunXXX å¯¹ä¸Šä¸€ä¸ªç»“æœä¸å…³å¿ƒï¼Œä¹Ÿæ²¡æœ‰è¿”å›å€¼(Runï¼š<code>æ— è¾“å…¥æ— è¾“å‡º</code>)</li><li>thenAcceptXXX è¿›è¡Œè¾“å…¥å¯¹å¤„ç†(Acceptï¼š<code>æœ‰è¾“å…¥æ— è¾“å‡º</code>)</li><li>thenAcceptBothXXX(CompletionStage,BiConsumer) åŠ å…¥CompletionStage, è¿›è¡ŒæŒ‡å®šå¤„ç†(<code>ç»„åˆæ“ä½œ</code>ï¼Œ<code>æœ‰è¾“å…¥æ— è¾“å‡º</code>)ã€‚</li><li>thenCombineXXX(CompletionStage,BiFunction) åŠ å…¥CompletionStage, è¿›è¡ŒæŒ‡å®šå¤„ç†(<code>ç»„åˆæ“ä½œ</code>ï¼Œ<code>æœ‰è¾“å…¥æœ‰è¾“å‡º</code>)ã€‚</li></ul></li><li>runAfterXXX è¿è¡Œä¹‹å<ul><li>runAfterBothXXX(CompletionStage, Runnable) åŠ å…¥CompletionStage, å¹¶åœ¨å…¶è¿è¡ŒåæŒ‡å®šæ‰§è¡Œ(<code>ç»„åˆæ“ä½œ</code>ï¼Œ<code>æ— è¾“å…¥æ— è¾“å‡º</code>)ã€‚</li><li>runAfterEither(CompletionStage, Runnable) (<code>æˆ–æ“ä½œ</code>)</li></ul></li><li>å®Œæˆ<ul><li>whenCompleteXXX å®Œæˆä¹‹åå¤„ç†ã€‚(æœ‰è¾“å…¥æ— è¾“å‡º)</li><li>handleXXX å®Œæˆä¹‹åå¤„ç†ã€‚(æœ‰è¾“å…¥æœ‰è¾“å‡º)</li></ul></li><li>å¼‚å¸¸å¤„ç†<ul><li>exceptionally å¼‚å¸¸å¤„ç†ã€‚</li></ul></li><li>å…¶ä»–<ul><li>.complete() // ç«‹å³ç»“æŸå¹¶è¿”å›æŒ‡å®šçš„ç»“æœ</li><li>.completeExceptionally() //ç«‹å³å¼‚å¸¸ç»“æŸ</li></ul></li></ul><blockquote><p>è¯´æ˜: </p><ol><li><code>xxxEither</code> åŠ å…¥CompletionStageè¿›è¡ŒORæ“ä½œ(ä¸ä¹‹å‰çš„è¿›è¡Œå¯¹æ¯”),å–æœ€å…ˆè¿”å›çš„ç»“æœå–å…¶ç»“æœå€¼ã€‚  </li><li><code>xxxAsync</code> éƒ½æ˜¯å¼‚æ­¥æ‰§è¡Œ</li></ol></blockquote><hr><h2 id="ç¨å¾®æä¸€ä¸‹-çº¿ç¨‹ç»„"><a href="#ç¨å¾®æä¸€ä¸‹-çº¿ç¨‹ç»„" class="headerlink" title="ç¨å¾®æä¸€ä¸‹,çº¿ç¨‹ç»„"></a>ç¨å¾®æä¸€ä¸‹,çº¿ç¨‹ç»„</h2><blockquote><p>ä¸ºç®¡ç† Thread è€Œå­˜åœ¨çš„ï¼Œå¯ä»¥è¿›è¡Œæ‰¹é‡æ ‡è®°ã€æ£€æŸ¥ã€‚</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å…³äºJavaå¹¶å‘-çº¿ç¨‹&lt;/p&gt;
    
    </summary>
    
      <category term="Java" scheme="https://hocg.in/categories/Java/"/>
    
    
      <category term="Java" scheme="https://hocg.in/tags/Java/"/>
    
      <category term="å¤šçº¿ç¨‹" scheme="https://hocg.in/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>æ—¥å¿—ç³»ç»ŸELKåœ¨Spring Bootä¸Šçš„åˆæ­¥é›†æˆ</title>
    <link href="https://hocg.in/2018/01/22/%E6%97%A5%E5%BF%97%E7%B3%BB%E7%BB%9F%20ELK%20%E5%9C%A8%20Spring%20Boot%20%E4%B8%8A%E7%9A%84%E5%88%9D%E6%AD%A5%E9%9B%86%E6%88%90/"/>
    <id>https://hocg.in/2018/01/22/æ—¥å¿—ç³»ç»Ÿ ELK åœ¨ Spring Boot ä¸Šçš„åˆæ­¥é›†æˆ/</id>
    <published>2018-01-22T08:53:00.000Z</published>
    <updated>2019-03-23T07:30:11.353Z</updated>
    
    <content type="html"><![CDATA[<p>æ—¥å¿—ç³»ç»Ÿ ELK åœ¨ Spring Boot ä¸Šçš„åˆæ­¥é›†æˆ ğŸ˜‹<br><a id="more"></a></p><h2 id="ELK"><a href="#ELK" class="headerlink" title="ELK"></a>ELK</h2><blockquote><p>Elasticsearch + Logstash + Kibanaï¼Œä¸€ä¸ªæ¯”è¾ƒæµè¡Œçš„æ—¥å¿—ç³»ç»Ÿã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥å°è¯•ä½¿ç”¨é˜¿é‡Œäº‘ã€‚å¦‚æœé’±å¤šçš„è¯:)</p></blockquote><h3 id="Logstash"><a href="#Logstash" class="headerlink" title="Logstash"></a>Logstash</h3><blockquote><p>æ—¥å¿—æ¬è¿, å¯ä»¥æŒ‡å®šä» Redis/Log4j..å¤„è·å–æ—¥å¿—ä¿¡æ¯ï¼Œç„¶åè¿›è¡Œè¿‡æ»¤ï¼Œå†æäº¤ç»™ <code>Elasticsearch</code> è¿›è¡Œåˆ†æã€‚</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£… &amp; å¯åŠ¨</span></span><br><span class="line">brew install logstash</span><br><span class="line"><span class="meta">#</span><span class="bash"> brew services restart logstash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ./bin/logstash -f config/logstash.conf</span></span><br></pre></td></tr></table></figure><h3 id="Elasticsearch"><a href="#Elasticsearch" class="headerlink" title="Elasticsearch"></a>Elasticsearch</h3><blockquote><p>æ—¥å¿—å­˜å‚¨ / æŸ¥è¯¢ / åˆ†æ</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£… &amp; å¯åŠ¨</span></span><br><span class="line">brew install elasticsearch</span><br><span class="line">brew services restart elasticsearch</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ æƒ³ç›´æ¥æŸ¥çœ‹ã€æ“ä½œæˆ–è€…ç ”ç©¶ <code>elasticsearch</code> å­˜å‚¨çš„å†…å®¹ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ <code>elasticsearch-head</code> è¿›è¡Œæ“ä½œã€‚</p><h4 id="UI-æ“ä½œç•Œé¢"><a href="#UI-æ“ä½œç•Œé¢" class="headerlink" title="UI æ“ä½œç•Œé¢"></a>UI æ“ä½œç•Œé¢</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git clone git://github.com/mobz/elasticsearch-head.git</span><br><span class="line">cd elasticsearch-head</span><br><span class="line">npm install</span><br><span class="line">npm run start</span><br><span class="line">open http://localhost:9100</span><br></pre></td></tr></table></figure><p>å¦‚æœ Elasticsearch å®‰è£…äº† X-Path é‚£ä¹ˆéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­(<code>elasticsearch.yml</code>), åŠ å…¥:<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">http.cors.enabled:</span> <span class="literal">true</span> </span><br><span class="line"><span class="string">http.cors.allow-origin:</span> <span class="string">'*'</span> </span><br><span class="line"><span class="string">http.cors.allow-headers:</span> <span class="string">"Authorization"</span></span><br></pre></td></tr></table></figure></p><p>å¯¹äº†, è¿™é‡Œæœ‰ä¸€æ¬¾<a href="https://chrome.google.com/webstore/detail/elasticsearch-head/ffmkiejjmecolpfloofpjologoblkegm/related" target="_blank" rel="external">elasticsearch-head Chrome Plug-in</a> æ¨èã€‚</p><h3 id="Kibana"><a href="#Kibana" class="headerlink" title="Kibana"></a>Kibana</h3><blockquote><p>UI ç•Œé¢</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget https://www.elastic.co/downloads/kibana</span><br><span class="line">tar -xvf kibana.tar.gz</span><br><span class="line">./kibana/bin/kibana</span><br><span class="line">open http://localhost:5601/</span><br></pre></td></tr></table></figure><h3 id="Spring-Boot-é›†æˆ"><a href="#Spring-Boot-é›†æˆ" class="headerlink" title="Spring Boot é›†æˆ"></a>Spring Boot é›†æˆ</h3><ol><li><p><code>pom.xml</code> å¼•å…¥ <code>logback</code> æ”¯æŒã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>net.logstash.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logstash-logback-encoder<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>åœ¨ <code>resources/</code> æ–‡ä»¶å¤¹å†…åˆ›å»º <code>logback-spring.xml</code> æ–‡ä»¶ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"LOGSTASH"</span> <span class="attr">class</span>=<span class="string">"net.logstash.logback.appender.LogstashTcpSocketAppender"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">destination</span>&gt;</span>dev.local:4560<span class="tag">&lt;/<span class="name">destination</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> <span class="attr">class</span>=<span class="string">"net.logstash.logback.encoder.LogstashEncoder"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">resource</span>=<span class="string">"org/springframework/boot/logging/logback/base.xml"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">"INFO"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"LOGSTASH"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"CONSOLE"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>é…ç½® logstash, åˆ›å»º <code>logstash.conf</code>ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">input &#123;</span><br><span class="line">    tcp &#123;</span><br><span class="line">        port =&gt; 4560</span><br><span class="line">        codec =&gt; json_lines</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">output &#123;</span><br><span class="line">    elasticsearch &#123;</span><br><span class="line">        action =&gt; &quot;index&quot;</span><br><span class="line">        hosts =&gt; [&quot;127.0.0.1:9200&quot;]</span><br><span class="line">        index =&gt; &quot;applog&quot;</span><br><span class="line">    ;    user =&gt; &quot;elastic&quot;</span><br><span class="line">    ;    password =&gt; &quot;changeme&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p>å¯åŠ¨logstash <code>./bin/logstash -f logstash.conf</code></p><ol><li>ä½¿ç”¨ã€‚<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith</span>(SpringRunner.class)</span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestControllerTest</span> </span>&#123;</span><br><span class="line">    Random random = <span class="keyword">new</span> Random();</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testList</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            log.info(<span class="string">"Hello world form hocgin"</span>);</span><br><span class="line">            <span class="keyword">if</span> (random.nextBoolean()) &#123;</span><br><span class="line">                log.info(<span class="string">"sksdjkf "</span> + random.nextInt(<span class="number">1000</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h2 id="å…³äº-Kibana-å®‰å…¨é…ç½®"><a href="#å…³äº-Kibana-å®‰å…¨é…ç½®" class="headerlink" title="å…³äº Kibana å®‰å…¨é…ç½®"></a>å…³äº Kibana å®‰å…¨é…ç½®</h2><ul><li><a href="https://www.elastic.co/guide/en/kibana/current/using-kibana-with-security.html" target="_blank" rel="external">Configuring Security in Kibana</a></li></ul><ol><li><p>å®‰è£… x-pack.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">logstash-plugin install x-pack</span><br><span class="line"></span><br><span class="line">elasticsearch-plugin install x-pack</span><br><span class="line"></span><br><span class="line">kibana-plugin install x-pack</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹ <code>config/kibana.yml</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">elasticsearch.username: &quot;elastic&quot; </span><br><span class="line">elasticsearch.password: &quot;changeme&quot;</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹ <code>logstash.conf</code>ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">input &#123;</span><br><span class="line">    tcp &#123;</span><br><span class="line">        port =&gt; 4560</span><br><span class="line">        codec =&gt; json_lines</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">output &#123;</span><br><span class="line">    elasticsearch &#123;</span><br><span class="line">        action =&gt; &quot;index&quot;</span><br><span class="line">        hosts =&gt; [&quot;127.0.0.1:9200&quot;]</span><br><span class="line">        index =&gt; &quot;applog&quot;</span><br><span class="line">        user =&gt; &quot;elastic&quot;</span><br><span class="line">        password =&gt; &quot;changeme&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="å¦‚æœå¿˜è®°-ElasticSearch-å¯†ç "><a href="#å¦‚æœå¿˜è®°-ElasticSearch-å¯†ç " class="headerlink" title="å¦‚æœå¿˜è®° ElasticSearch å¯†ç "></a>å¦‚æœå¿˜è®° ElasticSearch å¯†ç </h3><ol><li>åœæ­¢ <code>ElasticSearch</code> æœåŠ¡</li><li><p>åˆ›å»ºä¸€ä¸ªç®¡ç†å‘˜ç”¨æˆ·</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x-pack/users useradd my_admin -p my_password -r superuser</span><br></pre></td></tr></table></figure></li><li><p>å¯åŠ¨ <code>ElasticSearch</code> æœåŠ¡</p></li><li>ä½¿ç”¨ API ä¿®æ”¹å¯†ç <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">curl -u my_admin -XPUT 'http://localhost:9200/_xpack/security/user/elastic/_password?pretty' -H 'Content-Type: application/json' -d'</span><br><span class="line">&#123;</span><br><span class="line">  "password" : "new_password"</span><br><span class="line">&#125;'</span><br><span class="line">``</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># ELK Docker</span></span></span><br><span class="line">- [ELK Docker](https://github.com/spujadas/elk-docker)</span><br><span class="line">ç®€è€Œè¨€ä¹‹:</span><br><span class="line">```shell</span><br><span class="line"><span class="meta">#</span><span class="bash"> :5601 - Kibana</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> :9200 - Elasticsearch</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> :5044 - Logstash</span></span><br><span class="line">sudo docker run -p 5601:5601 -p 9200:9200 -p 5044:5044 -it --name elk sebp/elk</span><br></pre></td></tr></table></figure></li></ol><hr><blockquote><p>:2019å¹´3æœˆ23æ—¥ï¼Œæ˜ŸæœŸå…­ è¡¥å……</p></blockquote><h2 id="ELK-1"><a href="#ELK-1" class="headerlink" title="ELK"></a>ELK</h2><h3 id="L"><a href="#L" class="headerlink" title="L"></a>L</h3><p>é…ç½®æ–‡ä»¶ä½ç½®: <code>{}/config/</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">; è¾“å…¥</span><br><span class="line">input &#123;</span><br><span class="line">    file &#123;</span><br><span class="line">        path =&gt; [&quot;&#123;path&#125;&quot;]</span><br><span class="line">        ; è®¾ç½®ç±»å‹</span><br><span class="line">        type =&gt; &quot;nginx_access&quot;</span><br><span class="line">        ; èµ·ç‚¹ä½ç½®</span><br><span class="line">        start_position =&gt; &quot;beginning&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">; æ•°æ®æ¸…æ´—</span><br><span class="line">filter &#123;</span><br><span class="line">    if [type] == &quot;nginx_access&quot; &#123;</span><br><span class="line">        grok &#123;</span><br><span class="line">            patterns_dir =&gt; &quot;&#123;path&#125;&quot;</span><br><span class="line">            match =&gt; &#123;</span><br><span class="line">                &quot;message&quot; =&gt; &quot;%&#123;NGINXACCESS&#125;&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ; æ ¼å¼åŒ–dateå­—æ®µæ—¶é—´æ ¼å¼</span><br><span class="line">        date &#123;</span><br><span class="line">            match =&gt; [&quot;timestamp&quot;, &quot;dd/MMM/YYYY:HH:mm:ss Z&quot;]</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ; è§£æparamå­—æ®µ</span><br><span class="line">        if[param] &#123;</span><br><span class="line">            ruby &#123;</span><br><span class="line">                init =&gt; &quot;@kname = [&apos;quote&apos;, &apos;url_args&apos;]&quot;</span><br><span class="line">                code =&gt; &quot;</span><br><span class="line">                    new_event = LogStash::Event.new(Hash[@kname.zip(event.get(&apos;param&apos;).split(&apos;?&apos;))])</span><br><span class="line">                    new_event.remove(&apos;@timestamp&apos;)</span><br><span class="line">                    event.append(new_event)</span><br><span class="line">                &quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if[url_args] &#123;</span><br><span class="line">            ruby &#123;</span><br><span class="line">                init =&gt; &quot;@kname = [&apos;key&apos;, &apos;value&apos;]&quot;</span><br><span class="line">                code =&gt; &quot;</span><br><span class="line">                    event.set(</span><br><span class="line">                        &apos;nested_args&apos;, </span><br><span class="line">                        event.get(&apos;url_args&apos;).split(&apos;&amp;&apos;).collect &#123;|i| Hash[@kname.zip(i.split(&apos;=&apos;))]&#125;</span><br><span class="line">                    )</span><br><span class="line">                &quot;</span><br><span class="line">                remove_field =&gt; [&quot;url_args&quot;, &quot;param&quot;, &quot;quote&quot;]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ;ä¿®æ”¹æŒ‡å®šå­—æ®µçš„å†…å®¹ </span><br><span class="line">        mutate &#123;</span><br><span class="line">            ; è½¬æ¢ç±»å‹</span><br><span class="line">            convert =&gt; [&quot;response&quot;, &quot;integer&quot;]</span><br><span class="line">            remove_field =&gt; [&quot;timestamp&quot;]</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line">; è¾“å‡º</span><br><span class="line">output &#123;</span><br><span class="line">    stdout &#123;</span><br><span class="line">        codec =&gt; rubydebug</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    elasticsearch &#123;</span><br><span class="line">        ; ä½ç½®</span><br><span class="line">        hosts =&gt; [&quot;&#123;url&#125;&quot;]</span><br><span class="line">        ; ç´¢å¼•æ ¼å¼</span><br><span class="line">        index =&gt; &quot;logstash-%&#123;type&#125;-%&#123;+YYYY.MM.dd&#125;&quot;</span><br><span class="line">        document_type =&gt; &quot;%&#123;type&#125;&quot;</span><br><span class="line">        ; æ¯æ¬¡å¤šå°‘æ•°é‡</span><br><span class="line">        flush_size =&gt; 200</span><br><span class="line">        ; å‘é€é—´éš”æ—¶é—´</span><br><span class="line">        idle_flush_time =&gt; 1</span><br><span class="line">        ; æ˜¯å¦é‡æ–°æ¸…æ´—</span><br><span class="line">        sniffing = true</span><br><span class="line">        ; ç”¨æˆ·å</span><br><span class="line">        user =&gt; &quot;&#123;user&#125;&quot;</span><br><span class="line">        ; å¯†ç </span><br><span class="line">        password =&gt; &quot;&#123;password&#125;&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è§£æå™¨æ–‡ä»¶ä½ç½®: <code>{}/config/patterns/</code></p><hr><h3 id="K"><a href="#K" class="headerlink" title="K"></a>K</h3><p>é…ç½®æ–‡ä»¶ä½ç½®: <code>{}/config/kibana.yml</code><br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">elasticsearch.url:</span> <span class="string">'&#123;url&#125;'</span></span><br><span class="line"><span class="string">elasticsearch.username:</span> <span class="string">'&#123;username&#125;'</span></span><br><span class="line"><span class="string">elasticsearch.password:</span> <span class="string">'&#123;password&#125;'</span></span><br></pre></td></tr></table></figure></p><p>é»˜è®¤ç«¯å£: <code>8601</code></p><hr>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ—¥å¿—ç³»ç»Ÿ ELK åœ¨ Spring Boot ä¸Šçš„åˆæ­¥é›†æˆ ğŸ˜‹&lt;br&gt;
    
    </summary>
    
      <category term="æœåŠ¡ç«¯" scheme="https://hocg.in/categories/%E6%9C%8D%E5%8A%A1%E7%AB%AF/"/>
    
    
      <category term="ELK" scheme="https://hocg.in/tags/ELK/"/>
    
  </entry>
  
  <entry>
    <title>Spring Bootå¯åŠ¨è¿‡ç¨‹å’ŒBeançš„åˆ›å»ºè¿‡ç¨‹</title>
    <link href="https://hocg.in/2018/01/15/Spring%20Boot%20%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B%E5%92%8C%20Bean%20%E7%9A%84%E5%88%9B%E5%BB%BA%E8%BF%87%E7%A8%8B/"/>
    <id>https://hocg.in/2018/01/15/Spring Boot å¯åŠ¨è¿‡ç¨‹å’Œ Bean çš„åˆ›å»ºè¿‡ç¨‹/</id>
    <published>2018-01-15T09:10:20.000Z</published>
    <updated>2018-05-05T17:58:24.257Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™å‡ å¤©åˆ†æäº†ä¸€ä¸‹ Spring Boot å¯åŠ¨è¿‡ç¨‹å’Œ Bean çš„åˆ›å»ºè¿‡ç¨‹ï¼Œåœ¨æ­¤è®°å½•ä¸‹æ¥ã€‚<br>å¦‚æœæœ‰ä»€ä¹ˆä¸å¯¹çš„åœ°æ–¹ï¼Œæ¬¢è¿æå‡ºğŸ™ã€‚<br><a id="more"></a></p><h2 id="å¯åŠ¨è¿‡ç¨‹"><a href="#å¯åŠ¨è¿‡ç¨‹" class="headerlink" title="å¯åŠ¨è¿‡ç¨‹"></a>å¯åŠ¨è¿‡ç¨‹</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// å°† new SpringApplicationBuilder(sources...) åŠ å…¥ sources åˆ—è¡¨ã€‚</span></span><br><span class="line"><span class="comment">// ---------------æ¨æ–­æ˜¯å¦æ˜¯Webç¯å¢ƒ------------</span></span><br><span class="line"><span class="comment">// SpringApplication.deduceMainApplicationClass#248</span></span><br><span class="line"><span class="comment">// ä¸»è¦æ˜¯å¦åŒ…å« javax.servlet.Servlet ..</span></span><br><span class="line"><span class="comment">// ---------------Initializer------------</span></span><br><span class="line"><span class="comment">// ä½¿ç”¨ ClassLoader</span></span><br><span class="line"><span class="comment">// åˆ†æå¼•å…¥æ‰€æœ‰åŒ…çš„: META-INF/spring.factories æ–‡ä»¶</span></span><br><span class="line"><span class="comment">// - spring-boot-actuator-1.5.8.RELEASE.jar</span></span><br><span class="line"><span class="comment">// - spring-data-redis-1.8.8.RELEASE.jar</span></span><br><span class="line"><span class="comment">// - ..</span></span><br><span class="line"><span class="comment">// è·å¾— Key ä¸º`org.springframework.context.ApplicationContextInitializer`çš„æ‰€æœ‰èŠ‚ç‚¹(Class), å®ä¾‹åŒ–å¹¶é€šè¿‡ @Order è¿›è¡Œæ’åºã€‚</span></span><br><span class="line"><span class="comment">// ---------------Listener------------</span></span><br><span class="line"><span class="comment">// ä½¿ç”¨ ClassLoader</span></span><br><span class="line"><span class="comment">// åˆ†æå¼•å…¥æ‰€æœ‰åŒ…çš„: META-INF/spring.factories æ–‡ä»¶</span></span><br><span class="line"><span class="comment">// - spring-boot-actuator-1.5.8.RELEASE.jar</span></span><br><span class="line"><span class="comment">// - spring-data-redis-1.8.8.RELEASE.jar</span></span><br><span class="line"><span class="comment">// - ..</span></span><br><span class="line"><span class="comment">// è·å¾— Key ä¸º`org.springframework.context.ApplicationListener`çš„æ‰€æœ‰èŠ‚ç‚¹(Class), å®ä¾‹åŒ–å¹¶é€šè¿‡ @Order è¿›è¡Œæ’åºã€‚</span></span><br><span class="line"><span class="comment">// ---------------æ¨æ–­Mainç±»------------</span></span><br><span class="line"><span class="comment">// SpringApplication.deduceMainApplicationClass#252</span></span><br><span class="line"><span class="comment">// æ¨æ–­å½“å‰åº”ç”¨çš„å…¥å£å‡½æ•°(æ–¹æ³•åä¸ºmain)ã€‚</span></span><br><span class="line">    <span class="keyword">new</span> SpringApplicationBuilder()</span><br><span class="line">        .sources(Application.class)</span><br><span class="line">        <span class="comment">// -------åˆ¤æ–­æ˜¯å¦çƒ­éƒ¨ç½²çŠ¶æ€---------</span></span><br><span class="line">        <span class="comment">// ---å¦‚æœè®¾ç½®äº† parent() è¿›è¡Œé…ç½®-----</span></span><br><span class="line">        <span class="comment">// configureAsChildIfNecessary(args);å¦‚æœé…ç½®äº†ä¼šåŠ å…¥ä¸€ä¸ª ParentContextApplicationContextInitializer</span></span><br><span class="line">        <span class="comment">// ---------åˆå§‹åŒ–å½“å‰åº”ç”¨----------</span></span><br><span class="line">        <span class="comment">// SpringApplication.run(args)</span></span><br><span class="line">        .run(args);</span><br></pre></td></tr></table></figure><h3 id="åˆ†æ-SpringApplication-run-args"><a href="#åˆ†æ-SpringApplication-run-args" class="headerlink" title="åˆ†æ SpringApplication.run(args)"></a>åˆ†æ SpringApplication.run(args)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¡æ—¶å™¨, ç”¨äºè®°å½•å¯åŠ¨æ—¶é—´</span></span><br><span class="line">StopWatch stopWatch = <span class="keyword">new</span> StopWatch();</span><br><span class="line">stopWatch.start();</span><br><span class="line">ConfigurableApplicationContext context = <span class="keyword">null</span>;</span><br><span class="line">FailureAnalyzers analyzers = <span class="keyword">null</span>;</span><br><span class="line"><span class="comment">// è®¾ç½®ä¸ºæ— è¾“å…¥/è¾“å‡ºè®¾å¤‡æ¨¡å¼</span></span><br><span class="line">configureHeadlessProperty();</span><br><span class="line"><span class="comment">// ä½¿ç”¨ ClassLoader</span></span><br><span class="line"><span class="comment">// åˆ†æå¼•å…¥æ‰€æœ‰åŒ…çš„: META-INF/spring.factories æ–‡ä»¶</span></span><br><span class="line"><span class="comment">// è·å¾— Key ä¸º`org.springframework.boot.SpringApplicationRunListener`çš„æ‰€æœ‰èŠ‚ç‚¹(Class), å®ä¾‹åŒ–å¹¶é€šè¿‡ @Order è¿›è¡Œæ’åºã€‚</span></span><br><span class="line"><span class="comment">// å¹¶å°è£…è¿›å…¥ SpringApplicationRunListeners ç±»ã€‚</span></span><br><span class="line">SpringApplicationRunListeners listeners = getRunListeners(args);</span><br><span class="line"><span class="comment">// ç”± SpringApplicationRunListeners æ§åˆ¶ç±»çš„å¯åŠ¨ã€‚</span></span><br><span class="line">listeners.starting();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// å°è£…æˆ‘ä»¬æä¾›çš„ args å‚æ•°</span></span><br><span class="line">    ApplicationArguments applicationArguments = <span class="keyword">new</span> DefaultApplicationArguments(args);</span><br><span class="line">    <span class="comment">// æ ¹æ®æ˜¯å¦ Web ç¯å¢ƒ(webEnvironment) è·å¾—ç¯å¢ƒ(StandardServletEnvironment/StandardEnvironment)</span></span><br><span class="line">    <span class="comment">// - åŠ è½½é»˜è®¤çš„å‚æ•°æº(StandardServletEnvironment.customizePropertySources)</span></span><br><span class="line">    <span class="comment">// - åŠ è½½æˆ‘ä»¬æä¾›çš„å¯åŠ¨å‚æ•°(args)ä½œä¸ºå‚æ•°æºã€‚å½“ç„¶ï¼Œå‰ææ˜¯ addCommandLineProperties ä¸º trueã€‚</span></span><br><span class="line">    <span class="comment">// é€šè¿‡ SpringApplicationRunListeners.environmentPrepared(..) å¤„ç†ä¸Šé¢æä¾›çš„åº”ç”¨ç¯å¢ƒå‚æ•°ã€‚</span></span><br><span class="line">    ConfigurableEnvironment environment = prepareEnvironment(listeners, applicationArguments);</span><br><span class="line">    <span class="comment">// æ‰“å° bannerã€‚æœ¬èº«æ˜¯ç”± Banner ç±»å®ç°çš„</span></span><br><span class="line">    Banner printedBanner = printBanner(environment);</span><br><span class="line">    <span class="comment">// å®ä¾‹åŒ–ä¸€ä¸ªåº”ç”¨çš„å½“å‰ç¯å¢ƒ, Spring Boot æä¾›äº†2ç§ç¯å¢ƒæ ¹æ®æ˜¯å¦æ˜¯webç¯å¢ƒè¿›è¡ŒåŠ¨æ€å®ä¾‹åŒ–(webEnvironment), åˆ†åˆ«æ˜¯(AnnotationConfigEmbeddedWebApplicationContext/ConfigurableWebApplicationContext)</span></span><br><span class="line">    <span class="comment">// è¿™æ˜¯ä¼šåˆ›å»ºä¸¤ä¸ªç”¨äºæ‰«ææ³¨è§£çš„é‡è¦å¯¹è±¡</span></span><br><span class="line">    <span class="comment">// - AnnotatedBeanDefinitionReader  è¯»å–å™¨, è®¾ç½®ç¯å¢ƒå‚æ•°ï¼Œåˆ›å»ºæ—¶æ³¨å†Œäº†ä¸€ç³»åˆ—çš„ç”¨äº Bean çš„è§£æå™¨(AnnotatedBeanDefinitionReader#65)</span></span><br><span class="line">    <span class="comment">// - ClassPathBeanDefinitionScanner æ‰«æå™¨, è®¾ç½®è·¯å¾„ &amp; ç¯å¢ƒ &amp; æ‹¦æˆªå™¨(Component.class)</span></span><br><span class="line">    context = createApplicationContext();</span><br><span class="line">    <span class="comment">// ----------åˆ›å»ºå¤±è´¥è§£æå™¨------------</span></span><br><span class="line">    <span class="comment">// å½“åˆå§‹åŒ–å‡ºç°é”™è¯¯æ—¶è¿›è¡Œé”™è¯¯åˆ†æå™¨</span></span><br><span class="line">    <span class="comment">// ä½¿ç”¨ ClassLoader</span></span><br><span class="line">    <span class="comment">// åˆ†æå¼•å…¥æ‰€æœ‰åŒ…çš„: META-INF/spring.factories æ–‡ä»¶</span></span><br><span class="line">    <span class="comment">// - spring-boot-actuator-1.5.8.RELEASE.jar</span></span><br><span class="line">    <span class="comment">// - spring-data-redis-1.8.8.RELEASE.jar</span></span><br><span class="line">    <span class="comment">// - ..</span></span><br><span class="line">    <span class="comment">// è·å¾— Key ä¸º`org.springframework.boot.diagnostics.FailureAnalyzer`çš„æ‰€æœ‰èŠ‚ç‚¹(Class), å®ä¾‹åŒ–å¹¶é€šè¿‡ @Order è¿›è¡Œæ’åºã€‚</span></span><br><span class="line">    <span class="comment">// å¹¶åŠ å…¥ FailureAnalyzers ç®¡ç†ã€‚</span></span><br><span class="line">    analyzers = <span class="keyword">new</span> FailureAnalyzers(context);</span><br><span class="line">    <span class="comment">// è¯¦æƒ…è§ä¸‹æ–¹ã€SpringApplication.prepareContext(..)ã€‘</span></span><br><span class="line">    prepareContext(context, environment, listeners, applicationArguments, printedBanner);</span><br><span class="line">    <span class="comment">// è¯¦æƒ…è§ä¸‹æ–¹ã€åˆ†æ AbstractApplicationContext.refreshContext(context);ã€‘</span></span><br><span class="line">    refreshContext(context);</span><br><span class="line">    <span class="comment">// ApplicationRunner &amp; CommandLineRunner.run æŒ‰ç±»å‹ä» Bean å®¹å™¨ä¸­å–å‡ºï¼Œå¹¶è°ƒç”¨ run(..)</span></span><br><span class="line">    afterRefresh(context, applicationArguments);</span><br><span class="line">    <span class="comment">// å¹¿æ’­é€šçŸ¥ SpringApplicationRunListener.finished</span></span><br><span class="line">    listeners.finished(context, <span class="keyword">null</span>);</span><br><span class="line">    <span class="comment">// å…³é—­è®¡æ—¶å™¨ï¼Œè®°å½•å¯åŠ¨æ—¶é—´</span></span><br><span class="line">    stopWatch.stop();</span><br><span class="line">    <span class="comment">// æ˜¯å¦å¯åŠ¨æ—¥å¿—</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.logStartupInfo) &#123;</span><br><span class="line">        <span class="keyword">new</span> StartupInfoLogger(<span class="keyword">this</span>.mainApplicationClass)</span><br><span class="line">                .logStarted(getApplicationLog(), stopWatch);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> context;</span><br><span class="line">&#125; <span class="keyword">catch</span> (Throwable ex) &#123;</span><br><span class="line">    <span class="comment">// å¤„ç†é€€å‡ºå¼‚å¸¸, å­˜å‚¨ ExitCodeEvent</span></span><br><span class="line">    <span class="comment">// å¹¿æ’­é€šçŸ¥ listener(listener.finished(context, exception);)</span></span><br><span class="line">    <span class="comment">// ä½¿ç”¨ analyzers è¿›è¡Œå¤±è´¥åˆ†æ</span></span><br><span class="line">    handleRunFailure(context, listeners, analyzers, ex);</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(ex);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ†æ-SpringApplication-prepareContext"><a href="#åˆ†æ-SpringApplication-prepareContext" class="headerlink" title="åˆ†æ SpringApplication.prepareContext(..)"></a>åˆ†æ SpringApplication.prepareContext(..)</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">prepareContext</span><span class="params">(ConfigurableApplicationContext context,</span></span></span><br><span class="line"><span class="function"><span class="params">            ConfigurableEnvironment environment, SpringApplicationRunListeners listeners,</span></span></span><br><span class="line"><span class="function"><span class="params">            ApplicationArguments applicationArguments, Banner printedBanner)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è®¾ç½®ç¯å¢ƒå‚æ•°</span></span><br><span class="line">    context.setEnvironment(environment);</span><br><span class="line">        <span class="comment">// </span></span><br><span class="line">        <span class="comment">// - æ³¨å†Œè‡ªå®šä¹‰ beanNameGeneratorï¼Œå¦‚æœæœ‰çš„è¯ã€‚</span></span><br><span class="line">        <span class="comment">// - æ³¨å†Œè‡ªå®šä¹‰ resourceLoaderï¼Œå¦‚æœæœ‰çš„è¯ã€‚</span></span><br><span class="line">        <span class="comment">// å…¶ä¸­, resourceLoader åˆ†ä¸ºä¸¤ç§ç±»å‹</span></span><br><span class="line">        <span class="comment">//     - GenericApplicationContext(ResourceLoader)</span></span><br><span class="line">        <span class="comment">//     - DefaultResourceLoader(ClassLoader)</span></span><br><span class="line">    postProcessApplicationContext(context);</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–æ‰€æœ‰ä¹‹å‰åŠ è½½çš„ ApplicationContextInitializer èŠ‚ç‚¹</span></span><br><span class="line">    applyInitializers(context);</span><br><span class="line">        <span class="comment">// æ‰€æœ‰ç›‘å¬å™¨é€šçŸ¥è¿›å…¥ contextPrepared é˜¶æ®µ</span></span><br><span class="line">    listeners.contextPrepared(context);</span><br><span class="line">        <span class="comment">// æ˜¯å¦å¯åŠ¨æ—¥å¿—</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.logStartupInfo) &#123;</span><br><span class="line">        <span class="comment">// äº¤ç”±é¡¶çº§æ‰“å°æ—¥å¿—ä¿¡æ¯</span></span><br><span class="line">        logStartupInfo(context.getParent() == <span class="keyword">null</span>);</span><br><span class="line">        <span class="comment">// æ‰“å°é…ç½®æ–‡ä»¶ä¿¡æ¯</span></span><br><span class="line">        logStartupProfileInfo(context);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Add boot specific singleton beans</span></span><br><span class="line">    context.getBeanFactory().registerSingleton(<span class="string">"springApplicationArguments"</span>,</span><br><span class="line">        applicationArguments);</span><br><span class="line">    <span class="keyword">if</span> (printedBanner != <span class="keyword">null</span>) &#123;</span><br><span class="line">        context.getBeanFactory().registerSingleton(<span class="string">"springBootBanner"</span>, printedBanner);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Load the sources</span></span><br><span class="line">    Set&lt;Object&gt; sources = getSources();</span><br><span class="line">    Assert.notEmpty(sources, <span class="string">"Sources must not be empty"</span>);</span><br><span class="line">        <span class="comment">// åˆ›å»º Bean çš„åŠ è½½å™¨, BeanDefinitionLoader</span></span><br><span class="line">        <span class="comment">// ---------------è§£æå™¨---------------</span></span><br><span class="line">        <span class="comment">// - æ³¨è§£ AnnotatedBeanDefinitionReader</span></span><br><span class="line">        <span class="comment">// - xml XmlBeanDefinitionReader</span></span><br><span class="line">        <span class="comment">// - goovy GroovyBeanDefinitionReader</span></span><br><span class="line">        <span class="comment">// - ç±»è·¯å¾„ ClassPathBeanDefinitionScanner</span></span><br><span class="line">        <span class="comment">// ---------------è‡ªå®šä¹‰-----------------</span></span><br><span class="line">        <span class="comment">// - åŠ è½½è‡ªå®šä¹‰ beanNameGeneratorï¼Œå¦‚æœæœ‰çš„è¯ã€‚</span></span><br><span class="line">        <span class="comment">// - åŠ è½½è‡ªå®šä¹‰ resourceLoaderï¼Œå¦‚æœæœ‰çš„è¯ã€‚</span></span><br><span class="line">        <span class="comment">// - åŠ è½½è‡ªå®šä¹‰ environmentï¼Œå¦‚æœæœ‰çš„è¯ã€‚</span></span><br><span class="line">    load(context, sources.toArray(<span class="keyword">new</span> Object[sources.size()]));</span><br><span class="line">        <span class="comment">// é€šçŸ¥ç¯å¢ƒåŠ è½½ç»“æŸ</span></span><br><span class="line">    listeners.contextLoaded(context);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ†æ-AbstractApplicationContext-refreshContext-context"><a href="#åˆ†æ-AbstractApplicationContext-refreshContext-context" class="headerlink" title="åˆ†æ AbstractApplicationContext.refreshContext(context);"></a>åˆ†æ AbstractApplicationContext.refreshContext(context);</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">refresh</span><span class="params">()</span> <span class="keyword">throws</span> BeansException, IllegalStateException </span>&#123;</span><br><span class="line">    <span class="keyword">synchronized</span> (<span class="keyword">this</span>.startupShutdownMonitor) &#123;</span><br><span class="line">        <span class="comment">// è®¾ç½®ä¸ºå¯åŠ¨çŠ¶æ€</span></span><br><span class="line">        <span class="comment">// æ ¡éªŒå¿…é¡»å­—æ®µ, ä½¿ç”¨ ConfigurablePropertyResolver#setRequiredProperties è¿›è¡Œè®¾ç½®ã€‚</span></span><br><span class="line">        <span class="comment">// Prepare this context for refreshing.</span></span><br><span class="line">        prepareRefresh();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ·æ–°å½“å‰ beanFactory çš„ID, å€¼å¾—ä¸€æçš„æ˜¯é»˜è®¤çš„ BeanFactory æ˜¯ org.springframework.beans.factory.support.DefaultListableBeanFactoryã€‚</span></span><br><span class="line">        <span class="comment">// Tell the subclass to refresh the internal bean factory.</span></span><br><span class="line">        ConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ----------BeanFactoryé‡ç‚¹åˆå§‹åŒ–(AbstractApplicationContext.prepareBeanFactory#627)---------------</span></span><br><span class="line">        <span class="comment">// - è®¾ç½® BeanClassLoader</span></span><br><span class="line">        <span class="comment">// - è®¾ç½® å­—ç¬¦è§£æå™¨(SpelExpressionParser)</span></span><br><span class="line">        <span class="comment">// - è®¾ç½® èµ„æºä½ç½®</span></span><br><span class="line">        <span class="comment">// - æ·»åŠ  å¤„ç†å™¨</span></span><br><span class="line">        <span class="comment">// - å¿½ç•¥ æŸäº›æ¥å£</span></span><br><span class="line">        <span class="comment">// - æ³¨å†ŒæŸäº›è§£æå™¨è§£å†³ä¾èµ–å…³ç³»</span></span><br><span class="line">        <span class="comment">// - æ·»åŠ ä¸€ä¸ªç›‘å¬å™¨</span></span><br><span class="line">        <span class="comment">// - æ³¨å†Œ é»˜è®¤çš„ environment Bean(3ä¸ª), å¦‚æœä¸å­˜åœ¨çš„è¯ã€‚</span></span><br><span class="line">        <span class="comment">// Prepare the bean factory for use in this context.</span></span><br><span class="line">        prepareBeanFactory(beanFactory);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// AnnotationConfigEmbeddedWebApplicationContext.postProcessBeanFactory#182</span></span><br><span class="line">            <span class="comment">// - åŠ å…¥ WebApplicationContextServletContextAwareProcessor ä½œä¸º BeanPostProcessor </span></span><br><span class="line">            <span class="comment">// - beanFactory.ignoreDependencyInterface(ServletContextAware.class);</span></span><br><span class="line">            <span class="comment">// ä¹Ÿä¼šè¯»å–æ³¨å†Œçš„æ³¨è§£ç±» å’Œ é…ç½®è¦æ‰«æçš„åŒ…ä½ç½®ã€‚</span></span><br><span class="line">            <span class="comment">// Allows post-processing of the bean factory in context subclasses.</span></span><br><span class="line">            postProcessBeanFactory(beanFactory);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(currentRegistryProcessors, registry)</span></span><br><span class="line">            <span class="comment">// é€šè¿‡ ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry#308 æ‰«ææ‰€æœ‰åº”ç”¨æ–‡ä»¶ã€‚</span></span><br><span class="line">            <span class="comment">// - æ‰«æé¢„åˆ¶çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">            <span class="comment">// - æ‰«æåº”ç”¨çš„æ‰€æœ‰æ³¨è§£é…ç½®æˆ Bean å­—å…¸</span></span><br><span class="line">            <span class="comment">// Invoke factory processors registered as beans in the context.</span></span><br><span class="line">            invokeBeanFactoryPostProcessors(beanFactory);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ä½¿ç”¨ BeanPostProcessor.class è·å– Bean(æ‰€æœ‰ Bean å‡åœ¨beanDefinitionMap å†…å«æœ‰), æ’åºå, æ³¨å†Œä¸º Bean å¤„ç†å™¨ã€‚</span></span><br><span class="line">            <span class="comment">// åŠ å…¥ BeanPostProcessorChecker.class ç”¨äºç›‘å¬Beançš„åˆ›å»ºå‘¨æœŸã€‚</span></span><br><span class="line">            <span class="comment">// - priorityOrderedPostProcessors</span></span><br><span class="line">            <span class="comment">// - orderedPostProcessors</span></span><br><span class="line">            <span class="comment">// - nonOrderedPostProcessors</span></span><br><span class="line">            <span class="comment">// - internalPostProcessors</span></span><br><span class="line">            <span class="comment">// åŠ å…¥ ApplicationListenerDetector ä½œä¸ºå…œåº• BeanPostProcessor</span></span><br><span class="line">            <span class="comment">// Register bean processors that intercept bean creation.</span></span><br><span class="line">            registerBeanPostProcessors(beanFactory);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// åˆå§‹åŒ–æ¶ˆæ¯èµ„æº(MessageSource)</span></span><br><span class="line">            <span class="comment">// ä¸€èˆ¬æ˜¯ä½œä¸º i18 çš„èµ„æºæ–‡ä»¶ã€‚</span></span><br><span class="line">            <span class="comment">// Initialize message source for this context.</span></span><br><span class="line">            initMessageSource();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// åˆå§‹åŒ–åº”ç”¨å¹¿æ’­å™¨(ApplicationEventMulticaster)</span></span><br><span class="line">            <span class="comment">// ä¸€èˆ¬ç”¨äºç®¡ç† ApplicationListener</span></span><br><span class="line">            <span class="comment">// Initialize event multicaster for this context.</span></span><br><span class="line">            initApplicationEventMulticaster();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// EmbeddedWebApplicationContext.onRefresh#131</span></span><br><span class="line">            <span class="comment">// åˆ›å»ºåµŒå…¥å¼ Servlet å®¹å™¨</span></span><br><span class="line">            <span class="comment">// Initialize other special beans in specific context subclasses.</span></span><br><span class="line">            onRefresh();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ³¨å†Œ listener beans åˆ° ApplicationEventMulticasterã€‚</span></span><br><span class="line">            <span class="comment">// å¹¿æ’­ (Set&lt;ApplicationEvent&gt; earlyEventsToProcess).multicastEvent</span></span><br><span class="line">            <span class="comment">// Check for listener beans and register them.</span></span><br><span class="line">            registerListeners();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// - è½¬åŒ– BeanFactory ç±»å‹</span></span><br><span class="line">            <span class="comment">// - æä¾›é»˜è®¤çš„åµŒå…¥å€¼è§£æå™¨ï¼Œå¦‚æœéœ€è¦çš„è¯ã€‚</span></span><br><span class="line">            <span class="comment">// - è£…è½½ LoadTimeWeaverAware.class ç±»å‹çš„ Bean</span></span><br><span class="line">            <span class="comment">// - åœæ­¢ä¸´æ—¶çš„ ClassLoad</span></span><br><span class="line">            <span class="comment">// - å†»ç»“é…ç½®</span></span><br><span class="line">            <span class="comment">// - é¢„å…ˆè£…è½½æ‰€æœ‰å•ä¾‹ Beanã€‚</span></span><br><span class="line">            <span class="comment">//    - åˆå§‹åŒ–@Controller @RequestMapping ä¹‹ç±»çš„è¿‡ç¨‹, åŸºæœ¬ä¸Šæˆ‘ä»¬ä½¿ç”¨çš„æ³¨è§£éƒ½æ˜¯è¯¥é˜¶æ®µè¿›è¡Œè®¾ç½®çš„ã€‚</span></span><br><span class="line">            <span class="comment">// Instantiate all remaining (non-lazy-init) singletons.</span></span><br><span class="line">            finishBeanFactoryInitialization(beanFactory);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ----------å‘å¸ƒäº‹ä»¶é€šçŸ¥----------------</span></span><br><span class="line">            <span class="comment">// æ³¨å†Œ LifecycleProcessorï¼Œå¹¶å‘å¸ƒ onRefresh() äº‹ä»¶ã€‚</span></span><br><span class="line">            <span class="comment">// earlyApplicationEvents.add(new ContextRefreshedEvent(this)) åŠ å…¥ Context åˆ·æ–°äº‹ä»¶</span></span><br><span class="line">            <span class="comment">// æ³¨å†Œ LiveBeanï¼Œå¦‚æœæœ‰çš„è¯ã€‚..DevTool Debug é‚£ä¸ª</span></span><br><span class="line">            <span class="comment">// Last step: publish corresponding event.</span></span><br><span class="line">            finishRefresh();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">catch</span> (BeansException ex) &#123;</span><br><span class="line">            <span class="keyword">if</span> (logger.isWarnEnabled()) &#123;</span><br><span class="line">                logger.warn(<span class="string">"Exception encountered during context initialization - "</span> +</span><br><span class="line">                        <span class="string">"cancelling refresh attempt: "</span> + ex);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Destroy already created singletons to avoid dangling resources.</span></span><br><span class="line">            destroyBeans();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Reset 'active' flag.</span></span><br><span class="line">            cancelRefresh(ex);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Propagate exception to caller.</span></span><br><span class="line">            <span class="keyword">throw</span> ex;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// Reset common introspection caches in Spring's core, since we</span></span><br><span class="line">            <span class="comment">// might not ever need metadata for singleton beans anymore...</span></span><br><span class="line">            resetCommonCaches();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å…³äº-Bean"><a href="#å…³äº-Bean" class="headerlink" title="å…³äº Bean"></a>å…³äº Bean</h2><ul><li>BeanDefinitionRegistry, Bean å®šä¹‰æ³¨å†Œè¡¨ï¼Œç±»ä¼¼ Bean çš„ä»“åº“ã€‚</li><li>BeanDefinition å­˜å‚¨ Bean çš„ä¿¡æ¯ã€‚<ul><li>Bean çš„ scope ç§ç±», <ul><li>prototype, æ¯æ¬¡è·å–æ—¶åˆ›å»ºã€‚</li><li>request, </li><li>session, </li><li>global session, </li><li>singleton(é»˜è®¤), å•ä¾‹ã€‚</li></ul></li></ul></li><li>BeanFactory, Bean å·¥å‚ã€‚<ul><li>ç”¨äº æ³¨å†Œ Bean, è·å¾— Bean, æ¸…é™¤ Bean, é…ç½® Bean çš„ç›¸å…³ç­–ç•¥ã€‚</li></ul></li><li>DefaultListableBeanFactory æ˜¯ Spring é»˜è®¤çš„ BeanFactoryã€‚<ul><li>registeredSingletons å·²æ³¨å†Œçš„ Bean åˆ—è¡¨, å­˜å‚¨ BeanNameã€‚</li><li>singletonObjects å­˜å‚¨ Bean å¯¹è±¡, ä½¿ç”¨ Map ç»“æ„ã€‚</li><li>earlySingletonObjects å­˜å‚¨ç”± ObjectFactory åˆ›å»ºçš„ Bean å¯¹è±¡ã€‚</li><li>singletonFactories å­˜å‚¨ä¹‹å‰åˆ›å»ºçš„ ObjectFactory å…¶æœ¬è´¨æ˜¯ Bean å¯¹è±¡ã€‚</li><li>beanDefinitionMap æ‰«æå­˜å‚¨çš„è®°å½•ï¼Œå¯ä»¥ç†è§£ä¸º Bean çš„æ€»åå•ã€‚</li><li>mergedBeanDefinitions</li></ul></li></ul><h3 id="è·å–-Bean-getBean"><a href="#è·å–-Bean-getBean" class="headerlink" title="è·å– Bean getBean(..)"></a>è·å– Bean <code>getBean(..)</code></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AbstractBeanFactory.class</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getBean</span><span class="params">(String name)</span> <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> doGetBean(name, <span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line">    <span class="keyword">protected</span> &lt;T&gt; <span class="function">T <span class="title">doGetBean</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">final</span> String name, <span class="keyword">final</span> Class&lt;T&gt; requiredType, <span class="keyword">final</span> Object[] args, <span class="keyword">boolean</span> typeCheckOnly)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è§£æ BeanName</span></span><br><span class="line">        <span class="keyword">final</span> String beanName = transformedBeanName(name);</span><br><span class="line">        Object bean;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ£€æŸ¥ç¼“å­˜ä¸­æ˜¯å¦å­˜åœ¨è¯¥ Bean, å¦‚æœå­˜åœ¨åˆ™å®ä¾‹åŒ–ã€‚</span></span><br><span class="line">        <span class="comment">// Eagerly check singleton cache for manually registered singletons.</span></span><br><span class="line">        Object sharedInstance = getSingleton(beanName);</span><br><span class="line">        <span class="keyword">if</span> (sharedInstance != <span class="keyword">null</span> &amp;&amp; args == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (logger.isDebugEnabled()) &#123;</span><br><span class="line">                <span class="keyword">if</span> (isSingletonCurrentlyInCreation(beanName)) &#123;</span><br><span class="line">                    logger.debug(<span class="string">"Returning eagerly cached instance of singleton bean '"</span> + beanName +</span><br><span class="line">                            <span class="string">"' that is not fully initialized yet - a consequence of a circular reference"</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    logger.debug(<span class="string">"Returning cached instance of singleton bean '"</span> + beanName + <span class="string">"'"</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            bean = getObjectForBeanInstance(sharedInstance, name, beanName, <span class="keyword">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span> &#123; <span class="comment">// Bean ä¸åœ¨ç¼“å­˜</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// å½“æ­£åœ¨åˆ›å»ºçš„ Bean çš„ Scope ä¸º Prototype æ—¶ï¼ŒæŠ›å‡ºå¼‚å¸¸ã€‚</span></span><br><span class="line">            <span class="comment">// å› ä¸º Prototype æ¨¡å¼æ— æ³•è§£å†³ä¾èµ–é—®é¢˜ã€‚</span></span><br><span class="line">            <span class="comment">// Fail if we're already creating this bean instance:</span></span><br><span class="line">            <span class="comment">// We're assumably within a circular reference.</span></span><br><span class="line">            <span class="keyword">if</span> (isPrototypeCurrentlyInCreation(beanName)) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> BeanCurrentlyInCreationException(beanName);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="comment">// å¦‚æœå½“å‰ BeanFactory ä¸åŒ…æ‹¬è¯¥ BeanName å¹¶ä¸”è¯¥ BeanFactory æœ‰çˆ¶ BeanFactory æ—¶ï¼Œå°è¯•ä»çˆ¶ BeanFactory è·å–è¯¥ Beanã€‚</span></span><br><span class="line">            <span class="comment">// Check if bean definition exists in this factory.</span></span><br><span class="line">            BeanFactory parentBeanFactory = getParentBeanFactory();</span><br><span class="line">            <span class="keyword">if</span> (parentBeanFactory != <span class="keyword">null</span> &amp;&amp; !containsBeanDefinition(beanName)) &#123;</span><br><span class="line">                <span class="comment">// Not found -&gt; check parent.</span></span><br><span class="line">                String nameToLookup = originalBeanName(name);</span><br><span class="line">                <span class="keyword">if</span> (args != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    <span class="comment">// Delegation to parent with explicit args.</span></span><br><span class="line">                    <span class="keyword">return</span> (T) parentBeanFactory.getBean(nameToLookup, args);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">// No args -&gt; delegate to standard getBean method.</span></span><br><span class="line">                    <span class="keyword">return</span> parentBeanFactory.getBean(nameToLookup, requiredType);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å¦‚æœä¸åªä¾é ç±»å‹è¿›è¡Œè·å–, è¿›è¡Œæ ‡è®°ã€‚</span></span><br><span class="line">            <span class="keyword">if</span> (!typeCheckOnly) &#123;</span><br><span class="line">                markBeanAsCreated(beanName);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">// å°†è§£æè½¬åŒ–ä¸º Bean çš„ä¿¡æ¯ï¼Œæ³¨å†Œå¹¶è·å–å…¶ä¾èµ–çš„ Beanã€‚</span></span><br><span class="line">                <span class="keyword">final</span> RootBeanDefinition mbd = getMergedLocalBeanDefinition(beanName);</span><br><span class="line">                checkMergedBeanDefinition(mbd, beanName, args);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// Guarantee initialization of beans that the current bean depends on.</span></span><br><span class="line">                String[] dependsOn = mbd.getDependsOn();</span><br><span class="line">                <span class="keyword">if</span> (dependsOn != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    <span class="keyword">for</span> (String dep : dependsOn) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (isDependent(beanName, dep)) &#123;</span><br><span class="line">                            <span class="keyword">throw</span> <span class="keyword">new</span> BeanCreationException(mbd.getResourceDescription(), beanName,</span><br><span class="line">                                    <span class="string">"Circular depends-on relationship between '"</span> + beanName + <span class="string">"' and '"</span> + dep + <span class="string">"'"</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        registerDependentBean(dep, beanName);</span><br><span class="line">                        getBean(dep);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// å½“ Bean çš„ Scope ä¸º Singleton æ—¶</span></span><br><span class="line">                <span class="comment">// Create bean instance.</span></span><br><span class="line">                <span class="keyword">if</span> (mbd.isSingleton()) &#123;</span><br><span class="line">                    sharedInstance = getSingleton(beanName, <span class="keyword">new</span> ObjectFactory&lt;Object&gt;() &#123;</span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="function"><span class="keyword">public</span> Object <span class="title">getObject</span><span class="params">()</span> <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line">                            <span class="keyword">try</span> &#123;</span><br><span class="line">                                <span class="keyword">return</span> createBean(beanName, mbd, args);</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="keyword">catch</span> (BeansException ex) &#123;</span><br><span class="line">                                <span class="comment">// Explicitly remove instance from singleton cache: It might have been put there</span></span><br><span class="line">                                <span class="comment">// eagerly by the creation process, to allow for circular reference resolution.</span></span><br><span class="line">                                <span class="comment">// Also remove any beans that received a temporary reference to the bean.</span></span><br><span class="line">                                destroySingleton(beanName);</span><br><span class="line">                                <span class="keyword">throw</span> ex;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                    bean = getObjectForBeanInstance(sharedInstance, name, beanName, mbd);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// å½“ Bean çš„ Scope ä¸º Prototype æ—¶</span></span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (mbd.isPrototype()) &#123;</span><br><span class="line">                    <span class="comment">// It's a prototype -&gt; create a new instance.</span></span><br><span class="line">                    Object prototypeInstance = <span class="keyword">null</span>;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        beforePrototypeCreation(beanName);</span><br><span class="line">                        prototypeInstance = createBean(beanName, mbd, args);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">finally</span> &#123;</span><br><span class="line">                        afterPrototypeCreation(beanName);</span><br><span class="line">                    &#125;</span><br><span class="line">                    bean = getObjectForBeanInstance(prototypeInstance, name, beanName, mbd);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// å½“ Bean çš„ Scope ä¸º å…¶ä»– æ—¶</span></span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    String scopeName = mbd.getScope();</span><br><span class="line">                    <span class="keyword">final</span> Scope scope = <span class="keyword">this</span>.scopes.get(scopeName);</span><br><span class="line">                    <span class="keyword">if</span> (scope == <span class="keyword">null</span>) &#123;</span><br><span class="line">                        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">"No Scope registered for scope name '"</span> + scopeName + <span class="string">"'"</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Object scopedInstance = scope.get(beanName, <span class="keyword">new</span> ObjectFactory&lt;Object&gt;() &#123;</span><br><span class="line">                            <span class="meta">@Override</span></span><br><span class="line">                            <span class="function"><span class="keyword">public</span> Object <span class="title">getObject</span><span class="params">()</span> <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line">                                beforePrototypeCreation(beanName);</span><br><span class="line">                                <span class="keyword">try</span> &#123;</span><br><span class="line">                                    <span class="keyword">return</span> createBean(beanName, mbd, args);</span><br><span class="line">                                &#125;</span><br><span class="line">                                <span class="keyword">finally</span> &#123;</span><br><span class="line">                                    afterPrototypeCreation(beanName);</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;);</span><br><span class="line">                        bean = getObjectForBeanInstance(scopedInstance, name, beanName, mbd);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">catch</span> (IllegalStateException ex) &#123;</span><br><span class="line">                        <span class="keyword">throw</span> <span class="keyword">new</span> BeanCreationException(beanName,</span><br><span class="line">                                <span class="string">"Scope '"</span> + scopeName + <span class="string">"' is not active for the current thread; consider "</span> +</span><br><span class="line">                                <span class="string">"defining a scoped proxy for this bean if you intend to refer to it from a singleton"</span>,</span><br><span class="line">                                ex);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (BeansException ex) &#123;</span><br><span class="line">                cleanupAfterBeanCreationFailure(beanName);</span><br><span class="line">                <span class="keyword">throw</span> ex;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ£€æŸ¥è·å¾—çš„ Bean ç±»å‹æ˜¯å¦ç¬¦åˆé¢„æœŸç»“æœã€‚</span></span><br><span class="line">        <span class="comment">// Check if required type matches the type of the actual bean instance.</span></span><br><span class="line">        <span class="keyword">if</span> (requiredType != <span class="keyword">null</span> &amp;&amp; bean != <span class="keyword">null</span> &amp;&amp; !requiredType.isInstance(bean)) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> getTypeConverter().convertIfNecessary(bean, requiredType);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (TypeMismatchException ex) &#123;</span><br><span class="line">                <span class="keyword">if</span> (logger.isDebugEnabled()) &#123;</span><br><span class="line">                    logger.debug(<span class="string">"Failed to convert bean '"</span> + name + <span class="string">"' to required type '"</span> +</span><br><span class="line">                            ClassUtils.getQualifiedName(requiredType) + <span class="string">"'"</span>, ex);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> BeanNotOfRequiredTypeException(name, requiredType, bean.getClass());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (T) bean;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»º-Bean-createBean"><a href="#åˆ›å»º-Bean-createBean" class="headerlink" title="åˆ›å»º Bean createBean(..)"></a>åˆ›å»º Bean <code>createBean(..)</code></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AbstractAutowireCapableBeanFactory.class</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Object <span class="title">createBean</span><span class="params">(String beanName, RootBeanDefinition mbd, Object[] args)</span> <span class="keyword">throws</span> BeanCreationException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (logger.isDebugEnabled()) &#123;</span><br><span class="line">            logger.debug(<span class="string">"Creating instance of bean '"</span> + beanName + <span class="string">"'"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        RootBeanDefinition mbdToUse = mbd;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ ¹æ®ä¿¡æ¯(mbd, beanName)è·å– Bean çš„ç±»å‹</span></span><br><span class="line">        <span class="comment">// Make sure bean class is actually resolved at this point, and</span></span><br><span class="line">        <span class="comment">// clone the bean definition in case of a dynamically resolved Class</span></span><br><span class="line">        <span class="comment">// which cannot be stored in the shared merged bean definition.</span></span><br><span class="line">        Class&lt;?&gt; resolvedClass = resolveBeanClass(mbd, beanName);</span><br><span class="line">        <span class="keyword">if</span> (resolvedClass != <span class="keyword">null</span> &amp;&amp; !mbd.hasBeanClass() &amp;&amp; mbd.getBeanClassName() != <span class="keyword">null</span>) &#123;</span><br><span class="line">            mbdToUse = <span class="keyword">new</span> RootBeanDefinition(mbd);</span><br><span class="line">            mbdToUse.setBeanClass(resolvedClass);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ ¡éªŒé‡è½½å‡½æ•°</span></span><br><span class="line">        <span class="comment">// Prepare method overrides.</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            mbdToUse.prepareMethodOverrides();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (BeanDefinitionValidationException ex) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> BeanDefinitionStoreException(mbdToUse.getResourceDescription(),</span><br><span class="line">                    beanName, <span class="string">"Validation of method overrides failed"</span>, ex);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Spring æä¾›çš„ï¼Œç”± BeanPostProcessor è¿›è¡Œå¤„ç†æ¥å…¥ç‚¹ã€‚</span></span><br><span class="line">            <span class="comment">// Give BeanPostProcessors a chance to return a proxy instead of the target bean instance.</span></span><br><span class="line">            Object bean = resolveBeforeInstantiation(beanName, mbdToUse);</span><br><span class="line">            <span class="keyword">if</span> (bean != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> bean;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Throwable ex) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> BeanCreationException(mbdToUse.getResourceDescription(), beanName,</span><br><span class="line">                    <span class="string">"BeanPostProcessor before instantiation of bean failed"</span>, ex);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// é»˜è®¤çš„åˆ›å»º Bean æ–¹å¼</span></span><br><span class="line">        Object beanInstance = doCreateBean(beanName, mbdToUse, args);</span><br><span class="line">        <span class="keyword">if</span> (logger.isDebugEnabled()) &#123;</span><br><span class="line">            logger.debug(<span class="string">"Finished creating instance of bean '"</span> + beanName + <span class="string">"'"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> beanInstance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// AbstractAutowireCapableBeanFactory.class</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Object <span class="title">doCreateBean</span><span class="params">(<span class="keyword">final</span> String beanName, <span class="keyword">final</span> RootBeanDefinition mbd, <span class="keyword">final</span> Object[] args)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> BeanCreationException </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ ¹æ® Bean ä¿¡æ¯å®ä¾‹åŒ– Bean</span></span><br><span class="line">        <span class="comment">// Instantiate the bean.</span></span><br><span class="line">        BeanWrapper instanceWrapper = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (mbd.isSingleton()) &#123;</span><br><span class="line">            instanceWrapper = <span class="keyword">this</span>.factoryBeanInstanceCache.remove(beanName);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (instanceWrapper == <span class="keyword">null</span>) &#123;</span><br><span class="line">            instanceWrapper = createBeanInstance(beanName, mbd, args);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">final</span> Object bean = (instanceWrapper != <span class="keyword">null</span> ? instanceWrapper.getWrappedInstance() : <span class="keyword">null</span>);</span><br><span class="line">        Class&lt;?&gt; beanType = (instanceWrapper != <span class="keyword">null</span> ? instanceWrapper.getWrappedClass() : <span class="keyword">null</span>);</span><br><span class="line">        mbd.resolvedTargetType = beanType;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä½¿ç”¨ MergedBeanDefinitionPostProcessor è¿›è¡Œå¤„ç†</span></span><br><span class="line">        <span class="comment">// Allow post-processors to modify the merged bean definition.</span></span><br><span class="line">        <span class="keyword">synchronized</span> (mbd.postProcessingLock) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!mbd.postProcessed) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    applyMergedBeanDefinitionPostProcessors(mbd, beanType, beanName);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">catch</span> (Throwable ex) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> BeanCreationException(mbd.getResourceDescription(), beanName,</span><br><span class="line">                            <span class="string">"Post-processing of merged bean definition failed"</span>, ex);</span><br><span class="line">                &#125;</span><br><span class="line">                mbd.postProcessed = <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Eagerly cache singletons to be able to resolve circular references</span></span><br><span class="line">        <span class="comment">// even when triggered by lifecycle interfaces like BeanFactoryAware.</span></span><br><span class="line">        <span class="keyword">boolean</span> earlySingletonExposure = (mbd.isSingleton() &amp;&amp; <span class="keyword">this</span>.allowCircularReferences &amp;&amp;</span><br><span class="line">                isSingletonCurrentlyInCreation(beanName));</span><br><span class="line">        <span class="comment">// å•ä¾‹ &amp; å…è®¸å¾ªç¯å¼•ç”¨ &amp; æ­£åœ¨åˆ›å»º</span></span><br><span class="line">        <span class="keyword">if</span> (earlySingletonExposure) &#123;</span><br><span class="line">            <span class="keyword">if</span> (logger.isDebugEnabled()) &#123;</span><br><span class="line">                logger.debug(<span class="string">"Eagerly caching bean '"</span> + beanName +</span><br><span class="line">                        <span class="string">"' to allow for resolving potential circular references"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// ä½¿ç”¨ ObjectFactory æ¥ç®¡ç† Bean é˜²æ­¢å¾ªç¯ä¾èµ–ã€‚</span></span><br><span class="line">            addSingletonFactory(beanName, <span class="keyword">new</span> ObjectFactory&lt;Object&gt;() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> Object <span class="title">getObject</span><span class="params">()</span> <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line">                    <span class="keyword">return</span> getEarlyBeanReference(beanName, mbd, bean);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Initialize the bean instance.</span></span><br><span class="line">        Object exposedObject = bean;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//  å¯¹ Bean çš„å±æ€§è¿›è¡Œå¡«å……</span></span><br><span class="line">            populateBean(beanName, mbd, instanceWrapper);</span><br><span class="line">            <span class="keyword">if</span> (exposedObject != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="comment">// åˆå§‹åŒ– Bean å®ä¾‹</span></span><br><span class="line">                exposedObject = initializeBean(beanName, exposedObject, mbd);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Throwable ex) &#123;</span><br><span class="line">            <span class="keyword">if</span> (ex <span class="keyword">instanceof</span> BeanCreationException &amp;&amp; beanName.equals(((BeanCreationException) ex).getBeanName())) &#123;</span><br><span class="line">                <span class="keyword">throw</span> (BeanCreationException) ex;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> BeanCreationException(</span><br><span class="line">                        mbd.getResourceDescription(), beanName, <span class="string">"Initialization of bean failed"</span>, ex);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (earlySingletonExposure) &#123;</span><br><span class="line">            Object earlySingletonReference = getSingleton(beanName, <span class="keyword">false</span>);</span><br><span class="line">            <span class="comment">// å­˜åœ¨å·²åˆ›å»ºçš„å•ä¾‹, ä¸€èˆ¬æƒ…å†µä¸ºè§£å†³ä¾èµ–çš„æ—¶å€™ã€‚</span></span><br><span class="line">            <span class="keyword">if</span> (earlySingletonReference != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (exposedObject == bean) &#123;</span><br><span class="line">                    exposedObject = earlySingletonReference;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// å…è®¸å¾ªç¯ä¾èµ–ä¸ä¸€è‡´ &amp; Bean å«æœ‰ä¾èµ–ã€‚</span></span><br><span class="line">                <span class="comment">// æ­¤æ—¶å¦‚æœå­˜åœ¨ä¾èµ–ï¼Œå°†ä¼šå‘ç”Ÿå¼‚å¸¸ã€‚</span></span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (!<span class="keyword">this</span>.allowRawInjectionDespiteWrapping &amp;&amp; hasDependentBean(beanName)) &#123;</span><br><span class="line">                    String[] dependentBeans = getDependentBeans(beanName);</span><br><span class="line">                    Set&lt;String&gt; actualDependentBeans = <span class="keyword">new</span> LinkedHashSet&lt;String&gt;(dependentBeans.length);</span><br><span class="line">                    <span class="keyword">for</span> (String dependentBean : dependentBeans) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (!removeSingletonIfCreatedForTypeCheckOnly(dependentBean)) &#123;</span><br><span class="line">                            actualDependentBeans.add(dependentBean);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (!actualDependentBeans.isEmpty()) &#123;</span><br><span class="line">                        <span class="keyword">throw</span> <span class="keyword">new</span> BeanCurrentlyInCreationException(beanName,</span><br><span class="line">                                <span class="string">"Bean with name '"</span> + beanName + <span class="string">"' has been injected into other beans ["</span> +</span><br><span class="line">                                StringUtils.collectionToCommaDelimitedString(actualDependentBeans) +</span><br><span class="line">                                <span class="string">"] in its raw version as part of a circular reference, but has eventually been "</span> +</span><br><span class="line">                                <span class="string">"wrapped. This means that said other beans do not use the final version of the "</span> +</span><br><span class="line">                                <span class="string">"bean. This is often the result of over-eager type matching - consider using "</span> +</span><br><span class="line">                                <span class="string">"'getBeanNamesOfType' with the 'allowEagerInit' flag turned off, for example."</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ³¨å†Œä¸€æ¬¡æ€§ Bean</span></span><br><span class="line">        <span class="comment">// Register bean as disposable.</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            registerDisposableBeanIfNecessary(beanName, bean, mbd);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (BeanDefinitionValidationException ex) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> BeanCreationException(</span><br><span class="line">                    mbd.getResourceDescription(), beanName, <span class="string">"Invalid destruction signature"</span>, ex);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> exposedObject;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™å‡ å¤©åˆ†æäº†ä¸€ä¸‹ Spring Boot å¯åŠ¨è¿‡ç¨‹å’Œ Bean çš„åˆ›å»ºè¿‡ç¨‹ï¼Œåœ¨æ­¤è®°å½•ä¸‹æ¥ã€‚&lt;br&gt;å¦‚æœæœ‰ä»€ä¹ˆä¸å¯¹çš„åœ°æ–¹ï¼Œæ¬¢è¿æå‡ºğŸ™ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="Web" scheme="https://hocg.in/categories/Web/"/>
    
    
      <category term="Spring Boot" scheme="https://hocg.in/tags/Spring-Boot/"/>
    
      <category term="Web" scheme="https://hocg.in/tags/Web/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ Docker äº¤å‰ç¼–è¯‘ OpenWrt ä¸Šè¿è¡Œçš„ Golang ç¨‹åº</title>
    <link href="https://hocg.in/2017/11/23/%E4%BD%BF%E7%94%A8%20Docker%20%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%20OpenWrt%20%E4%B8%8A%E8%BF%90%E8%A1%8C%E7%9A%84%20Golang%20%E7%A8%8B%E5%BA%8F/"/>
    <id>https://hocg.in/2017/11/23/ä½¿ç”¨ Docker äº¤å‰ç¼–è¯‘ OpenWrt ä¸Šè¿è¡Œçš„ Golang ç¨‹åº/</id>
    <published>2017-11-23T02:17:02.000Z</published>
    <updated>2018-01-09T00:33:32.850Z</updated>
    
    <content type="html"><![CDATA[<p>>.&lt;<br><a id="more"></a></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><ul><li>ä½¿ç”¨ <code>https://github.com/gomini/go-mips32</code> å¯¹ Go ç¨‹åºè¿›è¡Œäº¤å‰ç¼–è¯‘.</li></ul><h2 id="ä½¿ç”¨-Docker-äº¤å‰ç¼–è¯‘-Go-ç¨‹åº"><a href="#ä½¿ç”¨-Docker-äº¤å‰ç¼–è¯‘-Go-ç¨‹åº" class="headerlink" title="ä½¿ç”¨ Docker äº¤å‰ç¼–è¯‘ Go ç¨‹åº"></a>ä½¿ç”¨ Docker äº¤å‰ç¼–è¯‘ Go ç¨‹åº</h2><ol><li><p>æ‹‰å–é•œåƒ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull conoro/go-mips32:v1</span><br></pre></td></tr></table></figure></li><li><p>å¯åŠ¨é•œåƒå¹¶æŒ‚è½½æœ¬åœ°ç›®å½•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker run -it -v ç¨‹åºç›®å½•:/go/src conoro/go-mips32:v1 /bin/sh</span><br><span class="line"><span class="built_in">cd</span> src</span><br><span class="line"><span class="comment"># ç¼–è¯‘</span></span><br><span class="line"><span class="comment"># export GOOS=linux</span></span><br><span class="line"><span class="comment"># export GOARCH=mips32le</span></span><br><span class="line">go build main.go</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&gt;.&amp;lt;&lt;br&gt;
    
    </summary>
    
      <category term="Docker" scheme="https://hocg.in/categories/Docker/"/>
    
    
      <category term="OpenWrt" scheme="https://hocg.in/tags/OpenWrt/"/>
    
      <category term="Docker" scheme="https://hocg.in/tags/Docker/"/>
    
      <category term="Go" scheme="https://hocg.in/tags/Go/"/>
    
  </entry>
  
  <entry>
    <title>è‡ªç¼–è¯‘ OpenWrt ç³»ç»Ÿ</title>
    <link href="https://hocg.in/2017/11/22/%E8%87%AA%E7%BC%96%E8%AF%91%20OpenWrt%20%E7%B3%BB%E7%BB%9F/"/>
    <id>https://hocg.in/2017/11/22/è‡ªç¼–è¯‘ OpenWrt ç³»ç»Ÿ/</id>
    <published>2017-11-22T02:18:02.000Z</published>
    <updated>2018-01-04T10:30:58.409Z</updated>
    
    <content type="html"><![CDATA[<p>ğŸ˜Œ æ•´ç†ã€è®°å½•ä¸€ä¸‹æ­¥éª¤..<br><a id="more"></a></p><h1 id="å‰ç½®"><a href="#å‰ç½®" class="headerlink" title="å‰ç½®"></a>å‰ç½®</h1><h2 id="æ›´æ”¹æº"><a href="#æ›´æ”¹æº" class="headerlink" title="æ›´æ”¹æº"></a>æ›´æ”¹æº</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sed -i.bak 's/\/us.archive.ubuntu.com\//\/cn.archive.ubuntu.com\//g' /etc/apt/sources.list</span><br><span class="line"></span><br><span class="line">sudo apt update</span><br></pre></td></tr></table></figure><h2 id="å…³é—­IPv6"><a href="#å…³é—­IPv6" class="headerlink" title="å…³é—­IPv6"></a>å…³é—­IPv6</h2><p>echo 1 &gt; /proc/sys/net/ipv6/conf/<eth1>/disable_ipv6</eth1></p><h2 id="å‰ç½®å®‰è£…"><a href="#å‰ç½®å®‰è£…" class="headerlink" title="å‰ç½®å®‰è£…"></a>å‰ç½®å®‰è£…</h2><ul><li>git subversion make automake autoconf gcc g++ binutils</li></ul><h2 id="make-ç¼ºçœå®‰è£…"><a href="#make-ç¼ºçœå®‰è£…" class="headerlink" title="make, ç¼ºçœå®‰è£…"></a>make, ç¼ºçœå®‰è£…</h2><ul><li>libncurses5-dev</li><li>libssl-dev</li><li>gawk</li></ul><h2 id="å‰ç½®-1"><a href="#å‰ç½®-1" class="headerlink" title="å‰ç½®"></a>å‰ç½®</h2><ul><li>GitHub(git clone <a href="https://github.com/openwrt/openwrt" target="_blank" rel="external">https://github.com/openwrt/openwrt</a>) è·å– OpenWrt, æ›´æ”¹ openWrt ç›®å½•ä¸ºå½“å‰ç”¨æˆ·æ‰€æœ‰æƒ<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ä¾‹å¦‚:</span></span><br><span class="line">chown -R hocgin:hocgin openwrt</span><br></pre></td></tr></table></figure></li></ul><hr><h1 id="ç¼–è¯‘-openwrt"><a href="#ç¼–è¯‘-openwrt" class="headerlink" title="ç¼–è¯‘(openwrt/)"></a>ç¼–è¯‘(openwrt/)</h1><h2 id="ç¼–è¯‘è¿‡ç¨‹"><a href="#ç¼–è¯‘è¿‡ç¨‹" class="headerlink" title="ç¼–è¯‘è¿‡ç¨‹"></a>ç¼–è¯‘è¿‡ç¨‹</h2><ol><li><p>make</p></li><li><p>./script/feeds update -a</p></li><li><p>./script/feeds install -a</p></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4. make deconfig <span class="comment"># ä½¿ç”¨é»˜è®¤çš„é…ç½®</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">5. make menuconfig <span class="comment"># åŸºäºç»ˆç«¯çš„ä¸€ç§é…ç½®æ–¹å¼ï¼Œæä¾›äº†æ–‡æœ¬æ¨¡å¼çš„å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡å…‰æ ‡ç§»åŠ¨æ¥æµè§ˆæ‰€æ”¯æŒçš„å„ç§ç‰¹æ€§ã€‚</span></span><br></pre></td></tr></table></figure><blockquote><p>å›ºä»¶é…ç½®, å¯ä»¥é€‰æ‹©ç¼–è¯‘çš„è½¯ä»¶åŒ…</p></blockquote><pre><code>## éƒ¨åˆ†é€‰é¡¹- æ¶æ„(AR7xxx) - FLASH(Generic)- è·¯ç”±å™¨å‹å·(WNDR3800) - æ–‡ä»¶ç³»ç»Ÿ(squashfs)- é€šç”¨è®¾ç½®    - [-] Crytographically signed package lists    - [-] Compile with support for patented functionallty    - [-] Enable shadow password support    - [-] Crash logging    - [-] Compile the kernel with debug information    - [-] Compile the kernel SysRq support    - [-] Enable process core dump support    - [-] Enable printk timestamps    - [-] Enable Ipv6 support in packages    - [-] Compile certain packages parallelized    - [-] Enable gcc format-security- [-] Build the OpenWrt Image Builder    - [-] In- [-] Build the OpenWrt SDK- [-] Package the OpenWrt-based Toolchain</code></pre><p>å…¶ä½™é»˜è®¤ã€‚</p><ol><li><p>make kernel_config</p><blockquote><p>å†…æ ¸é…ç½®[å¼€å¯æµ®ç‚¹æ•°æ¨¡æ‹Ÿ(FPU)]</p></blockquote></li><li><p>make V=s -j&lt;å¤„ç†å™¨æ•°é‡&gt;</p></li><li><p>ç¼–è¯‘å®Œæˆåï¼Œç§»å‡º<code>bin/ar71xx/OpenWrt-ImageBuilder-ar71xx-generic.Linux-x86_64.tar.bz2</code> æ–‡ä»¶, å¹¶è§£å‹(tar xvf).</p></li><li><p>è¿›å…¥(<code>OpenWrt-ImageBuilder-ar71xx-generic.Linux-x86_64/</code>)</p></li><li><p>ç¼–è¯‘æˆé•œåƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æ£€æŸ¥åŸºç¡€é•œåƒ</span></span><br><span class="line">parallels@ubuntu:~/OpenWrt/OpenWrt-ImageBuilder-ar71xx-generic.Linux-x86_64$ make image PROFILE=WNDR3700</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> åŒ…å«å¿…å¤‡åŒ…`é¢„è£…è½¯ä»¶`çš„é•œåƒ</span></span><br><span class="line">parallels@ubuntu:~/OpenWrt/OpenWrt-ImageBuilder-ar71xx-generic.Linux-x86_64$ make image PROFILE=WNDR3700 PACKAGES="-dnsmasq dnsmasq-full ipset openssh-keygen openssh-server openssh-sftp-server kmod-fs-ext4 kmod-fs-ntfs kmod-fs-vfat kmod-usb2 kmod-usb-core kmod-usb-storage kmod-usb-storage-extras luci-app-firewall luci-app-samba luci-app-upnp luci luci-theme-material curl kmod-ipt-nat-extra libpcre"</span><br></pre></td></tr></table></figure></li><li><p>ç”Ÿæˆé•œåƒ(<code>~/OpenWrt/OpenWrt-ImageBuilder-ar71xx-generic.Linux-x86_64/bin/</code>)</p></li></ol><ul><li>openwrt-ar71xx-generic-wndr3800-squashfs-sysupgrade.bin</li><li>openwrt-ar71xx-generic-wndr3800-squashfs-factory.img</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ğŸ˜Œ æ•´ç†ã€è®°å½•ä¸€ä¸‹æ­¥éª¤..&lt;br&gt;
    
    </summary>
    
      <category term="OpenWrt" scheme="https://hocg.in/categories/OpenWrt/"/>
    
    
      <category term="OpenWrt" scheme="https://hocg.in/tags/OpenWrt/"/>
    
  </entry>
  
  <entry>
    <title>åˆ¶ä½œ.ipkå®‰è£…æ–‡ä»¶</title>
    <link href="https://hocg.in/2017/11/19/%E5%88%B6%E4%BD%9C.ipk/"/>
    <id>https://hocg.in/2017/11/19/åˆ¶ä½œ.ipk/</id>
    <published>2017-11-19T04:30:21.000Z</published>
    <updated>2018-01-09T00:35:43.000Z</updated>
    
    <content type="html"><![CDATA[<p><code>.ipk</code> æœ¬è´¨æ˜¯<code>tar.gz</code>æ ¼å¼çš„å‹ç¼©åŒ…, æŒ‰ç…§æŸç§è§„èŒƒæ ¼å¼(<code>ç±»ä¼¼.debåŒ…</code>)è¿›è¡Œ â€¦<br><a id="more"></a></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><ol><li><code>.ipk</code> æœ¬è´¨æ˜¯<code>tar.gz</code>æ ¼å¼çš„å‹ç¼©åŒ…, æŒ‰ç…§æŸç§è§„èŒƒæ ¼å¼(<code>ç±»ä¼¼.debåŒ…</code>)è¿›è¡Œå‹ç¼©è€Œæˆçš„ã€‚</li><li>å½“æˆ‘ä»¬å¯¹å®ƒçš„å†…å®¹è¿›è¡Œæ“ä½œæ—¶å€™æ‰€ä½¿ç”¨çš„ç”¨æˆ·å³æ˜¯å®ƒå®‰è£…åæ‰€æ‹¥æœ‰çš„ç”¨æˆ·å’Œæƒé™(<code>sudo chown root:root -R .</code>)ã€‚</li><li>å·²ç»å­˜åœ¨çš„æ–‡ä»¶å¹¶ä¸èƒ½è¿›è¡Œæ›¿æ¢, åˆ‡è®°ã€‚</li></ol><h2 id="æ–‡ä»¶ä»‹ç»"><a href="#æ–‡ä»¶ä»‹ç»" class="headerlink" title="æ–‡ä»¶ä»‹ç»"></a>æ–‡ä»¶ä»‹ç»</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ control.tar.gz <span class="comment"># å®‰è£…/å¸è½½ è„šæœ¬</span></span><br><span class="line">â”œâ”€â”€ data.tar.gz <span class="comment"># äºŒè¿›åˆ¶/é…ç½®æ–‡ä»¶..</span></span><br><span class="line">â””â”€â”€ debian-binary <span class="comment"># å›ºæœ‰æ–‡ä»¶</span></span><br></pre></td></tr></table></figure><h2 id="control-tar-gz-å†…å®¹"><a href="#control-tar-gz-å†…å®¹" class="headerlink" title="control.tar.gz å†…å®¹"></a>control.tar.gz å†…å®¹</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ control <span class="comment"># æ–‡ä»¶ä»‹ç»[åŒ…æ‹¬: ä¾èµ–/ç‰ˆæœ¬/æ¶æ„/ä½œè€…..]</span></span><br><span class="line">â”œâ”€â”€ postinst <span class="comment"># å®‰è£…è„šæœ¬</span></span><br><span class="line">â””â”€â”€ postrm <span class="comment"># å¸è½½è„šæœ¬</span></span><br></pre></td></tr></table></figure><h3 id="control-æ­¤å¤„ä¸¾ä¸ªæ —å­"><a href="#control-æ­¤å¤„ä¸¾ä¸ªæ —å­" class="headerlink" title="control æ­¤å¤„ä¸¾ä¸ªæ —å­"></a><code>control</code> æ­¤å¤„ä¸¾ä¸ªæ —å­</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Package: IPKName <span class="comment"># .ipk NAME</span></span><br><span class="line">Version: 1</span><br><span class="line">Section: net</span><br><span class="line">Priority: optional</span><br><span class="line">Architecture: ar71xx <span class="comment"># ç³»ç»Ÿæ¶æ„</span></span><br><span class="line">Maintainer: hocgin &lt;hocgin@gmail.com&gt;</span><br><span class="line">Description: my first ipk</span><br></pre></td></tr></table></figure><h3 id="postinst-å®‰è£…è„šæœ¬"><a href="#postinst-å®‰è£…è„šæœ¬" class="headerlink" title="postinst å®‰è£…è„šæœ¬"></a>postinst å®‰è£…è„šæœ¬</h3><blockquote><p>å› ä¸ºå‰è¨€çš„<code>3</code>åŸå› , å½“æˆ‘ä»¬éœ€è¦å¯¹å·²å­˜åœ¨æ–‡ä»¶è¿›è¡Œä¿®æ”¹æ—¶, åªèƒ½ä½¿ç”¨å†™å…¥çš„æ–¹å¼è¿›è¡Œä¿®æ”¹ã€‚</p></blockquote><p>ä¾‹å¦‚:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"installed done"</span> &gt; /tmp/ipk.log</span><br></pre></td></tr></table></figure></p><h3 id="postinst-å¸è½½è„šæœ¬"><a href="#postinst-å¸è½½è„šæœ¬" class="headerlink" title="postinst å¸è½½è„šæœ¬"></a>postinst å¸è½½è„šæœ¬</h3><blockquote><p>è‡ªå·±çº¦çš„XğŸ¤£ã€‚ã€‚</p></blockquote><p>ä¾‹å¦‚:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">rm -rf /tmp/ipk.log</span><br></pre></td></tr></table></figure></p><h3 id="æ‰“åŒ…"><a href="#æ‰“åŒ…" class="headerlink" title="æ‰“åŒ…~"></a>æ‰“åŒ…~</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo tar -czf control.tar.gz *</span><br></pre></td></tr></table></figure><h2 id="data-tar-gz"><a href="#data-tar-gz" class="headerlink" title="data.tar.gz"></a>data.tar.gz</h2><blockquote><p>æ­¤å¤„å®Œå…¨æ˜¯æ ¹æ®ä½ è¦å¢åŠ çš„è„šæœ¬æŒ‰æ ¹ç›®å½•è¿›è¡Œå­˜æ”¾çš„ã€‚</p></blockquote><p>ä¾‹å¦‚:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ bin</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ ss-redir</span><br><span class="line">â”‚Â Â  â””â”€â”€ ss-tunnel</span><br><span class="line">â”œâ”€â”€ data.tar.gz</span><br><span class="line">â”œâ”€â”€ etc</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ dnsmasq.d</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ address.conf</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ dns.conf</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ipset.conf</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ option.conf</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ server.conf</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ pdnsd.conf</span><br><span class="line">â”‚Â Â  â””â”€â”€ shadowsock.json</span><br><span class="line">â”œâ”€â”€ root</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ addDnsmasq.sh</span><br><span class="line">â”‚Â Â  â””â”€â”€ changeService.sh</span><br><span class="line">â””â”€â”€ usr</span><br><span class="line">    â””â”€â”€ sbin</span><br><span class="line">        â””â”€â”€ pdnsd</span><br></pre></td></tr></table></figure></p><h3 id="æ‰“åŒ…-1"><a href="#æ‰“åŒ…-1" class="headerlink" title="æ‰“åŒ…~"></a>æ‰“åŒ…~</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo tar -czf data.tar.gz *</span><br></pre></td></tr></table></figure><h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><blockquote><p>å°†ä¸‰ä¸ªæ–‡ä»¶æ”¾åœ¨ä¸€èµ·è¿›è¡Œæ‰“åŒ…</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo tar -czf mIPK.ipk *</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;code&gt;.ipk&lt;/code&gt; æœ¬è´¨æ˜¯&lt;code&gt;tar.gz&lt;/code&gt;æ ¼å¼çš„å‹ç¼©åŒ…, æŒ‰ç…§æŸç§è§„èŒƒæ ¼å¼(&lt;code&gt;ç±»ä¼¼.debåŒ…&lt;/code&gt;)è¿›è¡Œ â€¦&lt;br&gt;
    
    </summary>
    
      <category term="OpenWrt" scheme="https://hocg.in/categories/OpenWrt/"/>
    
    
      <category term="Tips" scheme="https://hocg.in/tags/Tips/"/>
    
      <category term="OpenWrt" scheme="https://hocg.in/tags/OpenWrt/"/>
    
      <category term="Shell" scheme="https://hocg.in/tags/Shell/"/>
    
  </entry>
  
  <entry>
    <title>IDEA ä¸­çš„ Spring Boot å¼€å‘æ¨¡å¼</title>
    <link href="https://hocg.in/2017/10/20/IDEA-%E4%B8%AD%E7%9A%84-Spring-Boot-%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F/"/>
    <id>https://hocg.in/2017/10/20/IDEA-ä¸­çš„-Spring-Boot-å¼€å‘æ¨¡å¼/</id>
    <published>2017-10-20T15:28:09.000Z</published>
    <updated>2018-10-11T13:39:15.407Z</updated>
    
    <content type="html"><![CDATA[<p>ğŸ¤‘ å®Œå…¨çƒ­éƒ¨ç½², é…ç½®å®Œæˆç¬é—´èˆ’çˆ½æ— æ¯”ã€‚<br><a id="more"></a></p><h2 id="java-æ–‡ä»¶å’Œé…ç½®æ–‡ä»¶æ›´æ”¹åè¿›è¡Œè‡ªåŠ¨é‡å¯"><a href="#java-æ–‡ä»¶å’Œé…ç½®æ–‡ä»¶æ›´æ”¹åè¿›è¡Œè‡ªåŠ¨é‡å¯" class="headerlink" title=".java æ–‡ä»¶å’Œé…ç½®æ–‡ä»¶æ›´æ”¹åè¿›è¡Œè‡ªåŠ¨é‡å¯"></a><code>.java</code> æ–‡ä»¶å’Œé…ç½®æ–‡ä»¶æ›´æ”¹åè¿›è¡Œè‡ªåŠ¨é‡å¯</h2><ol><li>æ›´æ”¹<code>IDEA</code>ä¸­çš„å¦‚ä¸‹è®¾ç½®<code>Build project automatically</code>ã€‚</li></ol><p><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-10-19%2022.30.09.png" alt="å±å¹•å¿«ç…§ 2017-10-19 22.30.09.png"></p><ol><li>æ‰“å¼€<code>IDEA</code>çš„<code>Action window</code>, å¿«æ·é”®å¦‚ä¸‹:</li></ol><ul><li>Linux : <code>CTRL+SHIFT+A</code></li><li>Mac OSX : <code>SHIFT+COMMAND+A</code></li><li>Windows : <code>CTRL+ALT+SHIFT+/</code><br>è¾“å…¥(é€‰æ‹©) <code>Registry...</code>, é€‰æ‹©å¦‚ä¸‹:</li></ul><p><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-10-19%2022.36.39.png" alt="å±å¹•å¿«ç…§ 2017-10-19 22.36.39.png"></p><p>æ­¤æ—¶è¿›è¡Œ<code>.java</code> æ–‡ä»¶å’Œé…ç½®æ–‡ä»¶ä¿®æ”¹æ—¶, ä¼šè¿›è¡Œ Spring Boot é‡å¯ã€‚</p><h2 id="å½“æ›´æ”¹é™æ€HTMLè¿›è¡Œå®æ—¶åˆ·æ–°"><a href="#å½“æ›´æ”¹é™æ€HTMLè¿›è¡Œå®æ—¶åˆ·æ–°" class="headerlink" title="å½“æ›´æ”¹é™æ€HTMLè¿›è¡Œå®æ—¶åˆ·æ–°"></a>å½“æ›´æ”¹é™æ€<code>HTML</code>è¿›è¡Œå®æ—¶åˆ·æ–°</h2><ol><li>åŠ å…¥ä¾èµ–</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ol><li>å®‰è£…æµè§ˆå™¨æ’ä»¶</li></ol><ul><li><p><a href="https://chrome.google.com/webstore/detail/livereload/jnihajbhpnppcggbcgedagnkighmdlei" target="_blank" rel="external">Chrome æ’ä»¶</a></p></li><li><p><a href="https://addons.mozilla.org/en-US/firefox/addon/livereload/" target="_blank" rel="external">Firefox æ’ä»¶</a></p></li><li><p><a href="http://download.livereload.com/2.1.0/LiveReload-2.1.0.safariextz" target="_blank" rel="external">Safari æ’ä»¶</a></p></li></ul><ol><li>æ›´æ”¹æ–‡ä»¶å’Œé™æ€é¡µé¢(HTML)éƒ½å¯ä»¥è¿›è¡Œçƒ­éƒ¨ç½²ç±»ã€‚</li></ol><h2 id="å®æ—¶åˆ·æ–°thymeleafæ¨¡ç‰ˆæ–‡ä»¶"><a href="#å®æ—¶åˆ·æ–°thymeleafæ¨¡ç‰ˆæ–‡ä»¶" class="headerlink" title="å®æ—¶åˆ·æ–°thymeleafæ¨¡ç‰ˆæ–‡ä»¶"></a>å®æ—¶åˆ·æ–°<code>thymeleaf</code>æ¨¡ç‰ˆæ–‡ä»¶</h2><p>é…ç½®æ–‡ä»¶è®¾ç½®å–æ¶ˆç¼“å­˜:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">    thymeleaf:</span></span><br><span class="line"><span class="attr">        cache:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>Chrome è®¾ç½®å–æ¶ˆç¼“å­˜:</p><p><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-10-19%2022.46.23.png" alt="å±å¹•å¿«ç…§ 2017-10-19 22.46.23.png"></p><p>æ­¤æ—¶å‡ ä¹æ‰€æœ‰çš„ä¸œè¥¿(<code>.java</code>/<code>`/</code>SpringBoot é…ç½®æ–‡ä»¶`)éƒ½å¯ä»¥è¿›è¡Œçƒ­éƒ¨ç½²äº†ã€‚<br>åŒ…æ‹¬:</p><ul><li>ä¿®æ”¹ <code>.java</code> æ–‡ä»¶ã€‚</li><li>ä¿®æ”¹é¡µé¢(<code>thymeleaf</code> <code>html</code> <code>..</code>) æ–‡ä»¶ã€‚</li><li>ä¿®æ”¹ <code>SpringBoot é…ç½®æ–‡ä»¶</code>ã€‚</li><li>å¢åˆ é™æ€æ–‡ä»¶(<code>css</code> <code>js</code> <code>å›¾ç‰‡</code>)ã€‚</li></ul><h2 id="å…³äºå®šåˆ¶åŒ–çƒ­éƒ¨ç½²"><a href="#å…³äºå®šåˆ¶åŒ–çƒ­éƒ¨ç½²" class="headerlink" title="å…³äºå®šåˆ¶åŒ–çƒ­éƒ¨ç½²"></a>å…³äºå®šåˆ¶åŒ–çƒ­éƒ¨ç½²</h2><p> å¯æŸ¥è¯¢<code>spring-boot-devtools</code>çš„ä½¿ç”¨, ä½¿ç”¨ä»¥ä¸‹å­é¡¹è¿›è¡Œé…ç½®ã€‚<br> <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">   devtools:</span></span><br></pre></td></tr></table></figure></p><h2 id="IDEA-æ‰©å±•"><a href="#IDEA-æ‰©å±•" class="headerlink" title="IDEA æ‰©å±•"></a>IDEA æ‰©å±•</h2><blockquote><p>pom.xml æ·»åŠ ä»¥ä¸‹ä¾èµ–å¯æŸ¥çœ‹æ›´å¤šçš„ä¿¡æ¯ã€‚<br>è¯¥ä¾èµ–æ˜¯å¯æŸ¥çœ‹ç›‘æ§ä¿¡æ¯çš„, æ›´å¤šä½¿ç”¨ç§»æ­¥ Google.comã€‚</p></blockquote> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>IDEA æ˜¾ç¤ºå¦‚ä¸‹:</p><p> <img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-10-29%2014.18.38.png" alt="å±å¹•å¿«ç…§ 2017-10-29 14.18.38.png"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ğŸ¤‘ å®Œå…¨çƒ­éƒ¨ç½², é…ç½®å®Œæˆç¬é—´èˆ’çˆ½æ— æ¯”ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="Server" scheme="https://hocg.in/categories/Server/"/>
    
    
      <category term="Tips" scheme="https://hocg.in/tags/Tips/"/>
    
      <category term="Ubuntu" scheme="https://hocg.in/tags/Ubuntu/"/>
    
      <category term="SpringBoot" scheme="https://hocg.in/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>JQuery.pjax æ— æ³•å†æ¬¡åˆå§‹åŒ–å½“å‰é¡µé¢çš„JS</title>
    <link href="https://hocg.in/2017/10/19/JQuery.pjax%E6%97%A0%E6%B3%95%E5%86%8D%E6%AC%A1%E5%88%9D%E5%A7%8B%E5%8C%96%E5%BD%93%E5%89%8D%E9%A1%B5%E9%9D%A2%E7%9A%84JS/"/>
    <id>https://hocg.in/2017/10/19/JQuery.pjaxæ— æ³•å†æ¬¡åˆå§‹åŒ–å½“å‰é¡µé¢çš„JS/</id>
    <published>2017-10-19T14:07:20.000Z</published>
    <updated>2017-10-22T04:16:22.962Z</updated>
    
    <content type="html"><![CDATA[<p>Pjax å¾ˆä¹…ä¹‹å‰ç”¨è¿‡ä¸€æ¬¡, è¿™ä¸€æ¬¡åœ¨æ•´åˆåå°æ¨¡ç‰ˆï¼Œå‘ç°ç½‘ä¸Šå¯¹è¿™ä¸ªå‘ç«Ÿç„¶æ˜¯æ”¹æºç â€¦åœ¨è¿™è¯¦ç»†è®°å½•ä¸€ä¸‹ã€‚</p><a id="more"></a><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>å½“ <code>JQuery.pjax</code> åŠ è½½é¡µé¢å, å†æ¬¡åŠ è½½è¯¥é¡µé¢æ—¶ï¼Œå…¶å†…éƒ¨çš„åˆå§‹åŒ– <code>JS</code> æˆ– <code>script inline</code> å¹¶ä¸èƒ½è¢«å†æ¬¡æ‰§è¡Œã€‚ä¾‹å¦‚:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"pjax-container"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- .. --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- jQuery 3 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">th:src</span>=<span class="string">"jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- jQuery Pjax --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">th:src</span>=<span class="string">"jquery.pjax.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        $(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> ($.support.pjax) &#123;</span></span><br><span class="line"><span class="javascript">                $(<span class="built_in">document</span>).pjax(<span class="string">'a[data-pjax]'</span>, <span class="string">'#pjax-container'</span>, &#123;</span></span><br><span class="line"><span class="undefined">                    maxCacheLength: 0,</span></span><br><span class="line"><span class="javascript">                    push: <span class="literal">false</span>,</span></span><br><span class="line"><span class="javascript">                    replace: <span class="literal">true</span>,</span></span><br><span class="line"><span class="javascript">                    fragment: <span class="string">'#pjax-container'</span>,</span></span><br><span class="line"><span class="undefined">                    timeout: 8000</span></span><br><span class="line"><span class="undefined">                &#125;);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">"ä¸èƒ½è¢«å†æ¬¡æ‰§è¡Œ"</span>);</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ä¸èƒ½è¢«å†æ¬¡æ‰§è¡Œ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>  <span class="attr">src</span>=<span class="string">"init.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h2 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h2><ol><li>å…¶åŸå› æ˜¯<code>JQuery.pjax</code>å¯¹<code>js</code>è¿›è¡Œäº†ç¼“å­˜, å¯ä»¥ä½¿ç”¨<code>JQuery</code>è¿›è¡ŒåŠ è½½, å½“ç„¶å…¶ä»£ä»·æ˜¯ç‰ºç‰²äº†è¿™éƒ¨åˆ†éƒ½ç¼“å­˜, ä¸è¿‡å› ä¸ºæ˜¯ç‰¹å®šé¡µé¢çš„è„šæœ¬, ç‰ºç‰²çš„ç¼“å­˜å‡ ä¹å¯ä»¥å¿½ç•¥ã€‚ä¾‹å­å¦‚ä¸‹:<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"pjax-container"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- .. --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- èƒ½è¢«å†æ¬¡æ‰§è¡Œ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">th:inline</span>=<span class="string">"javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">            $.getScript(<span class="string">'/admin-lte/dist/js/pages/dashboard2.js'</span>);</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>  <span class="attr">src</span>=<span class="string">"init.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">"èƒ½è¢«å†æ¬¡æ‰§è¡Œ"</span>);</span></span><br><span class="line"><span class="undefined">        &#125;);</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- jQuery 3 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">th:src</span>=<span class="string">"jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- jQuery Pjax --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">th:src</span>=<span class="string">"jquery.pjax.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        $(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> ($.support.pjax) &#123;</span></span><br><span class="line"><span class="javascript">                $(<span class="built_in">document</span>).pjax(<span class="string">'a[data-pjax]'</span>, <span class="string">'#pjax-container'</span>, &#123;</span></span><br><span class="line"><span class="undefined">                    maxCacheLength: 0,</span></span><br><span class="line"><span class="javascript">                    push: <span class="literal">false</span>,</span></span><br><span class="line"><span class="javascript">                    replace: <span class="literal">true</span>,</span></span><br><span class="line"><span class="javascript">                    fragment: <span class="string">'#pjax-container'</span>,</span></span><br><span class="line"><span class="undefined">                    timeout: 8000</span></span><br><span class="line"><span class="undefined">                &#125;);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Pjax å¾ˆä¹…ä¹‹å‰ç”¨è¿‡ä¸€æ¬¡, è¿™ä¸€æ¬¡åœ¨æ•´åˆåå°æ¨¡ç‰ˆï¼Œå‘ç°ç½‘ä¸Šå¯¹è¿™ä¸ªå‘ç«Ÿç„¶æ˜¯æ”¹æºç â€¦åœ¨è¿™è¯¦ç»†è®°å½•ä¸€ä¸‹ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Web" scheme="https://hocg.in/categories/Web/"/>
    
    
      <category term="JavaScript" scheme="https://hocg.in/tags/JavaScript/"/>
    
      <category term="Pjax" scheme="https://hocg.in/tags/Pjax/"/>
    
  </entry>
  
  <entry>
    <title>Thymeleaf 3.0 æ‰‹å†Œ</title>
    <link href="https://hocg.in/2017/10/18/Thymeleaf-3.0-%E6%89%8B%E5%86%8C/"/>
    <id>https://hocg.in/2017/10/18/Thymeleaf-3.0-æ‰‹å†Œ/</id>
    <published>2017-10-18T08:40:51.000Z</published>
    <updated>2018-01-04T08:26:38.907Z</updated>
    
    <content type="html"><![CDATA[<p>Spring å®˜æ–¹æ¨å´‡çš„æ¨¡ç‰ˆå¼•æ“ï¼Œéµå¾ª HTML5è§„èŒƒã€‚<br><a id="more"></a></p><h2 id="HTML5"><a href="#HTML5" class="headerlink" title="HTML5"></a>HTML5</h2><p>è‹¥è¦å®Œå…¨éµå¾ªHTML5è§„èŒƒï¼Œå¯ä½¿ç”¨ <code>data-th-*</code> ä»£æ›¿ <code>th:*</code>ã€‚</p><h2 id="æ ‡ç­¾"><a href="#æ ‡ç­¾" class="headerlink" title="æ ‡ç­¾"></a>æ ‡ç­¾</h2><h3 id="th-each"><a href="#th-each" class="headerlink" title="th:each"></a>th:each</h3><blockquote><p>foreach å¾ªç¯<br>è¯­æ³•: th:each=â€obj, index:listâ€<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">th:block</span> <span class="attr">th:each</span>=<span class="string">"permission, i:$&#123;role.permissions&#125;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:attr</span>=<span class="string">"data-tt-id=$&#123;permission.id&#125;, data-tt-parent-id=$&#123;permission.parent&#125;, data-tt-branch=$&#123;permission.hasChildren&#125;"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;permission.name&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;permission.url&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;permission.type&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;permission.permission&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">th:block</span>&gt;</span></span><br></pre></td></tr></table></figure></p></blockquote><h3 id="th-inline"><a href="#th-inline" class="headerlink" title="th:inline"></a>th:inline</h3><blockquote><p>è§£æå†…åµŒè¯­æ³•, ä¸€èˆ¬æ˜¯æ··åˆjavascript<br>è¯­æ³•: th:inline=â€javascript|text|noneâ€<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">th:inline</span>=<span class="string">"javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="comment">/*&lt;![CDATA[*/</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> welcome = [[$&#123;welcome&#125;]] <span class="string">'è¿™æ˜¯ä¸€ä¸ª Thymeleaf å˜é‡'</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> default_value = [[$&#123;maxCount?:<span class="number">0</span>&#125;]]</span></span><br><span class="line"><span class="javascript"><span class="comment">/*]]&gt;*/</span></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p></blockquote><h3 id="th-fragment"><a href="#th-fragment" class="headerlink" title="th:fragment"></a>th:fragment</h3><blockquote><p>å®šä¹‰æ¨¡ç‰ˆï¼Œè¯­æ³•: th:fragment=â€æ¨¡å—å(å˜é‡)â€<br>å˜é‡éƒ¨åˆ†ä¸ºå¯é€‰, é…åˆ th:with ä½¿ç”¨ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ä¸ä¿ç•™æœ¬èº«çš„æ ‡ç­¾, ä¿ç•™ th:fragment çš„æ ‡ç­¾ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">"/admin/fragments/header::header"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ä¿ç•™æœ¬èº«çš„æ ‡ç­¾, ä¿ç•™ th:fragment çš„æ ‡ç­¾ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:insert</span>=<span class="string">"/admin/fragments/header::header"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- @è¿‡æœŸ, ä¿ç•™æœ¬èº«çš„æ ‡ç­¾, ä¸ä¿ç•™ th:fragment çš„æ ‡ç­¾ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:include</span>=<span class="string">"/admin/fragments/header::header"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p></blockquote><h3 id="th-with"><a href="#th-with" class="headerlink" title="th:with"></a>th:with</h3><blockquote><p>å®šä¹‰å˜é‡ã€‚è¯­æ³•: th:with=â€å­—æ®µ1=å€¼, å­—æ®µ2=å€¼2â€<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:with</span>=<span class="string">"id='UploadImage',var='image',height=1,maxCount=1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p></blockquote><h3 id="th-if"><a href="#th-if" class="headerlink" title="th:if"></a>th:if</h3><blockquote><p>å°±æ˜¯ if ..<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:if</span>=<span class="string">"$&#123;true&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">    å¸ƒå°”å€¼.</span></span><br><span class="line"><span class="comment">    0 = false</span></span><br><span class="line"><span class="comment">    "false"/"off"/"no" = false</span></span><br><span class="line"><span class="comment">    null = false</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br></pre></td></tr></table></figure></p></blockquote><h3 id="th-switch-th-case"><a href="#th-switch-th-case" class="headerlink" title="th:switch/th:case"></a>th:switch/th:case</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">th:switch</span>=<span class="string">"$&#123;val&#125;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">th:case</span>=<span class="string">"1"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">th:case</span>=<span class="string">"2"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="th-selected"><a href="#th-selected" class="headerlink" title="th:selected"></a>th:selected</h3><blockquote><p>å¯ç”¨äº <option> æ ‡ç­¾<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"type"</span> <span class="attr">name</span>=<span class="string">"type"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"0"</span> <span class="attr">th:selected</span>=<span class="string">"$&#123;permission?.type==0&#125;"</span>&gt;</span>èœå•<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"1"</span> <span class="attr">th:selected</span>=<span class="string">"$&#123;permission?.type==1&#125;"</span>&gt;</span>æ•°æ®<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></option></p></blockquote><h2 id="æ³¨é‡Šè¯­æ³•"><a href="#æ³¨é‡Šè¯­æ³•" class="headerlink" title="æ³¨é‡Šè¯­æ³•"></a>æ³¨é‡Šè¯­æ³•</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--/* è¿™é‡Œæ˜¯ ç¼–è¯‘å™¨æ˜¾ç¤ºä¸ºæ³¨é‡Š, æµè§ˆå™¨ä¸å¯è§ */--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--/*--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>è¿™é‡Œæ˜¯ ç¼–è¯‘å™¨æ˜¾ç¤ºä¸æ³¨é‡Šï¼Œæµè§ˆå™¨ä¸å¯è§ <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--*/--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--/*/</span></span><br><span class="line"><span class="comment">&lt;div th:text="$&#123;'è¿™é‡Œæ˜¯ ç¼–è¾‘å™¨æ˜¾ç¤ºä¸ºæ³¨é‡Š, æµè§ˆå™¨å¯è§'&#125;"&gt;...&lt;/div&gt;</span></span><br><span class="line"><span class="comment">/*/--&gt;</span></span><br></pre></td></tr></table></figure><h2 id="è¡¨è¾¾å¼"><a href="#è¡¨è¾¾å¼" class="headerlink" title="è¡¨è¾¾å¼"></a>è¡¨è¾¾å¼</h2><h3 id="URL-è¡¨è¾¾å¼"><a href="#URL-è¡¨è¾¾å¼" class="headerlink" title="URL è¡¨è¾¾å¼"></a>URL è¡¨è¾¾å¼</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">th:src</span>=<span class="string">"@&#123;/img/tup.png&#125;"</span> <span class="attr">alt</span>=<span class="string">"ç»å¯¹è·¯å¾„"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- &lt;img alt="ç»å¯¹è·¯å¾„" src="/img/tup.png"&gt; --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">th:src</span>=<span class="string">"@&#123;../img/tup.png&#125;"</span> <span class="attr">alt</span>=<span class="string">"ç›¸å¯¹è·¯å¾„"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- &lt;img alt="ç›¸å¯¹è·¯å¾„" src="../img/tup.png"&gt; --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">th:src</span>=<span class="string">"@&#123;../img/tup.png(size=$&#123;100&#125;)&#125;"</span> <span class="attr">alt</span>=<span class="string">"å¸¦å‚æ•°çš„è·¯å¾„"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- &lt;img alt="å¸¦å‚æ•°çš„è·¯å¾„" src="../img/tup.png?size=100"&gt; --&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å›½é™…åŒ–è¡¨è¾¾å¼"><a href="#å›½é™…åŒ–è¡¨è¾¾å¼" class="headerlink" title="å›½é™…åŒ–è¡¨è¾¾å¼"></a>å›½é™…åŒ–è¡¨è¾¾å¼</h3><ol><li>åˆ›å»º <code>resources/messages_zh_CN.properties</code>, å…¶å†…å®¹:</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">message.error=é”™è¯¯</span><br></pre></td></tr></table></figure><ol><li>é…ç½® <code>application.yml</code> (ä½¿ç”¨ xml çš„æ‰§è¡Œè½¬æ¢)</li></ol><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  messages:</span></span><br><span class="line"><span class="attr">    basename:</span> <span class="string">messages_zh_CN</span></span><br></pre></td></tr></table></figure><ol><li>ä½¿ç”¨</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:text</span>=<span class="string">"#&#123;message.error&#125;"</span>&gt;</span>Error<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å˜é‡è¡¨è¾¾å¼"><a href="#å˜é‡è¡¨è¾¾å¼" class="headerlink" title="å˜é‡è¡¨è¾¾å¼"></a>å˜é‡è¡¨è¾¾å¼</h3><blockquote><p>æœ€åŸºæœ¬çš„è¡¨è¾¾å¼, ç±»ä¼¼äº EL è¡¨è¾¾å¼ã€‚</p><ul><li>åˆ <code>org.springframework.ui.Model</code> ä½¿ç”¨ã€‚</li><li>å¯ä»¥ä½¿ç”¨ä¼—å¤šå†…ç½®å¯¹è±¡ã€‚</li><li>@è®¿é—® Spring å®¹å™¨å†…å¯¹è±¡</li></ul></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;author.name&#125;"</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å˜é‡è¡¨è¾¾å¼-æ‰©å±•-1"><a href="#å˜é‡è¡¨è¾¾å¼-æ‰©å±•-1" class="headerlink" title="å˜é‡è¡¨è¾¾å¼ - æ‰©å±• 1"></a>å˜é‡è¡¨è¾¾å¼ - æ‰©å±• 1</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">th:object</span>=<span class="string">"$&#123;author&#125;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">th:text</span>=<span class="string">"*&#123;name&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">th:text</span>=<span class="string">"*&#123;mail&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">th:text</span>=<span class="string">"*&#123;address&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    ç­‰ä»·äº</span></span><br><span class="line"><span class="comment">    &lt;ul&gt;</span></span><br><span class="line"><span class="comment">        &lt;li th:text="$&#123;author.name&#125;"&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="comment">        &lt;li th:text="$&#123;author.mail&#125;"&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="comment">        &lt;li th:text="$&#123;author.address&#125;"&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="comment">    &lt;/ul&gt;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å˜é‡è¡¨è¾¾å¼-æ‰©å±•-2"><a href="#å˜é‡è¡¨è¾¾å¼-æ‰©å±•-2" class="headerlink" title="å˜é‡è¡¨è¾¾å¼ - æ‰©å±• 2"></a>å˜é‡è¡¨è¾¾å¼ - æ‰©å±• 2</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:text</span>=<span class="string">"$&#123;@demoService.getStr('hocgin')&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="é¢„å¤„ç†è¡¨è¾¾å¼"><a href="#é¢„å¤„ç†è¡¨è¾¾å¼" class="headerlink" title="é¢„å¤„ç†è¡¨è¾¾å¼"></a>é¢„å¤„ç†è¡¨è¾¾å¼</h3><ol><li>å‰ç½®è®¾ç½®, Controller</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(&#123;<span class="string">"/test.html"</span>&#125;)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">index</span><span class="params">(Model model, @PathVariable String page)</span> </span>&#123;</span><br><span class="line">    model.addAttribute(<span class="string">"key"</span>, <span class="string">"error"</span>);</span><br><span class="line">    HashMap&lt;String, String&gt; vm = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    vm.put(<span class="string">"error"</span>, <span class="string">"æ¥è‡ª $&#123;&#125; è¡¨è¾¾å¼"</span>);</span><br><span class="line">    model.addAttribute(<span class="string">"obj"</span>, vm);</span><br><span class="line">    <span class="keyword">return</span> String.format(<span class="string">"test.html"</span>, page);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>å‰ç½®è®¾ç½®, <code>messages_zh_CN.properties</code> å‚è€ƒ<strong>å›½é™…åŒ–è¡¨è¾¾å¼</strong></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">message.error=é”™è¯¯</span><br></pre></td></tr></table></figure><ol><li>test.html ç¼–å†™</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">"@&#123;/img/__$&#123;1+1&#125;__&#125;"</span>&gt;</span>è¿æ¥<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- &lt;a href="/img/2"&gt;è¿æ¥&lt;/a&gt; --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:text</span>=<span class="string">"#&#123;message.__$&#123;key&#125;__&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- &lt;div&gt;é”™è¯¯&lt;/div&gt; --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:text</span>=<span class="string">"$&#123;obj.__$&#123;key&#125;__&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- &lt;div&gt;æ¥è‡ª $&#123;&#125; è¡¨è¾¾å¼&lt;/div&gt; --&gt;</span></span><br></pre></td></tr></table></figure><h3 id="Fragment-è¡¨è¾¾å¼"><a href="#Fragment-è¡¨è¾¾å¼" class="headerlink" title="Fragment è¡¨è¾¾å¼"></a>Fragment è¡¨è¾¾å¼</h3><blockquote><p>~{â€¦}</p></blockquote><h2 id="è¡¨è¾¾å¼è¯­æ³•"><a href="#è¡¨è¾¾å¼è¯­æ³•" class="headerlink" title="è¡¨è¾¾å¼è¯­æ³•"></a>è¡¨è¾¾å¼è¯­æ³•</h2><h3 id="å­—ç¬¦ä¸²æ‹¼æ¥"><a href="#å­—ç¬¦ä¸²æ‹¼æ¥" class="headerlink" title="å­—ç¬¦ä¸²æ‹¼æ¥"></a>å­—ç¬¦ä¸²æ‹¼æ¥</h3><p>ä½¿ç”¨ <code>+</code> æˆ–è€… <code>|..|</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"'1+1=' + $&#123;1+1&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 1+1=2 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"|1+1=$&#123;1+1&#125;|"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 1+1=2 --&gt;</span></span><br></pre></td></tr></table></figure><h3 id="è¿ç®—ç¬¦å·"><a href="#è¿ç®—ç¬¦å·" class="headerlink" title="è¿ç®—ç¬¦å·"></a>è¿ç®—ç¬¦å·</h3><p>ä½¿ç”¨ <code>+, -, *, /, %</code>ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"-((1+1-1)*2/2)%9"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- -1 --&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ä¸-æˆ–-é"><a href="#ä¸-æˆ–-é" class="headerlink" title="ä¸ æˆ– é"></a>ä¸ æˆ– é</h3><p>ä½¿ç”¨ <code>and , or</code> å’Œ <code>! , not</code>ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"1==1 and true"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- true --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"true and false"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- false --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"true or false"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- true --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"not true"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- false --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"! false"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- true --&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å…³ç³»è¡¨è¾¾å¼"><a href="#å…³ç³»è¡¨è¾¾å¼" class="headerlink" title="å…³ç³»è¡¨è¾¾å¼"></a>å…³ç³»è¡¨è¾¾å¼</h3><p>ä½¿ç”¨ <code>&gt;, &lt;, &gt;=, &lt;=, ==, !=</code>ã€‚<br>æˆ–è€… <code>gt, lt, ge, le, eq, ne</code>ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"((1 &gt; 2 and 2 &lt; 3) or (2 &gt;= 2 and 2 &lt;= 5)) and (1 == 1 and 1 != 2)"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- true --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"((1 gt 2 and 2 lt 3) or (2 ge 2 and 2 le 5)) and (1 eq 1 and 1 ne 2)"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- true --&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ç®€å•æ¡ä»¶è¡¨è¾¾å¼"><a href="#ç®€å•æ¡ä»¶è¡¨è¾¾å¼" class="headerlink" title="ç®€å•æ¡ä»¶è¡¨è¾¾å¼"></a>ç®€å•æ¡ä»¶è¡¨è¾¾å¼</h3><p>ä½¿ç”¨:<br>if-then <code>(if) ? (then)</code><br>if-then-else <code>(if) ? (then) : (else)</code><br>default <code>(value) ?: (defaultValue)</code>  </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"true ? 'hocgin'"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- hocgin --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"false ? 'hocgin' : 'hocg.in'"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- hocg.in --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;iname&#125; ?: 'hocgin'"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- hocgin --&gt;</span></span><br></pre></td></tr></table></figure><h2 id="è§£æä¼˜å…ˆçº§"><a href="#è§£æä¼˜å…ˆçº§" class="headerlink" title="è§£æä¼˜å…ˆçº§"></a>è§£æä¼˜å…ˆçº§</h2><table><thead><tr><th>çº§åˆ«</th><th>æè¿°</th><th>thå±æ€§</th></tr></thead><tbody><tr><td>1</td><td>(Fragment inclusion)ä»£ç ç‰‡æ®µå¯¼å…¥</td><td><code>th:insert</code>,<code>th:replace</code></td></tr><tr><td>2</td><td>(Fragment iteration)è¿­ä»£</td><td><code>th:each</code></td></tr><tr><td>3</td><td>(Conditional evaluation)æ¡ä»¶</td><td><code>th:if</code>,<code>th:unless</code>,<code>th:switch</code>,<code>th:case</code></td></tr><tr><td>4</td><td>(Local variable definition)å±€éƒ¨å˜é‡</td><td><code>th:object</code>,<code>th:with</code></td></tr><tr><td>5</td><td>(General attribute modification)é€šç”¨å±æ€§ä¿®æ”¹</td><td><code>th:attr</code>,<code>th:attrprepend</code>,<code>th:attrappend</code></td></tr><tr><td>6</td><td>(Specific attribute modification)å…·ä½“å±æ€§ä¿®æ”¹</td><td><code>th:value</code>,<code>th:href</code>,<code>th:src</code> â€¦</td></tr><tr><td>7</td><td>(Text tag body modification) æ–‡æœ¬èŠ‚ç‚¹ä¿®æ”¹</td><td><code>th:text</code>,<code>th:utext</code></td></tr><tr><td>8</td><td>(Fragment specification) ä»£ç æ®µå®šä¹‰</td><td><code>th:fragment</code></td></tr><tr><td>9</td><td>(Fragment removal) ä»£ç æ®µåˆ é™¤</td><td><code>th:remove</code></td></tr></tbody></table><h2 id="åŸºç¡€å¯¹è±¡"><a href="#åŸºç¡€å¯¹è±¡" class="headerlink" title="åŸºç¡€å¯¹è±¡"></a>åŸºç¡€å¯¹è±¡</h2><h3 id="ctx-org-thymeleaf-spring4-context-SpringWebContext"><a href="#ctx-org-thymeleaf-spring4-context-SpringWebContext" class="headerlink" title="#ctx (org.thymeleaf.spring4.context.SpringWebContext)"></a><code>#ctx</code> (org.thymeleaf.spring4.context.SpringWebContext)</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * org.thymeleaf.context.IContext</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="comment">// å½“å‰è¯­è¨€ç¯å¢ƒ(eg. en_US)ã€‚ ç­‰ä»·äº &#123;#locale&#125;</span></span><br><span class="line">$&#123;#ctx.locale&#125;</span><br><span class="line"><span class="comment">// org.thymeleaf.context.VariablesMap å¯¹è±¡, å†…éƒ¨å­˜å‚¨çš„æ˜¯å¯ç”¨äºå½“å‰ä¸Šä¸‹æ–‡(Context)çš„å¯¹è±¡ã€‚ç­‰ä»·äº &#123;#vars&#125;</span></span><br><span class="line">$&#123;#ctx.variables&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * org.thymeleaf.context.IWebContext</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line">$&#123;#ctx.applicationAttributes&#125;</span><br><span class="line"><span class="comment">// ç­‰ä»·äº &#123;#httpServletRequest&#125;</span></span><br><span class="line">$&#123;#ctx.httpServletRequest&#125;</span><br><span class="line">$&#123;#ctx.httpServletResponse&#125;</span><br><span class="line"><span class="comment">// ç­‰ä»·äº &#123;#httpSession&#125;</span></span><br><span class="line">$&#123;#ctx.httpSession&#125;</span><br><span class="line">$&#123;#ctx.requestAttributes&#125;</span><br><span class="line">$&#123;#ctx.requestParameters&#125;</span><br><span class="line">$&#123;#ctx.servletContext&#125;</span><br><span class="line">$&#123;#ctx.sessionAttributes&#125;</span><br></pre></td></tr></table></figure><h3 id="param-org-apache-catalina-util-ParameterMap"><a href="#param-org-apache-catalina-util-ParameterMap" class="headerlink" title="param (org.apache.catalina.util.ParameterMap)"></a><code>param</code> (org.apache.catalina.util.ParameterMap)</h3><p>åŒ…å«å½“å‰é¡µé¢çš„è¯·æ±‚çš„å‚æ•°(eg. <code>http://localhost:8080/admin/test.html?name=hocgin</code>)ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿”å›å¯¹è±¡</span></span><br><span class="line">$&#123;param.name&#125; </span><br><span class="line"><span class="comment">// è·å¾—å€¼: hocgin</span></span><br><span class="line">$&#123;param.name[<span class="number">0</span>]&#125; </span><br><span class="line">$&#123;param.size()&#125;</span><br><span class="line">$&#123;param.isEmpty()&#125;</span><br><span class="line">$&#123;param.containsKey(<span class="string">'name'</span>)&#125;</span><br></pre></td></tr></table></figure><h3 id="session-org-thymeleaf-context-WebSessionVariablesMap"><a href="#session-org-thymeleaf-context-WebSessionVariablesMap" class="headerlink" title="session (org.thymeleaf.context.WebSessionVariablesMap)"></a><code>session</code> (org.thymeleaf.context.WebSessionVariablesMap)</h3><p>ä» Session è·å–å†…å®¹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å¾—å€¼: hocgin</span></span><br><span class="line">$&#123;session.name&#125;</span><br><span class="line">$&#123;session.size()&#125;</span><br><span class="line">$&#123;session.isEmpty()&#125;</span><br><span class="line">$&#123;session.containsKey(<span class="string">'name'</span>)&#125;</span><br></pre></td></tr></table></figure><h3 id="httpServletRequest-org-apache-catalina-connector-RequestFacade"><a href="#httpServletRequest-org-apache-catalina-connector-RequestFacade" class="headerlink" title="#httpServletRequest (org.apache.catalina.connector.RequestFacade)"></a><code>#httpServletRequest</code> (org.apache.catalina.connector.RequestFacade)</h3><h3 id="themes-org-thymeleaf-spring4-expression-Themes"><a href="#themes-org-thymeleaf-spring4-expression-Themes" class="headerlink" title="#themes (org.thymeleaf.spring4.expression.Themes)"></a><code>#themes</code> (org.thymeleaf.spring4.expression.Themes)</h3><h3 id="application"><a href="#application" class="headerlink" title="application"></a><code>application</code></h3><h3 id="dates-org-thymeleaf-expression-Dates"><a href="#dates-org-thymeleaf-expression-Dates" class="headerlink" title="#dates (org.thymeleaf.expression.Dates)"></a><code>#dates</code> (org.thymeleaf.expression.Dates)</h3><h3 id="calendars-org-thymeleaf-expression-Calendars"><a href="#calendars-org-thymeleaf-expression-Calendars" class="headerlink" title="#calendars (org.thymeleaf.expression.Calendars)"></a><code>#calendars</code> (org.thymeleaf.expression.Calendars)</h3><h3 id="numbers-org-thymeleaf-expression-Numbers"><a href="#numbers-org-thymeleaf-expression-Numbers" class="headerlink" title="#numbers (org.thymeleaf.expression.Numbers)"></a><code>#numbers</code> (org.thymeleaf.expression.Numbers)</h3><h3 id="strings-org-thymeleaf-expression-Strings"><a href="#strings-org-thymeleaf-expression-Strings" class="headerlink" title="#strings (org.thymeleaf.expression.Strings)"></a><code>#strings</code> (org.thymeleaf.expression.Strings)</h3><h3 id="objects-org-thymeleaf-expression-Objects"><a href="#objects-org-thymeleaf-expression-Objects" class="headerlink" title="#objects (org.thymeleaf.expression.Objects)"></a><code>#objects</code> (org.thymeleaf.expression.Objects)</h3><h3 id="bools-org-thymeleaf-expression-Bools"><a href="#bools-org-thymeleaf-expression-Bools" class="headerlink" title="#bools (org.thymeleaf.expression.Bools)"></a><code>#bools</code> (org.thymeleaf.expression.Bools)</h3><h3 id="arrays-org-thymeleaf-expression-Arrays"><a href="#arrays-org-thymeleaf-expression-Arrays" class="headerlink" title="#arrays (org.thymeleaf.expression.Arrays)"></a><code>#arrays</code> (org.thymeleaf.expression.Arrays)</h3><h3 id="lists-org-thymeleaf-expression-Lists"><a href="#lists-org-thymeleaf-expression-Lists" class="headerlink" title="#lists (org.thymeleaf.expression.Lists)"></a><code>#lists</code> (org.thymeleaf.expression.Lists)</h3><h3 id="sets-org-thymeleaf-expression-Sets"><a href="#sets-org-thymeleaf-expression-Sets" class="headerlink" title="#sets (org.thymeleaf.expression.Sets)"></a><code>#sets</code> (org.thymeleaf.expression.Sets)</h3><h3 id="maps-org-thymeleaf-expression-Maps"><a href="#maps-org-thymeleaf-expression-Maps" class="headerlink" title="#maps (org.thymeleaf.expression.Maps)"></a><code>#maps</code> (org.thymeleaf.expression.Maps)</h3><h3 id="aggregates-org-thymeleaf-expression-Aggregates"><a href="#aggregates-org-thymeleaf-expression-Aggregates" class="headerlink" title="#aggregates (org.thymeleaf.expression.Aggregates)"></a><code>#aggregates</code> (org.thymeleaf.expression.Aggregates)</h3><h3 id="messages-org-thymeleaf-expression-Messages"><a href="#messages-org-thymeleaf-expression-Messages" class="headerlink" title="#messages (org.thymeleaf.expression.Messages)"></a><code>#messages</code> (org.thymeleaf.expression.Messages)</h3><h3 id="ids-org-thymeleaf-expression-Ids"><a href="#ids-org-thymeleaf-expression-Ids" class="headerlink" title="#ids (org.thymeleaf.expression.Ids)"></a><code>#ids</code> (org.thymeleaf.expression.Ids)</h3><p><strong>ä»£ç ç¤ºä¾‹</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">### `#locale` (<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;#locale&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>)<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">### `#ctx` (<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;#ctx&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>)<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">### `#vars` (<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;#vars&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>)<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line">### `param` (<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;param&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>)<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">### `application` (<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;application&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>)<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">### `session` (<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;session&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>)<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">### `#httpSession` (<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;#httpSession&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>)<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">### `#httpServletRequest` (<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;#httpServletRequest&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>)<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line">### `#themes` (<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;#themes&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>)<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">### `#dates` (<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;#dates&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>)<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">### `#calendars` (<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;#calendars&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>)<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">### `#numbers` (<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;#numbers&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>)<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">### `#strings` (<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;#strings&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>)<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">### `#objects` (<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;#objects&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>)<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">### `#bools` (<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;#bools&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>)<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">### `#arrays` (<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;#arrays&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>)<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">### `#lists` (<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;#lists&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>)<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">### `#sets` (<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;#sets&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>)<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">### `#maps` (<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;#maps&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>)<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">### `#aggregates` (<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;#aggregates&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>)<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">### `#messages` (<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;#messages&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>)<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">### `#ids` (<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;#ids&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>)<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="é‡ç‚¹"><a href="#é‡ç‚¹" class="headerlink" title="é‡ç‚¹"></a>é‡ç‚¹</h2><ul><li>åœ¨ <code>thymeleaf</code> ä¸­ä½¿ç”¨ Spring å®¹å™¨å†…çš„å•ä¾‹.</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:text</span>=<span class="string">"$&#123;@demoService.getStr('hocgin')&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>å¼•å…¥æ¨¡ç‰ˆç‰‡æ®µ</li></ul><ol><li><p>XPath è¡¨è¾¾å¼</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:include</span>=<span class="string">"mytemplate :: [//div[@class='content']]"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>CSS è¡¨è¾¾å¼</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:include</span>=<span class="string">"mytemplate :: [div.content]"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><ul><li>å¼•å…¥å…¬æœ‰ç‰‡æ®µ(JS æˆ– CSS)</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">css</span> <span class="attr">th:replace</span>=<span class="string">"mytemplate :: common-css"</span>&gt;</span><span class="tag">&lt;/<span class="name">css</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">js</span> <span class="attr">th:replace</span>=<span class="string">"@&#123;mytemplate&#125; :: common-css"</span>&gt;</span><span class="tag">&lt;/<span class="name">js</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¯ç»“åˆ è·¯å¾„è¡¨è¾¾å¼ --&gt;</span></span><br></pre></td></tr></table></figure><h2 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a>æ‰©å±•</h2><h3 id="thymeleaf-layout-dialect"><a href="#thymeleaf-layout-dialect" class="headerlink" title="thymeleaf-layout-dialect"></a>thymeleaf-layout-dialect</h3><blockquote><p>ä¸€èˆ¬æƒ…å†µç½‘ç«™éƒ½æœ‰ä¸€ä¸ªå¤–éƒ¨æ¡†æ¶, å¦‚ header æˆ–è€… footer, è¿™ä¸ªæ‰©å±•ä¾¿æ˜¯ç”¨äºæŠ½ç¦»é‚£äº›é‡å¤çš„éƒ¨åˆ†çš„ã€‚</p><h4 id="layout-decorator"><a href="#layout-decorator" class="headerlink" title="layout:decorator"></a>layout:decorator</h4><p>æŒ‡å®šéœ€ä½¿ç”¨çš„çˆ¶çº§æ¨¡ç‰ˆ<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:layout</span>=<span class="string">"http://www.ultraq.net.nz/thymeleaf/layout"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">layout:decorator</span>=<span class="string">"/admin/_layouts/default"</span>&gt;</span></span><br><span class="line">      ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p></blockquote><h4 id="layout-fragment"><a href="#layout-fragment" class="headerlink" title="layout:fragment"></a>layout:fragment</h4><blockquote><p>åœ¨çˆ¶æ¨¡ç‰ˆä¸­ä½¿ç”¨å®šä¹‰ä¸€ä¸ªæ ‡è®°ï¼Œ<br>åœ¨å­æ¨¡ç‰ˆä¸­ä½¿ç”¨è¦†ç›–åˆ°çˆ¶æ¨¡ç‰ˆä½ç½®ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- çˆ¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">layout:fragment</span>=<span class="string">"content"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>çˆ¶æ¨¡ç‰ˆå†…å®¹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å­ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">layout:fragment</span>=<span class="string">"content"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>å­æ¨¡ç‰ˆå†…å®¹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ç”Ÿæˆ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>å­æ¨¡ç‰ˆå†…å®¹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p></blockquote><h4 id="layout-title-pattern"><a href="#layout-title-pattern" class="headerlink" title="layout:title-pattern"></a>layout:title-pattern</h4><blockquote><p>ç”¨ä¸ <title> æ ‡ç­¾, æŒ‡å®š title çš„å€¼ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- åå° - å­æ ‡é¢˜ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span> <span class="attr">layout:title-pattern</span>=<span class="string">"$DECORATOR_TITLE - $CONTENT_TITLE"</span>&gt;</span>åå°<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br></pre></td></tr></table></figure></title></p></blockquote><h2 id="é»‘ç§‘æŠ€"><a href="#é»‘ç§‘æŠ€" class="headerlink" title="é»‘ç§‘æŠ€"></a>é»‘ç§‘æŠ€</h2><ol><li>å½“æˆ‘ä»¬æƒ³å–ä¸€ä¸ªå¯¹è±¡é‡Œé¢çš„ä¸€ä¸ªå±æ€§, ä½†è¿™ä¸ªå¯¹è±¡å¯èƒ½ä¸ºç©ºæ—¶(ğŸ˜‹)ã€‚<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;user?.address?.city&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Spring å®˜æ–¹æ¨å´‡çš„æ¨¡ç‰ˆå¼•æ“ï¼Œéµå¾ª HTML5è§„èŒƒã€‚&lt;br&gt;
    
    </summary>
    
      <category term="Server" scheme="https://hocg.in/categories/Server/"/>
    
    
      <category term="HTML5" scheme="https://hocg.in/tags/HTML5/"/>
    
      <category term="Thymeleaf" scheme="https://hocg.in/tags/Thymeleaf/"/>
    
  </entry>
  
  <entry>
    <title>JDK8 æ–°ç‰¹æ€§çš„ä½¿ç”¨</title>
    <link href="https://hocg.in/2017/10/10/JDK8%20%E6%96%B0%E7%89%B9%E6%80%A7%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <id>https://hocg.in/2017/10/10/JDK8 æ–°ç‰¹æ€§çš„ä½¿ç”¨/</id>
    <published>2017-10-10T02:02:00.000Z</published>
    <updated>2019-04-09T02:52:28.033Z</updated>
    
    <content type="html"><![CDATA[<p>JDK8 æ–°ç‰¹æ€§çš„ä½¿ç”¨<br><a id="more"></a></p><h2 id="JDK8-æ–°ç‰¹æ€§"><a href="#JDK8-æ–°ç‰¹æ€§" class="headerlink" title="JDK8 æ–°ç‰¹æ€§"></a>JDK8 æ–°ç‰¹æ€§</h2><h3 id="Lambda-è¡¨è¾¾å¼-amp-amp-FunctionalInterface"><a href="#Lambda-è¡¨è¾¾å¼-amp-amp-FunctionalInterface" class="headerlink" title="Lambda è¡¨è¾¾å¼ &amp;&amp; @FunctionalInterface"></a>Lambda è¡¨è¾¾å¼ &amp;&amp; @FunctionalInterface</h3><p>Java8 æ”¯æŒäº† Lambda è¡¨è¾¾å¼ï¼Œè¯­æ³•å¦‚ä¸‹:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ‡å‡†å¼</span></span><br><span class="line">(å½¢å‚) -&gt; &#123;</span><br><span class="line">..ä»£ç </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®€åŒ–å¼</span></span><br><span class="line">() -&gt; System.out.print(<span class="string">"ç®€åŒ–å¼"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¡ˆä¾‹ï¼š</span></span><br><span class="line"><span class="keyword">new</span> Thread(() -&gt; System.out.print(<span class="string">"run"</span>)).run();</span><br></pre></td></tr></table></figure></p><p>ç”±äº Lambda è¡¨è¾¾å¼æ˜¯å¯¹<code>å•ä¸ªå‡½æ•°çš„æ¥å£(interface)</code>è¿›è¡Œç®€åŒ–å¤„ç†ï¼Œå³è¦ä¿è¯æ¥å£ä¸èƒ½å­˜åœ¨åç»­æ–°å¢å‡½æ•°å£°æ˜ï¼Œè¿™æ—¶å°±éœ€è¦å¼•å…¥ @FunctionalInterface è¿›è¡Œæ³¨è§£ã€‚<br>ä»¥ä¸‹æ˜¯ Java8 ä¸‹ Runable æ¥å£çš„å£°æ˜ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * When an object implementing interface &lt;code&gt;Runnable&lt;/code&gt; is used</span></span><br><span class="line"><span class="comment">     * to create a thread, starting the thread causes the object's</span></span><br><span class="line"><span class="comment">     * &lt;code&gt;run&lt;/code&gt; method to be called in that separately executing</span></span><br><span class="line"><span class="comment">     * thread.</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * The general contract of the method &lt;code&gt;run&lt;/code&gt; is that it may</span></span><br><span class="line"><span class="comment">     * take any action whatsoever.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span>     java.lang.Thread#run()</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><blockquote><p>æ³¨: @FunctionalInterface æ¥å£å†…å…è®¸æœ‰<strong>é™æ€å‡½æ•°å®ç°</strong>å’Œ<strong>é»˜è®¤å‡½æ•°å®ç°</strong>ã€‚</p></blockquote><p>å³å¦‚ä¸‹<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">R2</span> <span class="keyword">extends</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é»˜è®¤å‡½æ•°å®ç°</span></span><br><span class="line"><span class="function"><span class="keyword">default</span> String <span class="title">to</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> getClass().toString();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é™æ€å‡½æ•°å®ç°</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> String <span class="title">in</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">"in()"</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="è¿™ä¹Ÿæ˜¯-Java8-interface-ä¸­çš„æ–°ç‰¹æ€§ã€‚"><a href="#è¿™ä¹Ÿæ˜¯-Java8-interface-ä¸­çš„æ–°ç‰¹æ€§ã€‚" class="headerlink" title="è¿™ä¹Ÿæ˜¯ Java8 interface ä¸­çš„æ–°ç‰¹æ€§ã€‚"></a>è¿™ä¹Ÿæ˜¯ Java8 interface ä¸­çš„æ–°ç‰¹æ€§ã€‚</h2><h3 id="å…³äº"><a href="#å…³äº" class="headerlink" title="å…³äº ::"></a>å…³äº ::</h3><blockquote><p>å‡½æ•°çš„å¼•ç”¨ (<strong>é™æ€å‡½æ•°å¼•ç”¨</strong>ã€<strong>æ„é€ å‡½æ•°å¼•ç”¨</strong>ã€<strong>ç‰¹å®šå¯¹è±¡å‡½æ•°å¼•ç”¨</strong>)</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="comment">// å¯¹æ„é€ å‡½æ•°è¿›è¡Œå¼•ç”¨ï¼Œç®€å•å·¥å‚å®ç°</span></span><br><span class="line">Supplier&lt;Car&gt; aNew = Car::<span class="keyword">new</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">System.out.println(aNew.get());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é™æ€å‡½æ•°å¼•ç”¨</span></span><br><span class="line">Function&lt;Supplier&lt;Car&gt;, Car&gt; create = Car::create;</span><br><span class="line">Car car = create.apply(Car::<span class="keyword">new</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç‰¹å®šå¯¹è±¡çš„å‡½æ•°å¼•ç”¨    </span></span><br><span class="line">        <span class="comment">// è¡¥å……:åœ¨ Car å‡½æ•°ä¸­ä½¿ç”¨ this::to ä¹Ÿæ˜¯ä¸€ç§</span></span><br><span class="line">Function&lt;String, String&gt; to = car::to;</span><br><span class="line">System.out.println(to.apply(<span class="string">"Shanghai"</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Car <span class="title">create</span><span class="params">(Supplier&lt;Car&gt; carSupplier)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> carSupplier.get();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">to</span><span class="params">(String address)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> String.format(<span class="string">"to %s "</span>, address);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨: Function&lt;å‚æ•°, è¿”å›å€¼&gt; create = Car::create;<br>æµ‹è¯•åå‘ç°åªæ”¯æŒ<strong>æœ€å¤š2ä¸ªå‚æ•°</strong>çš„å‡½æ•°å¯¹åº” Function, BiFunctionã€‚</p></blockquote><h2 id="å³-æ˜¯å¯¹å‡½æ•°è¿›è¡Œå¼•ç”¨ã€‚"><a href="#å³-æ˜¯å¯¹å‡½æ•°è¿›è¡Œå¼•ç”¨ã€‚" class="headerlink" title="å³, :: æ˜¯å¯¹å‡½æ•°è¿›è¡Œå¼•ç”¨ã€‚"></a>å³, <code>::</code> æ˜¯å¯¹å‡½æ•°è¿›è¡Œå¼•ç”¨ã€‚</h2><h3 id="ä½¿ç”¨-Repeatable-æ”¯æŒé‡å¤æ³¨è§£"><a href="#ä½¿ç”¨-Repeatable-æ”¯æŒé‡å¤æ³¨è§£" class="headerlink" title="ä½¿ç”¨ @Repeatable æ”¯æŒé‡å¤æ³¨è§£"></a>ä½¿ç”¨ @Repeatable æ”¯æŒé‡å¤æ³¨è§£</h3><p>åœ¨ Java8 ä¸­, ä¸å†é™åˆ¶<code>ç›¸åŒçš„æ³¨è§£åœ¨åŒä¸€ä½ç½®åªèƒ½å£°æ˜ä¸€æ¬¡</code>ã€‚<br>ç®€å•ç¤ºä¾‹:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RepeatableMain</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Filter</span>(<span class="string">"filter-1"</span>)</span><br><span class="line"><span class="meta">@Filter</span>(<span class="string">"filter-2"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span> (Method method : RepeatableMain.class.getDeclaredMethods()) &#123;</span><br><span class="line">System.out.println(Arrays.asList(method.getAnnotations()).toString());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Target</span>(ElementType.METHOD)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@interface</span> Filters &#123;</span><br><span class="line">Filter[] value();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Target</span>(ElementType.METHOD)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Repeatable</span>(Filters.class) <span class="comment">// æŒ‡å®šå¤šæ³¨è§£çš„æ³¨è§£ç±»</span></span><br><span class="line"><span class="meta">@interface</span> Filter &#123;</span><br><span class="line"><span class="function">String <span class="title">value</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><hr><h3 id="æ–°å¢æ³¨è§£æ”¯æŒç±»å‹"><a href="#æ–°å¢æ³¨è§£æ”¯æŒç±»å‹" class="headerlink" title="æ–°å¢æ³¨è§£æ”¯æŒç±»å‹"></a>æ–°å¢æ³¨è§£æ”¯æŒç±»å‹</h3><blockquote><p>ElementType.TYPE_PARAMETER<br>ElementType.TYPE_USE<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Annotations</span> </span>&#123;</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE_USE, ElementType.TYPE_PARAMETER&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Both &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE_PARAMETER&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Parameter &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE_USE&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Use &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Holder</span>&lt;@<span class="title">Both</span> @<span class="title">Use</span> @<span class="title">Parameter</span> <span class="title">T</span>&gt; <span class="keyword">extends</span> @<span class="title">Both</span> @<span class="title">Use</span> <span class="title">Object</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span> <span class="keyword">throws</span> @Both @Use Exception </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SuppressWarnings</span>(<span class="string">"unused"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">final</span> Holder&lt;String&gt; holder = <span class="keyword">new</span> <span class="meta">@Both</span> <span class="meta">@Use</span> Holder&lt;&gt;();</span><br><span class="line"><span class="meta">@Both</span> <span class="meta">@Use</span> Collection&lt;<span class="meta">@Both</span> <span class="meta">@Use</span> String&gt; strings = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></blockquote><ol><li>ElementType.TYPE_PARAMETER è¡¨ç¤ºæ³¨è§£å¯ä»¥åœ¨æ³›å‹å£°æ˜å‰ä½¿ç”¨ã€‚</li><li>ElementType.TYPE_USE è¡¨ç¤ºæ³¨è§£å¯ä»¥åœ¨å…¨éƒ¨ç±»å‹ä½ç½®ä½¿ç”¨ã€‚</li></ol><hr><h3 id="Java-ç¼–è¯‘å™¨æ–°ç‰¹æ€§"><a href="#Java-ç¼–è¯‘å™¨æ–°ç‰¹æ€§" class="headerlink" title="Java ç¼–è¯‘å™¨æ–°ç‰¹æ€§"></a>Java ç¼–è¯‘å™¨æ–°ç‰¹æ€§</h3><p>åœ¨ java8 ä¸­, å¯ä»¥åœ¨ç¼–è¯‘æ—¶ä½¿ç”¨<code>â€“parameters</code>å‚æ•°ä¿å­˜å‡½æ•°å½¢å‚çš„åŸå˜é‡å‘½åï¼Œç„¶ååœ¨ä»£ç ä¸­å¯é€šè¿‡åå°„è·å¾—å‡½æ•°çš„å˜é‡å‘½åã€‚<br>ç¤ºä¾‹å¦‚ä¸‹:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JVMs</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> NoSuchMethodException </span>&#123;</span><br><span class="line">Method method = JVMs.class.getMethod(<span class="string">"main"</span>, String[].class);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">final</span> Parameter parameter : method.getParameters()) &#123;</span><br><span class="line">System.out.println(String.format(<span class="string">"%s æ£€æµ‹åˆ°åŸå˜é‡å"</span>, parameter.isNamePresent() ? <span class="string">"å¯ä»¥"</span>: <span class="string">"ä¸å¯ä»¥"</span>));</span><br><span class="line">System.out.println(String.format(<span class="string">"å‚æ•°: %s"</span>, parameter.getName()));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><hr><h3 id="Java-æ–°å¢ç±»åº“"><a href="#Java-æ–°å¢ç±»åº“" class="headerlink" title="Java æ–°å¢ç±»åº“"></a>Java æ–°å¢ç±»åº“</h3><h4 id="Optional"><a href="#Optional" class="headerlink" title="Optional"></a>Optional</h4><blockquote><p>ç”¨äºè§£å†³ NullPointerException<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OptionalMain</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Null å€¼</span></span><br><span class="line">Optional&lt;String&gt; optional = Optional.empty();</span><br><span class="line">System.out.println(String.format(<span class="string">"æ˜¯å¦ä¸ºnull: %s"</span>, !optional.isPresent() ? <span class="string">"æ˜¯"</span> : <span class="string">"å¦"</span>));</span><br><span class="line">System.out.println(optional.orElseGet(() -&gt; <span class="string">"æ— å€¼å›è°ƒè¯¥å‡½æ•°()"</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é Null å€¼</span></span><br><span class="line">optional = Optional.of(<span class="string">"hocgin"</span>);</span><br><span class="line">System.out.println(optional.map(s -&gt; String.format(<span class="string">"å€¼: %s"</span>, s)).orElse(<span class="string">"é»˜è®¤å€¼: 10086"</span>));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></blockquote><h4 id="Stream-API"><a href="#Stream-API" class="headerlink" title="Stream API"></a>Stream API</h4><blockquote><p>å‡½æ•°å¼ç¼–ç¨‹ï¼Œç®€åŒ–äº†ä¹‹å‰ç¹ççš„ä»£ç ç¼–å†™æ–¹å¼ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SteamMain</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="comment">// é›†åˆä¸­ä½¿ç”¨ Stream API</span></span><br><span class="line">Collection&lt;String&gt; collections = Arrays.asList(</span><br><span class="line"><span class="string">"1"</span>,</span><br><span class="line"><span class="string">"2"</span>,</span><br><span class="line"><span class="string">"3"</span>,</span><br><span class="line"><span class="string">"4"</span>,</span><br><span class="line"><span class="string">"5"</span>,</span><br><span class="line"><span class="string">"6"</span>,</span><br><span class="line"><span class="string">"7"</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">collections.stream()</span><br><span class="line">.filter(i -&gt; Integer.valueOf(i) &gt; <span class="number">3</span>)</span><br><span class="line">.limit(<span class="number">3</span>)</span><br><span class="line">.forEach(System.out::println);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–‡ä»¶æµä¸­ä½¿ç”¨ Stream API</span></span><br><span class="line"><span class="keyword">final</span> Path path = <span class="keyword">new</span> File(<span class="string">"filePath"</span>).toPath();</span><br><span class="line"><span class="keyword">try</span> (Stream&lt;String&gt; lines = Files.lines(path, StandardCharsets.UTF_8)) &#123;</span><br><span class="line">lines.onClose(() -&gt; System.out.println(<span class="string">"è¯»å–å®Œæˆ"</span>)).forEach(System.out::println);</span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ³¨: æ­¤å¤„ try ä¸­å¯åœ¨æ–‡ä»¶æµè¯»å–å®Œè¿›è¡Œè‡ªåŠ¨å…³é—­æµçš„å¤„ç†ã€‚</p></blockquote><h3 id="Date-Time-API"><a href="#Date-Time-API" class="headerlink" title="Date/Time API"></a>Date/Time API</h3><blockquote><p>åŠ å¼ºäº†å¯¹æ—¶é—´ä¸æ—¥æœŸçš„å¤„ç†ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DateAndTimeMain</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="comment">// æ—¥æœŸç›¸å…³</span></span><br><span class="line">LocalDate nowDate = LocalDate.now();</span><br><span class="line"><span class="comment">// æ—¶é—´ç›¸å…³</span></span><br><span class="line">LocalTime nowTime = LocalTime.now();</span><br><span class="line"><span class="comment">// æ—¥æœŸ&amp;æ—¶é—´ç›¸å…³</span></span><br><span class="line">LocalDateTime now = LocalDateTime.now();</span><br><span class="line"><span class="comment">// è·å–æŒ‡å®šæ—¶åŒºçš„å½“å‰æ—¶åˆ»</span></span><br><span class="line">Clock clock = Clock.systemUTC();</span><br><span class="line"><span class="comment">// è·å–æŸæ—¶åŒºçš„å½“å‰æ—¶é—´</span></span><br><span class="line">ZonedDateTime zonedDateTime = ZonedDateTime.now(ZoneId.of(<span class="string">"Asia/Shanghai"</span>));</span><br><span class="line"></span><br><span class="line">System.out.println(String.format(<span class="string">"å½“å‰æ—¥æœŸ: %s"</span>, nowDate));</span><br><span class="line">System.out.println(String.format(<span class="string">"å½“å‰æ—¶é—´: %s"</span>, nowTime));</span><br><span class="line">System.out.println(String.format(<span class="string">"å½“å‰æ—¥æœŸ&amp;æ—¶é—´: %s"</span>, now));</span><br><span class="line">System.out.println(String.format(<span class="string">"å½“å‰æ—¶é—´æˆ³: %s"</span>, clock.millis())); <span class="comment">// === System.currentTimeMillis()</span></span><br><span class="line">System.out.println(String.format(<span class="string">"ä¸Šæµ·æ—¶é—´: %s"</span>, zonedDateTime));</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨äºè®¡ç®—ä¸¤ä¸ªæ—¥æœŸé—´çš„é—´éš”</span></span><br><span class="line">ZonedDateTime zonedDateTime2 = ZonedDateTime.now(ZoneId.of(<span class="string">"Asia/Shanghai"</span>));</span><br><span class="line">Duration duration = Duration.between(zonedDateTime, zonedDateTime2);</span><br><span class="line">System.out.println(duration.abs().getNano());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></blockquote><h3 id="JavaScriptå¼•æ“-Nashorn"><a href="#JavaScriptå¼•æ“-Nashorn" class="headerlink" title="JavaScriptå¼•æ“(Nashorn)"></a>JavaScriptå¼•æ“(Nashorn)</h3><blockquote><p>å…è®¸ Java ä¸ JavaScript ç›¸äº’è°ƒç”¨ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NashornMain</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ScriptException </span>&#123;</span><br><span class="line">ScriptEngineManager manager = <span class="keyword">new</span> ScriptEngineManager();</span><br><span class="line">ScriptEngine engine = manager.getEngineByName(<span class="string">"JavaScript"</span>);</span><br><span class="line">System.out.println(engine.getClass().getName());</span><br><span class="line">System.out.println(<span class="string">"Result:"</span> + engine.eval(<span class="string">"function f() &#123; return 1; &#125;; f() + 1;"</span>));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Base64"><a href="#Base64" class="headerlink" title="Base64"></a>Base64</h3><p>åœ¨ java8 ä¸­, åŠ å…¥äº†ï¼ŒBase64ç¼–ç ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Base64Main</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">final</span> String text = <span class="string">"Base64 finally in Java 8!"</span>;</span><br><span class="line"><span class="keyword">final</span> String encoded = Base64</span><br><span class="line">.getEncoder()</span><br><span class="line">.encodeToString(text.getBytes(StandardCharsets.UTF_8));</span><br><span class="line">System.out.println(encoded);</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> String decoded = <span class="keyword">new</span> String(</span><br><span class="line">Base64.getDecoder().decode(encoded),</span><br><span class="line">StandardCharsets.UTF_8);</span><br><span class="line">System.out.println(decoded);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="å¹¶è¡Œæ•°ç»„"><a href="#å¹¶è¡Œæ•°ç»„" class="headerlink" title="å¹¶è¡Œæ•°ç»„"></a>å¹¶è¡Œæ•°ç»„</h3><p>åœ¨ java8 ä¸­, å¯¹æ•°ç»„è¿›è¡Œå¹¶è¡Œå¤„ç†, æå¤§æé«˜åœ¨å¤šæ ¸æœºå­ä¸Šçš„å¤„ç†é€Ÿåº¦ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ParallelMain</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">long</span>[] arrayOfLong = <span class="keyword">new</span> <span class="keyword">long</span>[<span class="number">20000</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿›è¡Œèµ‹å€¼æ“ä½œ</span></span><br><span class="line">Arrays.parallelSetAll(arrayOfLong,</span><br><span class="line">index -&gt; ThreadLocalRandom.current().nextInt(<span class="number">1000000</span>));</span><br><span class="line">Arrays.stream(arrayOfLong).limit(<span class="number">10</span>).forEach(</span><br><span class="line">i -&gt; System.out.print(i + <span class="string">" "</span>));</span><br><span class="line">System.out.println();</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿›è¡Œæ•°ç»„æ’åº</span></span><br><span class="line">Arrays.parallelSort(arrayOfLong);</span><br><span class="line">Arrays.stream(arrayOfLong).limit(<span class="number">10</span>).forEach(</span><br><span class="line">i -&gt; System.out.print(i + <span class="string">" "</span>));</span><br><span class="line">System.out.println();</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿›è¡Œæ•°ç»„æ“ä½œ, ç»“æœ: [a1, a1+a2, a1+a2+a3,..]</span></span><br><span class="line">Arrays.parallelPrefix(arrayOfLong, (x, y) -&gt; x + y);</span><br><span class="line">Arrays.stream(arrayOfLong).limit(<span class="number">10</span>).forEach(</span><br><span class="line">i -&gt; System.out.print(i + <span class="string">" "</span>));</span><br><span class="line">System.out.println();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="å¹¶å‘"><a href="#å¹¶å‘" class="headerlink" title="å¹¶å‘"></a>å¹¶å‘</h3><ul><li>çº¿ç¨‹æ± <code>ExecutorService/ScheduledExecutorService</code>æ”¯æŒä½¿ç”¨<code>Stream API</code>.</li><li><p>æ–°å¢ StampedLock ç”¨äºæ›¿ä»£ ReadWriteLock</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">StampedLock lock = <span class="keyword">new</span> StampedLock();</span><br><span class="line">lock.writeLock();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// ä»£ç ..</span></span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    lock.unlockWrite(stamp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åŸå­æ“ä½œ(java.concurrent.atomic)</p></li><li>ConcurrentMap ç»§æ‰¿è‡ªMapæ¥å£</li><li>ForkJoinPool é¢„ç½®å¹¶è¡Œæœºåˆ¶</li></ul><h3 id="æ–°å¢çš„-Java-å·¥å…·"><a href="#æ–°å¢çš„-Java-å·¥å…·" class="headerlink" title="æ–°å¢çš„ Java å·¥å…·"></a>æ–°å¢çš„ Java å·¥å…·</h3><ul><li><p>Nashornå¼•æ“å‘½ä»¤è¡Œå·¥å…· <strong>jjs</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">jjs # å›è½¦</span><br><span class="line">(function()&#123;return 1+1&#125;)()</span><br></pre></td></tr></table></figure></li><li><p>ç±»ä¾èµ–åˆ†æå™¨å‘½ä»¤è¡Œå·¥å…· <strong>jdeps</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> .class æ–‡ä»¶</span><br><span class="line">jdeps Base64Main.class</span><br><span class="line"><span class="meta">#</span> .jar æ–‡ä»¶</span><br><span class="line">jdeps demo.jar</span><br><span class="line"><span class="meta">#</span> æ–‡ä»¶å¤¹</span><br><span class="line">jdeps jdk8</span><br></pre></td></tr></table></figure></li></ul><h3 id="JVM-æ–°ç‰¹æ€§"><a href="#JVM-æ–°ç‰¹æ€§" class="headerlink" title="JVM æ–°ç‰¹æ€§"></a>JVM æ–°ç‰¹æ€§</h3><ul><li>PermGen è¢«ç§»é™¤</li><li>JVMé€‰é¡¹<code>-XX:PermSize</code>ä¸<code>-XX:MaxPermSize</code>åˆ†åˆ«è¢«<code>-XX:MetaSpaceSize</code>ä¸<code>-XX:MaxMetaspaceSize</code>æ‰€ä»£æ›¿</li></ul><h3 id="ç›¸å…³"><a href="#ç›¸å…³" class="headerlink" title="ç›¸å…³"></a>ç›¸å…³</h3><p><a href="https://www.gitbook.com/book/wizardforcel/modern-java/details" target="_blank" rel="external">Java 8</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;JDK8 æ–°ç‰¹æ€§çš„ä½¿ç”¨&lt;br&gt;
    
    </summary>
    
      <category term="Java" scheme="https://hocg.in/categories/Java/"/>
    
    
      <category term="è¯­æ³•" scheme="https://hocg.in/tags/%E8%AF%AD%E6%B3%95/"/>
    
      <category term="Java" scheme="https://hocg.in/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Javaçº¿ç¨‹æ± å’Œé”-å°è®°</title>
    <link href="https://hocg.in/2017/10/07/Java%20%E7%BA%BF%E7%A8%8B%E6%B1%A0%20%E5%92%8C%20%E9%94%81%20%E5%B0%8F%E8%AE%B0/"/>
    <id>https://hocg.in/2017/10/07/Java çº¿ç¨‹æ±  å’Œ é” å°è®°/</id>
    <published>2017-10-06T17:03:29.000Z</published>
    <updated>2018-05-05T13:02:21.829Z</updated>
    
    <content type="html"><![CDATA[<p>æå–æƒ³è¦çš„apkï¼Œ ä¾‹å¦‚CM ROMåŒ…ä¸­çš„å«å¤©æ°”çš„æ—¶é’Ÿä¸é”™ï¼</p><a id="more"></a><h2 id="å¹¶å‘"><a href="#å¹¶å‘" class="headerlink" title="å¹¶å‘"></a>å¹¶å‘</h2><h3 id="çº¿ç¨‹æ± "><a href="#çº¿ç¨‹æ± " class="headerlink" title="çº¿ç¨‹æ± "></a>çº¿ç¨‹æ± </h3><ul><li><p>ExecutorService</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcurrencyMain</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">ExecutorService executor = Executors.newWorkStealingPool();</span><br><span class="line"></span><br><span class="line">List&lt;Callable&lt;String&gt;&gt; callables = Arrays.asList(</span><br><span class="line">() -&gt; <span class="string">"task1"</span>,</span><br><span class="line">() -&gt; <span class="string">"task2"</span>,</span><br><span class="line">() -&gt; <span class="string">"task3"</span>);</span><br><span class="line"></span><br><span class="line">executor.invokeAll(callables)</span><br><span class="line">.stream()</span><br><span class="line">.map(future -&gt; &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="keyword">return</span> future.get();</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(e);</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line">.forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ScheduledExecutorService</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcurrencyMain</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">ScheduledExecutorService executor = Executors.newScheduledThreadPool(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">ScheduledFuture&lt;?&gt; future = executor.schedule(() -&gt; System.out.println(<span class="string">"æ‰§è¡Œå»¶è¿Ÿä»»åŠ¡"</span>), <span class="number">2</span>, TimeUnit.SECONDS);</span><br><span class="line"></span><br><span class="line">TimeUnit.MILLISECONDS.sleep(<span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">long</span> remainingDelay = future.getDelay(TimeUnit.MILLISECONDS);</span><br><span class="line">System.out.println(String.format(<span class="string">"å‰©ä½™å»¶è¿Ÿæ—¶é—´: %sms"</span>, remainingDelay));</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong>åŒºåˆ«</strong> ä¸¤è€…çš„åŒºåˆ«æ˜¯<code>ScheduledExecutorService</code>æ˜¯å¯å»¶è¿Ÿæ‰§è¡Œã€‚</p><h3 id="åŒæ­¥-Synchronized"><a href="#åŒæ­¥-Synchronized" class="headerlink" title="åŒæ­¥(Synchronized)"></a>åŒæ­¥(Synchronized)</h3><ol><li>å¯¹è±¡é”<br><strong>è¯­æ³•:</strong> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SynchronizedMain</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ==[æµ‹è¯•ä¸€:åŒä¸€å¯¹è±¡]==</span></span><br><span class="line"><span class="comment">// ç»“æœ: 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9</span></span><br><span class="line">Test t1 = <span class="keyword">new</span> Test();</span><br><span class="line">Thread runnable1 = <span class="keyword">new</span> Thread(() -&gt; t1.exec());</span><br><span class="line">Thread runnable2 = <span class="keyword">new</span> Thread(() -&gt; t1.exec());</span><br><span class="line">runnable1.start();</span><br><span class="line">runnable2.start();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ==[æµ‹è¯•äºŒ:ä¸åŒä¸€å¯¹è±¡]==</span></span><br><span class="line"><span class="comment">// ç»“æœ: 0 0 1 2 3 4 5 6 7 1 2 3 4 5 6 7 8 9 8 9</span></span><br><span class="line">Test t2 = <span class="keyword">new</span> Test();</span><br><span class="line">Thread runnable3 = <span class="keyword">new</span> Thread(() -&gt; t1.exec());</span><br><span class="line">Thread runnable4 = <span class="keyword">new</span> Thread(() -&gt; t2.exec());</span><br><span class="line">runnable3.start();</span><br><span class="line">runnable4.start();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥ä¸‹ä¸¤ç§æ–¹å¼ç­‰ä»·ï¼Œä»…ä½œç”¨èŒƒå›´ä¸ä¸€æ ·ã€‚</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">exec</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">System.out.printf(i + <span class="string">" "</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">exec</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">synchronized</span> (<span class="keyword">this</span>) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">System.out.printf(i + <span class="string">" "</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p><strong>ç»“è®º:</strong> åŒä¸€å¯¹è±¡è°ƒç”¨è¯¥æ–¹æ³•æ˜¯é”å®šçš„ï¼Œä¸åŒå¯¹è±¡ä¸ä¼šè¿›è¡Œé”å®šã€‚  </p><ol><li>ç±»é”<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SynchronizedMain</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="comment">// ==[æµ‹è¯•ä¸€:åŒä¸€å¯¹è±¡]==</span></span><br><span class="line"><span class="comment">// ç»“æœ: 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9</span></span><br><span class="line">Test t1 = <span class="keyword">new</span> Test();</span><br><span class="line">Thread runnable1 = <span class="keyword">new</span> Thread(() -&gt; t1.exec());</span><br><span class="line">Thread runnable2 = <span class="keyword">new</span> Thread(() -&gt; t1.exec());</span><br><span class="line">runnable1.start();</span><br><span class="line">runnable2.start();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ==[æµ‹è¯•äºŒ:ä¸åŒä¸€å¯¹è±¡]==</span></span><br><span class="line"><span class="comment">// ç»“æœ: 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9</span></span><br><span class="line">Test t2 = <span class="keyword">new</span> Test();</span><br><span class="line">Thread runnable3 = <span class="keyword">new</span> Thread(() -&gt; t1.exec());</span><br><span class="line">Thread runnable4 = <span class="keyword">new</span> Thread(() -&gt; t2.exec());</span><br><span class="line">runnable3.start();</span><br><span class="line">runnable4.start();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥ä¸‹ä¸¤ç§æ–¹å¼ç­‰ä»·</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Object lock = <span class="keyword">new</span> Object();</span><br><span class="line"><span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">exec</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">synchronized</span> (lock) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">System.out.printf(i + <span class="string">" "</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">exec</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">synchronized</span> (Test.class) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">System.out.printf(i + <span class="string">" "</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p><strong>ç»“è®º:</strong> è¯¥æ–¹å¼é”çš„ä½œç”¨èŒƒå›´æ˜¯æ•´ä¸ªç±»ã€‚</p><ol><li>æŒ‡å®šé”<br><strong>è¯­æ³•:</strong> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SynchronizedMain</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Object lock = <span class="keyword">new</span> Object();</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ==[æµ‹è¯•ä¸€:åŒä¸€å¯¹è±¡]==</span></span><br><span class="line"><span class="comment">// ç»“æœ: 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9</span></span><br><span class="line">Test t1 = <span class="keyword">new</span> Test();</span><br><span class="line">Thread runnable1 = <span class="keyword">new</span> Thread(() -&gt; t1.exec(lock));</span><br><span class="line">Thread runnable2 = <span class="keyword">new</span> Thread(() -&gt; t1.exec(lock));</span><br><span class="line">runnable1.start();</span><br><span class="line">runnable2.start();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ==[æµ‹è¯•äºŒ:ä¸åŒä¸€å¯¹è±¡]==</span></span><br><span class="line"><span class="comment">// ç»“æœ: 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9</span></span><br><span class="line">Test t2 = <span class="keyword">new</span> Test();</span><br><span class="line">Thread runnable3 = <span class="keyword">new</span> Thread(() -&gt; t1.exec(lock));</span><br><span class="line">Thread runnable4 = <span class="keyword">new</span> Thread(() -&gt; t2.exec(lock));</span><br><span class="line">runnable3.start();</span><br><span class="line">runnable4.start();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">exec</span><span class="params">(Object lock)</span> </span>&#123;</span><br><span class="line"><span class="keyword">synchronized</span> (lock) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">System.out.printf(i + <span class="string">" "</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p><strong>ç»“è®º:</strong> è¯¥æ–¹å¼å–å†³äºä¼ å…¥çš„é”ã€‚<strong>å½“å¯¹è±¡å±æ€§å‘ç”Ÿæ”¹å˜æ—¶ï¼Œé”å°±å¤±å»äº†ä½œç”¨ã€‚</strong></p><p>å¯¹äº Java8 ä¸­ï¼Œ<code>ReentrantLock</code> å¯å®ç°é”çš„ä½œç”¨ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æå–æƒ³è¦çš„apkï¼Œ ä¾‹å¦‚CM ROMåŒ…ä¸­çš„å«å¤©æ°”çš„æ—¶é’Ÿä¸é”™ï¼&lt;/p&gt;
    
    </summary>
    
      <category term="Java" scheme="https://hocg.in/categories/Java/"/>
    
    
      <category term="Tips" scheme="https://hocg.in/tags/Tips/"/>
    
      <category term="Java" scheme="https://hocg.in/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>è§£å†³ WebView ç‚¹å‡»æ—¶ç½‘é¡µä¸æ–­é—ªè€€</title>
    <link href="https://hocg.in/2017/09/28/%E8%A7%A3%E5%86%B3WebView%E7%82%B9%E5%87%BB%E6%97%B6%E7%BD%91%E9%A1%B5%E4%B8%8D%E6%96%AD%E9%97%AA%E8%80%80/"/>
    <id>https://hocg.in/2017/09/28/è§£å†³WebViewç‚¹å‡»æ—¶ç½‘é¡µä¸æ–­é—ªè€€/</id>
    <published>2017-09-28T13:47:21.000Z</published>
    <updated>2017-09-28T14:14:54.743Z</updated>
    
    <content type="html"><![CDATA[<p>è§£å†³é«˜ç‰ˆæœ¬ WebView ç‚¹å‡»æ—¶ç½‘é¡µä¸æ–­é—ªè€€çš„é—®é¢˜ ğŸ¤—<br><a id="more"></a></p><h2 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h2><p>ç½‘é¡µæ¸²æŸ“å¼€å¯äº†ç¡¬ä»¶åŠ é€Ÿï¼Œå¦‚æœä½ ä¹Ÿå‡ºç°äº†è¯¥é—®é¢˜ï¼Œå¯ä»¥å°è¯•å…³é—­ç¡¬ä»¶åŠ é€Ÿã€‚  </p><h2 id="æ–¹æ¡ˆ"><a href="#æ–¹æ¡ˆ" class="headerlink" title="æ–¹æ¡ˆ"></a>æ–¹æ¡ˆ</h2><p>æ–¹æ¡ˆä¸€: åœ¨xmlä¸­ä½¿ç”¨<code>android:layerType=&quot;software&quot;</code>è¿›è¡Œå…³é—­ã€‚<strong>æ¨è</strong><br>æ–¹æ¡ˆäºŒ: é€šè¿‡ java ä»£ç <code>webView.setLayerType(View.LAYER_TYPE_SOFTWARE, null);</code>è¿›è¡Œå…³é—­ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://github.com/hocgin/BroswerKit/blob/master/app/src/main/res/layout/activity_browser.xml#L40-L53" target="_blank" rel="external">BroswerKit</a>è¿›è¡Œæ ‡è®°çš„è¿™æ®µä»£ç è§£å†³äº†æˆ‘çš„é—ªè€€é—®é¢˜</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è§£å†³é«˜ç‰ˆæœ¬ WebView ç‚¹å‡»æ—¶ç½‘é¡µä¸æ–­é—ªè€€çš„é—®é¢˜ ğŸ¤—&lt;br&gt;
    
    </summary>
    
      <category term="Android" scheme="https://hocg.in/categories/Android/"/>
    
    
      <category term="Android" scheme="https://hocg.in/tags/Android/"/>
    
      <category term="é—®é¢˜" scheme="https://hocg.in/tags/%E9%97%AE%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>è§£å†³ WebView ç‚¹å‡»æ—¶ç½‘é¡µä¸æ–­é—ªè€€</title>
    <link href="https://hocg.in/2017/09/28/TextView%20%E6%BB%9A%E5%8A%A8%E9%97%AE%E9%A2%98/"/>
    <id>https://hocg.in/2017/09/28/TextView æ»šåŠ¨é—®é¢˜/</id>
    <published>2017-09-28T13:47:21.000Z</published>
    <updated>2017-09-28T15:05:10.868Z</updated>
    
    <content type="html"><![CDATA[<p>è§£å†³é«˜ç‰ˆæœ¬ WebView ç‚¹å‡»æ—¶ç½‘é¡µä¸æ–­é—ªè€€çš„é—®é¢˜ ğŸ¤—<br><a id="more"></a></p><h2 id="è®¾ç½®-TextView-è‡ªåŠ¨æ°´å¹³æ»šåŠ¨"><a href="#è®¾ç½®-TextView-è‡ªåŠ¨æ°´å¹³æ»šåŠ¨" class="headerlink" title="è®¾ç½® TextView è‡ªåŠ¨æ°´å¹³æ»šåŠ¨"></a>è®¾ç½® TextView è‡ªåŠ¨æ°´å¹³æ»šåŠ¨</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/tx"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"40dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">"#fdf"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">"1234567890123456789012345678901234567890"</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">    <span class="attr">android:focusable</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:focusableInTouchMode</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:singleLine</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:scrollHorizontally</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:ellipsize</span>=<span class="string">"marquee"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:marqueeRepeatLimit</span> =<span class="string">"marquee_forever"</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br></pre></td></tr></table></figure><p>é«˜ç‰ˆæœ¬æµ‹è¯•ä¸­<code>android:singleLine=&quot;true&quot;</code>è™½ç„¶è¿‡æœŸäº†ï¼Œä½†ä»ä¸èƒ½ä½¿ç”¨<code>android:maxLines=&quot;1&quot;</code>è¿›è¡Œæ›¿æ¢ï¼Œå¦‚æœå®åœ¨å¼ºè¿«ç—‡æ‚£è€…å¯ä»¥ä½¿ç”¨<code>tx.setSingleLine(true);</code>æ›¿æ¢ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è§£å†³é«˜ç‰ˆæœ¬ WebView ç‚¹å‡»æ—¶ç½‘é¡µä¸æ–­é—ªè€€çš„é—®é¢˜ ğŸ¤—&lt;br&gt;
    
    </summary>
    
      <category term="Android" scheme="https://hocg.in/categories/Android/"/>
    
    
      <category term="Android" scheme="https://hocg.in/tags/Android/"/>
    
      <category term="é—®é¢˜" scheme="https://hocg.in/tags/%E9%97%AE%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>è§£å†³ ProgressBar ä¸Šä¸‹å‡ºç°ç©ºç™½ç°è±¡</title>
    <link href="https://hocg.in/2017/09/27/%E8%A7%A3%E5%86%B3ProgressBar%E9%A1%B6%E9%83%A8%E5%87%BA%E7%8E%B0%E7%A9%BA%E7%99%BD%E7%8E%B0%E8%B1%A1/"/>
    <id>https://hocg.in/2017/09/27/è§£å†³ProgressBaré¡¶éƒ¨å‡ºç°ç©ºç™½ç°è±¡/</id>
    <published>2017-09-27T02:27:22.000Z</published>
    <updated>2018-10-11T13:39:15.371Z</updated>
    
    <content type="html"><![CDATA[<p>è§£å†³ ProgressBar ä¸Šä¸‹å‡ºç°ç©ºç™½ç°è±¡ ğŸ¤ <br><a id="more"></a></p><h2 id="å‡ºç°é—®é¢˜"><a href="#å‡ºç°é—®é¢˜" class="headerlink" title="å‡ºç°é—®é¢˜"></a>å‡ºç°é—®é¢˜</h2><p>ä¸€èˆ¬æƒ…å†µæˆ‘ä»¬ä½¿ç”¨å¦‚ä¸‹ä»£ç æ¥åˆ›å»º<code>ProgressBar</code><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ProgressBar</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/progressBar"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">style</span>=<span class="string">"?android:attr/progressBarStyleHorizontal"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">"#fff"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:max</span>=<span class="string">"100"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:indeterminate</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span>/&gt;</span></span><br></pre></td></tr></table></figure></p><p>é‚£ä¹ˆå°†ä¼šå‡ºç°å¦‚ä¸‹æƒ…å†µ:<br><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-28%2021.58.00.png" alt="å‡ºç°ç©ºç™½é—´éš”é—®é¢˜"></p><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><p>é€šè¿‡å˜æ›´<code>android:layout_marginBottom</code>å’Œ<code>android:layout_marginTop</code>åœ¨ç»“åˆ<code>android:background</code>è®¾ç½®ä¸ºé€æ˜æ¥å¤„ç†è¿™ä¸ªé—®é¢˜:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ProgressBar</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/progressBar"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">"?android:attr/progressBarStyleHorizontal"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_marginBottom</span>=<span class="string">"-7dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_marginTop</span>=<span class="string">"-7dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">"#00ffffff"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:max</span>=<span class="string">"100"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:indeterminate</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span>/&gt;</span></span><br></pre></td></tr></table></figure></p><p>ä»¥ä¸‹æ˜¯å¤„ç†åçš„ç»“æœ<br><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-28%2022.03.46.png" alt="è§£å†³é—®é¢˜å"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è§£å†³ ProgressBar ä¸Šä¸‹å‡ºç°ç©ºç™½ç°è±¡ ğŸ¤ &lt;br&gt;
    
    </summary>
    
      <category term="Android" scheme="https://hocg.in/categories/Android/"/>
    
    
      <category term="Android" scheme="https://hocg.in/tags/Android/"/>
    
      <category term="é—®é¢˜" scheme="https://hocg.in/tags/%E9%97%AE%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>OpenWrt å…¥é—¨ç¯‡</title>
    <link href="https://hocg.in/2017/09/18/OpenWrt-%E5%85%A5%E9%97%A8%E7%AF%87/"/>
    <id>https://hocg.in/2017/09/18/OpenWrt-å…¥é—¨ç¯‡/</id>
    <published>2017-09-18T06:32:26.000Z</published>
    <updated>2018-10-11T13:39:15.364Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©åˆšå¥½é‡åˆ· OpenWrt å›ºä»¶ï¼Œæ•´ç†æ•´ç†<br><a id="more"></a></p><h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p><a href="https://www.wikiwand.com/zh/OpenWrt" target="_blank" rel="external">ä»€ä¹ˆæ˜¯ OpenWrt?</a></p><h2 id="å…³äºæ”¯æŒ-OpenWrt-çš„è·¯ç”±å™¨"><a href="#å…³äºæ”¯æŒ-OpenWrt-çš„è·¯ç”±å™¨" class="headerlink" title="å…³äºæ”¯æŒ OpenWrt çš„è·¯ç”±å™¨"></a>å…³äºæ”¯æŒ OpenWrt çš„è·¯ç”±å™¨</h2><p>å¯ä»¥å» <a href="https://wiki.openwrt.org/toh/start" target="_blank" rel="external">æ”¯æŒ OpenWrt çš„è·¯ç”±å™¨åˆ—è¡¨</a> æŸ¥çœ‹æ”¯æŒçš„è·¯ç”±å™¨, äº†è§£å…¶ <strong>CPUå‹å·(æ—¢èŠ¯ç‰‡å‹å·)</strong> <strong>RAMå®¹é‡</strong> <strong>Flashå®¹é‡</strong></p><h2 id="å…³äº-OpenWrt-å›ºä»¶çš„ä¸‹è½½"><a href="#å…³äº-OpenWrt-å›ºä»¶çš„ä¸‹è½½" class="headerlink" title="å…³äº OpenWrt å›ºä»¶çš„ä¸‹è½½"></a>å…³äº OpenWrt å›ºä»¶çš„ä¸‹è½½</h2><p><a href="https://downloads.openwrt.org" target="_blank" rel="external">OpenWrt å®˜æ–¹ä¸‹è½½å›ºä»¶åœ°å€</a><br><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-18%2012.12.12.png" alt="image"><br><strong>å…³äºä¸‹è½½åœ°å€æ ¼å¼:</strong></p><p><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-18%2012.26.38.png" alt="image"></p><p><strong>å…³äºå›ºä»¶ç±»å‹</strong></p><ul><li>åç¼€ä¸º<code>factory</code>æ˜¯ç”¨äºä»åŸå‚å›ºä»¶åˆ·ä¸º OpenWrtã€‚</li><li>åç¼€ä¸º<code>sysupgrade</code>æ˜¯ç”¨äºä» OpenWrt æ›´æ–° OpenWrtã€‚</li></ul><h2 id="åŸå‚åˆ·-OpenWrt-å›ºä»¶"><a href="#åŸå‚åˆ·-OpenWrt-å›ºä»¶" class="headerlink" title="åŸå‚åˆ· OpenWrt å›ºä»¶"></a>åŸå‚åˆ· OpenWrt å›ºä»¶</h2><blockquote><p>å¾…è¡¥å……</p></blockquote><h2 id="ç½‘é¡µç•Œé¢-OpenWrt-å¤‡ä»½-amp-å‡çº§å›ºä»¶"><a href="#ç½‘é¡µç•Œé¢-OpenWrt-å¤‡ä»½-amp-å‡çº§å›ºä»¶" class="headerlink" title="ç½‘é¡µç•Œé¢ OpenWrt å¤‡ä»½ &amp; å‡çº§å›ºä»¶"></a>ç½‘é¡µç•Œé¢ OpenWrt å¤‡ä»½ &amp; å‡çº§å›ºä»¶</h2><p><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-18%2012.50.34.png" alt="image"><br><img src="http://cdn.hocgin.top/å±å¹•å¿«ç…§%202017-09-18%2012.57.13.png" alt="image"></p><h2 id="OpenWrt-å®‰å…¨æ¨¡å¼"><a href="#OpenWrt-å®‰å…¨æ¨¡å¼" class="headerlink" title="OpenWrt å®‰å…¨æ¨¡å¼"></a>OpenWrt å®‰å…¨æ¨¡å¼</h2><blockquote><p>å½“æˆ‘ä»¬æ— æ³•è¿›å…¥ç½‘é¡µç•Œé¢ï¼Œå¯ä»¥ä½¿ç”¨<strong>å®‰å…¨æ¨¡å¼</strong>ç®¡ç†æ¢å¤å›ºä»¶<br><strong>å¿…é¡»ä½¿ç”¨æœ‰çº¿ç”µç¼†è¿›è¡Œè¿æ¥ã€‚</strong><br>ç¯å¢ƒ: Linux or macOS</p></blockquote><p>è¿›å…¥OpenWrtå®‰å…¨æ¨¡å¼çš„æ–¹æ³•ï¼š</p><ol><li>ä½¿ç”¨ç½‘çº¿è¿æ¥ç”µè„‘å’Œè·¯ç”±å™¨</li><li>è®¾ç½®ç”µè„‘ç½‘å¡<br>IP åœ°å€:<code>192.168.1.x</code>(xä¸º2è‡³255)<br>å­ç½‘æ©ç :<code>255.255.255.0</code></li><li><p>æ‰“å¼€ç»ˆç«¯è¿è¡Œå‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> æ³¨, æ­¤å¤„ eth0 ä¸ºç½‘å¡. å¯ä½¿ç”¨ ifconfig è¿›è¡ŒæŸ¥çœ‹</span><br><span class="line">sudo tcpdump -Ani eth0 port 4919 and udp</span><br></pre></td></tr></table></figure></li><li><p>æ–­ç”µé‡å¯</p></li><li><p>æ‰“å¼€ç»ˆç«¯è¿è¡Œå‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">telnet 192.168.1.1</span><br></pre></td></tr></table></figure></li><li><p>æ‰§è¡ŒæŒ‡ä»¤, ä¾‹å¦‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> é‡ç½®ç³»ç»Ÿ</span><br><span class="line">firstboot</span><br><span class="line"><span class="meta">#</span> é‡ç½®å¯†ç </span><br><span class="line">passwd</span><br></pre></td></tr></table></figure></li><li><p>é‡å¯è·¯ç”±å™¨</p></li></ol><h2 id="ä¸æ­»-U-Boot"><a href="#ä¸æ­»-U-Boot" class="headerlink" title="ä¸æ­» U-Boot"></a>ä¸æ­» U-Boot</h2><blockquote><p>å¾…è¡¥å……</p></blockquote><h2 id="ç½‘é¡µç•Œé¢-OpenWrt-å®½å¸¦æ‹¨å·è®¾ç½®"><a href="#ç½‘é¡µç•Œé¢-OpenWrt-å®½å¸¦æ‹¨å·è®¾ç½®" class="headerlink" title="ç½‘é¡µç•Œé¢ OpenWrt å®½å¸¦æ‹¨å·è®¾ç½®"></a>ç½‘é¡µç•Œé¢ OpenWrt å®½å¸¦æ‹¨å·è®¾ç½®</h2><ol><li><p>è¿›å…¥æ¥å£è®¾ç½®ç•Œé¢</p></li><li><p>è¿›è¡Œ WAN å£ç¼–è¾‘<br><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-18%2013.37.35.png" alt="image"></p></li><li><p>å¡«å†™å®½å¸¦è´¦å· &amp; å¯†ç <br><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-18%2013.45.42.png" alt="image"></p></li><li><p>æ­¤æ—¶ç”µè„‘è¿æ¥ LAN å£çš„è¯ï¼Œå³å¯è¿›è¡Œä¸Šç½‘ã€‚</p></li></ol><h2 id="WiFi-è®¾ç½®"><a href="#WiFi-è®¾ç½®" class="headerlink" title="WiFi è®¾ç½®"></a>WiFi è®¾ç½®</h2><ol><li>è¿›å…¥ WiFi è®¾ç½®ç•Œé¢ï¼Œæ­¤å¤„ä¸ºåŒç½‘å¡<br><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-18%2013.53.43.png" alt="image"></li><li>å¼€å¯WiFi<br><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-18%2014.00.00.png" alt="image"></li><li>è®¾ç½®WiFi<br><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-18%2014.26.04.png" alt="image"></li></ol><hr><h2 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h2><h3 id="ä»€ä¹ˆæ˜¯WANå£ï¼Ÿä»€ä¹ˆæ˜¯LANå£ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯WANå£ï¼Ÿä»€ä¹ˆæ˜¯LANå£ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯WANå£ï¼Ÿä»€ä¹ˆæ˜¯LANå£ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯WANå£ï¼Ÿä»€ä¹ˆæ˜¯LANå£ï¼Ÿ</h3><blockquote><p>è·¯ç”±å™¨é€šå¸¸æœ‰å¤šä¸ªLANå£ï¼Œä¸€ä¸ªWANå£</p></blockquote><ul><li>WAN<blockquote><p>å¹¿åŸŸç½‘ï¼ˆWANã€å…¬ç½‘ã€å¤–ç½‘ï¼‰</p></blockquote></li></ul><p>è®¾ç½®æ‹¨å·ä¸Šç½‘è¿æ¥äº’è”ç½‘</p><ul><li>LAN<blockquote><p>å±€åŸŸç½‘ï¼ˆLANã€ç§ç½‘ã€å†…ç½‘)</p></blockquote></li></ul><p>è¿æ¥æœ¬åœ°è®¡ç®—æœº</p><h3 id="PPPoE"><a href="#PPPoE" class="headerlink" title="PPPoE"></a>PPPoE</h3><blockquote><p>ä»¥å¤ªç½‘ä¸Šçš„ç‚¹å¯¹ç‚¹åè®®ä¸­çš„ä¸€ç§, å®½å¸¦æ¥å…¥æ–¹å¼ADSL å°±ä½¿ç”¨äº†PPPoEåè®®</p></blockquote><h3 id="å…³äº-WiFi-2-4G-å’Œ-5G"><a href="#å…³äº-WiFi-2-4G-å’Œ-5G" class="headerlink" title="å…³äº WiFi 2.4G å’Œ 5G"></a>å…³äº WiFi 2.4G å’Œ 5G</h3><p><code>802.11n/b/g</code> ä¸»è¦å·¥ä½œé¢‘æ®µä¸º2.4GHz<br><code>802.11a/ac</code> ä¸»è¦å·¥ä½œé¢‘æ®µä¸º5GHz</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»Šå¤©åˆšå¥½é‡åˆ· OpenWrt å›ºä»¶ï¼Œæ•´ç†æ•´ç†&lt;br&gt;
    
    </summary>
    
      <category term="OpenWrt" scheme="https://hocg.in/categories/OpenWrt/"/>
    
    
      <category term="Tips" scheme="https://hocg.in/tags/Tips/"/>
    
      <category term="OpenWrt" scheme="https://hocg.in/tags/OpenWrt/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨ OpenWrt éƒ¨ç½² Shadowsocks</title>
    <link href="https://hocg.in/2017/09/18/OpenWrt-Shadowsocks/"/>
    <id>https://hocg.in/2017/09/18/OpenWrt-Shadowsocks/</id>
    <published>2017-09-18T06:32:26.000Z</published>
    <updated>2017-09-19T01:10:23.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å…³äº OpenWrt è¯·çœ‹ <a href="http://hocg.in/2017/09/18/OpenWrt-%E5%85%A5%E9%97%A8%E7%AF%87/#more">OpenWrt å…¥é—¨ç¯‡</a><br>å…³äº Shadowsocks è¯·çœ‹ <a href="https://www.wikiwand.com/zh/Shadowsocks" target="_blank" rel="external">ä»€ä¹ˆæ˜¯ Shadowsocks</a><br>å·²æœ‰ Shadowsocks è´¦å·, åç»­å¯èƒ½ä¼šè®°å½•ã€‚<br><strong>é‡è¦:</strong> æœ¬æ–‡å‰æä¸ºè¯»è€…å·²è§‚çœ‹è¿‡ä»¥ä¸Š2ç¯‡æ–‡ç« ï¼Œå¦‚é˜…è¯»å¼•èµ·ä»»ä½•ä¸é€‚è¯·ç«‹å³åœæ­¢ã€‚</p><h2 id="å…³äº-Shadowsocks-libev-æ¨¡å—"><a href="#å…³äº-Shadowsocks-libev-æ¨¡å—" class="headerlink" title="å…³äº Shadowsocks-libev æ¨¡å—"></a>å…³äº Shadowsocks-libev æ¨¡å—</h2><blockquote><p><a href="https://github.com/shadowsocks/shadowsocks-libev" target="_blank" rel="external">Shadowsocks-libev å®˜ç½‘</a><br><a href="https://sourceforge.net/projects/openwrt-dist/files/shadowsocks-libev" target="_blank" rel="external">Shadowsocks-libev ä¸‹è½½åœ°å€ (æ¨èä¸‹è½½éspecç‰ˆæœ¬)</a></p></blockquote><p>ss-serverï¼šæœåŠ¡å™¨ç«¯ï¼Œéƒ¨ç½²äºæœåŠ¡å™¨ï¼Œæä¾› shadowsocks æœåŠ¡ã€‚<br>ss-localï¼šå®¢æˆ·ç«¯ï¼Œæä¾› SOCKS ä»£ç†<br>ss-redirï¼šå®¢æˆ·ç«¯ï¼Œæä¾›é€æ˜ä»£ç†, ä» v2.2.0 å¼€å§‹æ”¯æŒ UDP<br>ss-tunnel: å®¢æˆ·ç«¯ï¼Œæä¾›ç«¯å£è½¬å‘, å¯ç”¨äº DNS æŸ¥è¯¢</p><p><strong>Note:</strong> ä¸‹è½½çš„æ—¶å€™è¯·æ ¹æ® CPU ç±»å‹, æŸ¥çœ‹æ–¹å¼è¯·<a href="">å‚ç…§</a></p><h2 id="å®‰è£…-Shadowsocks-libev"><a href="#å®‰è£…-Shadowsocks-libev" class="headerlink" title="å®‰è£… Shadowsocks-libev"></a>å®‰è£… Shadowsocks-libev</h2><ol><li><p>å°†ä¸‹è½½çš„<code>Shadowsocks-libev</code>ç§»è‡³è·¯ç”±å™¨<code>/tmp</code>ç›®å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp shadowsocks-libev-polarssl_2.4.8-2_ar71xx.ipk root@192.168.1.1:/tmp</span><br></pre></td></tr></table></figure></li><li><p>å®‰è£…ä¾èµ–</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">opkg update</span><br><span class="line">opkg install iptables-mod-nat-extra ipset libopenssl</span><br></pre></td></tr></table></figure></li><li><p>å®‰è£…<code>Shadowsocks-libev</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">opkg install /tmp/shadowsocks-libev-polarssl_2.4.8-2_ar71xx.ipk</span><br></pre></td></tr></table></figure></li></ol><h2 id="é…ç½®-shadowsocks"><a href="#é…ç½®-shadowsocks" class="headerlink" title="é…ç½® shadowsocks"></a>é…ç½® shadowsocks</h2><ol><li><p>ä¿®æ”¹<code>/etc/shadowsocks.json</code>ä¸ºå®é™…å‚æ•°ã€‚æ ¼å¼å¦‚ä¸‹</p> <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"server"</span>: <span class="string">"127.0.0.1"</span>,</span><br><span class="line">  <span class="attr">"server_port"</span>: <span class="number">443</span>,</span><br><span class="line">  <span class="attr">"local_port"</span>: <span class="number">7654</span>,</span><br><span class="line">  <span class="attr">"password"</span>: <span class="string">"password"</span>,</span><br><span class="line">  <span class="attr">"timeout"</span>: <span class="number">60</span>,</span><br><span class="line">  <span class="attr">"method"</span>: <span class="string">"rc4-md5"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> æ­¤å¤„, <strong>â€œlocal_portâ€: 7654</strong> ä¸ºé‡ç‚¹ã€‚ä¸ç†è§£çš„, è¯·ä¸è¦è¿›è¡Œä¿®æ”¹æ­¤é¡¹ï¼Œåç»­ä¼šè§£é‡Šã€‚<br> <strong>æ³¨:</strong> <code>/etc/shadowsocks.json</code> ä¸ºé…ç½®æ–‡ä»¶, å­˜å‚¨ shadowsocks çš„è´¦å·ã€ å¯†ç åŠè®¾ç½®ã€‚</p></li><li><p>æŸ¥çœ‹<code>/etc/init.d/shadowsocks</code>ã€‚å†…å®¹å¦‚ä¸‹</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>!/bin/sh /etc/rc.common</span><br><span class="line"></span><br><span class="line">START=95</span><br><span class="line"></span><br><span class="line">SERVICE_USE_PID=1</span><br><span class="line">SERVICE_WRITE_PID=1</span><br><span class="line">SERVICE_DAEMONIZE=1</span><br><span class="line"></span><br><span class="line">CONFIG=/etc/shadowsocks.json</span><br><span class="line"></span><br><span class="line">start() &#123;</span><br><span class="line">  service_start /usr/bin/ss-local -c $CONFIG -b 0.0.0.0</span><br><span class="line"><span class="meta">  #</span>service_start /usr/bin/ss-redir -c $CONFIG -b 0.0.0.0</span><br><span class="line"><span class="meta">  #</span>service_start /usr/bin/ss-tunnel -c $CONFIG -b 0.0.0.0 -l 5353 -L 8.8.8.8:53 -u</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">stop() &#123;</span><br><span class="line">  service_stop /usr/bin/ss-local</span><br><span class="line"><span class="meta">  #</span>service_stop /usr/bin/ss-redir</span><br><span class="line"><span class="meta">  #</span>service_stop /usr/bin/ss-tunnel</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> <strong>æ³¨:</strong> <code>/etc/init.d/shadowsocks</code> ä¸ºè¿è¡Œæ–‡ä»¶, shadowsocks çš„å¯åŠ¨ã€åœæ­¢ã€é‡å¯ã€‚</p></li><li><p>è¿è¡Œæ£€æŸ¥é…ç½®æ˜¯å¦æ­£ç¡®</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/shadowsocks restart</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨ä»£ç†è¿›è¡Œæ£€æŸ¥, Chrome æµè§ˆå™¨ä¸‹è½½ <a href="https://chrome.google.com/webstore/detail/proxy-switchyomega/padekgcemlokbadohgkifijomclgjgif" target="_blank" rel="external">ExtensionProxy SwitchyOmega</a>ï¼Œå¢™å†…åœ°å€åç»­è¡¥ä¸Š..ã€‚å¯¹æ’ä»¶è¿›è¡Œå¦‚ä¸‹é…ç½®:<br><img src="http://7xs6lq.com1.z0.glb.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-18%2015.43.33.png" alt="image"></p></li><li>åœ¨ Chrome æµè§ˆå™¨ä½¿ç”¨ ExtensionProxy SwitchyOmega åˆ‡æ¢åˆ°è¯¥åè®®å¹¶è®¿é—® <a href="https://www.youtube.com/" target="_blank" rel="external">YouTuBe</a>ï¼ŒéªŒè¯å…¶é…ç½®çš„æ­£ç¡®æ€§ã€‚</li><li>å…³é—­ shadowsocks <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/shadowsocks stop</span><br></pre></td></tr></table></figure></li></ol><h2 id="è‡ªåŠ¨åŒ–"><a href="#è‡ªåŠ¨åŒ–" class="headerlink" title="è‡ªåŠ¨åŒ–"></a>è‡ªåŠ¨åŒ–</h2><h3 id="å®‰è£…-dnsmasq-amp-ipset"><a href="#å®‰è£…-dnsmasq-amp-ipset" class="headerlink" title="å®‰è£… dnsmasq &amp; ipset"></a>å®‰è£… dnsmasq &amp; ipset</h3><ol><li><p>æŸ¥çœ‹æ˜¯å¦æ”¯æŒ ipset</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">opkg update</span><br><span class="line">opkg list-installed    </span><br><span class="line">dnsmasq -v</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> å¦‚æœä¸æ”¯æŒï¼Œå¸è½½æ‰å®‰è£…fullç‰ˆ</span><br><span class="line">opkg remove dnsmasq</span><br><span class="line">opkg install dnsmasq-full</span><br><span class="line">opkg install ipset iptables-mod-nat-extra</span><br><span class="line">opkg install /tmp/pdnsd_1.2.9a-par-a8e46ccba7b0fa2230d6c42ab6dcd92926f6c21d_ar71xx.ipk</span><br></pre></td></tr></table></figure><p> é™„ä»¶:</p><ul><li><a href="é¢„ç•™">pdnsd_1.2.9a-par-a8e46ccba7b0fa2230d6c42ab6dcd92926f6c21d_ar71xx.ipk ä¸‹è½½</a></li></ul></li><li><p>é…ç½® dnsmasq å’Œ ipset</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/dnsmasq.conf</span><br><span class="line">mkdir /etc/dnsmasq.d</span><br></pre></td></tr></table></figure><p> åœ¨æœ«å°¾åŠ å…¥</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">conf-dir=/etc/dnsmasq.d</span><br><span class="line">cache-size=1500      #ä¿®æ”¹dnsmasqç¼“å­˜å¤§å°ï¼Œé»˜è®¤ä¸º150ã€‚</span><br><span class="line">min-cache-ttl=720    #ä¿®æ”¹DNSç¼“å­˜æœ€å°æœ‰æ•ˆæœŸï¼ˆç§’ï¼‰ã€‚ä»…é€‚ç”¨äºaa65535çš„dnsmasq-fullç‰ˆæœ¬ã€‚</span><br></pre></td></tr></table></figure></li><li><p>ä¸‹è½½å›½å†…é‡è¦ç½‘ç«™åå•ï¼Œç”¨å›½å†…åŸŸåæœåŠ¡å™¨æŸ¥è¯¢iPåœ°å€</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/dnsmasq.d</span><br><span class="line">opkg install wget</span><br><span class="line">wget -4 --no-check-certificate -O /etc/dnsmasq.d/accelerated-domains.china.conf https://github.com/felixonmars/dnsmasq-china-list/raw/master/accelerated-domains.china.conf</span><br><span class="line">wget -4 --no-check-certificate -O /etc/dnsmasq.d/bogus-nxdomain.china.conf https://github.com/felixonmars/dnsmasq-china-list/raw/master/bogus-nxdomain.china.conf</span><br><span class="line">echo "server=/#/127.0.0.1#3210" &gt; gfwlist.conf</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹<code>/etc/init.d/shadowsocks</code>å¯åŠ¨æ–‡ä»¶, å†…å®¹å¦‚ä¸‹</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>!/bin/sh /etc/rc.common</span><br><span class="line"></span><br><span class="line">START=95</span><br><span class="line"></span><br><span class="line">SERVICE_USE_PID=1</span><br><span class="line">SERVICE_WRITE_PID=1</span><br><span class="line">SERVICE_DAEMONIZE=1</span><br><span class="line"></span><br><span class="line">CONFIG=/etc/shadowsocks.json</span><br><span class="line"></span><br><span class="line">start() &#123;</span><br><span class="line">    sed -i 's/114.114.114.114/127.0.0.1#3210/' /etc/dnsmasq.d/gfwlist.conf</span><br><span class="line">    /etc/init.d/dnsmasq restart</span><br><span class="line"></span><br><span class="line">    service_start /usr/bin/ss-redir -b 0.0.0.0 -c $CONFIG -f /var/run/shadowsocks.pid -u</span><br><span class="line">    service_start /usr/bin/ss-tunnel -b 0.0.0.0 -c $CONFIG -l 3210 -L 8.8.8.8:53 -u</span><br><span class="line">    /usr/bin/shadowsocks-firewall</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">stop() &#123;</span><br><span class="line">    sed -i 's/127.0.0.1#3210/114.114.114.114/' /etc/dnsmasq.d/gfwlist.conf</span><br><span class="line">    /etc/init.d/dnsmasq restart</span><br><span class="line"></span><br><span class="line">    service_stop /usr/bin/ss-redir</span><br><span class="line">    service_stop /usr/bin/ss-tunnel</span><br><span class="line">    killall ss-redir</span><br><span class="line">    killall ss-tunnel</span><br><span class="line">    /etc/init.d/firewall restart</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>é…ç½® iptables é˜²ç«å¢™è½¬å‘IPå’Œç«¯å£<br><strong>åˆ›å»ºæ‰§è¡Œæ–‡ä»¶ /usr/bin/shadowsocks-firewall</strong></p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">touch /usr/bin/shadowsocks-firewall</span><br><span class="line">chmod +x /usr/bin/shadowsocks-firewall</span><br></pre></td></tr></table></figure><p> <strong>/usr/bin/shadowsocks-firewall å…¶å†…å®¹å¦‚ä¸‹</strong></p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>!/bin/sh</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>create a new chain named SHADOWSOCKS</span><br><span class="line">iptables -t nat -N SHADOWSOCKS</span><br><span class="line">iptables -t nat -N SHADOWSOCKS_WHITELIST</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> Ignore your shadowsocks server's addresses</span><br><span class="line"><span class="meta">#</span> It's very IMPORTANT, just be careful.</span><br><span class="line">iptables -t nat -A SHADOWSOCKS -d æ­¤å¤„ä¸ºæœåŠ¡å™¨IP -j RETURN</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> Ignore LANs IP address</span><br><span class="line">iptables -t nat -A SHADOWSOCKS -d 0.0.0.0/8 -j RETURN</span><br><span class="line">iptables -t nat -A SHADOWSOCKS -d 10.0.0.0/8 -j RETURN</span><br><span class="line">iptables -t nat -A SHADOWSOCKS -d 127.0.0.0/8 -j RETURN</span><br><span class="line">iptables -t nat -A SHADOWSOCKS -d 169.254.0.0/16 -j RETURN</span><br><span class="line">iptables -t nat -A SHADOWSOCKS -d 172.16.0.0/12 -j RETURN</span><br><span class="line">iptables -t nat -A SHADOWSOCKS -d 192.168.0.0/16 -j RETURN</span><br><span class="line">iptables -t nat -A SHADOWSOCKS -d 224.0.0.0/4 -j RETURN</span><br><span class="line">iptables -t nat -A SHADOWSOCKS -d 240.0.0.0/4 -j RETURN</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> Check whitelist</span><br><span class="line">iptables -t nat -A SHADOWSOCKS -j SHADOWSOCKS_WHITELIST</span><br><span class="line">iptables -t nat -A SHADOWSOCKS -m mark --mark 1 -j RETURN</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>for hulu.com</span><br><span class="line">iptables -t nat -A SHADOWSOCKS -p tcp --dport 1935 -j REDIRECT --to-ports 7654</span><br><span class="line">iptables -t nat -A SHADOWSOCKS -p udp --dport 1935 -j REDIRECT --to-ports 7654</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> for Chrome browser and youtube.com</span><br><span class="line">iptables -t nat -A SHADOWSOCKS -p udp --dport 443 -j REDIRECT --to-ports 7654</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> Anything else should be redirected to shadowsocks's local port</span><br><span class="line">iptables -t nat -A SHADOWSOCKS -p tcp -j REDIRECT --to-ports 7654</span><br><span class="line"><span class="meta">#</span> Apply the rules</span><br><span class="line">iptables -t nat -A PREROUTING -p tcp -j SHADOWSOCKS</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> Ignore China IP address</span><br><span class="line"><span class="meta">#</span> for white_ip in `cat /etc/chinadns_chnroute.txt`;</span><br><span class="line"><span class="meta">#</span> do</span><br><span class="line"><span class="meta">#</span>   iptables -t nat -A SHADOWSOCKS_WHITELIST -d "$&#123;white_ip&#125;" -j MARK --set-mark 1</span><br><span class="line"><span class="meta">#</span> done</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> Ignore Asia IP address</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 1.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 14.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 27.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 36.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 39.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 42.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 49.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 58.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 59.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 60.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 61.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 101.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 103.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 106.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 110.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 111.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 112.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 113.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 114.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 115.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 116.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 117.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 118.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 119.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 120.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 121.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 122.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 123.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 124.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 125.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 126.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 169.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 175.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 180.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 182.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 183.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 202.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 203.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 210.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 211.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 218.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 219.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 220.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 221.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 222.0.0.0/8 -j MARK --set-mark 1</span><br><span class="line">iptables -t nat -A SHADOWSOCKS_WHITELIST -d 223.0.0.0/8 -j MARK --set-mark 1</span><br></pre></td></tr></table></figure><p> <strong>é‡è¦:</strong></p><ol><li><code>æ­¤å¤„ä¸ºæœåŠ¡å™¨IP</code>æ›´æ¢ä¸ºå®é™…IPã€‚</li><li><code>Ignore Asia IP address</code>ä¸ºäºšæ´²IPåœ°å€æ®µã€‚å¦‚æœè·¯ç”±å™¨å†…å­˜å¤Ÿå¤§çš„è¯ï¼Œå¯å¼€å¯<code>Ignore China IP address</code>ã€‚<a href="https://github.com/softwaredownload/openwrt-fanqiang/blob/master/openwrt/default/etc/chinadns_chnroute.txt" target="_blank" rel="external">chinadns_chnroute.txt æ–‡ä»¶ä¸‹è½½</a></li><li><code>--to-ports 7654</code>å³<code>/etc/shadowsocks.json</code>ä¸­çš„ <strong>â€œlocal_portâ€: 7654</strong><h3 id="shadowsocks-æ§åˆ¶"><a href="#shadowsocks-æ§åˆ¶" class="headerlink" title="shadowsocks æ§åˆ¶"></a>shadowsocks æ§åˆ¶</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/shadowsocks stop</span><br><span class="line">/etc/init.d/shadowsocks start</span><br><span class="line">/etc/init.d/shadowsocks enable</span><br><span class="line">/etc/init.d/shadowsocks disable</span><br></pre></td></tr></table></figure></li></ol></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;å…³äº OpenWrt è¯·çœ‹ &lt;a href=&quot;http://hocg.in/2017/09/18/OpenWrt-%E5%85%A5%E9
      
    
    </summary>
    
      <category term="OpenWrt" scheme="https://hocg.in/categories/OpenWrt/"/>
    
    
      <category term="Tips" scheme="https://hocg.in/tags/Tips/"/>
    
      <category term="OpenWrt" scheme="https://hocg.in/tags/OpenWrt/"/>
    
  </entry>
  
  <entry>
    <title>å…³äº Android Studio å¯åŠ¨ Android æ¨¡æ‹Ÿå™¨å¤±è´¥é—®é¢˜</title>
    <link href="https://hocg.in/2017/07/02/%E5%85%B3%E4%BA%8EAndroid%20Studio%20%E5%90%AF%E5%8A%A8Android%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%A4%B1%E8%B4%A5%E9%97%AE%E9%A2%98/"/>
    <id>https://hocg.in/2017/07/02/å…³äºAndroid Studio å¯åŠ¨Androidæ¨¡æ‹Ÿå™¨å¤±è´¥é—®é¢˜/</id>
    <published>2017-07-02T13:07:00.000Z</published>
    <updated>2017-07-02T13:07:55.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="èµ·å› "><a href="#èµ·å› " class="headerlink" title="èµ·å› "></a>èµ·å› </h2><p>Android Studio å¯åŠ¨è™šæ‹Ÿæœºä¸€ç›´é—ªé€€ï¼Œä¸æ˜¾ç¤ºä»»ä½•æŠ¥é”™ä¿¡æ¯</p><a id="more"></a><h2 id="æ’æŸ¥é—®é¢˜"><a href="#æ’æŸ¥é—®é¢˜" class="headerlink" title="æ’æŸ¥é—®é¢˜"></a>æ’æŸ¥é—®é¢˜</h2><ol><li>å°è¯•ç”¨å‘½ä»¤å¯åŠ¨æ¨¡æ‹Ÿå™¨, æ–¹ä¾¿æŸ¥çœ‹å…¶é”™è¯¯æ—¥å¿—<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹ä½ åˆ›å»ºçš„è®¾å¤‡</span></span><br><span class="line">emulator -list-avds</span><br><span class="line"><span class="meta">#</span><span class="bash"> å¯åŠ¨å‘½ä»¤</span></span><br><span class="line">emulator -netdelay none -netspeed full -avd New_Device_API_2</span><br><span class="line"><span class="meta">#</span><span class="bash"> ä»¥ä¸‹ä¸ºæŠ¥é”™æ—¥å¿—</span></span><br><span class="line">Hax is enabled</span><br><span class="line">Hax ram_size 0x60000000</span><br><span class="line">HAX is working and emulator runs in fast virt mode.</span><br><span class="line">Failed to sync vcpu reg</span><br><span class="line">Failed to sync vcpu reg</span><br><span class="line">Failed to sync vcpu reg</span><br><span class="line">Failed to sync vcpu reg</span><br><span class="line">Failed to sync vcpu reg</span><br><span class="line">Failed to sync HAX vcpu contextInternal error: Initial hax sync failed</span><br></pre></td></tr></table></figure></li></ol><p>vcpuæ— æ³•è¿›è¡ŒåŒæ­¥?? What??<br>å°è¯•è¿›è¡Œäº† Googleï¼Œ<a href="https://stackoverflow.com/questions/17024538/how-do-i-fix-failed-to-sync-vcpu-reg-error/17024645" target="_blank" rel="external">How do I fix â€œFailed to sync vcpu regâ€ error?</a><br>å¥½å§, docker ä¹‹ç±»çš„è™šæ‹Ÿæœºå¼•èµ·äº†å†²çª</p><h2 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h2><p>å…³æ‰ç”¨ä¸ç€çš„è™šæ‹Ÿæœºå¦‚ docker ..</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;èµ·å› &quot;&gt;&lt;a href=&quot;#èµ·å› &quot; class=&quot;headerlink&quot; title=&quot;èµ·å› &quot;&gt;&lt;/a&gt;èµ·å› &lt;/h2&gt;&lt;p&gt;Android Studio å¯åŠ¨è™šæ‹Ÿæœºä¸€ç›´é—ªé€€ï¼Œä¸æ˜¾ç¤ºä»»ä½•æŠ¥é”™ä¿¡æ¯&lt;/p&gt;
    
    </summary>
    
      <category term="Android" scheme="https://hocg.in/categories/Android/"/>
    
    
      <category term="Android" scheme="https://hocg.in/tags/Android/"/>
    
      <category term="Mac" scheme="https://hocg.in/tags/Mac/"/>
    
  </entry>
  
  <entry>
    <title>Google ä½¿ç”¨æŠ€å·§</title>
    <link href="https://hocg.in/2017/06/18/Google-%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/"/>
    <id>https://hocg.in/2017/06/18/Google-ä½¿ç”¨æŠ€å·§/</id>
    <published>2017-06-18T03:24:06.000Z</published>
    <updated>2018-10-11T13:39:15.412Z</updated>
    
    <content type="html"><![CDATA[<p>æ‘©æ“¦ Google åˆ©å™¨ã€‚</p><a id="more"></a><h2 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a>å‰æ</h2><p>ä½¿ç”¨ <a href="https://www.google.com/ncr" target="_blank" rel="external">https://www.google.com/ncr</a> æ¨¡å¼å¹¶ä¸”æ˜¯<code>è‹±æ–‡ç‰ˆ</code>ã€‚</p><h2 id="æŠ€å·§"><a href="#æŠ€å·§" class="headerlink" title="æŠ€å·§"></a>æŠ€å·§</h2><h3 id="åŒå¼•å·"><a href="#åŒå¼•å·" class="headerlink" title="åŒå¼•å·"></a>åŒå¼•å·</h3><p><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-19%2011.44.17.png" alt="image"></p><blockquote><p><strong>å®Œå…¨åŒ¹é…æœç´¢</strong></p></blockquote><h3 id="å‡å·"><a href="#å‡å·" class="headerlink" title="å‡å·"></a>å‡å·</h3><p><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-19%2011.46.03.png" alt="image"></p><blockquote><p>ä½¿ç”¨è¿™ä¸ªæŒ‡ä»¤æ—¶å‡å·å‰é¢å¿…é¡»æ˜¯ç©ºæ ¼ï¼Œå‡å·åé¢æ²¡æœ‰ç©ºæ ¼ï¼Œç´§è·Ÿç€éœ€è¦<strong>æ’é™¤ç‰¹å®šçš„è¯</strong>ã€‚</p></blockquote><h3 id="æ˜Ÿå·"><a href="#æ˜Ÿå·" class="headerlink" title="æ˜Ÿå·"></a>æ˜Ÿå·</h3><p><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-19%2011.52.27.png" alt="image"></p><blockquote><p><em>å·ä»£è¡¨ä»»ä½•æ–‡å­—ï¼Œå³<em>*æ¨¡ç³Šæœç´¢</em></em></p></blockquote><h3 id="ï½"><a href="#ï½" class="headerlink" title="ï½"></a>ï½</h3><p><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-19%2012.40.20.png" alt="image"></p><blockquote><p>åŒ¹é… <strong>è¯¥å…³é”®è¯ æˆ– è¯¥å…³é”®è¯çš„åŒä¹‰è¯</strong></p></blockquote><h3 id="OR"><a href="#OR" class="headerlink" title="OR"></a>OR</h3><p><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-19%2013.35.15.png" alt="image"></p><blockquote><p>åŒ¹é…å…³é”®è¯<code>hocgin</code>æˆ–è€…<code>hocg.in</code></p></blockquote><h3 id=""><a href="#" class="headerlink" title="+"></a>+</h3><p><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-19%2013.37.40.png" alt="image"></p><blockquote><p>åŒ¹é…å…³é”®è¯<code>hocgin</code>ä¸<code>hocg.in</code>åŒæ—¶å­˜åœ¨</p></blockquote><h3 id="inurl"><a href="#inurl" class="headerlink" title="inurl"></a>inurl</h3><p><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-19%2011.58.08.png" alt="image"></p><blockquote><p>åŒ¹é…<strong>urlè¿æ¥ä¸­åŒ…å«è¯¥è¯æ±‡</strong>ï¼Œä¾‹å¦‚ä¸Šæ–¹åŒ¹é… <a href="https://hocg.in/hocgin">https://hocg.in/hocgin</a></p></blockquote><h3 id="allinurl"><a href="#allinurl" class="headerlink" title="allinurl"></a>allinurl</h3><p><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-19%2012.21.25.png" alt="image"></p><blockquote><p>ç­‰ä»·äº: <code>inurl: hocgin inurl: hocg.in</code><br>åŒ¹é…<strong>urlè¿æ¥ä¸­æ—¢åŒ…å«<code>hocgin</code>ä¹ŸåŒ…å«<code>hocg.in</code></strong>, ä¾‹å¦‚: <a href="https://hocg.in/hocgin">https://hocg.in/hocgin</a></p></blockquote><h3 id="inanchor"><a href="#inanchor" class="headerlink" title="inanchor"></a>inanchor</h3><p><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-19%2012.10.13.png" alt="image"></p><blockquote><p>åŒ¹é…<strong>aæ ‡ç­¾ä¸­çš„æ–‡å­—</strong>, ä¾‹å¦‚ä¸Šæ–¹åŒ¹é… \<a href="https://hocg.in">hocgin\</a></p></blockquote><h3 id="intitle"><a href="#intitle" class="headerlink" title="intitle"></a>intitle</h3><p><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-19%2012.12.39.png" alt="image"></p><blockquote><p>åŒ¹é…<strong>titleæ ‡ç­¾ä¸­çš„æ–‡å­—</strong>, \<title>hocgin\</title></p></blockquote><h3 id="allintitle"><a href="#allintitle" class="headerlink" title="allintitle"></a>allintitle</h3><p><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-19%2012.17.18.png" alt="image"></p><blockquote><p>ç­‰ä»·äº: <code>intitle: hocgin intitle: hocg.in</code><br>åŒ¹é…<strong>æ ‡é¢˜ä¸­æ—¢åŒ…å«<code>hocgin</code>ä¹ŸåŒ…å«<code>hocg.in</code></strong>,ä¾‹å¦‚: \<title>hocgin çš„åšå®¢åœ°å€ hocg.in\</title></p></blockquote><h3 id="filetype"><a href="#filetype" class="headerlink" title="filetype"></a>filetype</h3><p><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-19%2012.24.45.png" alt="image"></p><blockquote><p>åŒ¹é…<strong>åŒ…å«å…³é”®è¯<code>hocgin</code>çš„æ‰€æœ‰pdfæ–‡ä»¶</strong></p></blockquote><h3 id="site"><a href="#site" class="headerlink" title="site"></a>site</h3><p><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-19%2012.26.38.png" alt="image"></p><blockquote><p><strong>æŸä¸ªåŸŸåçš„æœç´¢</strong></p></blockquote><h3 id="ralated"><a href="#ralated" class="headerlink" title="ralated"></a>ralated</h3><p><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-19%2012.36.45.png" alt="image"></p><blockquote><p>è¿”å› Google äººä¸ºç›¸å…³çš„é¡µé¢</p></blockquote><p><strong>æ··åˆä½¿ç”¨ç¤ºä¾‹</strong><br><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-19%2012.43.18.png" alt="image"><br><a href="">å›¾ç‰‡æ¥æº</a></p><h2 id="å·¥å…·"><a href="#å·¥å…·" class="headerlink" title="å·¥å…·"></a>å·¥å…·</h2><h3 id="æŸ¥è¯¢å­—è¯çš„é‡Šä¹‰"><a href="#æŸ¥è¯¢å­—è¯çš„é‡Šä¹‰" class="headerlink" title="æŸ¥è¯¢å­—è¯çš„é‡Šä¹‰"></a>æŸ¥è¯¢å­—è¯çš„é‡Šä¹‰</h3><p><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-19%2012.50.27.png" alt="image"></p><h3 id="æ•°å­¦è¿ç®—"><a href="#æ•°å­¦è¿ç®—" class="headerlink" title="æ•°å­¦è¿ç®—"></a>æ•°å­¦è¿ç®—</h3><p><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-19%2012.51.30.png" alt="image"></p><h3 id="å¤©æ°”æŸ¥è¯¢"><a href="#å¤©æ°”æŸ¥è¯¢" class="headerlink" title="å¤©æ°”æŸ¥è¯¢"></a>å¤©æ°”æŸ¥è¯¢</h3><p><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-19%2012.52.39.png" alt="image"></p><h3 id="å½“å‰æ—¶é—´"><a href="#å½“å‰æ—¶é—´" class="headerlink" title="å½“å‰æ—¶é—´"></a>å½“å‰æ—¶é—´</h3><p><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-19%2012.57.12.png" alt="image"></p><h3 id="æ—¥å‡º"><a href="#æ—¥å‡º" class="headerlink" title="æ—¥å‡º"></a>æ—¥å‡º</h3><p><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-19%2012.58.31.png" alt="image"></p><h3 id="æ—¥è½"><a href="#æ—¥è½" class="headerlink" title="æ—¥è½"></a>æ—¥è½</h3><p><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-19%2012.59.30.png" alt="image"></p><h3 id="éŸ³ä¹äººæœç´¢"><a href="#éŸ³ä¹äººæœç´¢" class="headerlink" title="éŸ³ä¹äººæœç´¢"></a>éŸ³ä¹äººæœç´¢</h3><p><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-19%2013.02.27.png" alt="image"></p><h3 id="çœä¼š"><a href="#çœä¼š" class="headerlink" title="çœä¼š"></a>çœä¼š</h3><p><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-19%2013.04.05.png" alt="image"></p><h3 id="æ±‡ç‡"><a href="#æ±‡ç‡" class="headerlink" title="æ±‡ç‡"></a>æ±‡ç‡</h3><p><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-19%2013.08.03.png" alt="image"></p><blockquote><p>200ç¾å…ƒæ¢å¤šå°‘äººæ°‘å¸ï¼Œå¯ä»¥è¿›è¡Œæ•°å­¦è¿ç®—</p></blockquote><h3 id="è®¾ç½®è®¡æ—¶å™¨"><a href="#è®¾ç½®è®¡æ—¶å™¨" class="headerlink" title="è®¾ç½®è®¡æ—¶å™¨"></a>è®¾ç½®è®¡æ—¶å™¨</h3><p><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-19%2013.09.39.png" alt="image"></p><blockquote><p>Set timer XX seconds/minutes/hoursï¼ŒXXè¡¨ç¤ºå…·ä½“çš„æ•°å­—ã€‚</p></blockquote><h3 id="ä¸¤åœ°ç‚¹è·ç¦»è®¡ç®—"><a href="#ä¸¤åœ°ç‚¹è·ç¦»è®¡ç®—" class="headerlink" title="ä¸¤åœ°ç‚¹è·ç¦»è®¡ç®—"></a>ä¸¤åœ°ç‚¹è·ç¦»è®¡ç®—</h3><p><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-19%2013.11.53.png" alt="image"></p><h3 id="å½“å‰ä½ç½®"><a href="#å½“å‰ä½ç½®" class="headerlink" title="å½“å‰ä½ç½®"></a>å½“å‰ä½ç½®</h3><p><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-19%2013.14.44.png" alt="image"></p><h3 id="æ˜¾ç¤ºå½“å‰ç”µè„‘IP"><a href="#æ˜¾ç¤ºå½“å‰ç”µè„‘IP" class="headerlink" title="æ˜¾ç¤ºå½“å‰ç”µè„‘IP"></a>æ˜¾ç¤ºå½“å‰ç”µè„‘IP</h3><p><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-19%2013.23.04.png" alt="image"></p><h3 id="æ˜¾ç¤ºå›½å®¶-GDP"><a href="#æ˜¾ç¤ºå›½å®¶-GDP" class="headerlink" title="æ˜¾ç¤ºå›½å®¶ GDP"></a>æ˜¾ç¤ºå›½å®¶ GDP</h3><p><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-19%2013.25.31.png" alt="image"></p><h3 id="ç»˜åˆ¶å¤šå…ƒæ–¹ç¨‹ä»¥åŠå¤æ‚çš„æ–¹ç¨‹å¼"><a href="#ç»˜åˆ¶å¤šå…ƒæ–¹ç¨‹ä»¥åŠå¤æ‚çš„æ–¹ç¨‹å¼" class="headerlink" title="ç»˜åˆ¶å¤šå…ƒæ–¹ç¨‹ä»¥åŠå¤æ‚çš„æ–¹ç¨‹å¼"></a>ç»˜åˆ¶å¤šå…ƒæ–¹ç¨‹ä»¥åŠå¤æ‚çš„æ–¹ç¨‹å¼</h3><p><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-19%2013.27.12.png" alt="image"></p><blockquote><p>graph + æ–¹ç¨‹å¼</p></blockquote><h3 id="æœç´¢æŸä¸ªå•è¯çš„ç”±æ¥"><a href="#æœç´¢æŸä¸ªå•è¯çš„ç”±æ¥" class="headerlink" title="æœç´¢æŸä¸ªå•è¯çš„ç”±æ¥"></a>æœç´¢æŸä¸ªå•è¯çš„ç”±æ¥</h3><p><img src="http://cdn.hocgin.top/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-19%2013.31.02.png" alt="image"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ‘©æ“¦ Google åˆ©å™¨ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Other" scheme="https://hocg.in/categories/Other/"/>
    
    
      <category term="Tips" scheme="https://hocg.in/tags/Tips/"/>
    
      <category term="Google" scheme="https://hocg.in/tags/Google/"/>
    
  </entry>
  
  <entry>
    <title>OpenWrt å…¥é—¨ç¯‡</title>
    <link href="https://hocg.in/2017/05/31/OpenWrt-%E8%BF%9B%E9%98%B6%E7%AF%87/"/>
    <id>https://hocg.in/2017/05/31/OpenWrt-è¿›é˜¶ç¯‡/</id>
    <published>2017-05-31T06:52:26.000Z</published>
    <updated>2017-09-18T07:02:29.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><h3 id="æŸ¥çœ‹è·¯ç”±å™¨æ”¯æŒæ¶æ„"><a href="#æŸ¥çœ‹è·¯ç”±å™¨æ”¯æŒæ¶æ„" class="headerlink" title="æŸ¥çœ‹è·¯ç”±å™¨æ”¯æŒæ¶æ„"></a>æŸ¥çœ‹è·¯ç”±å™¨æ”¯æŒæ¶æ„</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">opkg print-architecture | awk '&#123;print $2&#125;'</span><br></pre></td></tr></table></figure><h3 id="å¦‚ä½•æ›´æ”¹æ—¶åŒº"><a href="#å¦‚ä½•æ›´æ”¹æ—¶åŒº" class="headerlink" title="å¦‚ä½•æ›´æ”¹æ—¶åŒº?"></a>å¦‚ä½•æ›´æ”¹æ—¶åŒº?</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> æŸ¥çœ‹å½“å‰çš„æ—¶åŒº</span><br><span class="line">date -R</span><br><span class="line"><span class="meta">#</span> Wed, 31 May 2017 07:07:28 +0000</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> ä¿®æ”¹æ—¶åŒº</span><br><span class="line">vi /etc/config/system</span><br><span class="line"><span class="meta">#</span> è¿›è¡Œä¿®æ”¹</span><br><span class="line"><span class="meta">#</span> config system</span><br><span class="line"><span class="meta">#</span>        option hostname 'Openwrt'</span><br><span class="line"><span class="meta">#</span>        option timezone 'CST-8'</span><br><span class="line"><span class="meta">#</span>        option zonename 'Asia/Shanghai'</span><br><span class="line"><span class="meta">#</span> é‡å¯</span><br><span class="line">reboot</span><br><span class="line"><span class="meta">#</span> æŸ¥çœ‹æ˜¯å¦æˆåŠŸ</span><br><span class="line">date -R</span><br><span class="line"><span class="meta">#</span> Wed, 31 May 2017 15:08:01 +0800</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> åŒæ­¥ç³»ç»Ÿæ—¶é—´</span><br><span class="line">ntpd -n -q -p 0.asia.pool.ntp.org</span><br></pre></td></tr></table></figure><h3 id="å¦‚ä½•åœ¨-OpenWrt-ä¸Šæ­å»º-PHP-ç¯å¢ƒ"><a href="#å¦‚ä½•åœ¨-OpenWrt-ä¸Šæ­å»º-PHP-ç¯å¢ƒ" class="headerlink" title="å¦‚ä½•åœ¨ OpenWrt ä¸Šæ­å»º PHP ç¯å¢ƒ?"></a>å¦‚ä½•åœ¨ OpenWrt ä¸Šæ­å»º PHP ç¯å¢ƒ?</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> æ›´æ–°ç´¢å¼•</span><br><span class="line">opkg update</span><br><span class="line"><span class="meta">#</span> å®‰è£…å¿…é¡»çš„ç¯å¢ƒ</span><br><span class="line">opkg install php5 php5-mod-gd php5-mod-curl php5-mod-session php5-mod-pdo php5-mod-mcrypt php5-mod-mbstring php5-fastcgi php5-cgi php5-mod-ctype php5-mod-exif php5-mod-iconv php5-mod-json php5-mod-sockets php5-mod-sqlite3 php5-mod-tokenizer php5-mod-zip</span><br><span class="line"><span class="meta">#</span> é…ç½®æ–‡ä»¶ç›®å½•</span><br><span class="line"><span class="meta">#</span> /etc/httpd.conf</span><br><span class="line"><span class="meta">#</span> é‡å¯httpæœåŠ¡</span><br><span class="line">/etc/init.d/uhttpd restart</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Tips&quot;&gt;&lt;a href=&quot;#Tips&quot; class=&quot;headerlink&quot; title=&quot;Tips&quot;&gt;&lt;/a&gt;Tips&lt;/h2&gt;&lt;h3 id=&quot;æŸ¥çœ‹è·¯ç”±å™¨æ”¯æŒæ¶æ„&quot;&gt;&lt;a href=&quot;#æŸ¥çœ‹è·¯ç”±å™¨æ”¯æŒæ¶æ„&quot; class=&quot;headerlink&quot; title=
      
    
    </summary>
    
      <category term="OpenWrt" scheme="https://hocg.in/categories/OpenWrt/"/>
    
    
      <category term="Tips" scheme="https://hocg.in/tags/Tips/"/>
    
      <category term="OpenWrt" scheme="https://hocg.in/tags/OpenWrt/"/>
    
  </entry>
  
  <entry>
    <title>å­—ç¬¦ä¸²ç¼–ç ç¯‡</title>
    <link href="https://hocg.in/2017/05/12/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%BC%96%E7%A0%81%E7%AF%87/"/>
    <id>https://hocg.in/2017/05/12/å­—ç¬¦ä¸²ç¼–ç ç¯‡/</id>
    <published>2017-05-12T13:09:03.000Z</published>
    <updated>2017-11-11T15:11:01.049Z</updated>
    
    <content type="html"><![CDATA[<p> å­—ç¬¦ç¼–ç çš„æ¥å†..<br><a id="more"></a></p><h2 id="ASCII"><a href="#ASCII" class="headerlink" title="ASCII"></a>ASCII</h2><blockquote><p>æœ€æ—©åªæœ‰127ä¸ªå­—ç¬¦è¢«ç¼–ç åˆ°è®¡ç®—æœºé‡Œï¼Œä¹Ÿå°±æ˜¯å¤§å°å†™è‹±æ–‡å­—æ¯ã€æ•°å­—å’Œä¸€äº›ç¬¦å·</p><ul><li>å ä½: 1ä¸ªå­—èŠ‚</li></ul></blockquote><h2 id="GB2312"><a href="#GB2312" class="headerlink" title="GB2312"></a>GB2312</h2><blockquote><p>ä¸­æ–‡æ˜¾ç„¶ä¸€ä¸ªå­—èŠ‚æ˜¯ä¸å¤Ÿçš„ï¼Œè‡³å°‘éœ€è¦ä¸¤ä¸ªå­—èŠ‚ï¼Œè€Œä¸”è¿˜ä¸èƒ½å’ŒASCIIç¼–ç å†²çª</p></blockquote><h2 id="Unicode-u-16è¿›åˆ¶"><a href="#Unicode-u-16è¿›åˆ¶" class="headerlink" title="Unicode \u[16è¿›åˆ¶]"></a>Unicode <code>\u[16è¿›åˆ¶]</code></h2><blockquote><p>UnicodeæŠŠæ‰€æœ‰è¯­è¨€éƒ½ç»Ÿä¸€åˆ°ä¸€å¥—ç¼–ç é‡Œï¼Œè¿™æ ·å°±ä¸ä¼šå†æœ‰ä¹±ç é—®é¢˜äº†ã€‚</p><ul><li>å ä½: é€šå¸¸æ˜¯2ä¸ªå­—èŠ‚</li></ul></blockquote><h2 id="UTF-8"><a href="#UTF-8" class="headerlink" title="UTF-8"></a>UTF-8</h2><blockquote><p>æœ¬ç€èŠ‚çº¦çš„ç²¾ç¥ï¼Œåˆå‡ºç°äº†æŠŠUnicodeç¼–ç è½¬åŒ–ä¸ºâ€œå¯å˜é•¿ç¼–ç â€<br><strong>Note:</strong> UTF-8ç¼–ç æŠŠä¸€ä¸ªUnicodeå­—ç¬¦æ ¹æ®ä¸åŒçš„æ•°å­—å¤§å°ç¼–ç æˆ1-6ä¸ªå­—èŠ‚ï¼Œå¸¸ç”¨çš„è‹±æ–‡å­—æ¯è¢«ç¼–ç æˆ1ä¸ªå­—èŠ‚ï¼Œæ±‰å­—é€šå¸¸æ˜¯3ä¸ªå­—èŠ‚ï¼Œåªæœ‰å¾ˆç”Ÿåƒ»çš„å­—ç¬¦æ‰ä¼šè¢«ç¼–ç æˆ4-6ä¸ªå­—èŠ‚</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt; å­—ç¬¦ç¼–ç çš„æ¥å†..&lt;br&gt;
    
    </summary>
    
      <category term="Other" scheme="https://hocg.in/categories/Other/"/>
    
    
      <category term="Tips" scheme="https://hocg.in/tags/Tips/"/>
    
  </entry>
  
  <entry>
    <title>Wireshark çš„ä½¿ç”¨</title>
    <link href="https://hocg.in/2017/04/20/Wireshark%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <id>https://hocg.in/2017/04/20/Wiresharkçš„ä½¿ç”¨/</id>
    <published>2017-04-20T11:34:05.000Z</published>
    <updated>2017-11-11T15:11:01.049Z</updated>
    
    <content type="html"><![CDATA[<p> æŠ½ç©ºæ•´ç†ä¸€ä¸‹, è™½ç„¶<code>Charles</code>å¾ˆå¥½ç”¨, ä½†æ˜¯æŸäº›æƒ…å†µä¸‹è¯¥è½¯ä»¶ä¹Ÿæ˜¯ä¸å¯æ›¿ä»£çš„.<br><a id="more"></a><br><!-- ## å‚è€ƒ[WireShark](http://www.cnblogs.com/TankXiao/archive/2012/10/10/2711777.html) --></p><h3 id="å…³äºWireshark"><a href="#å…³äºWireshark" class="headerlink" title="å…³äºWireshark"></a>å…³äºWireshark</h3><p>é€‚åˆç ”ç©¶ TCP,UDP ç­‰åè®®. <strong>å› ä¸ºé™åˆ¶å¹¶ä¸èƒ½æ”¹åŒ…æˆ–æ¨¡æ‹Ÿå‘åŒ…ï¼Œåªèƒ½åˆ†æåè®®</strong><br>è‹¥, ç ”ç©¶HTTP,HTTPSæ¨èä½¿ç”¨<code>Charles</code> or <code>Fiddler</code></p><h3 id="å…³äºæŠ“åŒ…äº”é¢œå…­è‰²çš„æ„ä¹‰"><a href="#å…³äºæŠ“åŒ…äº”é¢œå…­è‰²çš„æ„ä¹‰" class="headerlink" title="å…³äºæŠ“åŒ…äº”é¢œå…­è‰²çš„æ„ä¹‰"></a>å…³äºæŠ“åŒ…äº”é¢œå…­è‰²çš„æ„ä¹‰</h3><blockquote><p>æ›´å¤šè¯¦æƒ…æŸ¥çœ‹ View - Coloring Rules</p></blockquote><ul><li>ç»¿è‰²èƒŒæ™¯ï¼ˆé»‘å­—ï¼‰<code>HTTPåŒ…</code></li><li>ç°è‰²èƒŒæ™¯ï¼ˆé»‘å­—ï¼‰<code>TCPåŒ…</code></li><li>è“è‰²èƒŒæ™¯ (é»‘å­—)  <code>DNSåŒ…</code></li><li>é»‘è‰²èƒŒæ™¯ (çº¢å­—)  <code>TCPé”™è¯¯åŒ…æˆ–è€…æ ¡éªŒé”™è¯¯åŒ…</code></li></ul><h3 id="Wiresharkä¸»çª—å£"><a href="#Wiresharkä¸»çª—å£" class="headerlink" title="Wiresharkä¸»çª—å£"></a>Wiresharkä¸»çª—å£</h3><blockquote><p>ä»ä¸Šè‡³ä¸‹</p></blockquote><p><img src="https://cloud.githubusercontent.com/assets/16535610/21889866/01695500-d906-11e6-8ddb-c82c20967ae0.png" alt="img"></p><ul><li>èœå•æ : ç”¨äºå¼€å§‹æ“ä½œã€‚</li><li>ä¸»å·¥å…·æ : æä¾›å¿«é€Ÿè®¿é—®èœå•ä¸­ç»å¸¸ç”¨åˆ°çš„é¡¹ç›®çš„åŠŸèƒ½ã€‚</li><li>è¿‡æ»¤å·¥å…·æ : æä¾›å¤„ç†å½“å‰æ˜¾ç¤ºè¿‡æ»¤å¾—æ–¹æ³•ã€‚</li><li>æ‹¦æˆªçš„æ•°æ®åŒ…åˆ—è¡¨(Packet list): æ˜¾ç¤ºæ‰“å¼€æ–‡ä»¶çš„æ¯ä¸ªåŒ…çš„æ‘˜è¦ã€‚ç‚¹å‡»é¢æ¿ä¸­çš„å•ç‹¬æ¡ç›®ï¼ŒåŒ…çš„å…¶ä»–æƒ…å†µå°†ä¼šæ˜¾ç¤ºåœ¨å¦å¤–ä¸¤ä¸ªé¢æ¿ä¸­ã€‚</li><li>é€‰ä¸­çš„æ•°æ®åŒ…ä¿¡æ¯(Packet details): æ˜¾ç¤ºæ‚¨åœ¨Packet listé¢æ¿ä¸­é€‰æ‹©çš„åŒ…çš„æ›´å¤šè¯¦æƒ…ã€‚</li><li>é€‰ä¸­çš„æ•°æ®åŒ…å­—èŠ‚ç : æ˜¾ç¤ºæ‚¨åœ¨Packet listé¢æ¿é€‰æ‹©çš„åŒ…çš„æ•°æ®ï¼Œä»¥åŠåœ¨Packet detailsé¢æ¿é«˜äº®æ˜¾ç¤ºçš„å­—æ®µã€‚</li><li>çŠ¶æ€æ : æ˜¾ç¤ºå½“å‰ç¨‹åºçŠ¶æ€ä»¥åŠæ•æ‰æ•°æ®çš„æ›´å¤šè¯¦æƒ…ã€‚</li></ul><p><strong>é€‰ä¸­çš„æ•°æ®åŒ…ä¿¡æ¯</strong></p><ul><li>Frame: ç‰©ç†å±‚çš„æ•°æ®å¸§æ¦‚å†µ</li><li>Ethernet II: æ•°æ®é“¾è·¯å±‚ä»¥å¤ªç½‘å¸§å¤´éƒ¨ä¿¡æ¯</li><li>Internet Protocol Version 4: äº’è”ç½‘å±‚IPåŒ…å¤´éƒ¨ä¿¡æ¯</li><li>Transmission Control Protocol:  ä¼ è¾“å±‚Tçš„æ•°æ®æ®µå¤´éƒ¨ä¿¡æ¯ï¼Œæ­¤å¤„æ˜¯TCP</li><li>Hypertext Transfer Protocol:  åº”ç”¨å±‚çš„ä¿¡æ¯ï¼Œæ­¤å¤„æ˜¯HTTPåè®®</li></ul><h3 id="è¿‡æ»¤è¡¨è¾¾å¼"><a href="#è¿‡æ»¤è¡¨è¾¾å¼" class="headerlink" title="è¿‡æ»¤è¡¨è¾¾å¼"></a>è¿‡æ»¤è¡¨è¾¾å¼</h3><ul><li><p>åè®®è¿‡æ»¤</p><blockquote><p>tcp upd ..</p></blockquote></li><li><p>ip è¿‡æ»¤</p><blockquote><p><code>æ¥æº</code> ip.src == 192.168.1.1<br><code>ç›®çš„åœ°</code> ip.dst == 192.168.1.1</p></blockquote></li><li><p>ç«¯å£</p><blockquote><p>tcp.port == 8080<br><code>ä»…æ˜¾ç¤ºæ¥æºä¸º8080çš„</code> tcp.srcport == 8080</p></blockquote></li><li><p>Httpæ¨¡å¼</p><blockquote><p>http.request.method==â€GETâ€</p></blockquote></li><li><p>é€»è¾‘è¿ç®—ç¬¦ä¸º <code>and</code> <code>or</code></p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt; æŠ½ç©ºæ•´ç†ä¸€ä¸‹, è™½ç„¶&lt;code&gt;Charles&lt;/code&gt;å¾ˆå¥½ç”¨, ä½†æ˜¯æŸäº›æƒ…å†µä¸‹è¯¥è½¯ä»¶ä¹Ÿæ˜¯ä¸å¯æ›¿ä»£çš„.&lt;br&gt;
    
    </summary>
    
      <category term="IDE" scheme="https://hocg.in/categories/IDE/"/>
    
    
      <category term="Tips" scheme="https://hocg.in/tags/Tips/"/>
    
      <category term="Wireshark" scheme="https://hocg.in/tags/Wireshark/"/>
    
  </entry>
  
  <entry>
    <title>SQLçš„é‡æ–°æ¢³ç†</title>
    <link href="https://hocg.in/2017/04/07/SQL%E9%87%8D%E6%96%B0%E6%A2%B3%E7%90%86/"/>
    <id>https://hocg.in/2017/04/07/SQLé‡æ–°æ¢³ç†/</id>
    <published>2017-04-07T01:19:09.000Z</published>
    <updated>2017-11-11T15:11:01.049Z</updated>
    
    <content type="html"><![CDATA[<p>æŒç»­ç§¯ç´¯..<br><a id="more"></a></p><h2 id="å…³äº-SQL-æ‰§è¡Œé¡ºåº"><a href="#å…³äº-SQL-æ‰§è¡Œé¡ºåº" class="headerlink" title="å…³äº SQL æ‰§è¡Œé¡ºåº"></a>å…³äº SQL æ‰§è¡Œé¡ºåº</h2><h3 id="èµ„æ–™"><a href="#èµ„æ–™" class="headerlink" title="èµ„æ–™"></a>èµ„æ–™</h3><p><a href="http://www.uol123.com/2013/01/26/sql%E8%AF%AD%E5%8F%A5%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86.html" target="_blank" rel="external">å‚è€ƒ</a></p><h3 id="ä¾‹å¥"><a href="#ä¾‹å¥" class="headerlink" title="ä¾‹å¥"></a>ä¾‹å¥</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> t_1 <span class="keyword">join</span> t_2</span><br><span class="line"><span class="keyword">on</span> t_1.id = t_2.fid</span><br><span class="line"><span class="keyword">where</span> <span class="number">1</span>=<span class="number">1</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> t_1.className</span><br><span class="line"><span class="keyword">having</span> t_1.className = <span class="string">'1ç­'</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">id</span> <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure><blockquote><p>è¿™æ˜¯ä¸€æ¡ç®€å•/è§„èŒƒçš„åŸºæœ¬SQLã€‚</p></blockquote><h3 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h3><ol><li><p>SQLä¸‰ä¸ªå¾ˆé‡è¦çš„ä½ç½®<strong>on/where/having</strong><br>å®ƒä»¬åˆ†åˆ«å¯¹åº”ç€ <strong>join/from/group</strong> å½¢æˆåçš„è™šè¡¨è¿›è¡Œç­›é€‰ã€‚</p></li><li><p><strong>select</strong>éƒ¨åˆ†å¹¶ä¸æ˜¯ä¸€å¼€å§‹å°±æ‰§è¡Œçš„ï¼Œè€Œæ˜¯è¡¨æ•°æ®ç¡®è®¤å®Œæ¯•ï¼Œåªå·®æ’åºçš„æ—¶å€™æ‰§è¡Œçš„ã€‚<br>å¹¶ä¸”selectä¸­çš„<strong>å‡½æ•°/DISTINCT/TOP</strong>ä¹Ÿæ˜¯åœ¨<strong>select</strong>æ‰§è¡Œé˜¶æ®µæ‰§è¡Œçš„</p></li><li><p><strong>èšåˆå‡½æ•°</strong>éœ€Groupåæ‰å¯æ‰§è¡Œ, <strong>æ™®é€šå‡½æ•°</strong>éšæ‰§è¡Œæ­¥éª¤æ‰§è¡Œ(æ­£å¸¸æ‰§è¡Œ)</p></li></ol><h3 id="å…·ä½“é¡ºåº"><a href="#å…·ä½“é¡ºåº" class="headerlink" title="å…·ä½“é¡ºåº"></a>å…·ä½“é¡ºåº</h3><ol><li>FROM FROMåé¢çš„è¡¨æ ‡è¯†äº†è¿™æ¡è¯­å¥è¦æŸ¥è¯¢çš„æ•°æ®æºã€‚å’Œä¸€äº›å­å¥å¦‚ï¼Œï¼ˆ1-J1ï¼‰ç¬›å¡å°”ç§¯ï¼Œï¼ˆ1-J2ï¼‰ONè¿‡æ»¤ï¼Œï¼ˆ1-J3ï¼‰æ·»åŠ å¤–éƒ¨åˆ—ï¼Œæ‰€è¦åº”ç”¨çš„å¯¹è±¡ã€‚FROMè¿‡ç¨‹ä¹‹åä¼šç”Ÿæˆä¸€ä¸ªè™šæ‹Ÿè¡¨VT1ã€‚<br>(1-J1)ç¬›å¡å°”ç§¯ è¿™ä¸ªæ­¥éª¤ä¼šè®¡ç®—ä¸¤ä¸ªç›¸å…³è”è¡¨çš„ç¬›å¡å°”ç§¯(CROSS JOIN) ï¼Œç”Ÿæˆè™šæ‹Ÿè¡¨VT1-J1ã€‚<br>(1-J2)ONè¿‡æ»¤ è¿™ä¸ªæ­¥éª¤åŸºäºè™šæ‹Ÿè¡¨VT1-J1è¿™ä¸€ä¸ªè™šæ‹Ÿè¡¨è¿›è¡Œè¿‡æ»¤ï¼Œè¿‡æ»¤å‡ºæ‰€æœ‰æ»¡è¶³ON è°“è¯æ¡ä»¶çš„åˆ—ï¼Œç”Ÿæˆè™šæ‹Ÿè¡¨VT1-J2ã€‚<br>(1-J3)æ·»åŠ å¤–éƒ¨è¡Œ  å¦‚æœä½¿ç”¨äº†<code>å¤–è¿æ¥(å¤–è¿æ¥æ‰ä¼šåŠ å…¥å­—æ®µ/æ•°æ®)</code>ï¼Œä¿ç•™è¡¨ä¸­çš„ä¸ç¬¦åˆONæ¡ä»¶çš„åˆ—ä¹Ÿä¼šè¢«åŠ å…¥åˆ°VT1-J2ä¸­ï¼Œä½œä¸ºå¤–éƒ¨è¡Œï¼Œç”Ÿæˆè™šæ‹Ÿè¡¨VT1-J3ã€‚<code>æ­¤æ—¶ ä¸ç¬¦åˆONçš„ä¼šè¢«åŠ å…¥å›æ¥</code></li><li>WHERE å¯¹VT1è¿‡ç¨‹ä¸­ç”Ÿæˆçš„ä¸´æ—¶è¡¨è¿›è¡Œè¿‡æ»¤ï¼Œæ»¡è¶³whereå­å¥çš„åˆ—è¢«æ’å…¥åˆ°VT2è¡¨ä¸­ã€‚ <code>æ•°æ®ç°åœ¨è¿˜æ²¡æœ‰è¢«åˆ†ç»„ï¼Œå› æ­¤ç°åœ¨ä½ ä¸èƒ½ä½¿ç”¨èšåˆè¿ç®—-</code></li><li>GROUP BY è¿™ä¸ªå­å¥ä¼šæŠŠVT2ä¸­ç”Ÿæˆçš„è¡¨æŒ‰ç…§GROUP BYä¸­çš„åˆ—è¿›è¡Œåˆ†ç»„ã€‚ç”ŸæˆVT3è¡¨ã€‚<code>æ¯ä¸€ä¸ªåˆ†ç»„å¿…é¡»åªèƒ½è¿”å›ä¸€è¡Œ(é™¤éè¢«è¿‡æ»¤æ‰)ï¼Œå³æ¯ä¸€è¡Œæ•´ä½“éƒ½æ— é‡å¤ï¼Œå¯¹äºæ²¡æœ‰å‡ºç°GROUP BYåé¢çš„åˆ—å¿…é¡»ä½¿ç”¨èšåˆå‡½æ•°(å¦‚ MAX ,MIN,COUNT,AVGç­‰)ï¼Œä¿è¯æ¯ä¸€ä¸ªGROUPåªè¿”å›ä¸€è¡Œ</code></li><li>HAVING è¿™ä¸ªå­å¥å¯¹VT3è¡¨ä¸­çš„ä¸åŒçš„ç»„è¿›è¡Œè¿‡æ»¤ï¼Œæ»¡è¶³HAVINGæ¡ä»¶çš„å­å¥è¢«åŠ å…¥åˆ°VT4è¡¨ä¸­ã€‚</li><li>SELECT è¿™ä¸ªå­å¥å¯¹SELECTå­å¥ä¸­çš„å…ƒç´ è¿›è¡Œå¤„ç†ï¼Œç”ŸæˆVT5è¡¨ã€‚<br>(5-1)è®¡ç®—è¡¨è¾¾å¼ è®¡ç®—SELECT å­å¥ä¸­çš„è¡¨è¾¾å¼ï¼Œç”ŸæˆVT5-1 <code>å¦‚æœè¿™ä¸ªsqlè¯­å¥æ˜¯ä¸€ä¸ªèšåˆæŸ¥è¯¢ï¼Œåœ¨GROUP BYä¹‹åï¼Œä½ åªèƒ½ä½¿ç”¨GROUP BYä¸­çš„åˆ—ï¼Œå¯¹ä¸å±äºGROUPé›†åˆä¸­çš„åˆ—å¿…é¡»ä½¿ç”¨èšåˆè¿ç®—</code><br>(5-2)DISTINCT å¯»æ‰¾VT5-1ä¸­çš„é‡å¤åˆ—ï¼Œå¹¶åˆ æ‰ï¼Œç”ŸæˆVT5-2<br>(5-3)TOP ä»ORDER BYå­å¥å®šä¹‰çš„ç»“æœä¸­ï¼Œç­›é€‰å‡ºç¬¦åˆæ¡ä»¶çš„åˆ—ã€‚ç”ŸæˆVT5-3è¡¨</li><li>ORDER BY ä»VT5-3ä¸­çš„è¡¨ä¸­ï¼Œæ ¹æ®ORDER BY å­å¥çš„æ¡ä»¶å¯¹ç»“æœè¿›è¡Œæ’åºï¼Œç”ŸæˆVC6è¡¨ã€‚<code>å”¯ä¸€ä¸€ä¸ªå¯ä»¥ä½¿ç”¨SELECTå­å¥åˆ›å»ºçš„åˆ«åçš„åœ°æ–¹</code></li></ol><blockquote><p><strong>èšåˆå‡½æ•°</strong>æ˜¯å¯¹ä¸€ç»„å€¼æ‰§è¡Œè®¡ç®—å¹¶è¿”å›å•ä¸€çš„å€¼çš„å‡½æ•°</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> C.customerid, <span class="keyword">COUNT</span>(O.orderid) <span class="keyword">AS</span> numorders</span><br><span class="line"><span class="keyword">FROM</span> dbo.Customers <span class="keyword">AS</span> C</span><br><span class="line">  <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> dbo.Orders <span class="keyword">AS</span> O</span><br><span class="line">    <span class="keyword">ON</span> C.customerid = O.customerid</span><br><span class="line"><span class="keyword">WHERE</span> C.city = <span class="string">'Madrid'</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> C.customerid</span><br><span class="line"><span class="keyword">HAVING</span> <span class="keyword">COUNT</span>(O.orderid)</span><br></pre></td></tr></table></figure><h2 id="å…³äº-è¡¨-Joins"><a href="#å…³äº-è¡¨-Joins" class="headerlink" title="å…³äº è¡¨ Joins"></a>å…³äº è¡¨ Joins</h2><blockquote><p> Joins å­å¥ç”¨äºç»“åˆä¸¤ä¸ªæˆ–å¤šä¸ªæ•°æ®åº“ä¸­è¡¨çš„è®°å½•, ä¹Ÿå°±æ˜¯è¯´æ˜¯<strong>é€šè¿‡æŸç§è”ç³»å»ºç«‹è¡¨ä¹‹é—´çš„å…³è”, å¹¶å½¢æˆä¸€å¼ æ–°è¡¨</strong></p></blockquote><h3 id="SQL-å®šä¹‰äº†ä¸‰ç§ä¸»è¦ç±»å‹çš„è¿æ¥"><a href="#SQL-å®šä¹‰äº†ä¸‰ç§ä¸»è¦ç±»å‹çš„è¿æ¥" class="headerlink" title="SQL å®šä¹‰äº†ä¸‰ç§ä¸»è¦ç±»å‹çš„è¿æ¥"></a>SQL å®šä¹‰äº†ä¸‰ç§ä¸»è¦ç±»å‹çš„è¿æ¥</h3><ul><li><p>äº¤å‰è¿æ¥ ( <strong>CROSS JOIN</strong> ), åˆç§° <strong>ç¬›å¡å°”ç§¯</strong></p><blockquote><p>ä¼šå½¢æˆåºå¤§çš„è¡¨, å› æ­¤æ…ç”¨ã€‚<br><strong>å‡è®¾:</strong> è¡¨t1(5è¡Œæ•°æ®, 3åˆ—), è¡¨t2(4è¡Œæ•°æ®, 2åˆ—)<br><strong>SQL:</strong> select <em> from t1 cross join t2<br><strong>ç»“æœ:</strong> æ•°æ®æ•°é‡ä¸º20è¡Œæ•°æ®(5 </em> 4), 5åˆ—</p></blockquote></li><li><p>å†…è¿æ¥ ( <strong>INNER JOIN</strong> ), é€šå¸¸å¯çœç•¥ <code>inner</code></p><blockquote><p>é€šè¿‡ <code>on</code> æˆ– <code>where</code> å»ºç«‹è¡¨ä¹‹é—´çš„è”ç³»æˆ–è€…è¯´<strong>è¡¨å½¢æˆçš„æ¡ä»¶</strong><br><strong>å‡è®¾:</strong> è¡¨t1(5è¡Œæ•°æ®, 3åˆ—), è¡¨t2(4è¡Œæ•°æ®, 2åˆ—)<br><strong>SQL:</strong> select <em> from t1 inner join t2 on t1.sid = t2.sid<br><em>*ç»“æœ:</em></em> æŸ¥è¯¢æ“ä½œåˆ—å‡ºä¸è¿æ¥æ¡ä»¶åŒ¹é…çš„æ•°æ®è¡Œ, 5åˆ—</p></blockquote></li><li><p>å¤–è¿æ¥ ( <strong>OUTER JOIN</strong> )</p><blockquote><p>å¤–è¿æ¥ä¸ºå†…è¿æ¥çš„æ‰©å±•, ä¸»è¦åŒºåˆ«åœ¨äºå“ªè¾¹ä¸ºåŸºå‡†, ä½¿ç”¨ <code>on</code> è¿›è¡Œæ•°æ®å…³è”<br>å¤–è¿æ¥åˆ†ä¸º: <code>å·¦å¤–è¿æ¥</code>ã€<code>å³å¤–è¿æ¥</code>ã€<code>å…¨å¤–è¿æ¥</code><br>éƒ¨åˆ†SQLè¯­è¨€å¹¶ä¸åŒ…å«å…¨éƒ¨ç§ç±», ä¾‹å¦‚<br>SQLite ä¹‹åŒ…å« <strong>å·¦å¤–è¿æ¥</strong></p><ul><li>å·¦å¤–è¿æ¥ ( <strong>LEFT JOIN</strong> )<br><strong>å‡è®¾:</strong> è¡¨t1(5è¡Œæ•°æ®, 3åˆ—), è¡¨t2(4è¡Œæ•°æ®, 2åˆ—)<br><strong>SQL:</strong> select <em> from t1 left join t2 on t1.sid = t2.sid<br><em>*ç»“æœ:</em></em> ä»¥å·¦è¡¨ä¸ºåŸºå‡†, å°†æ•°æ®æŒ‰æ¡ä»¶è¿›è¡Œè¿æ¥, å·¦è¡¨è¡Œå…¨éƒ¨æ˜¾ç¤º, è‹¥å³è¡¨æ²¡æœ‰æ»¡è¶³æ¡ä»¶çš„è¡Œåˆ™æ˜¾ç¤ºä¸ºNULL, 5åˆ—</li></ul></blockquote><ul><li><p>å³å¤–è¿æ¥ ( <strong>RIGHT JOIN</strong> )</p><blockquote><p><strong>å‡è®¾:</strong> è¡¨t1(5è¡Œæ•°æ®, 3åˆ—), è¡¨t2(4è¡Œæ•°æ®, 2åˆ—)<br><strong>SQL:</strong> select <em> from t1 right join t2 on t1.sid = t2.sid<br><em>*ç»“æœ:</em></em> ä»¥å³è¡¨ä¸ºåŸºå‡†, å°†æ•°æ®æŒ‰æ¡ä»¶è¿›è¡Œè¿æ¥, å³è¡¨è¡Œå…¨éƒ¨æ˜¾ç¤º, è‹¥å·¦è¡¨æ²¡æœ‰æ»¡è¶³æ¡ä»¶çš„è¡Œåˆ™æ˜¾ç¤ºä¸ºNULL, 5åˆ—</p></blockquote></li><li><p>å…¨å¤–è¿æ¥ ( <strong>FULL JOIN</strong> )</p><blockquote><p><strong>å‡è®¾:</strong> è¡¨t1(5è¡Œæ•°æ®, 3åˆ—), è¡¨t2(4è¡Œæ•°æ®, 2åˆ—)<br><strong>SQL:</strong> select <em> from t1 full join t2 on t1.sid = t2.sid<br><em>*ç»“æœ:</em></em> å®Œæ•´çš„æ˜¾ç¤ºä¸¤è¡¨çš„æ•°æ®, å°†æ•°æ®æŒ‰æ¡ä»¶è¿›è¡Œè¿æ¥, å½“æ²¡æœ‰è¢«å…³è”çš„è¡¨ä¸­æ²¡æœ‰å­˜åœ¨æ»¡è¶³æ¡ä»¶çš„è¡Œæ—¶, åˆ™æ˜¾ç¤ºä¸ºNULL, 5åˆ—</p></blockquote></li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æŒç»­ç§¯ç´¯..&lt;br&gt;
    
    </summary>
    
      <category term="Server" scheme="https://hocg.in/categories/Server/"/>
    
    
      <category term="Tips" scheme="https://hocg.in/tags/Tips/"/>
    
      <category term="SQL" scheme="https://hocg.in/tags/SQL/"/>
    
  </entry>
  
  <entry>
    <title>Vue.jsé¡¹ç›® éƒ¨ä»¶ç®€ä»‹ (æœªå®Œå¾…ç»­)</title>
    <link href="https://hocg.in/2017/03/31/Vue.js%E9%A1%B9%E7%9B%AE-%E9%83%A8%E4%BB%B6%E7%AE%80%E4%BB%8B/"/>
    <id>https://hocg.in/2017/03/31/Vue.jsé¡¹ç›®-éƒ¨ä»¶ç®€ä»‹/</id>
    <published>2017-03-31T07:32:36.000Z</published>
    <updated>2017-03-31T13:15:33.000Z</updated>
    
    <content type="html"><![CDATA[<p>ğŸ¦‹ ç›®å‰å›½å†…å‰ç«¯MVVMæœ€ç«çš„æ¡†æ¶.. å‰æ®µæ—¶é—´å†™äº†ä¸€ä¸ª<a href="https://github.com/hocgin/iPage" target="_blank" rel="external">Abouté¡µé¢</a>, è¿™å‡ å¤©é¡ºå¸¦æ•´ç†ä¸€ä¸‹çŸ¥è¯†ç‚¹.<br><a id="more"></a></p><h1 id="Vue-js"><a href="#Vue-js" class="headerlink" title="Vue.js"></a>Vue.js</h1><blockquote><p>Vue.jsæ˜¯å½“ä¸‹å¾ˆç«çš„ä¸€ä¸ªJavaScript MVVMåº“ï¼Œå®ƒæ˜¯ä»¥æ•°æ®é©±åŠ¨å’Œç»„ä»¶åŒ–çš„æ€æƒ³æ„å»ºçš„.<br>ç±»ä¼¼çš„æœ‰<code>Angular.js</code>.</p></blockquote><ul><li>å¯ä»¥å»ºç«‹DOMå’Œæ•°æ®ä¹‹é—´çš„ç»‘å®š</li><li>å¯ä»¥æŒ‰åŠŸèƒ½/ç»„ä»¶æŠ½ç¦»HTMLä»£ç </li></ul><p><strong>ç›¸å…³</strong><br><a href="http://hocg.in/2017/03/26/Vue.js-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5">Vue é¡¹ç›®å®è·µ - æŒç»­æ›´æ–°</a></p><h2 id="åŠŸèƒ½éƒ¨åˆ†"><a href="#åŠŸèƒ½éƒ¨åˆ†" class="headerlink" title="åŠŸèƒ½éƒ¨åˆ†"></a>åŠŸèƒ½éƒ¨åˆ†</h2><h3 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h3><ul><li>æ•°å€¼é»˜è®¤åŒå‘ç»‘å®š</li><li>æ”¯æŒ æ¡ä»¶è¯­æ³•ç‰¹æ€§/åŠŸèƒ½å‡½æ•°/ç”Ÿå‘½å‘¨æœŸ</li><li>åŠ¨æ€è®¾å®š<code>style</code>/<code>class</code></li><li>æ†ç»‘<code>event</code></li><li>æ¸²æŸ“ç”Ÿå‘½å‘¨æœŸ<h3 id="é«˜çº§"><a href="#é«˜çº§" class="headerlink" title="é«˜çº§"></a>é«˜çº§</h3></li><li>å•é¡µé¢ç»„ä»¶</li><li>è‡ªå®šä¹‰æŒ‡ä»¤</li><li>å•å…ƒæµ‹è¯•</li><li>æ’ä»¶</li></ul><h2 id="å•æ–‡ä»¶ç»„ä»¶-vue"><a href="#å•æ–‡ä»¶ç»„ä»¶-vue" class="headerlink" title="å•æ–‡ä»¶ç»„ä»¶.vue"></a>å•æ–‡ä»¶ç»„ä»¶<code>.vue</code></h2><p><strong>å®šä¹‰:</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>This is title<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">    name: <span class="string">'Title'</span></span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><strong>ä½¿ç”¨:</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"./assets/logo.png"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Title</span>&gt;</span><span class="tag">&lt;/<span class="name">Title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> Title <span class="keyword">from</span> <span class="string">'./components/Title'</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">    name: <span class="string">'app'</span>,</span></span><br><span class="line"><span class="undefined">    components: &#123;</span></span><br><span class="line"><span class="undefined">      Title</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h1 id="Vue-Router"><a href="#Vue-Router" class="headerlink" title="Vue Router"></a>Vue Router</h1><blockquote><p>æ‰©å±• Vue<br>æŒ‰å­—é¢æ„æ€æ¥çœ‹ä¸º<code>Vue è·¯ç”±</code><br>å…¶å®è´¨ä¹Ÿå°±æ˜¯ç”¨äº<strong>å•é¡µåº”ç”¨</strong>ç®¡ç†é¡µé¢è·³è½¬, è´Ÿè´£è·¯å¾„è§£æ.</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Router <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"><span class="keyword">import</span> Hello <span class="keyword">from</span> <span class="string">'@/components/Hello'</span></span><br><span class="line"></span><br><span class="line">Vue.use(Router)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Router(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'/'</span>,</span><br><span class="line">      name: <span class="string">'Hello'</span>,</span><br><span class="line">      component: Hello</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="Vuex"><a href="#Vuex" class="headerlink" title="Vuex"></a>Vuex</h1><blockquote><p>æ‰©å±• Vue<br>å½“å¼€å‘å¤§å‹é¡¹ç›®æ—¶, ä¸ºé˜²æ­¢ Vue å¤ªè¿‡è‡ƒè‚¿, ä½¿ç”¨ Vuex ç®¡ç†æ•°æ®çŠ¶æ€.</p></blockquote><h1 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h1><blockquote><p>ä¸€æ¬¾æ¨¡å—åŠ è½½å™¨å…¼æ‰“åŒ…å·¥å…·<br>ä½¿ç”¨æ¨¡å—çš„ç†å¿µæ¥å¤„ç† JS/CSS/å›¾ç‰‡ç­‰èµ„æºæ–‡ä»¶</p></blockquote><h2 id="æŒ‡ä»¤"><a href="#æŒ‡ä»¤" class="headerlink" title="æŒ‡ä»¤"></a>æŒ‡ä»¤</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> å®‰è£…</span><br><span class="line">npm install webpack --save-dev</span><br><span class="line"><span class="meta">#</span> æ‰§è¡Œ</span><br><span class="line">webpack</span><br><span class="line">   --display-error-details # è¾“å‡ºè¯¦ç»†é”™è¯¯</span><br><span class="line">   --watch # å®æ—¶ç›‘å¬å¹¶è‡ªåŠ¨æ‰“åŒ…</span><br><span class="line">   --config &lt;file&gt; # æŒ‡å®šé…ç½®æ–‡ä»¶æ‰“åŒ…</span><br><span class="line">   -p # å‹ç¼©æ‰“åŒ…</span><br><span class="line">   -d # ç”Ÿæˆmapæ˜ å°„æ–‡ä»¶</span><br></pre></td></tr></table></figure><h2 id="é…ç½®-webpack-config-js"><a href="#é…ç½®-webpack-config-js" class="headerlink" title="é…ç½®(webpack.config.js)"></a>é…ç½®(webpack.config.js)</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// æ’ä»¶</span></span><br><span class="line">  plugins: [],</span><br><span class="line">  <span class="comment">// é¡µé¢å…¥å£</span></span><br><span class="line">  entry: &#123;&#125;,</span><br><span class="line">  <span class="comment">// å…¥å£æ–‡ä»¶è¾“å‡ºä½ç½®, å³å¤„ç†åçš„æ–‡ä»¶å­˜æ”¾ä½ç½®</span></span><br><span class="line">  output: &#123;&#125;,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    <span class="comment">// æ–‡ä»¶å¤„ç†åŠ è½½å™¨</span></span><br><span class="line">    rules: []</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// é¢å¤–å¤„ç†</span></span><br><span class="line">  resolve: &#123;</span><br><span class="line">    <span class="comment">// è‡ªåŠ¨æ‰©å±•æ–‡ä»¶åç¼€, requireæ—¶å¯ä»¥è¿›è¡Œçœç•¥</span></span><br><span class="line">    extensions: [],</span><br><span class="line">    <span class="comment">// æ¨¡å—å®šä¹‰åˆ«å, requireæ—¶å¯ä»¥è¿›è¡Œè·¯å¾„çœç•¥, ç›´æ¥ä½¿ç”¨åˆ«å</span></span><br><span class="line">    alias: &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å…¥å£æ–‡ä»¶-main-js"><a href="#å…¥å£æ–‡ä»¶-main-js" class="headerlink" title="å…¥å£æ–‡ä»¶(main.js)"></a>å…¥å£æ–‡ä»¶(main.js)</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App'</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'./router'</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'./store/index'</span></span><br><span class="line"><span class="comment">// å¼•å…¥js, åŠ è½½å™¨ä¼šè‡ªåŠ¨è¿›è¡Œå¤„ç†</span></span><br><span class="line"><span class="keyword">import</span> holderjs <span class="keyword">from</span> <span class="string">'holderjs'</span></span><br><span class="line"><span class="comment">// å¼•å…¥ css/scss, åŠ è½½å™¨ä¼šè‡ªåŠ¨è¿›è¡Œå¤„ç†</span></span><br><span class="line"><span class="keyword">import</span> appScss <span class="keyword">from</span> <span class="string">'./assets/app.scss'</span></span><br><span class="line"><span class="keyword">import</span> fontAwesomeCss <span class="keyword">from</span> <span class="string">'./assets/font-awesome-4.7.0/css/font-awesome.css'</span></span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* eslint-disable no-new */</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  router,</span><br><span class="line">  store,</span><br><span class="line">  template: <span class="string">'&lt;App/&gt;'</span>,</span><br><span class="line">  components: &#123; App &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><blockquote><p>æœªå®Œå¾…ç»­ing</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ğŸ¦‹ ç›®å‰å›½å†…å‰ç«¯MVVMæœ€ç«çš„æ¡†æ¶.. å‰æ®µæ—¶é—´å†™äº†ä¸€ä¸ª&lt;a href=&quot;https://github.com/hocgin/iPage&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Abouté¡µé¢&lt;/a&gt;, è¿™å‡ å¤©é¡ºå¸¦æ•´ç†ä¸€ä¸‹çŸ¥è¯†ç‚¹.&lt;br&gt;
    
    </summary>
    
      <category term="Coder" scheme="https://hocg.in/categories/Coder/"/>
    
    
      <category term="JavaScript" scheme="https://hocg.in/tags/JavaScript/"/>
    
      <category term="HTML5" scheme="https://hocg.in/tags/HTML5/"/>
    
      <category term="å‰ç«¯" scheme="https://hocg.in/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>Vue é¡¹ç›®å®è·µ - æŒç»­æ›´æ–°</title>
    <link href="https://hocg.in/2017/03/26/Vue.js-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/"/>
    <id>https://hocg.in/2017/03/26/Vue.js-é¡¹ç›®å®è·µ/</id>
    <published>2017-03-26T07:40:08.000Z</published>
    <updated>2017-06-01T13:20:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>ğŸŒ ç›®å‰å›½å†…å‰ç«¯MVVMæœ€ç«çš„æ¡†æ¶.. é¡¹ç›®å®è·µè®°å½•ä¸€äº›æµç¨‹<br><a id="more"></a></p><h1 id="ç›¸å…³"><a href="#ç›¸å…³" class="headerlink" title="ç›¸å…³"></a>ç›¸å…³</h1><ul><li>vue<ul><li>vue-router <code>ç»™vueä½¿ç”¨çš„è·¯ç”±</code></li><li>vuex <code>ä¸€ä¸ªä¸“ä¸º Vue.js åº”ç”¨ç¨‹åºå¼€å‘çš„çŠ¶æ€ç®¡ç†æ¨¡å¼</code></li></ul></li><li>webpack</li></ul><h1 id="å¿«é€Ÿæ­å»ºé¡¹ç›®"><a href="#å¿«é€Ÿæ­å»ºé¡¹ç›®" class="headerlink" title="å¿«é€Ÿæ­å»ºé¡¹ç›®"></a>å¿«é€Ÿæ­å»ºé¡¹ç›®</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> æ„å»ºé¡¹ç›®</span><br><span class="line">npm install -g vue-cli</span><br><span class="line">vue init webpack &lt;project-name&gt;</span><br><span class="line"><span class="meta">#</span> è¯•è¡Œ</span><br><span class="line">cd iPage</span><br><span class="line">npm install</span><br><span class="line">npm run dev</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> å®‰è£… vuex</span><br><span class="line">npm install vuex -S</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> å®‰è£… sass å¼€å‘æ”¯æŒ</span><br><span class="line">npm install --save-dev sass-loader</span><br><span class="line">npm install --save-dev node-sass</span><br><span class="line">npm install --save-dev css-loader</span><br><span class="line">npm install --save-dev style-loader</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> ç¼–è¯‘ç”Ÿæˆé™æ€æ–‡ä»¶</span><br><span class="line">npm run build</span><br></pre></td></tr></table></figure><h1 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">.  </span><br><span class="line">â”œâ”€â”€ README.md  </span><br><span class="line">â”œâ”€â”€ build  </span><br><span class="line">â”œâ”€â”€ config   </span><br><span class="line">â”œâ”€â”€ index.html  </span><br><span class="line">â”œâ”€â”€ node_modules  </span><br><span class="line">â”œâ”€â”€ package.json  </span><br><span class="line">â”œâ”€â”€ src // æºç </span><br><span class="line">|    â”œâ”€â”€ App.vue    // çˆ¶ç»„ä»¶  </span><br><span class="line">|    â”œâ”€â”€ assets     // é™æ€æ–‡ä»¶  </span><br><span class="line">|    â”œâ”€â”€ components // å…¬å…±ç»„ä»¶  </span><br><span class="line">|    â”œâ”€â”€ main.js    // webpackæ‰“åŒ…å…¥å£æ–‡ä»¶  </span><br><span class="line">|    â””â”€â”€ router  </span><br><span class="line">|          â””â”€â”€ index.js // é¡µé¢è·¯ç”±  </span><br><span class="line">â”œâ”€â”€ static  </span><br><span class="line">â””â”€â”€ test</span><br></pre></td></tr></table></figure><h1 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h1>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ğŸŒ ç›®å‰å›½å†…å‰ç«¯MVVMæœ€ç«çš„æ¡†æ¶.. é¡¹ç›®å®è·µè®°å½•ä¸€äº›æµç¨‹&lt;br&gt;
    
    </summary>
    
      <category term="Coder" scheme="https://hocg.in/categories/Coder/"/>
    
    
      <category term="JavaScript" scheme="https://hocg.in/tags/JavaScript/"/>
    
      <category term="HTML5" scheme="https://hocg.in/tags/HTML5/"/>
    
      <category term="å‰ç«¯" scheme="https://hocg.in/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>å…³äº Objective-C çš„å°ç¬”è®°</title>
    <link href="https://hocg.in/2017/03/20/%E5%85%B3%E4%BA%8E%20Objective-C%20%E7%9A%84%E5%B0%8F%E7%AC%94%E8%AE%B0/"/>
    <id>https://hocg.in/2017/03/20/å…³äº Objective-C çš„å°ç¬”è®°/</id>
    <published>2017-03-20T00:07:00.000Z</published>
    <updated>2018-10-11T13:39:15.368Z</updated>
    
    <content type="html"><![CDATA[<p>ä¹‹å‰å­¦ <code>swift3</code> é¡ºå¸¦æ•´ç†çš„å°ç¬”è®°<br><a id="more"></a></p><h1 id="Objective-C"><a href="#Objective-C" class="headerlink" title="Objective-C"></a>Objective-C</h1><h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><table><thead><tr><th>æ–‡ä»¶åç¼€</th><th>æ–‡ä»¶ç±»å‹</th></tr></thead><tbody><tr><td><code>*.h</code></td><td><strong>å¤´æ–‡ä»¶</strong>ã€‚å¤´æ–‡ä»¶åŒ…å«ç±»ï¼Œç±»å‹ï¼Œå‡½æ•°å’Œå¸¸æ•°çš„å£°æ˜ã€‚</td></tr><tr><td><code>*.m</code></td><td><strong>æºä»£ç æ–‡ä»¶</strong>ã€‚è¿™æ˜¯å…¸å‹çš„æºä»£ç æ–‡ä»¶æ‰©å±•åï¼Œå¯ä»¥åŒ…å« Objective-C å’Œ C ä»£ç </td></tr><tr><td><code>*.mm</code></td><td><strong>æºä»£ç æ–‡ä»¶</strong>ã€‚å¸¦æœ‰è¿™ç§æ‰©å±•åçš„æºä»£ç æ–‡ä»¶ï¼Œé™¤äº†å¯ä»¥åŒ…å«Objective-Cå’ŒCä»£ç ä»¥å¤–è¿˜å¯ä»¥åŒ…å«C++ä»£ç ã€‚ä»…åœ¨ä½ çš„Objective-Cä»£ç ä¸­ç¡®å®éœ€è¦ä½¿ç”¨C++ç±»æˆ–è€…ç‰¹æ€§çš„æ—¶å€™æ‰ç”¨è¿™ç§æ‰©å±•åã€‚</td></tr></tbody></table><h2 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h2><table><thead><tr><th>å…³é”®è¯</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>#import</td><td>å¼•å…¥æ–‡ä»¶, å¹¶ç¡®ä¿ç›¸åŒçš„æ–‡ä»¶åªä¼šè¢«åŒ…å«ä¸€æ¬¡</td></tr><tr><td>NSString* say = @â€Hello Worldâ€</td><td>åˆ›å»ºNSStringå¯¹è±¡</td></tr><tr><td>@interface/@implementation</td><td>objective-c ä¸€ä¸ªç±»æ˜¯ç”±:å®šä¹‰å’Œå®ç°æ¥æ„æˆçš„, @interface ç”¨äºå®šä¹‰, @implementationç”¨äºå®ç°ç»†èŠ‚.</td></tr><tr><td>@propertyä¸@synthesize</td><td>@propertyç”¨äºåœ¨@interfaceå£°æ˜getterä¸setterå‡½æ•°, @synthesizeç”¨äºåœ¨@implementationå®ç°getterä¸setterå‡½æ•°, <br><strong>äºŒè€…æ˜¯æ­é…å£å‘³</strong><br><strong>é«˜ç‰ˆæœ¬(Xcode4.5)å¯çœç•¥@synthesize</strong></td></tr></tbody></table><h2 id="åŸºç¡€æ¡†æ¶"><a href="#åŸºç¡€æ¡†æ¶" class="headerlink" title="åŸºç¡€æ¡†æ¶"></a>åŸºç¡€æ¡†æ¶</h2><h3 id=""><a href="#" class="headerlink" title=""></a><foundation foundation.h=""></foundation></h3><ul><li>å®ƒåŒ…æ‹¬ NSArrayï¼ŒNSDictionaryä¸­çš„NSSetç­‰æ‰©å±•æ•°æ®ç±»å‹çš„åˆ—è¡¨ã€‚</li><li>å®ƒç”±ä¸€ç»„ä¸°å¯Œçš„æ“ä½œæ–‡ä»¶çš„å‡½æ•°ï¼Œå­—ç¬¦ä¸²ï¼Œç­‰ç­‰ã€‚</li><li>URLå¤„ç†å®ƒæä¾›çš„åŠŸèƒ½ï¼Œå¦‚æ—¥æœŸæ ¼å¼ï¼Œæ•°æ®å¤„ç†ï¼Œé”™è¯¯å¤„ç†ç­‰å®ç”¨å·¥å…·</li></ul><h2 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><h3 id="è¯­æ³•é€Ÿè¯»"><a href="#è¯­æ³•é€Ÿè¯»" class="headerlink" title="è¯­æ³•é€Ÿè¯»"></a>è¯­æ³•é€Ÿè¯»</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">/* é¢„å¤„ç†(å¯¼åŒ…) */</span><br><span class="line">#import &lt;Foundation/Foundation.h&gt;</span><br><span class="line"></span><br><span class="line">/* å®šä¹‰æ¥å£(ç»§æ‰¿:NSObject) */</span><br><span class="line">@interface SampleClass:NSObject</span><br><span class="line">- (void)sampleMethod;</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">/* å®ç°æ¥å£(SampleClass) */</span><br><span class="line">@implementation SampleClass</span><br><span class="line"></span><br><span class="line">- (void)sampleMethod&#123;</span><br><span class="line">   NSLog(@&quot;Hello, World!</span><br><span class="line">&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/* ä¸»å‡½æ•° */</span><br><span class="line">int main() &#123;</span><br><span class="line">   /* my first program in Objective-C */</span><br><span class="line">   SampleClass *sampleClass = [[SampleClass alloc]init];</span><br><span class="line"></span><br><span class="line">   /* - è°ƒç”¨å‡½æ•°</span><br><span class="line">   C: sampleClass.sampleMethod(args);</span><br><span class="line">   OC: [å¯¹è±¡ å‡½æ•°å: å‚æ•°]</span><br><span class="line">    */</span><br><span class="line">   [sampleClass sampleMethod: args];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç±»çš„è¯­æ³•"><a href="#ç±»çš„è¯­æ³•" class="headerlink" title="ç±»çš„è¯­æ³•"></a>ç±»çš„è¯­æ³•</h3><blockquote><p>ç±»åˆ†ä¸º: <strong>ç±»çš„å®šä¹‰(.h)</strong> å’Œ <strong>ç±»çš„å®ç°(.m)</strong><br><img src="http://cdn.hocgin.top/ç±»çš„å®šä¹‰è¯­æ³•.jpg" alt="image"></p><h4 id="å®šä¹‰-h"><a href="#å®šä¹‰-h" class="headerlink" title="å®šä¹‰ ( *.h )"></a>å®šä¹‰ ( *.h )</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">@interface MyObject : NSObject</span><br><span class="line">&#123;</span><br><span class="line">    // æ­¤å¤„å˜é‡é»˜è®¤ä¸ºå—ä¿æŠ¤(protected)</span><br><span class="line">    int memberVar1; // å®ä½“å˜é‡</span><br><span class="line">    id  memberVar2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">+(return_type) class_method; // &quot;+&quot; è¡¨ç¤º ç±»æ–¹æ³•</span><br><span class="line"></span><br><span class="line">-(return_type) instance_method1; // &quot;-&quot; è¡¨ç¤º å®ä¾‹æ–¹æ³•</span><br><span class="line">-(return_type) instance_method2: (int) p1;</span><br><span class="line">// è¿™é‡Œçš„è°ƒç”¨æ–¹å¼ä¸º: [obj instance_method3: 1 andPar: 2];</span><br><span class="line">// andPar ç›¸å½“äºå¤–éƒ¨çš„å¦å¤–ä¸€ä¸ªåˆ«å</span><br><span class="line">-(return_type) instance_method3: (int) p1 andPar: (int) p2;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure></blockquote><h4 id="å®ç°-m"><a href="#å®ç°-m" class="headerlink" title="å®ç° ( *.m )"></a>å®ç° ( *.m )</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">@implementation MyObject</span><br><span class="line">&#123;</span><br><span class="line">  // æ­¤å¤„å˜é‡ä¸ºç§æœ‰(private)</span><br><span class="line">  int memberVar3; //ç§æœ‰å®ä½“å˜é‡</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">+(return_type) class_method &#123;</span><br><span class="line">    .... //method implementation</span><br><span class="line">&#125;</span><br><span class="line">-(return_type) instance_method1 &#123;</span><br><span class="line">     ....</span><br><span class="line">&#125;</span><br><span class="line">-(return_type) instance_method2: (int) p1 &#123;</span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br><span class="line">-(return_type) instance_method3: (int) p1 andPar: (int) p2 &#123;</span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure><h4 id="åˆ›å»ºå¯¹è±¡"><a href="#åˆ›å»ºå¯¹è±¡" class="headerlink" title="åˆ›å»ºå¯¹è±¡"></a>åˆ›å»ºå¯¹è±¡</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// æ³¨: alloc ä¸ init éƒ½å±äº NSObject é‡Œçš„å‡½æ•°</span><br><span class="line">MyObject * my = [[MyObject alloc] init];</span><br><span class="line">// æ— å‚æ„å»º, ä¹Ÿå¯é‡‡ç”¨ä»¥ä¸‹æ–¹å¼ (Objective-C 2.0)</span><br><span class="line">MyObject * my = [MyObject new];</span><br></pre></td></tr></table></figure><blockquote><p><strong>Note:</strong> { } éœ€å¦‚æ–‡è¿™æ ·æ ‡è¯†, æ‰å¯è¡¨è¾¾å‡ºå‡†ç¡®çš„è¯­ä¹‰, è¯»è€…è‡ªè¡Œé¢†æ‚Ÿ.</p></blockquote><h3 id="å‡½æ•°è¯­æ³•"><a href="#å‡½æ•°è¯­æ³•" class="headerlink" title="å‡½æ•°è¯­æ³•"></a>å‡½æ•°è¯­æ³•</h3><blockquote><p>å‡½æ•°åˆ†ä¸º: <strong>ç±»å‡½æ•°</strong> å’Œ <strong>å¯¹è±¡å‡½æ•°</strong><br><img src="http://cdn.hocgin.top/å‡½æ•°çš„å®šä¹‰è¯­æ³•.jpg" alt="image"></p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// å¦‚ä¸Š</span><br><span class="line">// å®šä¹‰è¯­æ³•: èŒƒå›´æ ‡è¯† (è¿”å›å€¼)å‡½æ•°å:å¤–éƒ¨å½¢å‚åˆ«å:(å‚æ•°ç±»å‹) å½¢å‚å å¤–éƒ¨å½¢å‚åˆ«å:(å‚æ•°ç±»å‹) å½¢å‚å</span><br><span class="line">// æ³¨: ç¬¬ä¸€ä¸ª å¤–éƒ¨å½¢å‚åˆ«å å¯çœç•¥</span><br><span class="line">- (void)insertObject:(id)anObject atIndex:(NSUInteger) index</span><br><span class="line">+ (void)insertObject:(id)anObject atIndex:(NSUInteger) index</span><br><span class="line"></span><br><span class="line">// è°ƒç”¨</span><br><span class="line">// å¯¹è±¡è°ƒç”¨ [å¯¹è±¡ å‡½æ•°å: å‚æ•°1 å¤–éƒ¨å½¢å‚åˆ«å: å‚æ•°2]</span><br><span class="line">[obj insertObject: arg1 atIndex: arg2]</span><br><span class="line">// ç±»è°ƒç”¨ [ç±»å å‡½æ•°å: å‚æ•°1 å¤–éƒ¨å½¢å‚åˆ«å: å‚æ•°2]</span><br><span class="line">[Object insertObject: arg1 atIndex: arg2]</span><br><span class="line"></span><br><span class="line">// æ³¨:) ç±»è°ƒç”¨ å’Œ å¯¹è±¡è°ƒç”¨ çš„å½¢å¼æ˜¯ä¸€æ ·çš„</span><br></pre></td></tr></table></figure><h3 id="å±æ€§è¯­æ³•"><a href="#å±æ€§è¯­æ³•" class="headerlink" title="å±æ€§è¯­æ³•"></a>å±æ€§è¯­æ³•</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">@interface Person : NSObject</span><br><span class="line">&#123;</span><br><span class="line">/*</span><br><span class="line">ç›¸å½“äº @public è‡³ @private ä¹‹é—´çš„å±æ€§è¢«æš´éœ²å‡ºå»</span><br><span class="line">å¯é€šè¿‡å®ä¾‹ç›´æ¥è®¿é—®, ä¾‹å¦‚: obj-&gt;name</span><br><span class="line">*/</span><br><span class="line">@public</span><br><span class="line">  NSString *name;</span><br><span class="line">@private</span><br><span class="line">  int age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">  å‚è€ƒ: http://justcoding.iteye.com/blog/1444548</span><br><span class="line">  ä½¿ç”¨èŒƒå›´: @interface, @protocol, @category</span><br><span class="line">  å¯å£°æ˜ç‰¹æ€§:</span><br><span class="line">          è¯»å†™å±æ€§ï¼š   ï¼ˆreadwrite/readonlyï¼‰</span><br><span class="line">          setterè¯­æ„ï¼šï¼ˆassign/retain/copyï¼‰</span><br><span class="line">          åŸå­æ€§ï¼š    ï¼ˆatomicity/nonatomicï¼‰</span><br><span class="line">  ä½¿ç”¨æ•ˆæœ(å£°æ˜ä¸€ä¸ªsetterä¸getteræ–¹æ³•):</span><br><span class="line">    - (NSString*)name;  </span><br><span class="line">    - (void)setName: (NSString*)newName;</span><br><span class="line"> */</span><br><span class="line">@property(copy) NSString *name;</span><br><span class="line">@property(readonly) int age;</span><br><span class="line"></span><br><span class="line">-(id)initWithAge:(int)age;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@implementation Person</span><br><span class="line">/*</span><br><span class="line">  ä½¿ç”¨èŒƒå›´: @implementation</span><br><span class="line">  ä½¿ç”¨æ•ˆæœ(è‡ªåŠ¨å®ç°ä¸€ä¸ªsetterä¸getteræ–¹æ³•):</span><br><span class="line">    - (NSString*)name &#123;</span><br><span class="line">      return name;</span><br><span class="line">    &#125;  </span><br><span class="line">    - (void)setName: (NSString*)newName &#123;</span><br><span class="line">      name = newName;</span><br><span class="line">    &#125;</span><br><span class="line"> */</span><br><span class="line">@synthesize name;</span><br><span class="line">/* @dynamic ä»…ä»…æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨è¿™ä¸¤ä¸ªæ–¹æ³•åœ¨è¿è¡ŒæœŸä¼šæœ‰çš„ï¼Œæ— éœ€äº§ç”Ÿè­¦å‘Š */</span><br><span class="line">@dynamic age;</span><br><span class="line"></span><br><span class="line">-(id)initWithAge:(int)initAge</span><br><span class="line">&#123;</span><br><span class="line">    age = initAge; // æ³¨æ„ï¼šç›´æ¥èµ‹ç»™æˆå‘˜å˜é‡ï¼Œè€Œéå±æ€§</span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(int)age</span><br><span class="line">&#123;</span><br><span class="line">    return 29; // æ³¨æ„ï¼šå¹¶éè¿”å›çœŸæ­£çš„å¹´é¾„</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure><h4 id="ç±»æˆ–åè®®çš„å±æ€§å¯ä»¥è¢«åŠ¨æ€çš„è¯»å–"><a href="#ç±»æˆ–åè®®çš„å±æ€§å¯ä»¥è¢«åŠ¨æ€çš„è¯»å–" class="headerlink" title="ç±»æˆ–åè®®çš„å±æ€§å¯ä»¥è¢«åŠ¨æ€çš„è¯»å–"></a>ç±»æˆ–åè®®çš„å±æ€§å¯ä»¥è¢«åŠ¨æ€çš„è¯»å–</h4><blockquote><p>ç±»ä¼¼åå°„æœºåˆ¶ , ç•¥è¿‡..</p></blockquote><h3 id="å¿«é€Ÿæšä¸¾"><a href="#å¿«é€Ÿæšä¸¾" class="headerlink" title="å¿«é€Ÿæšä¸¾"></a>å¿«é€Ÿæšä¸¾</h3><blockquote><p>ä¸€ç§çœå†…å­˜çš„å¾ªç¯éå† , ç•¥è¿‡..</p></blockquote><h3 id="åè®®è¯­æ³•"><a href="#åè®®è¯­æ³•" class="headerlink" title="åè®®è¯­æ³•"></a>åè®®è¯­æ³•</h3><blockquote><p>ç±»ä¼¼ Java ä¸­çš„æ¥å£<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">/*å®šä¹‰åè®®*/</span><br><span class="line">@protocol Locking</span><br><span class="line">- (void)lock;</span><br><span class="line">- (void)unlock;</span><br><span class="line">@end</span><br><span class="line">/*</span><br><span class="line">ç±»çš„@interface å®£ç§°ä½¿ç”¨ åè®®</span><br><span class="line">*/</span><br><span class="line">@interface SomeClass : SomeSuperClass &lt;Locking&gt;</span><br><span class="line">@end</span><br><span class="line">/*</span><br><span class="line">ç±»çš„@implementation å®ç° åè®® ç»†èŠ‚</span><br><span class="line">*/</span><br><span class="line">@implementation SomeClass</span><br><span class="line">- (void)lock &#123;</span><br><span class="line">  // å®ç°lockæ–¹æ³•...</span><br><span class="line">&#125;</span><br><span class="line">- (void)unlock &#123;</span><br><span class="line">  // å®ç°unlockæ–¹æ³•...</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure></p></blockquote><h3 id="åŠ¨æ€ç±»å‹"><a href="#åŠ¨æ€ç±»å‹" class="headerlink" title="åŠ¨æ€ç±»å‹"></a>åŠ¨æ€ç±»å‹</h3><blockquote><p>id ç›¸å½“äº Java ä¸­çš„ Object, å³ ä»»æ„å¯¹è±¡</p></blockquote><h3 id="ç±»åˆ«-Category-è¯­æ³•"><a href="#ç±»åˆ«-Category-è¯­æ³•" class="headerlink" title="ç±»åˆ« (Category) è¯­æ³•"></a>ç±»åˆ« (Category) è¯­æ³•</h3><blockquote><p>åˆ†ç±»ä¸ä»…å¯ä»¥å¢åŠ ç±»çš„æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ä»£æ›¿åŸæœ‰çš„<strong>å‡½æ•°</strong>, <strong>å¹¶ä¸èƒ½æ–°å¢å˜é‡</strong><br>åŠ¨æ€å¢åŠ å’Œæ›¿æ¢å‡½æ•°, å¼ºå¾—ä¸€åŒ¹</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">/*</span><br><span class="line">  è¯´æ˜: å®šä¹‰æ‰©å±• Integerç±» æ¥å£, æ–°å¢/è¦†ç›– å‡½æ•° showstars ä¸ showint</span><br><span class="line">  è¯­æ³•:</span><br><span class="line">    #import &quot;å¾…æ‰©å±•ç±»æ¥å£æ–‡ä»¶.h&quot;</span><br><span class="line">    @interface å¾…æ‰©å±•ç±»(æ‰©å±•ç±»)</span><br><span class="line">      // å‡½æ•°å®šä¹‰</span><br><span class="line">    @end</span><br><span class="line">*/</span><br><span class="line">#import &quot;Integer.h&quot;</span><br><span class="line">@interface Integer(Display)</span><br><span class="line">- (id) showstars;</span><br><span class="line">- (id) showint;</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">  è¯´æ˜: å®ç°æ‰©å±• Integerç±» æ¥å£, æ–°å¢/è¦†ç›– å‡½æ•° showstars ä¸ showint</span><br><span class="line">  è¯­æ³•:</span><br><span class="line">    #import &quot;æ‰©å±•ç±»æ¥å£æ–‡ä»¶.h&quot;</span><br><span class="line">    @implementation å¾…æ‰©å±•ç±»(æ‰©å±•ç±»)</span><br><span class="line">      // å‡½æ•°å®ç°</span><br><span class="line">    @end</span><br><span class="line">*/</span><br><span class="line">#import &quot;Display.h&quot;</span><br><span class="line">@implementation Integer(Display)</span><br><span class="line">- (id) showstars &#123;</span><br><span class="line">  ..</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (id) showint &#123;</span><br><span class="line">    ..</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure><p><strong>NOTE:</strong> ä½¿ç”¨æ—¶éœ€#import å¾…æ‰©å±•ç±»ä¸æ‰©å±•ç±»çš„æ¥å£æ–‡ä»¶<strong>(.h)</strong></p><h2 id="åˆ’é‡ç‚¹"><a href="#åˆ’é‡ç‚¹" class="headerlink" title="åˆ’é‡ç‚¹"></a>åˆ’é‡ç‚¹</h2><ul><li><code>NSString*</code>/<code>NSObject*</code>ç­‰ è¡¨ç¤ºå¯¹è±¡</li><li><code>self</code> æŸç§ç¨‹åº¦ç›¸å½“äº <code>this</code></li><li>nil åŸºæœ¬ä¸Šç­‰åŒäº NULL</li><li>è°ƒç”¨å±æ€§ self-&gt;name</li><li>ä¸€èˆ¬(.h å­˜æ”¾<strong>@interfaceæ–‡ä»¶</strong>, .m å­˜æ”¾<strong>@implementationæ–‡ä»¶</strong>). è¿›è¡Œ#importæ—¶, åªéœ€#import .hæ–‡ä»¶</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¹‹å‰å­¦ &lt;code&gt;swift3&lt;/code&gt; é¡ºå¸¦æ•´ç†çš„å°ç¬”è®°&lt;br&gt;
    
    </summary>
    
      <category term="Mac" scheme="https://hocg.in/categories/Mac/"/>
    
    
      <category term="è¯­æ³•" scheme="https://hocg.in/tags/%E8%AF%AD%E6%B3%95/"/>
    
      <category term="Objective-C" scheme="https://hocg.in/tags/Objective-C/"/>
    
  </entry>
  
  <entry>
    <title>PHP Laravel å¿«é€Ÿå…¥é—¨</title>
    <link href="https://hocg.in/2017/03/01/PHP-laravel-%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/"/>
    <id>https://hocg.in/2017/03/01/PHP-laravel-å¿«é€Ÿå…¥é—¨/</id>
    <published>2017-03-01T06:59:38.000Z</published>
    <updated>2018-10-11T13:39:15.417Z</updated>
    
    <content type="html"><![CDATA[<p>PHP æ¡†æ¶ Laravel æ­å»ºå¼€å§‹, æ…¢æ…¢æ›´æ–°~ ğŸ˜œğŸ˜œğŸ˜œğŸ˜œ<br><a id="more"></a></p><h1 id="Quit-Start"><a href="#Quit-Start" class="headerlink" title="Quit Start"></a>Quit Start</h1><p>ä¸€. å®‰è£…<code>composer</code>, ç”¨äºç®¡ç†ä¾èµ–</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> å…¨å±€å®‰è£… macOS</span><br><span class="line">brew update</span><br><span class="line">brew tap josegonzalez/homebrew-php</span><br><span class="line">brew tap homebrew/versions</span><br><span class="line">brew install php55-intl</span><br><span class="line">brew install josegonzalez/php/composer</span><br></pre></td></tr></table></figure><p>äºŒ. ä¸‹è½½<code>laravel</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer global require "laravel/installer"</span><br></pre></td></tr></table></figure><p>ä¸‰. åˆ›å»ºé¡¹ç›®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer create-project laravel/laravel --prefer-dist</span><br></pre></td></tr></table></figure><p>å››. å…³äºå¦‚ä½•ä½¿ç”¨<code>PhpStorm</code>  </p><blockquote><p>é»˜è®¤å·²ç»é…ç½®å¥½PHPå¼€å‘ç¯å¢ƒäº†!</p></blockquote><p>4.0.1 ç›¸å…³æ’ä»¶</p><ul><li>Laravel Plugin</li><li><strong>[Optional]</strong> PHP Annotations Plugin</li><li><strong>[Optional]</strong> Symfony2 Plugin</li></ul><p>4.1 é…ç½®<code>Composer</code></p><ul><li>å³é”®é¡¹ç›®æ ¹èŠ‚ç‚¹ -&gt; Composer -&gt; init composer, é…ç½®<code>PHPè§£é‡Šå™¨</code>å’Œ<code>Composerè·¯å¾„</code></li></ul><p><img src="http://cdn.hocgin.top/874D3259-AB37-4EA4-BAAC-CA17674334C8.png" alt="image"></p><ul><li>å³é”®é¡¹ç›®æ ¹èŠ‚ç‚¹ -&gt; Composer -&gt; add dependency, æ·»åŠ <code>barryvdh/laravel-ide-helper</code></li></ul><p><img src="http://cdn.hocgin.top/2F36AE2A-A1A7-40D0-8668-26EB0038BBCE.png" alt="image"><br>æˆ–è€…</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer require barryvdh/laravel-ide-helper</span><br></pre></td></tr></table></figure><p>4.2 ç¼–è¾‘<code>config/app.php</code>æ–‡ä»¶, åœ¨<code>providers</code>èŠ‚ç‚¹ä¸‹é¢æ·»åŠ <br><img src="http://cdn.hocgin.top/4761A0E6-27E9-4544-B379-DE897A42E24E.png" alt="image"></p><p>4.3 æ‰©å±•å‘½ä»¤å·¥å…·</p><ul><li>Preferences -&gt; Tools -&gt; Command Line Tool Support</li></ul><p><img src="http://cdn.hocgin.top/A84F6129-8F9E-4BC3-BAAA-D32FEFB7F1D5.png" alt="image"></p><p><img src="http://cdn.hocgin.top/3C942985-0082-4675-BA3F-1FCC3A83CD2B.png" alt="image"></p><p><strong>ä½¿ç”¨</strong>: Tools -&gt; Run Command(âŒ˜ + â‡§ + X)</p><p><img src="http://cdn.hocgin.top/363F317B-FED9-40AE-A30A-84216A3A2721.png" alt="image"></p><p>4.4 é…ç½® php-xdebug<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> æ£€æŸ¥æ˜¯å¦å®‰è£…php-xdebug</span><br><span class="line">php -m</span><br></pre></td></tr></table></figure></p><p>å®‰è£…åï¼Œä¿®æ”¹ä¸‹php.iniæŠŠxdebug.soå‰çš„æ³¨é‡Šâ€™;â€™å»æ‰</p><p><img src="http://cdn.hocgin.top/5157CD6B-FD07-4F82-9DE6-9E8BEA21D504.png" alt="image"></p><p>äº”. é…ç½®å¯åŠ¨<br><img src="http://cdn.hocgin.top/A1D8FA94-D5A1-46A6-AE09-B638BC4C5FCE.png" alt="image"></p><p>å…­. é…ç½®Debug</p><p><img src="http://cdn.hocgin.top/03337E90-7562-498F-A595-98FEA679EDDE.png" alt="image"><br>å¹¶ä¸”åœ¨æ ¹ç›®å½•åŠ å…¥<code>debug.ini</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">xdebug.remote_enable = On</span><br><span class="line">xdebug.remote_autostart = On</span><br><span class="line">upload_max_filesize = 1000M</span><br><span class="line">post_max_size = 1005M</span><br><span class="line">max_execution_time = 120</span><br><span class="line"></span><br><span class="line">;xdebug.profiler_enable = On</span><br><span class="line">;xdebug.profiler_enable_trigger = Off</span><br><span class="line">;xdebug.profiler_output_dir = ./xdebug</span><br><span class="line">;xdebug.profiler_aggregate = On</span><br><span class="line">;xdebug.profiler_append = On</span><br><span class="line">;xdebug.profiler_output_name = &quot;cachegrind.out.%R.%u.%p&quot;</span><br></pre></td></tr></table></figure><h1 id="èµ„æº"><a href="#èµ„æº" class="headerlink" title="èµ„æº"></a>èµ„æº</h1><p><a href="https://github.com/koomai/phpstorm-laravel-live-templates#requests--input" target="_blank" rel="external">Laravel Live Templates for PhpStorm</a><br><a href="https://laracasts.com/series/how-to-be-awesome-in-phpstorm/episodes/15" target="_blank" rel="external">Laravel æ’ä»¶è§†é¢‘</a></p><h2 id="æ ‡ç­¾"><a href="#æ ‡ç­¾" class="headerlink" title="æ ‡ç­¾"></a>æ ‡ç­¾</h2><ul><li><p>ç»§æ‰¿<br><code>@extends</code></p></li><li><p>å­˜åœ¨æ›¿æ¢<br><code>@yield(&#39;content&#39;)</code><br><code>@section</code><br><code>@endsection</code></p></li><li><p>å¢åŠ <br><code>@stack(&quot;appendCSS&quot;)</code><br><code>@push(&#39;appendCSS&#39;)</code><br><code>@endpush</code></p></li><li><p>æ³¨å…¥<br><code>@inject(&quot;xx&quot;, &quot;xx[Name]&quot;)</code></p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;PHP æ¡†æ¶ Laravel æ­å»ºå¼€å§‹, æ…¢æ…¢æ›´æ–°~ ğŸ˜œğŸ˜œğŸ˜œğŸ˜œ&lt;br&gt;
    
    </summary>
    
      <category term="Server" scheme="https://hocg.in/categories/Server/"/>
    
    
      <category term="Mac" scheme="https://hocg.in/tags/Mac/"/>
    
      <category term="PHP" scheme="https://hocg.in/tags/PHP/"/>
    
  </entry>
  
  <entry>
    <title>Nginx éƒ¨ç½²</title>
    <link href="https://hocg.in/2017/02/24/Nginx-%E9%83%A8%E7%BD%B2/"/>
    <id>https://hocg.in/2017/02/24/Nginx-éƒ¨ç½²/</id>
    <published>2017-02-24T01:12:22.000Z</published>
    <updated>2018-10-11T13:39:15.402Z</updated>
    
    <content type="html"><![CDATA[<p>ğŸ½  <a href="http://baike.baidu.com/link?url=6LDqhy3I7UWDkwOT6TS_s-d4Jsv9AVcA_yedSmd618s1BjJl-0NQ-roxjDF7jHazXWlTwbIHTv03_gWIWeRPUq" target="_blank" rel="external">Nginx</a> æ˜¯ä¸€ä¸ªå¾ˆå¼ºå¤§çš„é«˜æ€§èƒ½Webå’Œåå‘ä»£ç†æœåŠ¡å™¨<br><a id="more"></a></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><h3 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h3><p>OS: Ubuntu-16</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><h3 id="ä¾èµ–"><a href="#ä¾èµ–" class="headerlink" title="ä¾èµ–"></a>ä¾èµ–</h3><ul><li><a href="http://www.pcre.org/" target="_blank" rel="external">PCRE</a></li><li><a href="http://zlib.net" target="_blank" rel="external">zlib</a></li><li><a href="nginx.org/en/download.html">nginx</a></li></ul><h3 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h3><p>/opt<br>|â€“ nginx-1.10.1<br>|â€“ pcre-8.38<br>`â€“ zlib-1.2.8</p><h3 id="shell"><a href="#shell" class="headerlink" title="shell"></a>shell</h3><blockquote><p>ä»¥ä¸‹æ“ä½œå‡åœ¨<code>/opt</code>ç›®å½•</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> tar -zxvf nginx-1.10.1.tar.gz</span><br><span class="line"><span class="meta">#</span> cd nginx-1.10.1</span><br><span class="line"><span class="meta">#</span> ./configure</span><br></pre></td></tr></table></figure><p>ERROR:<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">checking for OS</span><br><span class="line"> + Linux 2.6.32-042stab113.21 x86_64</span><br><span class="line">checking for C compiler ... not found</span><br><span class="line"></span><br><span class="line">./configure: error: C compiler cc is not found</span><br></pre></td></tr></table></figure></p><p>ç¼ºå¤±ç¼–è¯‘éƒ¨ä»¶, è§£å†³åŠæ³•å¦‚ä¸‹:<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> apt-get install build-essential libtool</span><br><span class="line"><span class="meta">#</span> ./configure</span><br></pre></td></tr></table></figure></p><p>Error:<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">./configure: error: the HTTP rewrite module requires the PCRE library.</span><br><span class="line">You can either disable the module by using --without-http_rewrite_module</span><br><span class="line">option, or install the PCRE library into the system, or build the PCRE library</span><br><span class="line">statically from the source with nginx by using --with-pcre=&lt;path&gt; option.</span><br></pre></td></tr></table></figure></p><p>ç¼ºå¤±<code>PCRE</code>, ç§»æ­¥å®˜ç½‘ä¸‹è½½(<code>é¡¶éƒ¨æœ‰é“¾æ¥</code>), æˆ‘æ˜¯åœ¨<code>/opt</code>ç›®å½•ä¸­è§£å‹<br><strong>æ³¨</strong>: pcre æ²¡æœ‰ <code>2</code></p><blockquote><p>ä»¥ä¸‹æ“ä½œå‡åœ¨<code>/opt</code>ç›®å½•  </p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> tar -jxvf pcre-8.38.tar.bz2</span><br><span class="line"><span class="meta">#</span> cd pcre-8.38</span><br><span class="line"><span class="meta">#</span> ./configure &amp;&amp; make &amp;&amp; make install</span><br></pre></td></tr></table></figure><p>å›åˆ°<code>/opt/nginx-1.10.1</code>ç›®å½•ç»§ç»­è¿›è¡Œ<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> ./configure --with-pcre=/opt/pcre-8.38</span><br></pre></td></tr></table></figure></p><p>Error:<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">./configure: error: the HTTP gzip module requires the zlib library.</span><br><span class="line">You can either disable the module by using --without-http_gzip_module</span><br><span class="line">option, or install the zlib library into the system, or build the zlib library</span><br><span class="line">statically from the source with nginx by using --with-zlib=&lt;path&gt; option.</span><br></pre></td></tr></table></figure></p><p>åŸå› æ˜¯ç¼ºå¤±<code>zlib</code>,ç§»æ­¥å®˜ç½‘ä¸‹è½½(<code>é¡¶éƒ¨æœ‰é“¾æ¥</code>), åŒæ ·æ˜¯åœ¨<code>/opt</code>ç›®å½•ä¸­è§£å‹</p><blockquote><p>ä»¥ä¸‹æ“ä½œå‡åœ¨<code>/opt</code>ç›®å½•  </p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> tar -zxvf zlib-1.2.8.tar.gz</span><br><span class="line"><span class="meta">#</span> cd zlib-1.2.8</span><br><span class="line"><span class="meta">#</span> ./configure &amp;&amp; make &amp;&amp; make install</span><br></pre></td></tr></table></figure><p>å›åˆ°<code>/opt/nginx-1.10.1</code>ç›®å½•ç»§ç»­è¿›è¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> ./configure --with-pcre=/opt/pcre-8.38 --with-zlib=/opt/zlib-1.2.8</span><br><span class="line"><span class="meta">#</span> make</span><br><span class="line"><span class="meta">#</span> make install</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œå®‰è£…ç»“æŸã€‚å¯æŸ¥çœ‹<code>ls /usr/local/nginx/</code>ç›®å½•<br>æ˜¾ç¤ºå¦‚ä¸‹æ–‡ä»¶:<br>/usr/local/nginx/<br><img src="http://cdn.hocgin.top/E3B25E4D-8D26-4E4D-BBA2-F77F7B089FA5.png" alt="image"></p><h2 id="åŸºç¡€å‘½ä»¤"><a href="#åŸºç¡€å‘½ä»¤" class="headerlink" title="åŸºç¡€å‘½ä»¤"></a>åŸºç¡€å‘½ä»¤</h2><blockquote><p>ä»¥ä¸‹å‘½ä»¤å‡åœ¨<code>/usr/local/nginx</code>ç›®å½•ä¸‹è¿è¡Œ  </p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> å¯åŠ¨</span><br><span class="line">./sbin/nginx</span><br><span class="line"><span class="meta">#</span> æ£€æŸ¥é…ç½®</span><br><span class="line">./sbin/nginx -t</span><br><span class="line"><span class="meta">#</span> é‡æ–°åŠ è½½é…ç½®</span><br><span class="line">./sbin/nginx -s reload</span><br><span class="line"><span class="meta">#</span> æŸ¥çœ‹é…ç½®æ–‡ä»¶</span><br><span class="line">cat ./conf/nginx.conf</span><br></pre></td></tr></table></figure><h2 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a>æ‰©å±•</h2><h3 id="nginx-confé…ç½®"><a href="#nginx-confé…ç½®" class="headerlink" title="nginx.confé…ç½®"></a><code>nginx.conf</code>é…ç½®</h3><p><a href="http://blog.csdn.net/tjcyjd/article/details/50695922" target="_blank" rel="external">å­—æ®µè¯¦è§£</a></p><h3 id="æ¨¡å—"><a href="#æ¨¡å—" class="headerlink" title="æ¨¡å—"></a>æ¨¡å—</h3><p><strong>å¾…ç»­ing</strong></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ğŸ½  &lt;a href=&quot;http://baike.baidu.com/link?url=6LDqhy3I7UWDkwOT6TS_s-d4Jsv9AVcA_yedSmd618s1BjJl-0NQ-roxjDF7jHazXWlTwbIHTv03_gWIWeRPUq&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Nginx&lt;/a&gt; æ˜¯ä¸€ä¸ªå¾ˆå¼ºå¤§çš„é«˜æ€§èƒ½Webå’Œåå‘ä»£ç†æœåŠ¡å™¨&lt;br&gt;
    
    </summary>
    
      <category term="Server" scheme="https://hocg.in/categories/Server/"/>
    
    
      <category term="Ubuntu" scheme="https://hocg.in/tags/Ubuntu/"/>
    
  </entry>
  
  <entry>
    <title>å…³äºChrome æ’ä»¶å¼€å‘çš„ä¸€äº›çŸ¥è¯†ç‚¹</title>
    <link href="https://hocg.in/2017/02/04/%E5%85%B3%E4%BA%8EChrome%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E7%9A%84%E4%B8%80%E4%BA%9B%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
    <id>https://hocg.in/2017/02/04/å…³äºChromeæ’ä»¶å¼€å‘çš„ä¸€äº›çŸ¥è¯†ç‚¹/</id>
    <published>2017-02-04T05:20:51.000Z</published>
    <updated>2017-11-10T12:48:33.137Z</updated>
    
    <content type="html"><![CDATA[<p>èº«ä¸ºChromeé‡åº¦æ‚£è€…ï¼Œç”Ÿæ´»å’Œå·¥ä½œå¤„å¤„ä¸ç¦»ï¼Œè¿™ç¯‡å¹¶ä¸æ˜¯å…¥é—¨æ•™ç¨‹ï¼Œè€Œæ˜¯å¼€å‘ä¸­çš„ä¸€äº›å°Tipçš„è®°å½•.<br><a id="more"></a></p><h1 id="æˆ‘å¼€å‘çš„Chrome-æ’ä»¶"><a href="#æˆ‘å¼€å‘çš„Chrome-æ’ä»¶" class="headerlink" title="æˆ‘å¼€å‘çš„Chrome æ’ä»¶"></a>æˆ‘å¼€å‘çš„Chrome æ’ä»¶</h1><ul><li><a href="https://github.com/hocgin/Weather-For-Chrome-Plugin" target="_blank" rel="external">å¤©æ°”é¢„æŠ¥</a></li></ul><h1 id="æ•°æ®å­˜å‚¨"><a href="#æ•°æ®å­˜å‚¨" class="headerlink" title="æ•°æ®å­˜å‚¨"></a>æ•°æ®å­˜å‚¨</h1><ul><li>HTML5 <code>localStorage</code> <strong>å­˜å‚¨åœ¨è§£æé¡µé¢å½“å‰èŒƒå›´å’Œç½‘ç«™å…±äº«localStorage</strong></li><li>Chrome API <code>chrome.storage</code> <strong>å­˜å‚¨åœ¨ç³»ç»Ÿç£ç›˜ï¼Œé€‚åˆå°‘é‡æ•°æ®</strong></li><li>Web SQL Database <strong>å­˜å‚¨åœ¨ç³»ç»Ÿç£ç›˜ï¼Œé€‚åˆå¤§é‡æ•°æ®</strong></li></ul><h1 id="è„šæœ¬è¿è¡ŒèŒƒå›´"><a href="#è„šæœ¬è¿è¡ŒèŒƒå›´" class="headerlink" title="è„šæœ¬è¿è¡ŒèŒƒå›´"></a>è„šæœ¬è¿è¡ŒèŒƒå›´</h1><ul><li>background <strong>æµè§ˆå™¨æ‰“å¼€åè¿è¡Œ, ä¼šä¸€ç›´å­˜åœ¨äºåå°, å› æ­¤å¼€å‘æ—¶æ›´æ”¹åå¿…é¡»<code>âŒ˜+R</code>é‡æ–°åŠ è½½</strong></li><li>content_scripts <strong>åœ¨ç½‘é¡µåŠ è½½åè¿è¡Œ</strong></li><li>htmlå†…å¯¼å…¥çš„è„šæœ¬ <strong>è¿è¡Œäºè¯¥htmlé¡µé¢, ä¾‹å¦‚: optioné¡µé¢å’Œpopupé¡µé¢</strong></li></ul><p><strong>Note:</strong></p><blockquote><p>popup.js äºbackground.js æ˜¯å¯ä»¥è¿›è¡Œå…±é€šçš„.<br>ä½¿ç”¨<code>var BG = chrome.extension.getBackgroundPage();</code> BGä¾¿æ˜¯<code>background.js</code>çš„<code>window</code>å¯¹è±¡</p></blockquote><h1 id="Action-å…¥å£"><a href="#Action-å…¥å£" class="headerlink" title="Action å…¥å£"></a>Action å…¥å£</h1><ul><li>åœ°å€æ å³ä¾§å›¾æ ‡å¤– <code>browser_action</code> <strong>å¯æ˜¾ç¤ºbadge</strong></li><li>å³é”®èœå• <code>chrome.contextMenus</code> <strong>å¯åœ¨<code>background</code>ä¸­åˆ›å»º</strong></li><li>åœ°å€æ å³ä¾§å›¾æ ‡<del>å†…</del>å¤– <code>page_action</code> <strong>æ–°ç‰ˆçš„å·²æ›´æ”¹æ˜¾ç¤ºåœ¨å¤–å›´ <a href="https://developer.chrome.com/extensions/pageAction" target="_blank" rel="external">PageAction API</a></strong></li><li>å¤šåŠŸèƒ½æ¡† <code>omnibox</code> <strong>å¯¹åœ°å€æ¡†è¿›è¡Œç›‘å¬</strong></li><li>overrides <strong>å¦‚, <code>ç®¡ç†ä¹¦ç­¾</code>/<code>å†å²è®°å½•</code>/<code>æ–°æ ‡ç­¾é¡µ</code>ç­‰ (ä¸€ä¸ªæ‰©å±•åªèƒ½æ›¿æ¢ä¸€ä¸ªé¡µé¢)</strong></li><li>æ¡Œé¢æé†’ <code>webkitNotifications.createNotification</code></li></ul><h1 id="æƒé™"><a href="#æƒé™" class="headerlink" title="æƒé™"></a>æƒé™</h1><blockquote><p>ç›¸å½“ä¸€éƒ¨åˆ†Chrome API ä½¿ç”¨éœ€è¦åœ¨<code>Manifest</code>ç”³æ˜æƒé™</p></blockquote><h1 id="é¡µé¢é—´é€šä¿¡"><a href="#é¡µé¢é—´é€šä¿¡" class="headerlink" title="é¡µé¢é—´é€šä¿¡"></a>é¡µé¢é—´é€šä¿¡</h1><ul><li>popup ä¸ background é€šä¿¡</li></ul><ol><li>ä½¿ç”¨ä¸Šé¢æåˆ°çš„<code>å…±é€š</code>çš„ç‰¹æ€§ã€‚</li><li>ä½¿ç”¨ <code>chrome.extension.onMessage.addListener</code>è¿›è¡Œé€šä¿¡ç›‘å¬ ä¸ ä½¿ç”¨<code>chrome.extension.sendMessage</code>è¿›è¡Œè§¦å‘</li></ol><ul><li>option ä¸ (popup æˆ–è€… background) é€šä¿¡</li></ul><ol><li>ä½¿ç”¨ <code>chrome.extension.onMessage.addListener</code>è¿›è¡Œé€šä¿¡ç›‘å¬ ä¸ ä½¿ç”¨<code>chrome.extension.sendMessage</code>è¿›è¡Œè§¦å‘</li></ol><ul><li>(popup æˆ–è€… background) ä¸ option é€šä¿¡</li></ul><ol><li>ä½¿ç”¨ <code>chrome.extension.onMessage.addListener</code>è¿›è¡Œé€šä¿¡ç›‘å¬, è§¦å‘æ–¹å¼æ¯”è¾ƒéº»çƒ¦, æŸ¥çœ‹ä»¥ä¸‹ä¾‹å­:<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">chrome.tabs.query(&#123;<span class="attr">active</span>: <span class="literal">true</span>, <span class="attr">currentWindow</span>: <span class="literal">true</span>&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">tabs</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (!!tabs</span><br><span class="line">                &amp;&amp; tabs.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                chrome.tabs.sendMessage(tabs[<span class="number">0</span>].id, &#123;</span><br><span class="line">                  <span class="comment">//message..</span></span><br><span class="line">                  &#125;, callback);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure></li></ol><h1 id="i18"><a href="#i18" class="headerlink" title="i18"></a>i18</h1><ul><li><code>CSS</code> __MSG_@@key</li><li><code>JS</code> chrome.i18n.getMessage(â€˜keyâ€™);</li></ul><h1 id="å…³äºæ‰“åŒ…-amp-å‘å¸ƒ"><a href="#å…³äºæ‰“åŒ…-amp-å‘å¸ƒ" class="headerlink" title="å…³äºæ‰“åŒ… &amp; å‘å¸ƒ"></a>å…³äºæ‰“åŒ… &amp; å‘å¸ƒ</h1><ol><li><code>æ‰©å±•ç¨‹åº</code>ä¸­è¿›è¡Œæ‰“åŒ…ï¼Œç”Ÿæˆ<code>.crx</code>(æ‰©å±•ç¨‹åº) &amp; <code>.pem</code>(ç§˜é’¥<strong>é‡è¦</strong>)</li><li>å‰å¾€<a href="https://chrome.google.com/webstore/developer/dashboard/" target="_blank" rel="external">Chrome å¼€å‘è€…ä¸­å¿ƒ</a> è®¤è¯<code>éœ€æ”¯ä»˜5ç¾å…ƒç”¨äºè®¤è¯</code></li><li>æŠŠ<code>.pem</code>æ›´åä¸º<code>key.pem</code>å¹¶æ”¾å…¥<code>æºç æ–‡ä»¶å¤¹</code>ä¸­ï¼Œæ‰“åŒ…ä¸º<code>.zip</code>æ–‡ä»¶</li><li>ä¸Šä¼  å¹¶ç¼–è¾‘ (<strong>å¿…å¡« (æ‰©å±•æè¿°ã€ICON(128x128)ã€æ‰©å±•æˆªå›¾(1280x800 or 640x400)ã€ç±»åˆ«ã€è¯­è¨€)</strong>)</li></ol><hr><blockquote><p>å¦‚æœ‰é—æ¼æˆ–é”™è¯¯æ¬¢è¿è¡¥å……..</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;èº«ä¸ºChromeé‡åº¦æ‚£è€…ï¼Œç”Ÿæ´»å’Œå·¥ä½œå¤„å¤„ä¸ç¦»ï¼Œè¿™ç¯‡å¹¶ä¸æ˜¯å…¥é—¨æ•™ç¨‹ï¼Œè€Œæ˜¯å¼€å‘ä¸­çš„ä¸€äº›å°Tipçš„è®°å½•.&lt;br&gt;
    
    </summary>
    
      <category term="IDE" scheme="https://hocg.in/categories/IDE/"/>
    
    
      <category term="HTML5" scheme="https://hocg.in/tags/HTML5/"/>
    
      <category term="Chrome" scheme="https://hocg.in/tags/Chrome/"/>
    
  </entry>
  
  <entry>
    <title>å…³äºlog4jæŠ¥é”™</title>
    <link href="https://hocg.in/2017/01/16/%E5%85%B3%E4%BA%8Elog4j%E6%8A%A5%E9%94%99/"/>
    <id>https://hocg.in/2017/01/16/å…³äºlog4jæŠ¥é”™/</id>
    <published>2017-01-16T00:09:27.000Z</published>
    <updated>2017-02-04T05:57:15.000Z</updated>
    
    <content type="html"><![CDATA[<p>  Javaå¼€å‘ä¸­ç»å¸¸é‡åˆ°æ—¥å¿—<code>å†²çª</code>æˆ–è€…<code>å¼‚å¸¸</code>, å½»åº•çš„æ¥æ­¤è¿½æ ¹ç©¶åº•.<br><a id="more"></a></p><h2 id="æ—¥å¿—å†å²"><a href="#æ—¥å¿—å†å²" class="headerlink" title="æ—¥å¿—å†å²"></a>æ—¥å¿—å†å²</h2><ul><li>log4j</li><li>JCL + log4j</li><li>SLF4J <code>slf4j-XXX-version.jar</code> [XXXæŒ‡ä»£log4j12, jdk14, jcl, nop ç­‰]</li><li>slf4j-api<blockquote><p>v1 <code>log4j</code> æ—©æœŸç›´æ¥å®ç°æ—¥å¿—æ‰“å°<br>v2 <code>JCL + log4j</code> åŠ¨æ€ç»‘å®š, é¢å‘<code>JCL æ¥å£</code>å®ç°çš„<code>log4j</code><br>v3 <code>slf4j-api</code> æä¾› <code>SLF4Jæ¥å£</code> <strong>é¢å‘å¯¹è±¡ç¼–ç¨‹</strong><br><code>slf4j-XXX-version.jar</code> å¯¹æ¥å£å’ŒæŒ‡å®š<code>XXX</code>ç§ç±»æ—¥å¿—çš„å…·ä½“å®ç°</p></blockquote></li></ul><h2 id="slf4j-ä¸¾ä¾‹jar"><a href="#slf4j-ä¸¾ä¾‹jar" class="headerlink" title="slf4j ä¸¾ä¾‹jar"></a>slf4j ä¸¾ä¾‹jar</h2><ul><li>log4j-over-slf4j.jar æŠŠ<code>log4j</code>è½¬ä¸º<code>slf4j</code></li><li>slf4j-log4j12.jar ä»¥slf4jæ ‡å‡†å®ç°çš„log4j12</li><li><code>XXX-over-slf4j.jar</code> æŠŠæ—¥å¿—é‡å®šå‘åˆ°<code>slf4j</code> eg.<code>jcl-over-slf4j.jar</code></li></ul><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å³.<br>Component<br>   |<br>   | log to Apache Commons Logging<br>   V<br> jcl-over-slf4j.jar â€” (redirect) â€”&gt; SLF4j â€”&gt; slf4j-log4j12-version.jar â€”&gt; log4j.jar â€”&gt; è¾“å‡ºæ—¥å¿—<br><strong>è§£é‡Š:</strong><br>JCLå®ç°çš„é‡å®šå‘ä¸ºSLF4Jæ—¥å¿—å½¢å¼, ç„¶åSLF4Jè½¬ä¸ºLog4j12è¾“å‡º!</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;  Javaå¼€å‘ä¸­ç»å¸¸é‡åˆ°æ—¥å¿—&lt;code&gt;å†²çª&lt;/code&gt;æˆ–è€…&lt;code&gt;å¼‚å¸¸&lt;/code&gt;, å½»åº•çš„æ¥æ­¤è¿½æ ¹ç©¶åº•.&lt;br&gt;
    
    </summary>
    
      <category term="Coder" scheme="https://hocg.in/categories/Coder/"/>
    
    
      <category term="JAVA" scheme="https://hocg.in/tags/JAVA/"/>
    
  </entry>
  
  <entry>
    <title>Redis ç›¸å…³</title>
    <link href="https://hocg.in/2016/10/20/Redis-%E7%9B%B8%E5%85%B3/"/>
    <id>https://hocg.in/2016/10/20/Redis-ç›¸å…³/</id>
    <published>2016-10-20T01:11:48.000Z</published>
    <updated>2017-08-24T09:48:34.000Z</updated>
    
    <content type="html"><![CDATA[<p>  Redis çš„éƒ¨ç½²å’Œéƒ¨ä½è®¾è®¡çš„å®è·µ, è¿˜æœ‰å¸¸è§é—®é¢˜çš„æ¢³ç†! ğŸ’ª<br><a id="more"></a></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p><a href="http://redis.io/download" target="_blank" rel="external">å®˜ç½‘</a></p><h2 id="è¯¦æƒ…"><a href="#è¯¦æƒ…" class="headerlink" title="è¯¦æƒ…"></a>è¯¦æƒ…</h2><h3 id="é»˜è®¤é¡¹"><a href="#é»˜è®¤é¡¹" class="headerlink" title="é»˜è®¤é¡¹"></a>é»˜è®¤é¡¹</h3><ul><li>ç«¯å£ <code>6379</code></li></ul><h3 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h3><p>redis-3.2.4/<br>|â€“ redis.conf <code>redisé…ç½®æ–‡ä»¶</code><br><code>-- src</code>ç¼–è¯‘åç›®å½•<code>|-- redis-server</code>å¯åŠ¨bitæ–‡ä»¶<code>`-- redis-cli</code>ç»ˆç«¯bitæ–‡ä»¶`</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><blockquote><p>ä»¥ä¸‹æ“ä½œå‡åœ¨<code>/opt</code><br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> ä¸‹è½½</span><br><span class="line">wget http://download.redis.io/releases/redis-3.2.4.tar.gz</span><br><span class="line"><span class="meta">#</span> è§£å‹</span><br><span class="line">tar -zxvf redis-3.2.4.tar.gz</span><br><span class="line">cd redis-3.2.4</span><br><span class="line"><span class="meta">#</span> ç¼–è¯‘ï¼Œ ç”Ÿæˆ`src`ç›®å½•</span><br><span class="line">make</span><br></pre></td></tr></table></figure></p></blockquote><h2 id="æŒ‡ä»¤"><a href="#æŒ‡ä»¤" class="headerlink" title="æŒ‡ä»¤"></a>æŒ‡ä»¤</h2><blockquote><p>ä»¥ä¸‹æ“ä½œå‡åœ¨<code>/opt</code><br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> é»˜è®¤é…ç½®è¿è¡Œ</span><br><span class="line">./redis-3.2.4/src/redis-server</span><br><span class="line"><span class="meta">#</span> æŒ‡å®šé…ç½®æ–‡ä»¶è¿è¡Œ</span><br><span class="line">./redis-3.2.4/src/redis-server [config file]</span><br></pre></td></tr></table></figure></p></blockquote><h2 id="ç–‘é—®ï¼Ÿ"><a href="#ç–‘é—®ï¼Ÿ" class="headerlink" title="ç–‘é—®ï¼Ÿ"></a>ç–‘é—®ï¼Ÿ</h2><ul><li><p>å¦‚ä½•ä½¿<code>redis</code>åå°è¿è¡Œ?</p><blockquote><p>æ›´æ”¹é…ç½®æ–‡ä»¶, æ‰¾åˆ°<code>daemonize</code>å­—æ®µ,æ›´æ”¹<code>no</code>ä¸º<code>yes</code>, é‡å¯<code>redis</code> <strong>åˆ‡è®°ï¼è¦æŒ‡å®šé…ç½®æ–‡ä»¶</strong></p></blockquote></li><li><p>å¦‚ä½•æ›´æ”¹<code>redis</code>é»˜è®¤<code>6379</code>ç«¯å£?</p><blockquote><p>æ›´æ”¹é…ç½®æ–‡ä»¶, æ‰¾åˆ°<code>port</code>å­—æ®µ,æ›´æ”¹ä¸ºæŒ‡å®šç«¯å£, é‡å¯<code>redis</code> <strong>åˆ‡è®°ï¼è¦æŒ‡å®šé…ç½®æ–‡ä»¶</strong></p></blockquote></li><li><p>å¦‚ä½•è®¾ç½®<code>redis</code>çš„éªŒè¯å¯†ç ?</p><blockquote><p>æ›´æ”¹é…ç½®æ–‡ä»¶, æ‰¾åˆ°<code>requirepass</code>å­—æ®µ, è®¾ç½®ç›¸åº”çš„éªŒè¯å¯†ç , é‡å¯<code>redis</code> <strong>åˆ‡è®°ï¼è¦æŒ‡å®šé…ç½®æ–‡ä»¶</strong><br>ç”±äºå¢åŠ äº†éªŒè¯å¯†ç ï¼Œå› æ­¤å®¢æˆ·ç«¯è¿æ¥å‘½ä»¤ä¸º<code>redis-cli â€“a [upassword]</code></p></blockquote></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;  Redis çš„éƒ¨ç½²å’Œéƒ¨ä½è®¾è®¡çš„å®è·µ, è¿˜æœ‰å¸¸è§é—®é¢˜çš„æ¢³ç†! ğŸ’ª&lt;br&gt;
    
    </summary>
    
      <category term="Server" scheme="https://hocg.in/categories/Server/"/>
    
    
      <category term="Tips" scheme="https://hocg.in/tags/Tips/"/>
    
      <category term="Redis" scheme="https://hocg.in/tags/Redis/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu ä¸‹çš„ Oh My ZSH!</title>
    <link href="https://hocg.in/2016/09/30/Ubuntu%E4%B8%8B%E7%9A%84OhMyZSH!/"/>
    <id>https://hocg.in/2016/09/30/Ubuntuä¸‹çš„OhMyZSH!/</id>
    <published>2016-09-30T08:18:09.000Z</published>
    <updated>2017-09-22T12:48:41.000Z</updated>
    
    <content type="html"><![CDATA[<p>å·ç§°ç»ˆæshell :)<br><a id="more"></a></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><h3 id="ä»€ä¹ˆæ˜¯zshï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯zshï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯zshï¼Ÿ"></a>ä»€ä¹ˆæ˜¯zshï¼Ÿ</h3><p>shellçš„ä¸€ç§,<code>cat /etc/shells</code>æŸ¥çœ‹å½“å‰ç³»ç»Ÿæ”¯æŒçš„shell</p><h3 id="ç›¸å…³Link"><a href="#ç›¸å…³Link" class="headerlink" title="ç›¸å…³Link"></a>ç›¸å…³Link</h3><p><a href="http://www.zhihu.com/question/21418449" target="_blank" rel="external">ä¸ºä»€ä¹ˆè¯´ zsh æ˜¯ shell ä¸­çš„æå“ï¼Ÿ</a></p><h3 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h3><p>OS: Ubuntu 16.04 x86_64</p><h2 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h2><ul><li><p>~/.zshrc <code>æ–‡ä»¶zshé…ç½®æ–‡ä»¶</code></p><blockquote><ol><li>å¯ç”¨æ¥æ›´æ”¹<code>Theme</code></li><li>åŠ è½½<code>Plugin</code></li></ol></blockquote></li><li><p>~/.oh-my-zsh <code>oh-my-zshç›®å½•</code></p></li></ul><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> å®‰è£…zsh</span><br><span class="line"><span class="meta">$</span> sudo apt-get install zsh</span><br><span class="line"><span class="meta">#</span> å®‰è£…oh-my-zsh</span><br><span class="line"><span class="meta">$</span> sudo apt-get install wget git</span><br><span class="line"><span class="meta">$</span> wget --no-check-certificate https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh -O - | sh</span><br><span class="line"><span class="meta">#</span> æ›¿æ¢zshä¸ºç³»ç»Ÿshell</span><br><span class="line"><span class="meta">$</span> chsh -s /bin/zsh</span><br><span class="line"><span class="meta">#</span> é€€å‡º&amp;é‡æ–°ç™»å…¥</span><br><span class="line"><span class="meta">$</span> exit</span><br><span class="line"><span class="meta">#</span> æŸ¥çœ‹æ˜¯å¦æˆåŠŸ</span><br></pre></td></tr></table></figure><h2 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h2><p><a href="">zsh.config</a></p><p><strong>æ³¨æ„</strong></p><ul><li>éœ€æ›´æ”¹<code>.oh-my-zsh</code>çš„ç›®å½•</li></ul><h2 id="æ’ä»¶ä»‹ç»"><a href="#æ’ä»¶ä»‹ç»" class="headerlink" title="æ’ä»¶ä»‹ç»"></a>æ’ä»¶ä»‹ç»</h2><ul><li><code>git</code>;å¤„äºgité¡¹ç›®ä¸‹å‡ºç°æç¤º</li><li><p><code>autojump</code>; ç›®å½•è‡ªåŠ¨æç¤º, éœ€è¦<a href="git clone git://github.com/joelthelion/autojump.git">Linux é¢å¤–å®‰è£…</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> ~/.bashrc è¿½åŠ </span><br><span class="line">[[ -s ~/.autojump/etc/profile.d/autojump.sh ]] &amp;&amp; . ~/.autojump/etc/profile.d/autojump.sh</span><br></pre></td></tr></table></figure></li><li><p><code>git</code>;å¤„äºgité¡¹ç›®ä¸‹å‡ºç°æç¤º</p></li><li><p><code>zsh-syntax-highlighting</code>;é«˜äº®å¯ç”¨å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> git clone git://github.com/jimmijj/zsh-syntax-highlighting ~/.oh-my-zsh/custom/plugins/zsh-syntax-highlighting</span><br><span class="line">plugins=(zsh-syntax-highlighting)</span><br></pre></td></tr></table></figure></li><li><p><code>colored-man-pages</code>; å¸®åŠ©æ–‡æ¡£é«˜äº®</p></li><li><code>colorize</code>;æ›´å¤šä»£ç é«˜äº®</li><li><code>copydir</code>; æ•´ä¸ªç›®å½•æ‹·è´</li><li><code>command-not-found</code>;å‘½ä»¤è¡Œæ™ºèƒ½æç¤º</li><li><code>history</code>;æŸ¥çœ‹è¾“å…¥å†å²</li><li><code>z</code>; <code>autojump</code>åŒç±»</li></ul><h2 id="ä¸»é¢˜"><a href="#ä¸»é¢˜" class="headerlink" title="ä¸»é¢˜"></a>ä¸»é¢˜</h2><ul><li>ys</li></ul><h2 id="å°æŠ€å·§"><a href="#å°æŠ€å·§" class="headerlink" title="å°æŠ€å·§"></a>å°æŠ€å·§</h2><ul><li>è½¬æ¢è·¯å¾„æ—¶å¯ä»¥çœå»cdå‘½ä»¤ï¼Œç›´æ¥è¾“å…¥è·¯å¾„å³å¯</li><li><code>d</code> å¯ä»¥æŸ¥çœ‹è®¿é—®è¿‡çš„è·¯å¾„ï¼Œç„¶åè¾“å…¥æ•°å­—å°±å¯ä»¥ç›´æ¥åˆ‡æ¢</li><li>è¾“å…¥ä¸å®Œæ•´çš„è·¯å¾„/æ–‡ä»¶/å‘½ä»¤ï¼ŒæŒ‰ä¸‹tabé”®å¯ä»¥å‡ºç°æç¤ºï¼Œå†æŒ‰tabåˆ™å¯ä»¥å®ç°è·¯å¾„è¡¥å…¨</li><li>æ™®é€šå‘½ä»¤ä½¿ç”¨ä¸¤æ¬¡tabå¯è¿›å…¥é€‰æ‹©æ¨¡å¼ï¼Œ ctrl+f/b/n/p å¯ä»¥å‘å‰åå·¦å³åˆ‡æ¢</li><li>kill + tab <code>å¼ºå¼ºå¼º</code></li><li>alias -s xx=â€™xxxâ€™ å¿«æ·é…ç½®</li></ul><h2 id="ç›¸å…³è®¾ç½®"><a href="#ç›¸å…³è®¾ç½®" class="headerlink" title="ç›¸å…³è®¾ç½®"></a>ç›¸å…³è®¾ç½®</h2><blockquote><p>cat ä»£ç é«˜äº®<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip install Pygments</span><br><span class="line"><span class="meta">#</span> å¢åŠ ä»¥ä¸‹alias</span><br><span class="line"><span class="meta">#</span> alias ccat='pygmentize -g'</span><br></pre></td></tr></table></figure></p></blockquote><h2 id="åç»­"><a href="#åç»­" class="headerlink" title="åç»­"></a>åç»­</h2><p><a href="https://github.com/hocgin/Gather/tree/master/oh-my-zsh" target="_blank" rel="external">Oh My ZSH!</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å·ç§°ç»ˆæshell :)&lt;br&gt;
    
    </summary>
    
      <category term="IDE" scheme="https://hocg.in/categories/IDE/"/>
    
    
      <category term="Tips" scheme="https://hocg.in/tags/Tips/"/>
    
      <category term="Ubuntu" scheme="https://hocg.in/tags/Ubuntu/"/>
    
      <category term="Oh My ZSH" scheme="https://hocg.in/tags/Oh-My-ZSH/"/>
    
  </entry>
  
  <entry>
    <title>Glup è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·</title>
    <link href="https://hocg.in/2016/09/20/Glup-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/"/>
    <id>https://hocg.in/2016/09/20/Glup-è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·/</id>
    <published>2016-09-20T00:10:29.000Z</published>
    <updated>2017-09-22T12:55:01.000Z</updated>
    
    <content type="html"><![CDATA[<p>Gulp.js æ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–æ„å»ºå·¥å…· ğŸ˜œ<br><a id="more"></a></p><h2 id="æ¥æº"><a href="#æ¥æº" class="headerlink" title="æ¥æº"></a>æ¥æº</h2><p><a href="https://github.com/hocgin/Gulp-Scaffold" target="_blank" rel="external">Glup æ•´åˆ</a></p><h2 id="Glup"><a href="#Glup" class="headerlink" title="Glup"></a>Glup</h2><blockquote><p>Glupç”¨è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·å¢å¼ºä½ çš„å·¥ä½œæµç¨‹ï¼</p></blockquote><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> npm install gulp -g</span><br><span class="line"><span class="meta">$</span> npm install gulp --save-dev</span><br></pre></td></tr></table></figure><h2 id="æ’ä»¶"><a href="#æ’ä»¶" class="headerlink" title="æ’ä»¶"></a>æ’ä»¶</h2><ul><li>ç¼–è¯‘Sass (gulp-ruby-sass)</li><li>Autoprefixer (gulp-autoprefixer)</li><li>ç¼©å°åŒ–(minify)CSS (gulp-minify-css)</li><li>JSHint (gulp-jshint)</li><li>æ‹¼æ¥ (gulp-concat)</li><li>ä¸‘åŒ–(Uglify) (gulp-uglify)</li><li>å›¾ç‰‡å‹ç¼© (gulp-imagemin)</li><li>å³æ—¶é‡æ•´(LiveReload) (gulp-livereload)</li><li>æ¸…ç†æ¡£æ¡ˆ (gulp-clean)</li><li>å›¾ç‰‡å¿«å–ï¼Œåªæœ‰æ›´æ”¹è¿‡å¾—å›¾ç‰‡ä¼šè¿›è¡Œå‹ç¼© (gulp-cache)</li><li>æ›´åŠ¨é€šçŸ¥ (gulp-notify)<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> npm install gulp-ruby-sass gulp-autoprefixer gulp-minify-css gulp-jshint gulp-concat gulp-uglify gulp-imagemin gulp-clean gulp-notify gulp-rename gulp-livereload gulp-cache --save-dev</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Gulp.js æ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–æ„å»ºå·¥å…· ğŸ˜œ&lt;br&gt;
    
    </summary>
    
      <category term="Coder" scheme="https://hocg.in/categories/Coder/"/>
    
    
      <category term="Tips" scheme="https://hocg.in/tags/Tips/"/>
    
      <category term="NodeJS" scheme="https://hocg.in/tags/NodeJS/"/>
    
      <category term="Ubuntu" scheme="https://hocg.in/tags/Ubuntu/"/>
    
  </entry>
  
  <entry>
    <title>Ngrokä½¿ç”¨æŒ‡å—</title>
    <link href="https://hocg.in/2016/08/31/Ngrok%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/"/>
    <id>https://hocg.in/2016/08/31/Ngrokä½¿ç”¨æŒ‡å—/</id>
    <published>2016-08-30T23:15:24.000Z</published>
    <updated>2017-02-04T05:39:31.000Z</updated>
    
    <content type="html"><![CDATA[<p>Ngrok æ˜¯ä¸€æ¬¾å†…éƒ¨ç«¯å£è½¬å‘ï¼Œå¯¹äºå¾®ä¿¡ç±»ä¼¼çš„å¼€å‘å¾ˆæœ‰ç”¨çš„ğŸ˜†<br>å¯å‚ç…§å¢™å†…(èŠ±ç”Ÿå£³ or nat123)<br><a id="more"></a></p><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p><strong>ç¼–è¯‘ç¯å¢ƒ:</strong><br><a href="https://storage.googleapis.com/golang/go1.4.1.linux-amd64.tar.gz" target="_blank" rel="external">Go 1.4.1 å¼ºçƒˆå»ºè®®</a><br>æ ¹åŸŸå: <code>web.hocg.in</code>,å³ç”Ÿæˆçš„åŸŸåä¸º<code>*.web.hocg.in</code><br>æ–‡ä»¶ç»“æ„:<br>ngrok<br>  â”œâ”€â”€ bin<br>  â”‚   â””â”€â”€ ngrok.cfg<br>  â”œâ”€â”€ client.sh<br>  â”œâ”€â”€ code.sh<br>  â””â”€â”€ server.sh<br><strong>éƒ¨ç½²ç¯å¢ƒ:</strong><br>æœåŠ¡å™¨OS: Ubuntu-15<br>å®¢æˆ·ç«¯OS: Ubuntu-16</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><h3 id="ç¯å¢ƒä¾èµ–åŠæºç ä¸‹è½½"><a href="#ç¯å¢ƒä¾èµ–åŠæºç ä¸‹è½½" class="headerlink" title="ç¯å¢ƒä¾èµ–åŠæºç ä¸‹è½½"></a>ç¯å¢ƒä¾èµ–åŠæºç ä¸‹è½½</h3><blockquote><p>ä»¥ä¸‹å‘½ä»¤æ ¹ç›®å½•ç»Ÿä¸€åœ¨<code>/opt</code></p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> ç¯å¢ƒä¾èµ–</span><br><span class="line">sudo apt-get install build-essential golang mercurial git</span><br><span class="line"><span class="meta">#</span> è·å– ngrok æºç </span><br><span class="line">git clone https://github.com/tutumcloud/ngrok.git ngrok</span><br><span class="line">cd ngrok</span><br></pre></td></tr></table></figure><h3 id="ç”Ÿæˆè¯ä¹¦-amp-amp-ç¼–è¯‘"><a href="#ç”Ÿæˆè¯ä¹¦-amp-amp-ç¼–è¯‘" class="headerlink" title="ç”Ÿæˆè¯ä¹¦ &amp;&amp; ç¼–è¯‘"></a>ç”Ÿæˆè¯ä¹¦ &amp;&amp; ç¼–è¯‘</h3><blockquote><p>ä»¥ä¸‹å‘½ä»¤æ ¹ç›®å½•ç»Ÿä¸€åœ¨<code>/opt/ngrok</code></p></blockquote><p><code>code.sh</code>æ–‡ä»¶</p><blockquote><p>ç”Ÿæˆè¯ä¹¦ &amp;&amp; ç¼–è¯‘æœåŠ¡ç«¯<br><code>DOMAIN</code> ä¸ºé…ç½®çš„<code>æ ¹åŸŸå</code>, ç”¨äºç­¾å.</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>!/bin/bash</span><br><span class="line">echo "å¼€å§‹æ¸…é™¤.."</span><br><span class="line">rm -rf assets/client/tls/ngrokroot.crt</span><br><span class="line">rm -rf assets/server/tls/snakeoil.crt</span><br><span class="line">rm -rf assets/server/tls/snakeoil.key</span><br><span class="line">rm -rf device.*</span><br><span class="line">rm -rf rootCA.*</span><br><span class="line">DOMAIN=web.hocg.in</span><br><span class="line">echo "è®¾ç½®åŸŸåä¸º[*.$DOMAIN]"</span><br><span class="line">echo "å¼€å§‹ç”Ÿæˆç§˜é’¥.."</span><br><span class="line">openssl genrsa -out rootCA.key 2048</span><br><span class="line">openssl req -x509 -new -nodes -key rootCA.key -subj "/CN=$DOMAIN" -days 5000 -out rootCA.pem</span><br><span class="line">openssl genrsa -out device.key 2048</span><br><span class="line">openssl req -new -key device.key -subj "/CN=$DOMAIN" -out device.csr</span><br><span class="line">openssl x509 -req -in device.csr -CA rootCA.pem -CAkey rootCA.key -CAcreateserial -out device.crt -days 5000</span><br><span class="line"></span><br><span class="line">echo "å¼€å§‹è¿ç§»ç§˜é’¥.."</span><br><span class="line">cp -rf rootCA.pem assets/client/tls/ngrokroot.crt</span><br><span class="line">cp -rf device.crt assets/server/tls/snakeoil.crt</span><br><span class="line">cp -rf device.key assets/server/tls/snakeoil.key</span><br><span class="line"></span><br><span class="line">echo "å¼€å§‹ç¼–è¯‘.."</span><br><span class="line">make release-server</span><br></pre></td></tr></table></figure><p><strong>å®¢æˆ·ç«¯</strong></p><blockquote><p>å‰ç½®æ¡ä»¶: Goéœ€å…ˆå¢åŠ å¯¹è¿™äº›å¹³å°äº¤å‰ç¼–è¯‘çš„æ”¯æŒ</p></blockquote><ul><li>Windows<br>goçš„<code>src</code>ç›®å½•  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GOOS=windows GOARCH=amd64 ./make.bash</span><br></pre></td></tr></table></figure></li></ul><p><code>nginx</code>ç›®å½•,ç¼–è¯‘<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GOOS=windows GOARCH=amd64 make release-client</span><br></pre></td></tr></table></figure></p><ul><li>macOS<br>goçš„<code>src</code>ç›®å½•  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GOOS=darwin GOARCH=amd64 ./make.bash</span><br></pre></td></tr></table></figure></li></ul><p><code>nginx</code>ç›®å½•,ç¼–è¯‘<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GOOS=darwin GOARCH=amd64 make release-client</span><br></pre></td></tr></table></figure></p><ul><li>Linux<br><code>nginx</code>ç›®å½•,ç¼–è¯‘<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make release-client</span><br></pre></td></tr></table></figure></li></ul><h3 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h3><p><code>ngrok.cfg</code>æ–‡ä»¶</p><blockquote><p><code>server_addr</code> ä¸ºé…ç½®çš„<code>æ ¹åŸŸå</code>ï¼Œ <code>4443</code>ä¸ºé»˜è®¤ç«¯å£</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">server_addr: web.hocg.in:4443</span><br><span class="line">trust_host_root_certs: false</span><br></pre></td></tr></table></figure><h3 id="è¿è¡Œæ–‡ä»¶"><a href="#è¿è¡Œæ–‡ä»¶" class="headerlink" title="è¿è¡Œæ–‡ä»¶"></a>è¿è¡Œæ–‡ä»¶</h3><p><code>server.sh</code>æ–‡ä»¶</p><blockquote><p>æœåŠ¡å™¨è¿è¡Œ<br><code>DOMAIN</code> ä¸ºé…ç½®çš„<code>æ ¹åŸŸå</code>.<br>æ³¨é‡Šçš„é‚£ä¸€å¥ç”¨äºåå°è¿è¡Œ</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>!/bin/bash</span><br><span class="line"><span class="meta">#</span> $1 HTTP</span><br><span class="line"><span class="meta">#</span> $2 HTTPS</span><br><span class="line">killall ngrokd</span><br><span class="line">DOMAIN=web.hocg.in</span><br><span class="line"><span class="meta">#</span> nohup ./bin/ngrokd -domain="$DOMAIN" -httpAddr=":$1" -httpsAddr=":$2" &gt;/tmp/ngrok.log 2&gt;&amp;1 &amp;</span><br><span class="line">./bin/ngrokd -domain="$DOMAIN" -httpAddr=":$1" -httpsAddr=":$2"</span><br></pre></td></tr></table></figure><p><code>client.sh</code>æ–‡ä»¶</p><blockquote><p>å®¢æˆ·ç«¯è¿è¡Œ, default:linux<br>å…·ä½“ç¯å¢ƒä¿®æ”¹å…·ä½“å†…å®¹</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>!/bin/bash</span><br><span class="line"><span class="meta">#</span> $1 Port</span><br><span class="line"><span class="meta">#</span> $2 domain</span><br><span class="line">./bin/ngrok -subdomain $2 -proto=http -config=./bin/ngrok.cfg $1</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><blockquote><p>è‹¥éœ€å˜æ›´åŸŸå, éœ€ä¿®æ”¹<code>code.sh</code>çš„<code>DOMAIN</code>ã€<code>server.sh</code>çš„<code>DOMAIN</code>ä¸<code>./bin/ngrok.cfg</code>çš„<code>server_addr</code></p><h3 id="ç¼–è¯‘"><a href="#ç¼–è¯‘" class="headerlink" title="ç¼–è¯‘"></a>ç¼–è¯‘</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh code.sh</span><br></pre></td></tr></table></figure><p><strong>æˆåŠŸ</strong> æ£€æŸ¥<code>ngrok/bin</code>æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨<code>ngrok</code> and <code>ngrokd</code></p></blockquote><h3 id="æœåŠ¡ç«¯"><a href="#æœåŠ¡ç«¯" class="headerlink" title="æœåŠ¡ç«¯"></a>æœåŠ¡ç«¯</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh server.sh 8888 9999</span><br></pre></td></tr></table></figure><h3 id="å®¢æˆ·ç«¯"><a href="#å®¢æˆ·ç«¯" class="headerlink" title="å®¢æˆ·ç«¯"></a>å®¢æˆ·ç«¯</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh client.sh 8080 dm</span><br></pre></td></tr></table></figure><h3 id="æ£€éªŒ"><a href="#æ£€éªŒ" class="headerlink" title="æ£€éªŒ"></a>æ£€éªŒ</h3><p>è®¿é—®:<code>http://dm.web.hocg.in:8888</code><br><img src="https://hocg.in/i/Ngrokä½¿ç”¨æŒ‡å—.png" alt="image"></p><h2 id="é‡è¦"><a href="#é‡è¦" class="headerlink" title="é‡è¦"></a>é‡è¦</h2><h3 id="å…³äºåŸŸåè§£æ"><a href="#å…³äºåŸŸåè§£æ" class="headerlink" title="å…³äºåŸŸåè§£æ"></a>å…³äºåŸŸåè§£æ</h3><p>eg. <code>*.web.hocg.in</code><br>è·¯å¾„è§£æéœ€é…ç½®<code>*.web</code> and <code>web</code> ä¸¤ä¸ªAè®°å½•</p><h3 id="å…³äºç­¾å"><a href="#å…³äºç­¾å" class="headerlink" title="å…³äºç­¾å"></a>å…³äºç­¾å</h3><p>æœ€å¥½åœ¨åŒä¸€ç¯å¢ƒè¿›è¡Œ<code>æœåŠ¡ç«¯</code>å’Œ<code>å®¢æˆ·ç«¯</code>çš„ç¼–è¯‘</p><h2 id="å°æŠ€å·§"><a href="#å°æŠ€å·§" class="headerlink" title="å°æŠ€å·§"></a>å°æŠ€å·§</h2><ul><li>å¦‚ä½•è®©æœåŠ¡ç«¯çš„<code>ngrok</code>åå°è¿è¡Œ<blockquote><p>æ­£å¸¸çš„<code>nohup</code>æˆ–<code>&amp;</code>æ˜¯æ— æ³•ä½¿<code>ngrok</code>åå°è¿è¡Œçš„<br>éœ€ä½¿ç”¨<code>screen</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> å®‰è£…</span><br><span class="line">\# apt-get install screen</span><br><span class="line"><span class="meta">#</span> ä½¿ç”¨</span><br><span class="line">screen -S [å‘½å] [éœ€æ”¾å…¥åå°çš„å‘½ä»¤]</span><br><span class="line"><span class="meta">#</span> ä½¿ç”¨ ctrl+A+D è®©å…¶è¿è¡Œåœ¨åå°</span><br><span class="line"><span class="meta">#</span> æŸ¥çœ‹screen åå°è¿›ç¨‹</span><br><span class="line">screen -ls</span><br><span class="line"><span class="meta">#</span> é‡æ–°è¿æ¥åå°è¿›ç¨‹</span><br><span class="line">screen -r [è¿›ç¨‹id]</span><br></pre></td></tr></table></figure></blockquote></li></ul><h2 id="å¯èƒ½é‡åˆ°çš„å¼‚å¸¸"><a href="#å¯èƒ½é‡åˆ°çš„å¼‚å¸¸" class="headerlink" title="å¯èƒ½é‡åˆ°çš„å¼‚å¸¸"></a>å¯èƒ½é‡åˆ°çš„å¼‚å¸¸</h2><ul><li>Go-1.2.1è¯­è¨€ç‰ˆæœ¬ä¸æ”¯æŒ<code>go version</code><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> github.com/gorilla/websocket</span><br><span class="line">src/github.com/gorilla/websocket/client.go:361: unknown tls.Config field 'GetCertificate' in struct literal</span><br><span class="line">src/github.com/gorilla/websocket/client.go:370: unknown tls.Config field 'ClientSessionCache' in struct literal</span><br><span class="line">src/github.com/gorilla/websocket/client.go:373: unknown tls.Config field 'CurvePreferences' in struct literal</span><br><span class="line">make: *** [client] Error 2</span><br></pre></td></tr></table></figure></li></ul><p><a href="https://golang.org/doc/install?download=go1.7.linux-amd64.tar.gz" target="_blank" rel="external">å®˜æ–¹Go-64çš„å®‰è£…</a></p><ul><li>Goç¼–è¯‘å™¨æ‰¾ä¸åˆ°<code>go-bindata</code><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GOOS="" GOARCH="" go get github.com/jteeuwen/go-bindata/go-bindata</span><br><span class="line">/bin/sh: 1: go: not found</span><br><span class="line">make: *** [bin/go-bindata] Error 127</span><br></pre></td></tr></table></figure></li></ul><ol><li><p>è¯·æ³¨æ„é…ç½®å¥½<code>GOROOT</code>å’Œ<code>GOPATH</code></p><blockquote><p><code>GOROOT</code>ä¸ºå®‰è£…GOçš„ç›®å½•<br><code>GOPATH</code>è‡ªå®šä¹‰ä¸€ä¸ªGOæ’ä»¶ä¸‹è½½ç›®å½•</p></blockquote></li><li><p>æ‰§è¡Œä»¥ä¸‹shellä¸‹è½½æ’ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go get -u github.com/jteeuwen/go-bindata/...</span><br></pre></td></tr></table></figure></li></ol><p>END:)</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Ngrok æ˜¯ä¸€æ¬¾å†…éƒ¨ç«¯å£è½¬å‘ï¼Œå¯¹äºå¾®ä¿¡ç±»ä¼¼çš„å¼€å‘å¾ˆæœ‰ç”¨çš„ğŸ˜†&lt;br&gt;å¯å‚ç…§å¢™å†…(èŠ±ç”Ÿå£³ or nat123)&lt;br&gt;
    
    </summary>
    
      <category term="Server" scheme="https://hocg.in/categories/Server/"/>
    
    
      <category term="Ngrok" scheme="https://hocg.in/tags/Ngrok/"/>
    
      <category term="Tip" scheme="https://hocg.in/tags/Tip/"/>
    
  </entry>
  
  <entry>
    <title>Nexus å…¥é—¨</title>
    <link href="https://hocg.in/2016/08/24/Nexus%E5%85%A5%E9%97%A8/"/>
    <id>https://hocg.in/2016/08/24/Nexuså…¥é—¨/</id>
    <published>2016-08-24T11:03:01.000Z</published>
    <updated>2016-10-26T09:01:49.000Z</updated>
    
    <content type="html"><![CDATA[<p>é€‚åˆ<code>nexus</code>å…¥é—¨ï¼Œä¸æ˜¯æ‰‹æœºï¼Œä¸æ˜¯æ‰‹æœºï¼Œä¸æ˜¯æ‰‹æœºã€€ï¼ï¼ï½ï¼ˆâ•¯â–¡â•°ï¼‰ï½<br><a id="more"></a></p><h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><ul><li>Ubuntu-14.04.1</li><li>jdk1.8.0_102</li><li><a href="https://sonatype-download.global.ssl.fastly.net/nexus/oss/nexus-2.12.0-01-bundle.tar.gz" target="_blank" rel="external">nexus-2.12.0-01</a>|<a href="http://www.sonatype.org/nexus/" target="_blank" rel="external">å®˜ç½‘</a></li><li>åŸŸå:<code>nexus.hocg.in</code></li></ul><h2 id="å‰ç½®æ¡ä»¶"><a href="#å‰ç½®æ¡ä»¶" class="headerlink" title="å‰ç½®æ¡ä»¶"></a>å‰ç½®æ¡ä»¶</h2><ul><li>å®‰è£…å®Œjdkå¹¶é…ç½®å¥½ç¯å¢ƒå˜é‡ <code>eg: javaæŸ¥çœ‹æ˜¯å¦æˆåŠŸ</code></li></ul><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p><strong>æ¸©é¦¨æç¤º:</strong> ä»¥ä¸‹æ“ä½œéƒ½æ˜¯åœ¨<code>/opt</code>ç›®å½•ä¸‹</p><h3 id="ä¸‹è½½-amp-è§£å‹"><a href="#ä¸‹è½½-amp-è§£å‹" class="headerlink" title="ä¸‹è½½&amp;è§£å‹"></a>ä¸‹è½½&amp;è§£å‹</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> ä¸‹è½½</span><br><span class="line">wget https://sonatype-download.global.ssl.fastly.net/nexus/oss/nexus-2.12.0-01-bundle.tar.gz</span><br><span class="line"><span class="meta">#</span> è§£å‹</span><br><span class="line">tar -zxvf nexus-2.12.0-01-bundle.tar.gz</span><br><span class="line"><span class="meta">#</span> æ¸…ç†</span><br><span class="line">rm -rf *.gz</span><br></pre></td></tr></table></figure><h3 id="æ–‡ä»¶-ç›®å½•è¯¦è§£"><a href="#æ–‡ä»¶-ç›®å½•è¯¦è§£" class="headerlink" title="æ–‡ä»¶/ç›®å½•è¯¦è§£"></a>æ–‡ä»¶/ç›®å½•è¯¦è§£</h3><ul><li><code>nexus-2.12.0-01</code> ç¨‹åºç›®å½•</li><li><code>sonatype-work</code> ä»“åº“ç›®å½•(å†…åŒ…å«ä»“åº“é…ç½®åŠjaråŒ…ä»“åº“)</li></ul><h3 id="åŸºæœ¬æ“ä½œ"><a href="#åŸºæœ¬æ“ä½œ" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./nexus-2.12.0-01/bin/nexus &#123; console | start | stop | restart | status | dump &#125;</span><br></pre></td></tr></table></figure><p><code>è®¿é—® http://nexus.hocg.in:8081/nexus</code></p><blockquote><p>é»˜è®¤è´¦å·:admin é»˜è®¤å¯†ç : admin123</p></blockquote><h2 id="å¦‚ä½•ä½¿ç”¨"><a href="#å¦‚ä½•ä½¿ç”¨" class="headerlink" title="å¦‚ä½•ä½¿ç”¨"></a>å¦‚ä½•ä½¿ç”¨</h2><h3 id="Maven-ä¸­é…ç½®ä»“åº“"><a href="#Maven-ä¸­é…ç½®ä»“åº“" class="headerlink" title="Maven ä¸­é…ç½®ä»“åº“"></a>Maven ä¸­é…ç½®ä»“åº“</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">id</span>&gt;</span>Nexus<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">name</span>&gt;</span>Nexus<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://nexus.hocg.in:8081/nexus/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><h3 id="å¦‚ä½•ä¿®æ”¹é»˜è®¤8081ç«¯å£"><a href="#å¦‚ä½•ä¿®æ”¹é»˜è®¤8081ç«¯å£" class="headerlink" title="å¦‚ä½•ä¿®æ”¹é»˜è®¤8081ç«¯å£"></a>å¦‚ä½•ä¿®æ”¹é»˜è®¤<code>8081</code>ç«¯å£</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim /opt/nexus-2.12.0-01/conf/nexus.properties</span><br><span class="line"><span class="meta">#</span> ä¿®æ”¹application-port=8081é¡¹</span><br></pre></td></tr></table></figure><h3 id="å¦‚ä½•åˆ›å»ºç”¨æˆ·"><a href="#å¦‚ä½•åˆ›å»ºç”¨æˆ·" class="headerlink" title="å¦‚ä½•åˆ›å»ºç”¨æˆ·"></a>å¦‚ä½•åˆ›å»ºç”¨æˆ·</h3><p>ç™»é™†ç³»ç»Ÿåï¼Œå·¦ä¾§<code>Security &gt; Users</code>ä¸­åˆ›å»º</p><h3 id="å¦‚ä½•ä½¿ç”¨æ„å»ºè´¦å·"><a href="#å¦‚ä½•ä½¿ç”¨æ„å»ºè´¦å·" class="headerlink" title="å¦‚ä½•ä½¿ç”¨æ„å»ºè´¦å·"></a>å¦‚ä½•ä½¿ç”¨<code>æ„å»ºè´¦å·</code></h3><p>ä¿®æ”¹<code>Settings.xml</code>æ–‡ä»¶ (<strong>Maven</strong>)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;servers&gt;</span><br><span class="line">&lt;server&gt;</span><br><span class="line">&lt;id&gt;nexus.hocg.in&lt;/id&gt;</span><br><span class="line">&lt;username&gt;admin&lt;/username&gt;</span><br><span class="line">&lt;password&gt;admin123&lt;/password&gt;</span><br><span class="line">&lt;/server&gt;</span><br><span class="line">&lt;/servers&gt;</span><br></pre></td></tr></table></figure></p><h3 id="å¦‚ä½•ä¿®æ”¹ç”¨æˆ·å¯†ç "><a href="#å¦‚ä½•ä¿®æ”¹ç”¨æˆ·å¯†ç " class="headerlink" title="å¦‚ä½•ä¿®æ”¹ç”¨æˆ·å¯†ç "></a>å¦‚ä½•ä¿®æ”¹ç”¨æˆ·å¯†ç </h3><p>ç™»é™†ç³»ç»Ÿåï¼Œé¡¶éƒ¨<code>ç‚¹å‡»ç”¨æˆ·å &gt; Profile</code>ä¸­ä¿®æ”¹</p><h3 id="å¦‚ä½•å»ºç«‹ä¸ä¸­å¤®ä»“åº“çš„ç´¢å¼•"><a href="#å¦‚ä½•å»ºç«‹ä¸ä¸­å¤®ä»“åº“çš„ç´¢å¼•" class="headerlink" title="å¦‚ä½•å»ºç«‹ä¸ä¸­å¤®ä»“åº“çš„ç´¢å¼•"></a>å¦‚ä½•å»ºç«‹ä¸ä¸­å¤®ä»“åº“çš„ç´¢å¼•</h3><p><img src="https://hocg.in/i/å¦‚ä½•å»ºç«‹ä¸ä¸­å¤®ä»“åº“çš„ç´¢å¼•.png" alt="image"></p><blockquote><p><strong>Note:</strong> Nexusä¼šè‡ªåŠ¨å»ºç«‹ä»»åŠ¡è®¡åˆ’,ä¸€èˆ¬è¿œç¨‹ä»“åº“éƒ½æ¯”è¾ƒå¤§ï¼Œæ„å»ºä¼šæ¯”è¾ƒå¤šï¼Œå› æ­¤ç´¢å¼•æ–‡ä»¶ä¼šå¾ˆå¤§ï¼Œè¯·ç¡®ä¿ç£ç›˜å¤§å°å……è¶³.</p></blockquote><h2 id="å¯èƒ½å‡ºç°çš„æŠ¥é”™"><a href="#å¯èƒ½å‡ºç°çš„æŠ¥é”™" class="headerlink" title="å¯èƒ½å‡ºç°çš„æŠ¥é”™"></a>å¯èƒ½å‡ºç°çš„æŠ¥é”™</h2><ul><li><strong>1</strong> WARNING - NOT RECOMMENDED TO RUN AS ROOT , åŸå› æ˜¯æé†’ä½ æ˜¯å¦ç¡®è®¤ç”¨<code>root</code>ç”¨æˆ·è¿è¡Œ<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">\# ./nexus-2.12.0-01/bin/nexus restart</span><br><span class="line">****************************************</span><br><span class="line">WARNING - NOT RECOMMENDED TO RUN AS ROOT</span><br><span class="line">****************************************</span><br><span class="line">Stopping Nexus OSS...</span><br><span class="line">Nexus OSS was not running.</span><br><span class="line">Starting Nexus OSS...</span><br><span class="line">Started Nexus OSS.</span><br></pre></td></tr></table></figure></li></ul><p>è§£å†³:<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">vim ./nexus-2.12.0-01/bin/nexus</span><br><span class="line"><span class="meta">#</span> åŠ å…¥ç³»ç»Ÿå˜é‡</span><br><span class="line">vi /etc/profile</span><br><span class="line"><span class="meta">#</span> åŠ å…¥export RUN_AS_USER=root</span><br><span class="line"><span class="meta">#</span> ä¿®æ”¹</span><br><span class="line">RUN_AS_USER=root</span><br><span class="line"><span class="meta">#</span> å¯åŠ¨</span><br><span class="line">./nexus-2.12.0-01/bin/nexus start</span><br><span class="line"><span class="meta">#</span> æŸ¥çœ‹æ˜¯å¦å¯åŠ¨æˆåŠŸ</span><br><span class="line">./nexus-2.12.0-01/bin/nexus status</span><br><span class="line"><span class="meta">#</span> ç¨ç­‰å‡ åˆ†é’Ÿå†è®¿é—®</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é€‚åˆ&lt;code&gt;nexus&lt;/code&gt;å…¥é—¨ï¼Œä¸æ˜¯æ‰‹æœºï¼Œä¸æ˜¯æ‰‹æœºï¼Œä¸æ˜¯æ‰‹æœºã€€ï¼ï¼ï½ï¼ˆâ•¯â–¡â•°ï¼‰ï½&lt;br&gt;
    
    </summary>
    
      <category term="Server" scheme="https://hocg.in/categories/Server/"/>
    
    
      <category term="Tips" scheme="https://hocg.in/tags/Tips/"/>
    
      <category term="Nexus" scheme="https://hocg.in/tags/Nexus/"/>
    
  </entry>
  
  <entry>
    <title>Android L åŠä»¥ä¸Šç‰ˆæœ¬RomåŒ…ä¸­æå–apk</title>
    <link href="https://hocg.in/2016/08/07/Android-L-%E5%8F%8A%E4%BB%A5%E4%B8%8A%E7%89%88%E6%9C%ACRom%E5%8C%85%E4%B8%AD%E6%8F%90%E5%8F%96apk/"/>
    <id>https://hocg.in/2016/08/07/Android-L-åŠä»¥ä¸Šç‰ˆæœ¬RomåŒ…ä¸­æå–apk/</id>
    <published>2016-08-07T11:19:29.000Z</published>
    <updated>2018-10-11T13:39:15.397Z</updated>
    
    <content type="html"><![CDATA[<p>æå–æƒ³è¦çš„apkï¼Œ ä¾‹å¦‚CM ROMåŒ…ä¸­çš„å«å¤©æ°”çš„æ—¶é’Ÿä¸é”™ï¼</p><a id="more"></a><h2 id="ä»¥å¾€ç‰ˆæœ¬"><a href="#ä»¥å¾€ç‰ˆæœ¬" class="headerlink" title="ä»¥å¾€ç‰ˆæœ¬"></a>ä»¥å¾€ç‰ˆæœ¬</h2><blockquote><p>Android RomåŒ…åªéœ€è§£å‹åï¼Œå–å‡ºsystemåŒ…å³å¯å–å‡ºå†…éƒ¨apk</p></blockquote><h2 id="Now"><a href="#Now" class="headerlink" title="Now"></a>Now</h2><blockquote><p>è§£å‹åå¯ä»¥å‘ç°ï¼Œæ–‡ä»¶å‘ç”Ÿäº†æ”¹å˜å¹¶ä¸”<code>system.new.dat</code>æ­¤æ–‡ä»¶æ˜¯ä¸æ”¯æŒç›´æ¥è§£å‹çš„ã€‚</p></blockquote><h3 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h3><p>ç³»ç»Ÿ: win10<br>å·¥å…·: <a href="http://cdn.hocgin.top/Extractor%20and%20Repacker%204.0.rar" target="_blank" rel="external">ä¸‹è½½</a></p><blockquote><p>ç¯å¢ƒè‡ªå¤‡</p></blockquote><h3 id="æ“ä½œæ­¥éª¤"><a href="#æ“ä½œæ­¥éª¤" class="headerlink" title="æ“ä½œæ­¥éª¤"></a>æ“ä½œæ­¥éª¤</h3><ol><li>æ™®é€šæ–¹å¼è§£å‹ROM</li><li>è¿è¡Œä¸‹è½½å·¥å…·ä¸­.batæ–‡ä»¶<code>Extractor.bat</code></li><li>æ ¹æ®æç¤ºé€‰æ‹©<code>1</code>ï¼Œå¹¶å¤åˆ¶<code>system.new.dat</code>, <code>system.transfer.list</code>ï¼Œ<code>file_contexts</code>ä¸‰ä¸ªæ–‡ä»¶åˆ°batæ–‡ä»¶æ‰€åœ¨ç›®å½•</li><li>æŒ‰ä»»æ„é”®ç»§ç»­</li><li>å®Œæˆåå¯ä»¥å¾—åˆ°ä¸€ä¸ª<code>system</code>æ–‡ä»¶å¤¹</li><li>å˜¿å˜¿å˜¿..</li></ol><h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜!"></a>é—®é¢˜!</h3><ol><li>æœ‰å¯èƒ½åœ¨ä½ å®‰è£…apkçš„æ—¶å€™å‡ºç°<code>åº”ç”¨æœªå®‰è£…</code>çš„æƒ…å†µ<ul><li>å¯ä»¥å°è¯•é‡æ–°å¯¹apkè¿›è¡Œç­¾å</li><li>æ£€æŸ¥æ˜¯å¦å·²ç»å®‰è£…è¿‡è¯¥apk</li></ul></li></ol><p>End</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æå–æƒ³è¦çš„apkï¼Œ ä¾‹å¦‚CM ROMåŒ…ä¸­çš„å«å¤©æ°”çš„æ—¶é’Ÿä¸é”™ï¼&lt;/p&gt;
    
    </summary>
    
      <category term="Android" scheme="https://hocg.in/categories/Android/"/>
    
    
      <category term="Android" scheme="https://hocg.in/tags/Android/"/>
    
      <category term="æ‰‹æœº" scheme="https://hocg.in/tags/%E6%89%8B%E6%9C%BA/"/>
    
  </entry>
  
  <entry>
    <title>æ¨¡å—è®¾è®¡ä¹‹å¯¹æ¥åŒæ­¥è®¢å•æ¨¡å—</title>
    <link href="https://hocg.in/2016/08/02/%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1%E4%B9%8B%E5%AF%B9%E6%8E%A5%E5%90%8C%E6%AD%A5%E8%AE%A2%E5%8D%95%E6%A8%A1%E5%9D%97/"/>
    <id>https://hocg.in/2016/08/02/æ¨¡å—è®¾è®¡ä¹‹å¯¹æ¥åŒæ­¥è®¢å•æ¨¡å—/</id>
    <published>2016-08-02T02:47:06.000Z</published>
    <updated>2018-10-11T13:39:15.427Z</updated>
    
    <content type="html"><![CDATA[<p>å®ä¹ æœŸé—´è®¾è®¡çš„å¯¹æ¥åŒæ­¥è®¢å•çš„æŸå—, ç¼…æ€€..<br>è®¾è®¡æ—¥æœŸ(2016.6)<br><a id="more"></a></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p><strong>#å¯¹æ¥åŒæ­¥è®¢å•æ¨¡å—#</strong> è¯¥éƒ¨åˆ†æ˜¯æˆ‘å…¥èŒåè‡ªä¸»è®¾è®¡çš„ä¸€ä¸ªæ¨¡å—ï¼Œå› ä¸ºåˆæœŸé¢„è®¡å¯¹æ¥5å®¶å¹³å°çš„è®¢å•ï¼Œå¹¶è€ƒè™‘åˆ°åæœŸå¯èƒ½å¯¹æ¥æ›´å¤šå¹³å°å’Œå¹³å°è®¢å•æ•°é‡ç­‰ï¼Œæ‰€ä»¥æ‰©å±•æ€§å’Œæ€§èƒ½æ–¹é¢æ˜¯å¾ˆå€¼å¾—æ·±æ€çš„é—®é¢˜ã€‚</p></blockquote><h2 id="å¼€å‘å‘¨æœŸ-20day"><a href="#å¼€å‘å‘¨æœŸ-20day" class="headerlink" title="å¼€å‘å‘¨æœŸ (20day)"></a>å¼€å‘å‘¨æœŸ (20day)</h2><blockquote><p>å‰æœŸéœ€æ±‚çš„å¤šæ¬¡å˜æ›´ï¼Œå¤§å¤§çš„æµªè´¹äº†å¼€å‘å‘¨æœŸ.</p></blockquote><ul><li>åº“è¡¨è®¾è®¡</li><li>æ¥å£æ•´ç†å’Œæ•´åˆè®¾è®¡(ä¸»è¦æ˜¯å¯¹æ¥å¹³å°çš„æ¥å£æ•´åˆç­‰)</li><li>ä»£ç ç¼–å†™</li></ul><h2 id="ä¸šåŠ¡æµç¨‹å›¾"><a href="#ä¸šåŠ¡æµç¨‹å›¾" class="headerlink" title="ä¸šåŠ¡æµç¨‹å›¾"></a>ä¸šåŠ¡æµç¨‹å›¾</h2><h3 id="è¡¨"><a href="#è¡¨" class="headerlink" title="è¡¨"></a>è¡¨</h3><ul><li>å•†å“è¡¨,<strong>å­˜å‚¨å•†å“ä¿¡æ¯, ä¸»è¦é…åˆæ–¹æ¡ˆåŒ¹é…</strong></li><li>æˆæƒè¡¨,<strong>å­˜å‚¨ç”¨æˆ·æˆæƒä¿¡æ¯ï¼Œä¸»è¦ç”¨äºtokenç®¡ç†</strong></li><li>å¹³å°é…ç½®è¡¨,<strong>å­˜å‚¨å¹³å°keyä¿¡æ¯</strong></li><li>æ–¹æ¡ˆè¡¨,<strong>å·²å­˜åœ¨ï¼Œå­˜å‚¨æ–¹æ¡ˆä¿¡æ¯</strong></li></ul><h3 id="v1ç‰ˆ"><a href="#v1ç‰ˆ" class="headerlink" title="v1ç‰ˆ"></a>v1ç‰ˆ</h3><h4 id="æ€è·¯å›¾"><a href="#æ€è·¯å›¾" class="headerlink" title="æ€è·¯å›¾"></a>æ€è·¯å›¾</h4><p><img src="http://cdn.hocgin.top/æ€»ä½“æ€è·¯-v1-op.png" alt="æ€»ä½“æ€è·¯-v1-op.png"></p><h4 id="ä¸šåŠ¡å›¾"><a href="#ä¸šåŠ¡å›¾" class="headerlink" title="ä¸šåŠ¡å›¾"></a>ä¸šåŠ¡å›¾</h4><p><img src="http://cdn.hocgin.top/ä¸šåŠ¡-v1-op.png" alt="æ€»ä½“æ€è·¯-v1-now.png"></p><p>åŸå…ˆï¼Œè¯¥éƒ¨åˆ†è®¾è®¡æ˜¯ä¸è€ƒè™‘å¯¹è®¢å•æ•°æ®è¿›è¡Œç¼“å­˜å¤„ç†çš„ï¼Œä½†åæœŸéœ€æ±‚å¤šæ¬¡å˜æ›´è¢«è¿«è¿›è¡Œæ•°æ®ç¼“å­˜ï¼Œå› æ­¤å†åŸå…ˆçš„åŸºç¡€ä¸Šå»ºç«‹äº†çº¿ç¨‹æ± å¹¶å¯¹åŒæ­¥è®¢å•éƒ¨åˆ†è¿›è¡Œå¼‚æ­¥çº¿ç¨‹å¤„ç†ï¼Œå› æ­¤å¢åŠ äº†ä¸€å¼ è®¢å•ç¼“å­˜è¡¨å’Œäº‹ä»¶é˜Ÿåˆ—è¡¨ã€‚</p><hr><h3 id="v2ç‰ˆ"><a href="#v2ç‰ˆ" class="headerlink" title="v2ç‰ˆ"></a>v2ç‰ˆ</h3><h4 id="æ€è·¯å›¾-1"><a href="#æ€è·¯å›¾-1" class="headerlink" title="æ€è·¯å›¾"></a>æ€è·¯å›¾</h4><p><img src="http://cdn.hocgin.top/æ€»ä½“æ€è·¯-v2-now.png" alt="æ€»ä½“æ€è·¯-v2-op.png"></p><h4 id="ä¸šåŠ¡å›¾-1"><a href="#ä¸šåŠ¡å›¾-1" class="headerlink" title="ä¸šåŠ¡å›¾"></a>ä¸šåŠ¡å›¾</h4><p><img src="http://cdn.hocgin.top/ä¸šåŠ¡-v2-now.png" alt="æ€»ä½“æ€è·¯-v2-now.png"></p><blockquote><p>åé¢åˆå¯¹ç¼“å­˜è¡¨è¿›è¡Œäº†æ•°æ®å»é‡é˜²æ­¢è¡¨æ•°æ®çˆ†ç‚¸æ€§å¢é•¿ã€‚</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul><li>æŠŠå…¬å…±æŠ½ç¦»å‡ºæ¥ï¼Œä¸­é—´æ–°å¢è½¬åŒ–å±‚å¯ä»¥å¾ˆå¥½çš„è§£å†³ä»£ç å¤ç”¨çš„é—®é¢˜.</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å®ä¹ æœŸé—´è®¾è®¡çš„å¯¹æ¥åŒæ­¥è®¢å•çš„æŸå—, ç¼…æ€€..&lt;br&gt;è®¾è®¡æ—¥æœŸ(2016.6)&lt;br&gt;
    
    </summary>
    
      <category term="Coder" scheme="https://hocg.in/categories/Coder/"/>
    
    
      <category term="Java" scheme="https://hocg.in/tags/Java/"/>
    
      <category term="è®¾è®¡æ€è·¯" scheme="https://hocg.in/tags/%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF/"/>
    
  </entry>
  
  <entry>
    <title>æ¨¡å—è®¾è®¡ä¹‹æ¶ˆæ¯æ¨¡å—</title>
    <link href="https://hocg.in/2016/07/30/%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1%E4%B9%8B%E6%B6%88%E6%81%AF%E6%A8%A1%E5%9D%97/"/>
    <id>https://hocg.in/2016/07/30/æ¨¡å—è®¾è®¡ä¹‹æ¶ˆæ¯æ¨¡å—/</id>
    <published>2016-07-30T11:25:56.000Z</published>
    <updated>2018-10-11T13:39:15.422Z</updated>
    
    <content type="html"><![CDATA[<p>  æ–°æ‰‹ä¸Šè·¯ï¼Œå°å¿ƒæ’è½¦..<br><a id="more"></a></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p><strong>#æ¶ˆæ¯æ¨¡å—#</strong> è¿™æ˜¯æˆ‘åˆšå…¥èŒæ—¶æ‰€æ¥è§¦çš„ç¬¬ä¸€ä¸ªæ¨¡å—ï¼Œä¹Ÿç®—æ˜¯æ¯”è¾ƒå¤§çš„æ¨¡å—äº†ã€‚è¿™ä¸ªæ¨¡å—çš„ä¸šåŠ¡æ˜¯è´Ÿè´£æ•´ä¸ªé¡¹ç›®æ‰€æœ‰çš„æ¶ˆæ¯å‡ºå…¥å£ï¼ŒåŒ…å«çŸ­ä¿¡å‘é€ï¼ŒAPPæ¨é€ï¼Œé‚®ä»¶å‘é€ä»¥åŠå‰åç«¯äººå‘˜ç«™å†…æ¶ˆæ¯ã€‚å½“æ—¶è®¾è®¡çš„æ—¶å€™éœ€æ±‚æ¶æ„æ¯”è¾ƒç®€å•è€Œä¸”æ—¶é—´ç´§è¿«(Ï€__Ï€)ï¼Œæ²¡æœ‰ä»æ ¹æœ¬ç†æ¸…ä¸šåŠ¡å’ŒåŠŸèƒ½åæœŸå­˜åœ¨çš„æ‰©å±•ã€‚å› æ­¤ï¼Œè¿™ç¯‡æ–‡ç« æ˜¯è®°å½•å½“æ—¶æ¶æ„çš„æ€è·¯å’Œéœ€è¦æ”¹å–„çš„åœ°æ–¹ã€‚</p></blockquote><h2 id="å¼€å‘å‘¨æœŸ-10day"><a href="#å¼€å‘å‘¨æœŸ-10day" class="headerlink" title="å¼€å‘å‘¨æœŸ (10day)"></a>å¼€å‘å‘¨æœŸ (10day)</h2><ul><li>åº“è¡¨è®¾è®¡</li><li>æ¥å£æ•´ç†å’Œæ•´åˆè®¾è®¡(çŸ­ä¿¡&amp;å‹ç›Ÿ&amp;é‚®ä»¶ç­‰)</li><li>ä»£ç ç¼–å†™</li></ul><h2 id="ä¸šåŠ¡æµç¨‹å›¾"><a href="#ä¸šåŠ¡æµç¨‹å›¾" class="headerlink" title="ä¸šåŠ¡æµç¨‹å›¾"></a>ä¸šåŠ¡æµç¨‹å›¾</h2><h3 id="è¡¨"><a href="#è¡¨" class="headerlink" title="è¡¨"></a>è¡¨</h3><ul><li>æ¶ˆæ¯è®°å½•è¡¨, <strong>ä¸»è¦è´Ÿè´£æ¶ˆæ¯å‡ºå…¥å£è®°å½•</strong></li><li>äº‹ä»¶è§¦å‘è¡¨, <strong>ä¸»è¦å¯¹æ¶ˆæ¯è¿›è¡Œæ§åˆ¶ï¼Œä¾‹å¦‚: è§¦å‘è®¢å•å˜æ›´æ¨é€åˆ°ç”¨æˆ·/è¿è¥äººå‘˜ and so on</strong></li><li>æ¶ˆæ¯çŠ¶æ€è¡¨, <strong>ä¸»è¦è´Ÿè´£æ¶ˆæ¯å‘é€çš„çŠ¶æ€ï¼ŒåŒ…å«å®šæ—¶å‘é€ï¼Œæ’¤é”€å‘é€ and so on</strong></li></ul><h3 id="å›¾"><a href="#å›¾" class="headerlink" title="å›¾"></a>å›¾</h3><p><img src="http://cdn.hocgin.top/ä¸šåŠ¡-now.png" alt="å½“å‰ä¸šåŠ¡æµç¨‹å›¾"></p><h2 id="ç±»æµç¨‹å›¾"><a href="#ç±»æµç¨‹å›¾" class="headerlink" title="ç±»æµç¨‹å›¾"></a>ç±»æµç¨‹å›¾</h2><p><img src="http://cdn.hocgin.top/ç±»-now.png" alt="å½“å‰ç±»æµç¨‹å›¾"></p><p>å¦‚å›¾ï¼Œæ­¤æ¨¡å¼ä¸»è¦æ˜¯åˆ©ç”¨å·¥å‚æ¨¡å¼, æä¾›å¤šç§æ¶ˆæ¯é€šé“å®ä¾‹ï¼Œç”±ä¸åŒçš„æ¶ˆæ¯é€šé“å¯¹è‡ªèº«é€šé“æ¶ˆæ¯è¿›è¡Œå¤„ç†ï¼Œç±»ä¼¼äºæŠŠè¥¿ç“œï¼Œç‰›è‚‰ï¼Œç™½èœç­‰é€å…¥ä¸åŒçš„å·¥å‚è¿›è¡ŒåŠ å·¥ï¼Œä½†æ˜¯åˆç”±é£Ÿå“è´¨é‡æ§åˆ¶ä¸­å¿ƒå¯¹å…¶è¿›è¡Œè®°å½•å’Œæ£€éªŒã€‚</p><p><strong>ä¼˜ç‚¹</strong>: åæœŸä¾¿äºæ‰©å±•æ›´å¤šçš„é€šé“æ¨¡å¼<br><strong>ç¼ºç‚¹</strong>: å„ä¸ªæ¨¡å¼æ˜¯é ç±»å‹åŒºåˆ«çš„ï¼Œä¸ä¾¿äºè¿›è¡Œç»†èŠ‚åŒ–å¤„ç†(ä¾‹å¦‚ï¼Œå¯¹æŸéƒ¨åˆ†APPæ¨é€è¿›è¡Œå®šåˆ¶åŒ–ï¼Œè¿›å…¥æŸä¸ªActivityç­‰ç»†èŠ‚åŒ–å®šåˆ¶)</p><h2 id="è¿›ä¸€æ­¥ä¼˜åŒ–ç±»æµç¨‹å›¾"><a href="#è¿›ä¸€æ­¥ä¼˜åŒ–ç±»æµç¨‹å›¾" class="headerlink" title="è¿›ä¸€æ­¥ä¼˜åŒ–ç±»æµç¨‹å›¾"></a>è¿›ä¸€æ­¥ä¼˜åŒ–ç±»æµç¨‹å›¾</h2><blockquote><p>ä½¿ç”¨Routeè¿›è¡Œæ›´ç»†èŠ‚çš„å®šåˆ¶åŒ–å¤„ç†<br>æ›´å¤šå®æˆ˜ï¼Œ<a href="https://github.com/chanjarster/weixin-java-tools" target="_blank" rel="external">æ¨è</a></p></blockquote><h3 id="å›¾-1"><a href="#å›¾-1" class="headerlink" title="å›¾"></a>å›¾</h3><p><img src="http://cdn.hocgin.top/ç±»-op.png" alt="å½“å‰ç±»æµç¨‹å›¾"></p><blockquote><p>å›§ï¼Œå•çœ‹å›¾å¯èƒ½ç»†åˆ†ä¸å‡ºä¸¤è€…çš„å·®åˆ«ï¼Œé™„ä¸Šä¸€æ®µä»£ç å®ä¾‹</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·¯ç”±è§„åˆ™åˆå§‹åŒ–ï¼Œç”¨äºå®šä¹‰åŒ¹é…è§„åˆ™</span></span><br><span class="line">NoticeRouter router = <span class="keyword">new</span> NoticeRouter();</span><br><span class="line">route.rule()</span><br><span class="line">    .noticeType(Notice.SMS)</span><br><span class="line">    <span class="comment">// ... æ›´å¤šç»†èŠ‚è§„åˆ™åŒ¹é…</span></span><br><span class="line">    .handler(smsHandler)</span><br><span class="line">    .end()</span><br><span class="line">    .rule()</span><br><span class="line">    .noticeType(Notice.EMail)</span><br><span class="line">    <span class="comment">// ... æ›´å¤šç»†èŠ‚è§„åˆ™åŒ¹é…</span></span><br><span class="line">    .handler(emailHandler)</span><br><span class="line">    .end()</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†é€šçŸ¥å®ä½“é€šçŸ¥è·¯ç”±å¤„ç†</span></span><br><span class="line">router.route(message)</span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul><li>å……åˆ†è€ƒè™‘åæœŸä¸šåŠ¡éœ€æ±‚ (å°±ç®—éå¿…é¡»çš„ä¸šåŠ¡éœ€æ±‚)<blockquote><p>ä¸è¦å¦„æƒ³éœ€æ±‚æ˜¯æ’ä¹…ä¸å˜çš„ï¼Œéœ€æ±‚=å°ä¸‰ï¼Œæ‰©å±•=çœŸçˆ±</p></blockquote></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;  æ–°æ‰‹ä¸Šè·¯ï¼Œå°å¿ƒæ’è½¦..&lt;br&gt;
    
    </summary>
    
      <category term="Coder" scheme="https://hocg.in/categories/Coder/"/>
    
    
      <category term="Java" scheme="https://hocg.in/tags/Java/"/>
    
      <category term="è®¾è®¡æ€è·¯" scheme="https://hocg.in/tags/%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF/"/>
    
  </entry>
  
  <entry>
    <title>Macçš„ä½¿ç”¨</title>
    <link href="https://hocg.in/2016/07/02/Mac-%E4%BD%BF%E7%94%A8/"/>
    <id>https://hocg.in/2016/07/02/Mac-ä½¿ç”¨/</id>
    <published>2016-07-02T02:47:06.000Z</published>
    <updated>2016-08-27T05:29:43.000Z</updated>
    
    <content type="html"><![CDATA[<p>  ç•™å‘ï¼Œåˆšåˆšèµ·æ­¥ï¼Œæ¢³ç†ä¸­ingã€‚<br><a id="more"></a></p><h3 id="å°æŠ€å·§"><a href="#å°æŠ€å·§" class="headerlink" title="å°æŠ€å·§"></a>å°æŠ€å·§</h3><ul><li>åœ¨Dock éšè— iTerm2<br>éšè—:<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/libexec/PlistBuddy -c "Add :LSUIElement bool true" /Applications/iTerm.app/Contents/Info.plist</span><br></pre></td></tr></table></figure></li></ul><p>æ˜¾ç¤º:<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/libexec/PlistBuddy -c "Delete :LSUIElement" /Applications/iTerm.app/Contents/Info.plist</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;  ç•™å‘ï¼Œåˆšåˆšèµ·æ­¥ï¼Œæ¢³ç†ä¸­ingã€‚&lt;br&gt;
    
    </summary>
    
      <category term="OS" scheme="https://hocg.in/categories/OS/"/>
    
    
      <category term="Tips" scheme="https://hocg.in/tags/Tips/"/>
    
      <category term="Mac" scheme="https://hocg.in/tags/Mac/"/>
    
  </entry>
  
  <entry>
    <title>è°ˆJVMï¼Œå­—èŠ‚ç </title>
    <link href="https://hocg.in/2016/06/12/%E8%B0%88JVM-%E5%AD%97%E8%8A%82%E7%A0%81/"/>
    <id>https://hocg.in/2016/06/12/è°ˆJVM-å­—èŠ‚ç /</id>
    <published>2016-06-12T11:37:49.000Z</published>
    <updated>2016-08-27T05:35:58.000Z</updated>
    
    <content type="html"><![CDATA[<p>è°ˆè°ˆJVMï¼Œæœ€è¿‘åœ¨ç ”ç©¶ç ´è§£jarï¼Œæœ‰è¿™æ–¹é¢ç»éªŒçš„éº»çƒ¦æŒ‡å¯¼ä¸€ä¸‹æ€è·¯..<br><a id="more"></a></p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="http://www.yangyong.me/java-class%E6%96%87%E4%BB%B6%E5%92%8C%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AD%97%E8%8A%82%E7%A0%81%E6%8C%87%E4%BB%A4-%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8Bclass%E6%96%87%E4%BB%B6/#viewclass" target="_blank" rel="external">å‚è€ƒ1</a><br><a href="http://blog.csdn.net/sprayabc/article/details/8576605" target="_blank" rel="external">æŒ‡ä»¤æ•´ç†</a></p><h2 id="å¸¸ç”¨æŒ‡ä»¤"><a href="#å¸¸ç”¨æŒ‡ä»¤" class="headerlink" title="å¸¸ç”¨æŒ‡ä»¤"></a>å¸¸ç”¨æŒ‡ä»¤</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> åç¼–è¯‘æŸ¥çœ‹`ç±»æ–‡ä»¶`æ‰€æœ‰ä¿¡æ¯</span></span><br><span class="line">javap -verbose [class]</span><br></pre></td></tr></table></figure><h2 id="å±€éƒ¨å˜é‡ç±»å‹"><a href="#å±€éƒ¨å˜é‡ç±»å‹" class="headerlink" title="å±€éƒ¨å˜é‡ç±»å‹"></a>å±€éƒ¨å˜é‡ç±»å‹</h2><table><thead><tr><th>ç‰¹æ®Šå­—ç¬¦è¡¨ç¤º</th><th>ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td>c</td><td>char</td><td>charç±»å‹</td></tr><tr><td>i</td><td>int</td><td>intç±»å‹</td></tr><tr><td>l</td><td>long</td><td>longç±»å‹</td></tr><tr><td>s</td><td>short</td><td>shortç±»å‹</td></tr><tr><td>b</td><td>byte</td><td>byteç±»å‹</td></tr><tr><td>f</td><td>float</td><td>floatç±»å‹</td></tr><tr><td>z</td><td>boolean</td><td>å¸ƒå°”ç±»å‹</td></tr><tr><td>a</td><td>reference</td><td>å¼•ç”¨</td></tr></tbody></table><h2 id="æ–¹æ³•ä¿¡æ¯"><a href="#æ–¹æ³•ä¿¡æ¯" class="headerlink" title="æ–¹æ³•ä¿¡æ¯"></a>æ–¹æ³•ä¿¡æ¯</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">L1</span><br><span class="line">    LOCALVARIABLE this LMain; L0 L1 0</span><br><span class="line">    LOCALVARIABLE a I L0 L1 1</span><br><span class="line">    MAXSTACK = 0</span><br><span class="line">    MAXLOCALS = 2</span><br></pre></td></tr></table></figure><p>å±€éƒ¨å˜é‡å‚æ•° LOCALVARIABLE<br>å±€éƒ¨è¡¨å¤§å° MAXLOCALS<br>æ“ä½œæ•°æ ˆå¤§å° MAXSTACK</p><h2 id="æŒ‡ä»¤"><a href="#æŒ‡ä»¤" class="headerlink" title="æŒ‡ä»¤"></a>æŒ‡ä»¤</h2><h3 id="è¿ç®—æŒ‡ä»¤"><a href="#è¿ç®—æŒ‡ä»¤" class="headerlink" title="è¿ç®—æŒ‡ä»¤"></a>è¿ç®—æŒ‡ä»¤</h3><blockquote><p>ç®—æœ¯æŒ‡ä»¤ç”¨äºå¯¹ä¸¤ä¸ª<code>æ“ä½œæ•°æ ˆ</code>ä¸Šçš„å€¼è¿›è¡ŒæŸç§ç‰¹å®šè¿ç®—ï¼Œå¹¶æŠŠç»“æœé‡æ–°å­˜å…¥åˆ°<code>æ“ä½œæ ˆ</code>é¡¶ã€‚</p></blockquote><ul><li>åŠ æ³•æŒ‡ä»¤:iadd,ladd,fadd,dadd</li><li>å‡æ³•æŒ‡ä»¤:isub,lsub,fsub,dsub</li><li>ä¹˜æ³•æŒ‡ä»¤:imul,lmul,fmul,dmul</li><li>é™¤æ³•æŒ‡ä»¤:idiv,ldiv,fdiv,ddiv</li><li>æ±‚ä½™æŒ‡ä»¤:irem,lrem,frem,drem</li><li>å–åæŒ‡ä»¤:ineg,leng,fneg,dneg</li><li>ä½ç§»æŒ‡ä»¤:ishl,ishr,iushr,lshl,lshr,lushr</li><li>æŒ‰ä½æˆ–æŒ‡ä»¤:ior,lor</li><li>æŒ‰ä½ä¸æŒ‡ä»¤:iand,land</li><li>æŒ‰ä½å¼‚æˆ–æŒ‡ä»¤:ixor,lxor</li><li>å±€éƒ¨å˜é‡è‡ªå¢æŒ‡ä»¤:iinc</li><li>æ¯”è¾ƒæŒ‡ä»¤:dcmpg,dcmpl,fcmpg,fcmpl,lcmp</li></ul><h3 id="åŠ è½½å’Œå­˜å‚¨æŒ‡ä»¤"><a href="#åŠ è½½å’Œå­˜å‚¨æŒ‡ä»¤" class="headerlink" title="åŠ è½½å’Œå­˜å‚¨æŒ‡ä»¤"></a>åŠ è½½å’Œå­˜å‚¨æŒ‡ä»¤</h3><blockquote><p>ç”¨äº<code>å±€éƒ¨å˜é‡è¡¨</code>å’Œ<code>æ“ä½œæ•°æ ˆ</code>ä¹‹é—´æ¥å›ä¼ è¾“</p></blockquote><ul><li>å°†ä¸€ä¸ªå±€éƒ¨å˜é‡åŠ è½½åˆ°æ“ä½œæ•°æ ˆçš„æŒ‡ä»¤åŒ…æ‹¬ï¼šiload,iload_&lt;n&gt;ï¼Œlloadã€lload_&lt;n&gt;ã€floatã€fload_&lt;n&gt;ã€dloadã€dload_&lt;n&gt;ï¼Œaloadã€aload_&lt;n&gt;ã€‚</li><li>å°†ä¸€ä¸ªæ•°å€¼ä»æ“ä½œæ•°æ ˆå­˜å‚¨åˆ°å±€éƒ¨å˜é‡æ ‡çš„æŒ‡ä»¤ï¼šistore,istore_&lt;n&gt;,lstore,lstore_&lt;n&gt;,fstore,fstore_&lt;n&gt;,dstore,dstore_&lt;n&gt;,astore,astore_&lt;n&gt;</li><li>å°†å¸¸é‡åŠ è½½åˆ°æ“ä½œæ•°æ ˆçš„æŒ‡ä»¤ï¼šbipush,sipush,ldc,ldc_w,ldc2_w,aconst_null,iconst_ml,iconst_&lt;i&gt;,lconst_&lt;l&gt;,fconst_&lt;f&gt;,dconst_&lt;d&gt;</li><li>å±€éƒ¨å˜é‡è¡¨çš„è®¿é—®ç´¢å¼•æŒ‡ä»¤:wide<br>  ä¸€éƒ¨åˆ†ä»¥å°–æ‹¬å·ç»“å°¾çš„æŒ‡ä»¤ä»£è¡¨äº†ä¸€ç»„æŒ‡ä»¤ï¼Œå¦‚iload_&lt;i&gt;ï¼Œä»£è¡¨äº†iload_0,iload_1ç­‰ï¼Œè¿™å‡ ç»„æŒ‡ä»¤éƒ½æ˜¯å¸¦æœ‰ä¸€ä¸ªæ“ä½œæ•°çš„é€šç”¨æŒ‡ä»¤ã€‚</li></ul><h3 id="è¿ç®—æŒ‡ä»¤-1"><a href="#è¿ç®—æŒ‡ä»¤-1" class="headerlink" title="è¿ç®—æŒ‡ä»¤"></a>è¿ç®—æŒ‡ä»¤</h3><blockquote><p>å¯¹ä¸¤ä¸ª<code>æ“ä½œæ•°æ ˆ</code>ä¸Šçš„å€¼è¿›è¡ŒæŸç§ç‰¹å®šè¿ç®—ï¼Œå¹¶æŠŠç»“æœé‡æ–°å­˜å…¥åˆ°<code>æ“ä½œæ ˆ</code>é¡¶</p></blockquote><ul><li>åŠ æ³•æŒ‡ä»¤:iadd,ladd,fadd,dadd</li><li>å‡æ³•æŒ‡ä»¤:isub,lsub,fsub,dsub</li><li>ä¹˜æ³•æŒ‡ä»¤:imul,lmul,fmul,dmul</li><li>é™¤æ³•æŒ‡ä»¤:idiv,ldiv,fdiv,ddiv</li><li>æ±‚ä½™æŒ‡ä»¤:irem,lrem,frem,drem</li><li>å–åæŒ‡ä»¤:ineg,leng,fneg,dneg</li><li>ä½ç§»æŒ‡ä»¤:ishl,ishr,iushr,lshl,lshr,lushr</li><li>æŒ‰ä½æˆ–æŒ‡ä»¤:ior,lor</li><li>æŒ‰ä½ä¸æŒ‡ä»¤:iand,land</li><li>æŒ‰ä½å¼‚æˆ–æŒ‡ä»¤:ixor,lxor</li><li>å±€éƒ¨å˜é‡è‡ªå¢æŒ‡ä»¤:iinc</li><li>æ¯”è¾ƒæŒ‡ä»¤:dcmpg,dcmpl,fcmpg,fcmpl,lcmp</li></ul><h3 id="ç±»å‹è½¬æ¢æŒ‡ä»¤"><a href="#ç±»å‹è½¬æ¢æŒ‡ä»¤" class="headerlink" title="ç±»å‹è½¬æ¢æŒ‡ä»¤"></a>ç±»å‹è½¬æ¢æŒ‡ä»¤</h3><blockquote><p>å°†ä¸¤ç§Javaè™šæ‹Ÿæœºæ•°å€¼ç±»å‹ç›¸äº’è½¬æ¢</p></blockquote><p>JVMæ”¯æŒå®½åŒ–ç±»å‹è½¬æ¢(å°èŒƒå›´ç±»å‹å‘å¤§èŒƒå›´ç±»å‹è½¬æ¢)ï¼š</p><ul><li>intç±»å‹åˆ°long,float,doubleç±»å‹</li><li>longç±»å‹åˆ°float,doubleç±»å‹</li><li>floatåˆ°doubleç±»å‹</li></ul><h3 id="å¯¹è±¡åˆ›å»ºä¸æ“ä½œ"><a href="#å¯¹è±¡åˆ›å»ºä¸æ“ä½œ" class="headerlink" title="å¯¹è±¡åˆ›å»ºä¸æ“ä½œ"></a>å¯¹è±¡åˆ›å»ºä¸æ“ä½œ</h3><blockquote><p>è™½ç„¶ç±»å®ä¾‹å’Œæ•°ç»„éƒ½æ˜¯å¯¹è±¡ï¼ŒJavaè™šæ‹Ÿæœºå¯¹ç±»å®ä¾‹å’Œæ•°ç»„çš„åˆ›å»ºä¸æ“ä½œä½¿ç”¨äº†ä¸åŒçš„å­—èŠ‚ç æŒ‡ä»¤ã€‚</p></blockquote><ul><li>åˆ›å»ºå®ä¾‹çš„æŒ‡ä»¤:new</li><li>åˆ›å»ºæ•°ç»„çš„æŒ‡ä»¤:newarray,anewarray,multianewarray</li><li>è®¿é—®å­—æ®µæŒ‡ä»¤:getfield,putfield,getstatic,putstatic</li><li>æŠŠæ•°ç»„å…ƒç´ åŠ è½½åˆ°æ“ä½œæ•°æ ˆæŒ‡ä»¤:baload,caload,saload,iaload,laload,faload,daload,aaload</li><li>å°†æ“ä½œæ•°æ ˆçš„æ•°å€¼å­˜å‚¨åˆ°æ•°ç»„å…ƒç´ ä¸­æ‰§è¡Œ:bastore,castore,castore,sastore,iastore,fastore,dastore,aastore</li><li>å–æ•°ç»„é•¿åº¦æŒ‡ä»¤:arraylength</li><li>æ£€æŸ¥å®ä¾‹ç±»å‹æŒ‡ä»¤:instanceof,checkcast</li></ul><h3 id="æ“ä½œæ•°æ ˆç®¡ç†æŒ‡ä»¤"><a href="#æ“ä½œæ•°æ ˆç®¡ç†æŒ‡ä»¤" class="headerlink" title="æ“ä½œæ•°æ ˆç®¡ç†æŒ‡ä»¤"></a>æ“ä½œæ•°æ ˆç®¡ç†æŒ‡ä»¤</h3><p>ç›´æ¥æ“ä½œæ“ä½œæ•°æ ˆçš„æŒ‡ä»¤ï¼špop,pop2,dup,dup2,dup_x1,dup2_x1,dup_x2,dup2_x2å’Œswap</p><blockquote><p>NOTE: å‹å…¥æ ˆé¡¶(DUP)/å¼¹å‡ºæ ˆé¡¶(POP)</p></blockquote><h3 id="æ§åˆ¶è½¬ç§»æŒ‡ä»¤"><a href="#æ§åˆ¶è½¬ç§»æŒ‡ä»¤" class="headerlink" title="æ§åˆ¶è½¬ç§»æŒ‡ä»¤"></a>æ§åˆ¶è½¬ç§»æŒ‡ä»¤</h3><ul><li>æ¡ä»¶åˆ†æ”¯:ifeq,iflt,ifle,ifne,ifgt,ifge,ifnull,ifnotnull,if_cmpeq,if_icmpne,if_icmlt,if_icmpgtç­‰</li><li>å¤åˆæ¡ä»¶åˆ†æ”¯:tableswitch,lookupswitch</li><li>æ— æ¡ä»¶åˆ†æ”¯:goto,goto_w,jsr,jsr_w,ret</li></ul><h3 id="æ–¹æ³•è°ƒç”¨å’Œè¿”å›æŒ‡ä»¤"><a href="#æ–¹æ³•è°ƒç”¨å’Œè¿”å›æŒ‡ä»¤" class="headerlink" title="æ–¹æ³•è°ƒç”¨å’Œè¿”å›æŒ‡ä»¤"></a>æ–¹æ³•è°ƒç”¨å’Œè¿”å›æŒ‡ä»¤</h3><ul><li>invokevirtualæŒ‡ä»¤:è°ƒç”¨å¯¹è±¡çš„å®ä¾‹æ–¹æ³•ï¼Œæ ¹æ®å¯¹è±¡çš„å®é™…ç±»å‹è¿›è¡Œåˆ†æ´¾(è™šæ‹Ÿæœºåˆ†æ´¾)ã€‚</li><li>invokeinterfaceæŒ‡ä»¤:è°ƒç”¨æ¥å£æ–¹æ³•ï¼Œåœ¨è¿è¡Œæ—¶æœç´¢ä¸€ä¸ªå®ç°è¿™ä¸ªæ¥å£æ–¹æ³•çš„å¯¹è±¡ï¼Œæ‰¾å‡ºåˆé€‚çš„æ–¹æ³•è¿›è¡Œè°ƒç”¨ã€‚</li><li>invokespecial:è°ƒç”¨éœ€è¦ç‰¹æ®Šå¤„ç†çš„å®ä¾‹æ–¹æ³•ï¼ŒåŒ…æ‹¬å®ä¾‹åˆå§‹åŒ–æ–¹æ³•ï¼Œç§æœ‰æ–¹æ³•å’Œçˆ¶ç±»æ–¹æ³•</li><li>invokestatic:è°ƒç”¨ç±»æ–¹æ³•(static)</li><li>æ–¹æ³•è¿”å›æŒ‡ä»¤æ˜¯æ ¹æ®è¿”å›å€¼çš„ç±»å‹åŒºåˆ†çš„ï¼ŒåŒ…æ‹¬ireturn(è¿”å›å€¼æ˜¯boolean,byte,char,shortå’Œint),lreturn,freturn,drturnå’Œareturnï¼Œå¦å¤–ä¸€ä¸ªreturnä¾›voidæ–¹æ³•ï¼Œå®ä¾‹åˆå§‹åŒ–æ–¹æ³•ï¼Œç±»å’Œæ¥å£çš„ç±»åˆå§‹åŒ–iæ–¹æ³•ä½¿ç”¨ã€‚</li></ul><h3 id="åŒæ­¥"><a href="#åŒæ­¥" class="headerlink" title="åŒæ­¥"></a>åŒæ­¥</h3><h2 id="Eg"><a href="#Eg" class="headerlink" title="Eg:"></a>Eg:</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">// class version 52.0 (52)</span><br><span class="line">// access flags 0x21</span><br><span class="line">public class Main &#123;</span><br><span class="line"></span><br><span class="line">  // compiled from: Main.java</span><br><span class="line"></span><br><span class="line">  // access flags 0x11</span><br><span class="line">  public final I simpleField = 100</span><br><span class="line"></span><br><span class="line">  // access flags 0x0</span><br><span class="line">  &lt;init&gt;()V</span><br><span class="line">   L0</span><br><span class="line">    LINENUMBER 12 L0</span><br><span class="line">    ALOAD 0</span><br><span class="line">    INVOKESPECIAL java/lang/Object.&lt;init&gt; ()V</span><br><span class="line">   L1</span><br><span class="line">    LINENUMBER 10 L1</span><br><span class="line">    ALOAD 0</span><br><span class="line">    BIPUSH 100</span><br><span class="line">    PUTFIELD Main.simpleField : I</span><br><span class="line">   L2</span><br><span class="line">    LINENUMBER 13 L2</span><br><span class="line">    GETSTATIC java/lang/System.out : Ljava/io/PrintStream;</span><br><span class="line">    BIPUSH 100</span><br><span class="line">    INVOKEVIRTUAL java/io/PrintStream.print (I)V</span><br><span class="line">   L3</span><br><span class="line">    LINENUMBER 14 L3</span><br><span class="line">    RETURN</span><br><span class="line">   L4</span><br><span class="line">    LOCALVARIABLE this LMain; L0 L4 0</span><br><span class="line">    MAXSTACK = 2</span><br><span class="line">    MAXLOCALS = 1</span><br><span class="line"></span><br><span class="line">  // access flags 0x9</span><br><span class="line">  public static main([Ljava/lang/String;)V</span><br><span class="line">   L0</span><br><span class="line">    LINENUMBER 16 L0</span><br><span class="line">    NEW Main</span><br><span class="line">    DUP</span><br><span class="line">    INVOKESPECIAL Main.&lt;init&gt; ()V</span><br><span class="line">    ASTORE 1</span><br><span class="line">   L1</span><br><span class="line">    LINENUMBER 17 L1</span><br><span class="line">    GETSTATIC java/lang/System.out : Ljava/io/PrintStream;</span><br><span class="line">    LDC &quot;--&gt;&quot;</span><br><span class="line">    INVOKEVIRTUAL java/io/PrintStream.println (Ljava/lang/String;)V</span><br><span class="line">   L2</span><br><span class="line">    LINENUMBER 19 L2</span><br><span class="line">    RETURN</span><br><span class="line">   L3</span><br><span class="line">    LOCALVARIABLE args [Ljava/lang/String; L0 L3 0</span><br><span class="line">    LOCALVARIABLE main LMain; L1 L3 1</span><br><span class="line">    MAXSTACK = 2</span><br><span class="line">    MAXLOCALS = 2</span><br><span class="line"></span><br><span class="line">  // access flags 0x21</span><br><span class="line">  public synchronized a(I)V throws java/lang/Exception </span><br><span class="line">   L0</span><br><span class="line">    LINENUMBER 23 L0</span><br><span class="line">    RETURN</span><br><span class="line">   L1</span><br><span class="line">    LOCALVARIABLE this LMain; L0 L1 0</span><br><span class="line">    LOCALVARIABLE a I L0 L1 1</span><br><span class="line">    MAXSTACK = 0</span><br><span class="line">    MAXLOCALS = 2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è°ˆè°ˆJVMï¼Œæœ€è¿‘åœ¨ç ”ç©¶ç ´è§£jarï¼Œæœ‰è¿™æ–¹é¢ç»éªŒçš„éº»çƒ¦æŒ‡å¯¼ä¸€ä¸‹æ€è·¯..&lt;br&gt;
    
    </summary>
    
      <category term="Coder" scheme="https://hocg.in/categories/Coder/"/>
    
    
      <category term="Java" scheme="https://hocg.in/tags/Java/"/>
    
      <category term="JVM" scheme="https://hocg.in/tags/JVM/"/>
    
  </entry>
  
  <entry>
    <title>è°ˆJVMï¼Œå„ç§è¿‡ç¨‹</title>
    <link href="https://hocg.in/2016/06/12/%E8%B0%88JVM-%E5%90%84%E7%A7%8D%E8%BF%87%E7%A8%8B/"/>
    <id>https://hocg.in/2016/06/12/è°ˆJVM-å„ç§è¿‡ç¨‹/</id>
    <published>2016-06-12T11:37:49.000Z</published>
    <updated>2018-10-11T13:39:15.358Z</updated>
    
    <content type="html"><![CDATA[<p>è°ˆè°ˆJVM å„ç§è¿‡ç¨‹ï¼Œ XMindç­‰æˆ‘æ•´ç†ä¸€ä¸‹ï¼Œç¨åè´´å‡º å›§ï½<br>æ¬¢è¿æŒ‡æ•™..<br><strong>update:</strong> 2016-08-03 14:44:12 æ›´æ–°äº†å›¾<br><a id="more"></a></p><h3 id="æ€»æ€è·¯"><a href="#æ€»æ€è·¯" class="headerlink" title="æ€»æ€è·¯"></a>æ€»æ€è·¯</h3><p>ç¼–è¯‘è¿‡ç¨‹ -&gt; è¿è¡Œè¿‡ç¨‹[ç±»åŠ è½½å™¨è¿‡ç¨‹(ç±»çš„è£…è½½è¿‡ç¨‹) -&gt; æ‰§è¡Œè¿‡ç¨‹]</p><h4 id="å›¾"><a href="#å›¾" class="headerlink" title="å›¾"></a>å›¾</h4><p><img src="http://cdn.hocgin.top/æ€»æ€è·¯-v1.png" alt="æ€»æ€è·¯-v1.png"></p><h3 id="ç¼–è¯‘è¿‡ç¨‹"><a href="#ç¼–è¯‘è¿‡ç¨‹" class="headerlink" title="ç¼–è¯‘è¿‡ç¨‹"></a>ç¼–è¯‘è¿‡ç¨‹</h3><p>.javaæ–‡ä»¶ -javacç¼–è¯‘-&gt; .classæ–‡ä»¶       {-JITç¼–è¯‘(è½¬åŒ–+ä¼˜åŒ–)-&gt; æœ¬åœ°æ–¹æ³•}[æ‰§è¡Œè¿‡ç¨‹ï¼Œå½“æ–¹æ³•æ‰§è¡Œé¢‘ç‡é«˜]</p><h4 id="å›¾-1"><a href="#å›¾-1" class="headerlink" title="å›¾"></a>å›¾</h4><p><img src="http://cdn.hocgin.top/ç¼–è¯‘è¿‡ç¨‹.png" alt="ç¼–è¯‘è¿‡ç¨‹.png"></p><hr><h3 id="è¿è¡Œè¿‡ç¨‹"><a href="#è¿è¡Œè¿‡ç¨‹" class="headerlink" title="è¿è¡Œè¿‡ç¨‹"></a>è¿è¡Œè¿‡ç¨‹</h3><p>ç±»åŠ è½½å™¨ -&gt; (æ‰§è¡Œå¼•æ“ -&gt; æœ¬åœ°åº“æ¥å£)[Java è¿è¡Œæ—¶æ•°æ®åŒº] -&gt; æœ¬åœ°æ–¹æ³•åº“</p><h4 id="å›¾-2"><a href="#å›¾-2" class="headerlink" title="å›¾"></a>å›¾</h4><p><img src="http://cdn.hocgin.top/è¿è¡Œè¿‡ç¨‹.png" alt="è¿è¡Œè¿‡ç¨‹.png"></p><hr><h3 id="ç±»åŠ è½½å™¨è¿‡ç¨‹"><a href="#ç±»åŠ è½½å™¨è¿‡ç¨‹" class="headerlink" title="ç±»åŠ è½½å™¨è¿‡ç¨‹"></a><strong>ç±»åŠ è½½å™¨</strong>è¿‡ç¨‹</h3><p>[å¯åŠ¨]ç±»åŠ è½½å™¨(JNI) -&gt; [æ‰©å±•]ç±»åŠ è½½å™¨ -&gt; [ç³»ç»Ÿ]ç±»åŠ è½½å™¨ -&gt; [è‡ªå®šä¹‰]ç±»åŠ è½½å™¨</p><h4 id="å›¾-3"><a href="#å›¾-3" class="headerlink" title="å›¾"></a>å›¾</h4><p><img src="http://cdn.hocgin.top/ç±»åŠ è½½å™¨è¿‡ç¨‹.png" alt="ç±»åŠ è½½å™¨è¿‡ç¨‹.png"></p><hr><h3 id="ç±»è£…è½½è¿‡ç¨‹"><a href="#ç±»è£…è½½è¿‡ç¨‹" class="headerlink" title="ç±»è£…è½½è¿‡ç¨‹"></a><strong>ç±»</strong>è£…è½½è¿‡ç¨‹</h3><p>åŠ è½½æ–‡ä»¶åˆ°JVMå†…å­˜ -&gt; (æ ¡éªŒè¯­è¨€è§„èŒƒ -&gt; åˆ†é…ç»“æ„å­˜å‚¨ç±»çš„ä¿¡æ¯ -&gt; è¯¥ç±»å¸¸é‡æ± ä¸­ç¬¦å·æ›´æ”¹ä¸ºç›´æ¥å¼•ç”¨)[Linking] -&gt; ç±»åˆå§‹åŒ–</p><h4 id="å›¾-4"><a href="#å›¾-4" class="headerlink" title="å›¾"></a>å›¾</h4><p><img src="http://cdn.hocgin.top/ç±»è£…è½½è¿‡ç¨‹.png" alt="ç±»è£…è½½è¿‡ç¨‹.png"></p><hr><h3 id="æ‰§è¡Œå¼•æ“æ‰§è¡Œè¿‡ç¨‹-é€è¡Œè¯»å–æŒ‡ä»¤"><a href="#æ‰§è¡Œå¼•æ“æ‰§è¡Œè¿‡ç¨‹-é€è¡Œè¯»å–æŒ‡ä»¤" class="headerlink" title="æ‰§è¡Œå¼•æ“æ‰§è¡Œè¿‡ç¨‹(é€è¡Œè¯»å–æŒ‡ä»¤)"></a><strong>æ‰§è¡Œå¼•æ“</strong>æ‰§è¡Œè¿‡ç¨‹(é€è¡Œè¯»å–æŒ‡ä»¤)</h3><p>Threadå¯åŠ¨ -ç”Ÿæˆ-&gt; JVMæ ˆ -æ‰§è¡Œæ–¹æ³•-&gt; å‹å…¥æ ˆå¸§(åŒ…å« å±€éƒ¨å˜é‡æ•°ç»„&amp;æ“ä½œæ•°æ ˆ&amp;è¿è¡Œæ—¶å¸¸é‡æ± ) -&gt; é€è¡Œè¯»å–æŒ‡ä»¤&amp;&amp;è§£é‡Š(JVMæ ˆå¸§ ç¨‹åºè®¡æ•°å™¨å­˜æ”¾ä¸‹ä¸€æ¡æŒ‡ä»¤) -&gt; {JIT(è½¬åŒ–+ä¼˜åŒ–)-&gt; æœ¬åœ°æ–¹æ³•}[å½“æ–¹æ³•æ‰§è¡Œé¢‘ç‡é«˜] -æ‰§è¡Œ&amp;è¿ç®—-&gt; ç»“æœ(å­˜æ”¾ æ“ä½œæ•°æ ˆä¸­) -&gt; æ¨å‡ºæ ˆå¸§</p><h4 id="å›¾-5"><a href="#å›¾-5" class="headerlink" title="å›¾"></a>å›¾</h4><p><img src="http://cdn.hocgin.top/æ‰§è¡Œå¼•æ“æ‰§è¡Œè¿‡ç¨‹.png" alt="æ‰§è¡Œå¼•æ“æ‰§è¡Œè¿‡ç¨‹.png"></p><hr><h3 id="Java-è¿è¡Œæ—¶æ•°æ®åŒº-è´¯ç©¿æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹"><a href="#Java-è¿è¡Œæ—¶æ•°æ®åŒº-è´¯ç©¿æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹" class="headerlink" title="Java è¿è¡Œæ—¶æ•°æ®åŒº(è´¯ç©¿æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹)"></a>Java è¿è¡Œæ—¶æ•°æ®åŒº(è´¯ç©¿æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹)</h3><p>å…±äº«å‹æ•°æ®åŒºï¼šæ–¹æ³•åŒº(å«è¿è¡Œæ—¶å¸¸é‡æ± [å­˜æ”¾æ–¹æ³•&amp;å˜é‡çš„å®é™…<strong>åœ°å€</strong>])ã€å †(å­˜æ”¾å¯¹è±¡å®ä¾‹)<br>éš”ç¦»å‹æ•°æ®åŒºï¼šJVM æ ˆã€æœ¬åœ°æ–¹æ³•æ ˆ(JNI)ã€ç¨‹åºè®¡æ•°å™¨</p><h4 id="å›¾-6"><a href="#å›¾-6" class="headerlink" title="å›¾"></a>å›¾</h4><p><img src="http://cdn.hocgin.top/è¿è¡Œæ—¶æ•°æ®å›¾.png" alt="è¿è¡Œæ—¶æ•°æ®å›¾.png"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è°ˆè°ˆJVM å„ç§è¿‡ç¨‹ï¼Œ XMindç­‰æˆ‘æ•´ç†ä¸€ä¸‹ï¼Œç¨åè´´å‡º å›§ï½&lt;br&gt;æ¬¢è¿æŒ‡æ•™..&lt;br&gt;&lt;strong&gt;update:&lt;/strong&gt; 2016-08-03 14:44:12 æ›´æ–°äº†å›¾&lt;br&gt;
    
    </summary>
    
      <category term="Coder" scheme="https://hocg.in/categories/Coder/"/>
    
    
      <category term="Java" scheme="https://hocg.in/tags/Java/"/>
    
      <category term="JVM" scheme="https://hocg.in/tags/JVM/"/>
    
  </entry>
  
  <entry>
    <title>å…³äºHTTPS</title>
    <link href="https://hocg.in/2016/06/02/Https-%E7%AD%BE%E8%AF%81/"/>
    <id>https://hocg.in/2016/06/02/Https-ç­¾è¯/</id>
    <published>2016-06-02T03:22:43.000Z</published>
    <updated>2017-02-04T05:37:54.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™æ˜¯ä¸€ç¯‡å…³äº<code>HTTPS</code>çš„æ—¥å¸¸ä½¿ç”¨è®°å½•ï¼Œä¾‹å¦‚:åšå®¢HTTPSåŒ–~<br>æ¥å§!å¹´è½»äºº!<del>è£…é€¼</del>HTTPSæ—¶ä»£åˆ°äº†<br><a id="more"></a></p><h3 id="å…³äºhttps"><a href="#å…³äºhttps" class="headerlink" title="å…³äºhttps"></a>å…³äºhttps</h3><p><a href="https://en.wikipedia.org/wiki/HTTPS" target="_blank" rel="external">ä»€ä¹ˆæ˜¯HTTPS ?</a></p><blockquote><p>é€šä¿—çš„è®²ï¼šéšç§å®‰å…¨</p></blockquote><h3 id="GitHub-page-ä½¿ç”¨https"><a href="#GitHub-page-ä½¿ç”¨https" class="headerlink" title="GitHub page ä½¿ç”¨https"></a>GitHub page ä½¿ç”¨https</h3><p>ä¸»è¦æ˜¯ä½¿ç”¨ <a href="https://kloudsec.com/github-pages/new" target="_blank" rel="external">Kloudsec</a></p><ol><li>ç”³è¯·è´¦å·ï¼Œå¡«å…¥å¾…è§£æçš„åŸŸå</li><li>æŠŠ<code>DNSè§£æ</code>è½¬åˆ°è¯¥ç½‘ç«™æä¾›çš„åœ°å€</li><li>éªŒè¯é‚®ç®±å¹¶å¡«å…¥<code>GitHub page IP</code></li><li>å¼€å¯ç›¸å…³æœåŠ¡</li></ol><ul><li><code>PROTECTION</code> -&gt; <code>SSL Encryption</code></li><li><code>PLUGIN STORE</code><br><a href="https://hocg.in/">æˆå“</a><br><strong>NOTE: 2016å¹´09æœˆ04æ—¥ å‘ç°<code>Kloudsec</code>å·²ç»å€’é—­äº†</strong><br>ç°åœ¨ä½¿ç”¨çš„æ˜¯<a href="https://www.cloudflare.com" target="_blank" rel="external">Cloudflare</a><br>å…·ä½“ä½¿ç”¨æ³¨å†Œæ—¶æœ‰å¼•å¯¼æ•™ç¨‹(<code>éœ€æŠŠåŸŸåè§£ææœåŠ¡å™¨æ”¹ä¸ºcloudflareçš„</code>).</li></ul><h3 id="è‡ªå·±æ­å»ºçš„blog"><a href="#è‡ªå·±æ­å»ºçš„blog" class="headerlink" title="è‡ªå·±æ­å»ºçš„blog"></a>è‡ªå·±æ­å»ºçš„blog</h3><p>å…è´¹çš„ä½¿ç”¨ <a href="https://www.startssl.com/" target="_blank" rel="external">Startssl</a><br><a href="https://blog.lutty.me/" target="_blank" rel="external">æˆå“</a></p><h3 id="TOMCAT-é…ç½®httpsç¯å¢ƒ"><a href="#TOMCAT-é…ç½®httpsç¯å¢ƒ" class="headerlink" title="TOMCAT é…ç½®httpsç¯å¢ƒ"></a>TOMCAT é…ç½®httpsç¯å¢ƒ</h3><p><a href="http://blog.csdn.net/small____fish/article/details/8214938" target="_blank" rel="external"> keytool æ•™ç¨‹</a><br>å¤–ç½‘å›è°ƒå¯å°è¯•ä½¿ç”¨<a href="http://www.nat123.com" target="_blank" rel="external">nat123</a></p><h3 id="è‡ªå·±VPSä½¿ç”¨HTTPS"><a href="#è‡ªå·±VPSä½¿ç”¨HTTPS" class="headerlink" title="è‡ªå·±VPSä½¿ç”¨HTTPS"></a>è‡ªå·±VPSä½¿ç”¨<code>HTTPS</code></h3><p><a href="https://laravel-china.org/topics/2766" target="_blank" rel="external">Letâ€™s Encrypt</a></p><p>:)</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™æ˜¯ä¸€ç¯‡å…³äº&lt;code&gt;HTTPS&lt;/code&gt;çš„æ—¥å¸¸ä½¿ç”¨è®°å½•ï¼Œä¾‹å¦‚:åšå®¢HTTPSåŒ–~&lt;br&gt;æ¥å§!å¹´è½»äºº!&lt;del&gt;è£…é€¼&lt;/del&gt;HTTPSæ—¶ä»£åˆ°äº†&lt;br&gt;
    
    </summary>
    
      <category term="Server" scheme="https://hocg.in/categories/Server/"/>
    
    
      <category term="HTTPS" scheme="https://hocg.in/tags/HTTPS/"/>
    
  </entry>
  
  <entry>
    <title>ES6 æ–°ç‰¹æ€§</title>
    <link href="https://hocg.in/2016/05/10/ES6-%E6%96%B0%E7%89%B9%E6%80%A7/"/>
    <id>https://hocg.in/2016/05/10/ES6-æ–°ç‰¹æ€§/</id>
    <published>2016-05-10T02:28:29.000Z</published>
    <updated>2017-09-22T12:53:46.000Z</updated>
    
    <content type="html"><![CDATA[<p>NodeJS çš„æ„å»ºå·¥å…·å±‚å‡ºä¸ç©·ï¼Œå› æ­¤äº†è§£ä¸€ä¸‹é™ˆæ—§äº‹ç‰©çš„è¿›å±•ã€‚<br><a id="more"></a></p><h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>es6: ecmscript6</p><h1 id="æ–°ç‰¹æ€§"><a href="#æ–°ç‰¹æ€§" class="headerlink" title="æ–°ç‰¹æ€§"></a>æ–°ç‰¹æ€§</h1><ul><li>let å—çº§ä½œç”¨åŸŸ, <code>æ³¨: es5ä¸­varå£°æ˜çš„ä¸Šå…¨å±€èŒƒå›´çš„</code></li><li>const å¸¸é‡</li><li>class ç±»</li><li>extends ç»§æ‰¿</li><li>super æŒ‡ä»£çˆ¶ç±»çš„å®ä¾‹</li><li><p>arrow functions è¯­æ³•ç³–</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¯­æ³•: (å‚æ•°) =&gt; &#123;æ‰§è¡Œä»£ç &#125;</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params">i</span>)</span>&#123; <span class="keyword">return</span> i + <span class="number">1</span>; &#125; <span class="comment">//ES5</span></span><br><span class="line">(i) =&gt; &#123; i + <span class="number">1</span> &#125; <span class="comment">//ES6</span></span><br></pre></td></tr></table></figure></li><li><p>template string æ¨¡ç‰ˆå­—ç¬¦  </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¯­æ³•: `$&#123;å˜é‡&#125;`</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"> <span class="keyword">const</span> name = <span class="string">'hocgin'</span>;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">`this is template strnig</span></span><br><span class="line"><span class="string"> &lt;b&gt;<span class="subst">$&#123;name&#125;</span>&lt;/b&gt;</span></span><br><span class="line"><span class="string"> `</span>);</span><br></pre></td></tr></table></figure></li><li><p>destructuring   </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> cat = <span class="string">'ken'</span></span><br><span class="line"><span class="keyword">let</span> dog = <span class="string">'lili'</span></span><br><span class="line"><span class="keyword">let</span> zoo = &#123;cat, dog&#125;</span><br><span class="line"><span class="built_in">console</span>.log(zoo)  <span class="comment">//Object &#123;cat: "ken", dog: "lili"&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> dog = &#123;<span class="attr">type</span>: <span class="string">'animal'</span>, <span class="attr">many</span>: <span class="number">2</span>&#125;</span><br><span class="line"><span class="keyword">let</span> &#123; type, many&#125; = dog</span><br><span class="line"><span class="built_in">console</span>.log(type, many)   <span class="comment">//animal 2</span></span><br></pre></td></tr></table></figure></li><li><p>default é»˜è®¤å€¼</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¯­æ³•:</span></span><br><span class="line"><span class="comment"> * function &lt;method name&gt;(param = &lt;default value&gt;) &#123;</span></span><br><span class="line"><span class="comment"> *    ...</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">animal</span>(<span class="params">type = <span class="string">'cat'</span></span>)</span>&#123;</span><br><span class="line">     <span class="built_in">console</span>.log(type)</span><br><span class="line"> &#125;</span><br><span class="line"> animal();</span><br></pre></td></tr></table></figure></li><li><p>rest å¯å˜å‚æ•°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¯­æ³•:</span></span><br><span class="line"><span class="comment"> * function &lt;method name&gt;(...params) &#123;</span></span><br><span class="line"><span class="comment"> *    ...</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">animals</span>(<span class="params">...types</span>)</span>&#123;</span><br><span class="line">     <span class="built_in">console</span>.log(types)</span><br><span class="line"> &#125;</span><br><span class="line"> animals(<span class="string">'cat'</span>, <span class="string">'dog'</span>, <span class="string">'fish'</span>);</span><br></pre></td></tr></table></figure></li><li><p>import export æ¨¡å—è®¾è®¡</p><blockquote><p>es6 æŠŠä¸€ä¸ªæ–‡ä»¶å½“ä½œä¸€ä¸ªæ¨¡å—, ä¸€ä¸ªæ¨¡å—å¯<code>export</code>å¤šä¸ªå˜é‡, å› æ­¤ä¸åŒçš„<code>export</code><br>å¯å¯¹åº”ä¸åŒçš„<code>import</code></p></blockquote></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å‡ºæ¨¡å—</span></span><br><span class="line"><span class="keyword">export</span> animal</span><br><span class="line"><span class="comment">// å¯¼å…¥æ¨¡å— - å˜é‡ä¸º animal</span></span><br><span class="line"><span class="keyword">import</span> animal <span class="keyword">from</span> <span class="string">'./content'</span></span><br><span class="line"><span class="comment">//--------------------</span></span><br><span class="line"><span class="comment">// å¯¼å‡ºæ¨¡å—</span></span><br><span class="line"><span class="keyword">export</span> &#123;dog, cat&#125;</span><br><span class="line"><span class="comment">// å¯¼å…¥æ¨¡å— - å˜é‡ä¸º [dog, cat]</span></span><br><span class="line"><span class="keyword">import</span> &#123;dog, cat&#125; <span class="keyword">from</span> <span class="string">'./content'</span></span><br><span class="line"><span class="comment">//--------------------</span></span><br><span class="line"><span class="keyword">export</span> &#123;dog, cat&#125;</span><br><span class="line"><span class="comment">// å…¨éƒ¨å¯¼å…¥</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> animal <span class="keyword">from</span> <span class="string">'./content'</span></span><br><span class="line"><span class="comment">// or</span></span><br><span class="line"><span class="built_in">module</span> animal form <span class="string">'./content'</span></span><br><span class="line"><span class="comment">//--------------------</span></span><br><span class="line"><span class="comment">// é»˜è®¤å¯¼å‡º, ä¸€ä¸ªæ¨¡å—åªèƒ½ä½¿ç”¨ export default ä¸€æ¬¡</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="string">'dog dog'</span></span><br><span class="line"><span class="keyword">import</span> animal <span class="keyword">from</span> <span class="string">'./content'</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;NodeJS çš„æ„å»ºå·¥å…·å±‚å‡ºä¸ç©·ï¼Œå› æ­¤äº†è§£ä¸€ä¸‹é™ˆæ—§äº‹ç‰©çš„è¿›å±•ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="Coder" scheme="https://hocg.in/categories/Coder/"/>
    
    
      <category term="Tips" scheme="https://hocg.in/tags/Tips/"/>
    
      <category term="NodeJS" scheme="https://hocg.in/tags/NodeJS/"/>
    
      <category term="Ubuntu" scheme="https://hocg.in/tags/Ubuntu/"/>
    
  </entry>
  
  <entry>
    <title>ç»¿åŒ–NodeJS for linuxç‰ˆ</title>
    <link href="https://hocg.in/2016/04/25/%E7%BB%BF%E5%8C%96nodejs-for-linux%E7%89%88/"/>
    <id>https://hocg.in/2016/04/25/ç»¿åŒ–nodejs-for-linuxç‰ˆ/</id>
    <published>2016-04-25T01:38:49.000Z</published>
    <updated>2016-08-27T05:35:32.000Z</updated>
    
    <content type="html"><![CDATA[<p>èµ·å› ï¼Œä¸ºäº†æ–¹ä¾¿hexoå‘å¸ƒåšå®¢ï¼Œæ‰€ä»¥æƒ³æŠŠNodeJSç»¿åŒ–åœ¨Uç›˜ä¸Š..<br>è°å«ç½‘ä¸Šåªæœ‰winç‰ˆçš„å‘¢ï¼è‡ªå·±ç èµ·æ¥ï½<br>ç»¿åŒ– o(â•¯â–¡â•°)o<br><a id="more"></a></p><h2 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Green4nodeJS</span><br><span class="line">â”œâ”€â”€ hocgin.github.io // githubåšå®¢ç›®å½•</span><br><span class="line">â”œâ”€â”€ node // nodejsåŸºæœ¬ç›®å½•</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ node-linux // nodejsæºæ–‡ä»¶</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ cache // åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ï¼Œå³å¯</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ init-module // åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ï¼Œå³å¯</span><br><span class="line">â”‚Â Â  â””â”€â”€ userconfig // åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ï¼Œå³å¯</span><br><span class="line">â””â”€â”€ init.sh // åˆå§‹åŒ–shellæ–‡ä»¶ *é‡è¦</span><br></pre></td></tr></table></figure><h2 id="åˆå§‹åŒ–æ–‡ä»¶"><a href="#åˆå§‹åŒ–æ–‡ä»¶" class="headerlink" title="åˆå§‹åŒ–æ–‡ä»¶"></a>åˆå§‹åŒ–æ–‡ä»¶</h2><blockquote><p>ä¸»è¦æ˜¯åŠ è½½é…ç½®ç¯å¢ƒï¼Œåˆå§‹åŒ–å˜é‡</p></blockquote><p><code>init.sh</code> å†…å®¹<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Author: hocgin@gmail.com</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -------------Use--------------</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">source</span> init.sh or . init.sh</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ------------------------------</span></span><br><span class="line">NOW_PATH=$(cd "$(dirname "$0")"; pwd)</span><br><span class="line">NODE_NAME="node-linux"</span><br><span class="line">NODE_HOME=$NOW_PATH"/node/"$NODE_NAME</span><br><span class="line">NODE_PATH=$NODE_HOME"/bin"</span><br><span class="line">NPM_PATH=$NODE_HOME"/lib/node_modules/npm/bin"</span><br><span class="line">sudo chmod +x -R $NPM_PATH"/."</span><br><span class="line">export PATH=$PATH:$NODE_PATH:$NPM_PATH</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="string">"/home/hocgin/.npmrc"</span></span></span><br><span class="line">npm set userconfig $NOW_PATH"/node/userconfig"</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="string">"/home/hocgin/.npm-init.js"</span></span></span><br><span class="line">npm set init-module $NOW_PATH"/node/init-module"</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="string">"/home/hocgin/.npm"</span></span></span><br><span class="line">npm set cache  $NOW_PATH"/node/cache"</span><br></pre></td></tr></table></figure></p><p>ä¿®æ”¹ <code>/node/node-linux/lib/node_modules/npm/bin/npm</code> æ–‡ä»¶<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> NPM_CLI_JS=<span class="string">"<span class="variable">$basedir</span>/node_modules/npm/bin/npm-cli.js"</span></span></span><br><span class="line">NPM_CLI_JS="$basedir/npm-cli.js"</span><br></pre></td></tr></table></figure></p><p>å®Œæˆ</p><h2 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">source init.sh</span><br><span class="line"><span class="meta">#</span><span class="bash"> Or</span></span><br><span class="line">. init.sh</span><br><span class="line"></span><br><span class="line">cd hocgin.github.io</span><br><span class="line"><span class="meta">#</span><span class="bash"> å°½æƒ…hexoå§</span></span><br></pre></td></tr></table></figure><p><code>æ³¨: å®‰è£…moduleæ—¶è¯·åŠ ä¸Š -g</code></p><p>End</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;èµ·å› ï¼Œä¸ºäº†æ–¹ä¾¿hexoå‘å¸ƒåšå®¢ï¼Œæ‰€ä»¥æƒ³æŠŠNodeJSç»¿åŒ–åœ¨Uç›˜ä¸Š..&lt;br&gt;è°å«ç½‘ä¸Šåªæœ‰winç‰ˆçš„å‘¢ï¼è‡ªå·±ç èµ·æ¥ï½&lt;br&gt;ç»¿åŒ– o(â•¯â–¡â•°)o&lt;br&gt;
    
    </summary>
    
      <category term="Coder" scheme="https://hocg.in/categories/Coder/"/>
    
    
      <category term="Tips" scheme="https://hocg.in/tags/Tips/"/>
    
      <category term="NodeJS" scheme="https://hocg.in/tags/NodeJS/"/>
    
      <category term="Ubuntu" scheme="https://hocg.in/tags/Ubuntu/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨Mavenä¸‹è½½jaråŒ… linuxç‰ˆ</title>
    <link href="https://hocg.in/2016/04/25/%E4%BD%BF%E7%94%A8Maven%E4%B8%8B%E8%BD%BDjar%E5%8C%85-linux%E7%89%88/"/>
    <id>https://hocg.in/2016/04/25/ä½¿ç”¨Mavenä¸‹è½½jaråŒ…-linuxç‰ˆ/</id>
    <published>2016-04-25T01:38:49.000Z</published>
    <updated>2017-02-04T05:43:57.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™åªæ˜¯å­¦ä¹ Shellçš„å°è„šæœ¬, ç»ƒæ‰‹å·¥å…·ç½¢äº†.. æŠ˜è…¾!æŠ˜è…¾å•Š<br><a id="more"></a></p><h2 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Green4nodeJS</span><br><span class="line">â”œâ”€â”€ down.sh // ä¸‹è½½shellï¼Œo(â•¯â–¡â•°)oå…¶å®å°±æ˜¯ä¸€æ¡shell</span><br><span class="line">â””â”€â”€ pom.xml // æ­£å¸¸mavené…ç½®</span><br></pre></td></tr></table></figure><h2 id="æ–‡ä»¶å†…å®¹"><a href="#æ–‡ä»¶å†…å®¹" class="headerlink" title="æ–‡ä»¶å†…å®¹"></a>æ–‡ä»¶å†…å®¹</h2><p><code>down.sh</code> å†…å®¹ï¼š<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Author: hocgin@gmail.com</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -------------Use--------------</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> sh down.sh</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ------------------------------</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> è¿è¡Œpom.xml ä¸‹è½½jar</span></span><br><span class="line">NOW_PATH=$(cd "$(dirname "$0")"; pwd)</span><br><span class="line">POM_XML=$NOW_PATH"/pom.xml"</span><br><span class="line">TARGET_DIR=$NOW_PATH"/target"</span><br><span class="line">mvn -f $POM_XML dependency:copy-dependencies</span><br><span class="line">sudo chmod -R 777 $TARGET_DIR</span><br></pre></td></tr></table></figure></p><p><code>pom.xml</code> å†…å®¹ï¼š</p><blockquote><p>æ­£å¸¸mavençš„pom.xmlå†…å®¹</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- é¡¹ç›®çš„åç§° start --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>temp.download<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>temp-download<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é¡¹ç›®çš„åç§° end --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- è¦ä¸‹è½½çš„jar start --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.json<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>json<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>20160212<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!-- è¦ä¸‹è½½çš„jar end --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å®Œæˆ</p><h2 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">source init.sh</span><br><span class="line"><span class="meta">#</span><span class="bash"> Or</span></span><br><span class="line">. init.sh</span><br><span class="line"></span><br><span class="line">cd hocgin.github.io</span><br><span class="line"><span class="meta">#</span><span class="bash"> å°½æƒ…hexoå§</span></span><br></pre></td></tr></table></figure><p>End</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™åªæ˜¯å­¦ä¹ Shellçš„å°è„šæœ¬, ç»ƒæ‰‹å·¥å…·ç½¢äº†.. æŠ˜è…¾!æŠ˜è…¾å•Š&lt;br&gt;
    
    </summary>
    
      <category term="Coder" scheme="https://hocg.in/categories/Coder/"/>
    
    
      <category term="Tips" scheme="https://hocg.in/tags/Tips/"/>
    
      <category term="Maven" scheme="https://hocg.in/tags/Maven/"/>
    
      <category term="Shell" scheme="https://hocg.in/tags/Shell/"/>
    
  </entry>
  
  <entry>
    <title>hexo åŠŸèƒ½æ‰©å±•</title>
    <link href="https://hocg.in/2016/03/26/hexo-%E5%8A%9F%E8%83%BD%E6%89%A9%E5%B1%95/"/>
    <id>https://hocg.in/2016/03/26/hexo-åŠŸèƒ½æ‰©å±•/</id>
    <published>2016-03-26T05:44:28.000Z</published>
    <updated>2018-10-11T13:39:15.392Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™æ˜¯è‡ªå·±å‚ç…§hexoè¿›è¡Œç§äººè®¢åˆ¶çš„æ•™ç¨‹ï¼Œä¹Ÿæ˜¯å®æˆ˜çš„è®°å½•ï¼Œæ„Ÿè§‰è¿˜ä¸é”™ï¼Œæˆå“å¯å‚ç…§æœ¬åšå®¢.. ï¼ˆå¦‚æœæˆ‘ä»¥åæ²¡æ¢çš„è¯ğŸ˜¶ï¼‰<br><a id="more"></a></p><h2 id="é¡»çŸ¥"><a href="#é¡»çŸ¥" class="headerlink" title="é¡»çŸ¥"></a>é¡»çŸ¥</h2><p><code>ç«™ç‚¹ç›®å½•</code>: /<br><code>ä¸»é¢˜ç›®å½•</code>: /themes/[ä¸»é¢˜å]<br><code>ä¸»é¢˜é…ç½®æ–‡ä»¶</code>: /themes/[ä¸»é¢˜å]/_config.yml<br><code>ç«™ç‚¹é…ç½®æ–‡ä»¶</code>: /_config.yml  </p><h2 id="æ·»åŠ å¾®ä¿¡å…¬ä¼—å·äºŒç»´ç "><a href="#æ·»åŠ å¾®ä¿¡å…¬ä¼—å·äºŒç»´ç " class="headerlink" title="æ·»åŠ å¾®ä¿¡å…¬ä¼—å·äºŒç»´ç "></a>æ·»åŠ å¾®ä¿¡å…¬ä¼—å·äºŒç»´ç </h2><p>é¦–å…ˆï¼Œæ‰“å¼€<code>ä¸»é¢˜ç›®å½•</code>ä¸‹çš„ <code>layout/_macro/post.swig</code><br>ç„¶åï¼Œæ‰¾åˆ°èŠ‚ç‚¹<code>footer</code>åŠ å…¥ä»¥ä¸‹ä»£ç <br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">!</span> <span class="attr">--</span> æ·»åŠ å¾®ä¿¡å›¾æ ‡ <span class="attr">start</span> <span class="attr">--</span>&gt;</span></span><br><span class="line">      &#123;% if theme.wechat_subscriber.enable %&#125;</span><br><span class="line">        &#123;% if !is_home() %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"hocgin-container"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"folder"</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"paper"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">src</span>=<span class="string">"&#123;&#123; theme.wechat_subscriber.qcode &#125;&#125;"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"hocgin-description"</span>&gt;</span>&#123;&#123; theme.wechat_subscriber.description &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        &#123;% endif %&#125;</span><br><span class="line">      &#123;% endif %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">!</span> <span class="attr">--</span> æ·»åŠ å¾®ä¿¡å›¾æ ‡ <span class="attr">end</span> <span class="attr">--</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>å…¶æ¬¡ï¼Œåˆ°<code>ä¸»é¢˜ç›®å½•</code>ä¸‹çš„<code>source/css</code>åˆ›å»ºæ–‡ä»¶å¤¹<code>_hocgin</code>å¹¶åœ¨å®ƒä¹‹ä¸‹åˆ›å»ºcssæ–‡ä»¶<code>customize-hocgin.css</code>ä»¥ä¸‹æ˜¯æ–‡ä»¶å†…å®¹ï¼š<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.hocgin-container</span> *, *<span class="selector-pseudo">:before</span>, *<span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.hocgin-container</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.hocgin-container</span> &gt; <span class="selector-class">.folder</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">220px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">180px</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="built_in">calc</span>(50% - 110px);</span><br><span class="line">  <span class="attribute">top</span>: <span class="built_in">calc</span>(70% - 90px);</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.hocgin-container</span> &gt; <span class="selector-class">.folder</span> &gt; <span class="selector-class">.paper</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="built_in">calc</span>(50% - 111px);</span><br><span class="line">  <span class="attribute">left</span>: <span class="built_in">calc</span>(50% - 100px);</span><br><span class="line">  <span class="attribute">transition</span>: top <span class="number">0.5s</span>, opacity <span class="number">0.4s</span>;</span><br><span class="line">  <span class="attribute">font-family</span>: Verdana, Tahoma, sans-serif;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.1em</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">1em</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#644812</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fde1ab</span>;</span><br><span class="line">  <span class="attribute">-moz-box-shadow</span>: <span class="number">10px</span> <span class="number">10px</span> <span class="built_in">rgba</span>(0, 0, 0, 0.2);</span><br><span class="line">  <span class="attribute">-webkit-box-shadow</span>: <span class="number">10px</span> <span class="number">10px</span> <span class="built_in">rgba</span>(0, 0, 0, 0.2);</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">10px</span> <span class="number">10px</span> <span class="built_in">rgba</span>(0, 0, 0, 0.2);</span><br><span class="line">  <span class="attribute">-moz-border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">-webkit-border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.hocgin-container</span> &gt; <span class="selector-class">.folder</span><span class="selector-pseudo">:hover</span> &gt; <span class="selector-class">.paper</span> &#123;</span><br><span class="line">  <span class="attribute">top</span>: <span class="built_in">calc</span>(50% - 150px);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.hocgin-container</span> &gt; <span class="selector-class">.folder</span><span class="selector-class">.opened</span> &gt; <span class="selector-class">.paper</span> &#123;</span><br><span class="line">  <span class="attribute">top</span>: <span class="built_in">calc</span>(-250px);</span><br><span class="line">  <span class="attribute">opacity</span>: .<span class="number">9</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.hocgin-description</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">4px</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä¿å­˜åï¼Œæ‰¾åˆ°<code>ä¸»é¢˜ç›®å½•</code>ä¸‹<code>source/css/main.styl</code><strong>(æ³¨ï¼šåˆ«çš„ä¸»é¢˜å¯èƒ½ä¸ä¸€æ ·)</strong> è¿½åŠ <br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// --------------------------------------------------</span><br><span class="line">@<span class="keyword">import</span> <span class="string">"_hocgin/customize-hocgin.css"</span>;</span><br></pre></td></tr></table></figure></p><p>æœ€åï¼Œä¿®æ”¹<code>ä¸»é¢˜é…ç½®æ–‡ä»¶</code> è¿½åŠ <br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># Customize args -- Hocgin</span><br><span class="line">wechat_subscriber:</span><br><span class="line">  enable: true</span><br><span class="line">  qcode: [url]</span><br><span class="line">  description: æ¬¢è¿æ‚¨æ‰«ä¸€æ‰«ä¸Šé¢çš„å¾®ä¿¡å…¬ä¼—å·ï¼Œè®¢é˜…æˆ‘çš„åšå®¢ï¼</span><br></pre></td></tr></table></figure></p><h3 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h3><p><a href="http://hocg.in">http://hocg.in</a></p><hr><h2 id="åº•éƒ¨åŠ å…¥æ‰“èµåŠŸèƒ½"><a href="#åº•éƒ¨åŠ å…¥æ‰“èµåŠŸèƒ½" class="headerlink" title="åº•éƒ¨åŠ å…¥æ‰“èµåŠŸèƒ½"></a>åº•éƒ¨åŠ å…¥æ‰“èµåŠŸèƒ½</h2><p>é¦–å…ˆï¼Œæ‰“å¼€<code>ä¸»é¢˜ç›®å½•</code>ä¸‹çš„ <code>layout/_macro/post.swig</code><br>ç„¶åï¼Œæ‰¾åˆ°èŠ‚ç‚¹<code>footer</code>åŠ å…¥ä»¥ä¸‹ä»£ç <br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">!</span> <span class="attr">--</span> æ·»åŠ æ‰“èµå›¾æ ‡ <span class="attr">start</span> <span class="attr">--</span>&gt;</span></span><br><span class="line">    &#123;% if theme.pay_money.enable %&#125;</span><br><span class="line">      &#123;% if !is_home() %&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"hocgin-money"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"money-reward"</span>&gt;</span></span><br><span class="line">    èµ</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"money-pay"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">src</span>=<span class="string">"&#123;&#123; theme.pay_money.weixin_qcode &#125;&#125;"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"money-pay"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">src</span>=<span class="string">"&#123;&#123; theme.pay_money.alipay_qcode &#125;&#125;"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">      &#123;% endif %&#125;</span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">!</span> <span class="attr">--</span> æ·»åŠ æ‰“èµå›¾æ ‡ <span class="attr">end</span> <span class="attr">--</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>å…¶æ¬¡ï¼Œåˆ°<code>ä¸»é¢˜ç›®å½•</code>ä¸‹çš„<code>source/css</code>åˆ›å»ºæ–‡ä»¶å¤¹<code>_hocgin</code>å¹¶åœ¨å®ƒä¹‹ä¸‹åˆ›å»ºcssæ–‡ä»¶<code>money-customize-hocgin.css</code>ä»¥ä¸‹æ˜¯æ–‡ä»¶å†…å®¹ï¼š<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.hocgin-money</span> *, *<span class="selector-pseudo">:before</span>, *<span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.hocgin-money</span> &gt; <span class="selector-class">.money-reward</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">2.4rem</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">4.6rem</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">4.6rem</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">4.6rem</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">-webkit-user-select</span>: none;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#f1b60e</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#fccd60</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">-webkit-gradient</span>(linear, left top, left bottom, color-stop(0, #fccd60), <span class="built_in">color-stop</span>(100%, #fbae12), <span class="built_in">color-stop</span>(100%, #2989d8), <span class="built_in">color-stop</span>(100%, #207cca));</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">-webkit-linear-gradient</span>(top, #fccd60 0, #fbae12 100%, #2989d8 100%, #207cca 100%);</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(to bottom, #fccd60 0, #fbae12 100%, #2989d8 100%, #207cca 100%);</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.hocgin-money</span> &gt; <span class="selector-class">.money-reward</span> &gt; <span class="selector-class">.money-pay</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">visibility</span>: hidden;</span><br><span class="line">    <span class="attribute">top</span>: <span class="built_in">calc</span>(50% - 100px);</span><br><span class="line">    <span class="attribute">left</span>: <span class="built_in">calc</span>(50% - 100px);</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">transition</span>: top <span class="number">0.5s</span>, opacity <span class="number">0.4s</span>;</span><br><span class="line">    <span class="attribute">font-family</span>: Verdana, Tahoma, sans-serif;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0.1em</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">1em</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#644812</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">-moz-box-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">1px</span> <span class="number">1px</span> <span class="number">#efefef</span>;</span><br><span class="line">    <span class="attribute">-webkit-box-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">1px</span> <span class="number">1px</span> <span class="number">#efefef</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">1px</span> <span class="number">1px</span> <span class="number">#efefef</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#e6e6e6</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.hocgin-money</span> &gt; <span class="selector-class">.money-reward</span><span class="selector-pseudo">:hover</span> &gt; <span class="selector-class">.money-pay</span> &#123;</span><br><span class="line">    <span class="attribute">visibility</span>: visible;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.hocgin-money</span> &gt; <span class="selector-class">.money-reward</span><span class="selector-pseudo">:hover</span> &gt; <span class="selector-class">.money-pay</span><span class="selector-pseudo">:nth-child(1)</span> &#123;</span><br><span class="line">    <span class="attribute">top</span>: <span class="built_in">calc</span>(50% - 250px);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.hocgin-money</span> &gt; <span class="selector-class">.money-reward</span><span class="selector-pseudo">:hover</span> &gt; <span class="selector-class">.money-pay</span><span class="selector-pseudo">:nth-child(2)</span> &#123;</span><br><span class="line">    <span class="attribute">top</span>: <span class="built_in">calc</span>(50% + 50px);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä¿å­˜åï¼Œæ‰¾åˆ°<code>ä¸»é¢˜ç›®å½•</code>ä¸‹<code>source/css/main.styl</code><strong>(æ³¨ï¼šåˆ«çš„ä¸»é¢˜å¯èƒ½ä¸ä¸€æ ·)</strong> è¿½åŠ <br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// --------------------------------------------------</span><br><span class="line">@<span class="keyword">import</span> <span class="string">"_hocgin/money-customize-hocgin.css"</span>;</span><br></pre></td></tr></table></figure></p><p>æœ€åï¼Œä¿®æ”¹<code>ä¸»é¢˜é…ç½®æ–‡ä»¶</code> è¿½åŠ <br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># Customize args -- Hocgin</span><br><span class="line">pay_money:</span><br><span class="line">  enable: true</span><br><span class="line">  weixin_qcode: http://cdn.hocgin.top/img/un/ali.pay.500.png</span><br><span class="line">  alipay_qcode: http://cdn.hocgin.top/img/un/ali.pay.500.png</span><br></pre></td></tr></table></figure></p><h3 id="å·²çŸ¥bug"><a href="#å·²çŸ¥bug" class="headerlink" title="å·²çŸ¥bug"></a>å·²çŸ¥bug</h3><ol><li>å› ä¸ºæ²¡ä½¿ç”¨js(ä¹Ÿä¸æƒ³ä½¿ç”¨)ï¼Œå®‰å“è®¾å¤‡éœ€è¦<code>é•¿æŒ‰</code>æ‰èƒ½å‡ºç°æ•ˆæœï¼Œè€Œè‹¹æœè®¾å¤‡æ— æ³•æ˜¾ç¤ºæ•ˆæœï¼Œæ¬¢è¿å¤§å®¶ä¿®å¤ã€‚â”Œ|*Â´âˆ€ï½€|â”˜</li></ol><h3 id="æ•ˆæœ-1"><a href="#æ•ˆæœ-1" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h3><p><a href="http://hocg.in">http://hocg.in</a></p><hr><h2 id="é˜²æ­¢ç™¾åº¦è½¬ç "><a href="#é˜²æ­¢ç™¾åº¦è½¬ç " class="headerlink" title="é˜²æ­¢ç™¾åº¦è½¬ç "></a>é˜²æ­¢ç™¾åº¦è½¬ç </h2><p><code>ä¸»é¢˜ç›®å½•</code>ä¸‹ <code>\layout\_partials\head.swig</code><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">â€Cache-Controlâ€</span> <span class="attr">content</span>=<span class="string">â€no-transformâ€</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">â€Cache-Controlâ€</span> <span class="attr">content</span>=<span class="string">â€no-siteappâ€</span> /&gt;</span></span><br></pre></td></tr></table></figure></p><hr><h2 id="æ·»åŠ æœç´¢åŠŸèƒ½-2016å¹´06æœˆ04æ—¥"><a href="#æ·»åŠ æœç´¢åŠŸèƒ½-2016å¹´06æœˆ04æ—¥" class="headerlink" title="æ·»åŠ æœç´¢åŠŸèƒ½ 2016å¹´06æœˆ04æ—¥"></a>æ·»åŠ æœç´¢åŠŸèƒ½ <code>2016å¹´06æœˆ04æ—¥</code></h2><ol><li>å®‰è£…hexoæ•°æ®ç”Ÿæˆæ’ä»¶</li></ol><blockquote><p>Jsonæ ¼å¼çš„ï¼Œæœ‰åˆ©äºè‡ªä¸»ç¼–å†™(æš‚æ—¶åªä»‹ç»åŸç”Ÿæ”¯æŒçš„ï¼Œå¦‚æœæƒ³è‡ªå·±ç¼–å†™ä¸‹é¢çš„å¯ä»¥ä¸ç”¨çœ‹)</p></blockquote><p><a href="https://github.com/alexbruno/hexo-generator-json-content" target="_blank" rel="external">hexo-generator-json-content</a><br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> npm i -S hexo-generator-json-content</span><br></pre></td></tr></table></figure></p><blockquote><p>NexT åŸç”Ÿæ”¯æŒï¼Œä¸æƒ³æŠ˜è…¾çš„å¯ä»¥ä½¿ç”¨</p></blockquote><p><a href="https://github.com/PaicHyperionDev/hexo-generator-search" target="_blank" rel="external">hexo-generator-search</a><br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> npm install hexo-generator-search --save</span><br></pre></td></tr></table></figure></p><p><code>ç«™ç‚¹é…ç½®æ–‡ä»¶</code> æ–°å¢<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># Search</span><br><span class="line">search:</span><br><span class="line">  path: search.xml</span><br><span class="line">  field: post</span><br></pre></td></tr></table></figure></p><p>OKï¼</p><blockquote><p>å¾…ç»­ing</p></blockquote><hr><h2 id="ç»“åˆæœåŠ¡å™¨ï¼Œå®ç°è‡ªåŠ¨éƒ¨ç½²"><a href="#ç»“åˆæœåŠ¡å™¨ï¼Œå®ç°è‡ªåŠ¨éƒ¨ç½²" class="headerlink" title="ç»“åˆæœåŠ¡å™¨ï¼Œå®ç°è‡ªåŠ¨éƒ¨ç½²"></a>ç»“åˆæœåŠ¡å™¨ï¼Œå®ç°è‡ªåŠ¨éƒ¨ç½²</h2><hr><h2 id="å¤šè¯´cssç¾åŒ–"><a href="#å¤šè¯´cssç¾åŒ–" class="headerlink" title="å¤šè¯´cssç¾åŒ–"></a>å¤šè¯´cssç¾åŒ–</h2>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™æ˜¯è‡ªå·±å‚ç…§hexoè¿›è¡Œç§äººè®¢åˆ¶çš„æ•™ç¨‹ï¼Œä¹Ÿæ˜¯å®æˆ˜çš„è®°å½•ï¼Œæ„Ÿè§‰è¿˜ä¸é”™ï¼Œæˆå“å¯å‚ç…§æœ¬åšå®¢.. ï¼ˆå¦‚æœæˆ‘ä»¥åæ²¡æ¢çš„è¯ğŸ˜¶ï¼‰&lt;br&gt;
    
    </summary>
    
      <category term="Web" scheme="https://hocg.in/categories/Web/"/>
    
    
      <category term="HTML5" scheme="https://hocg.in/tags/HTML5/"/>
    
      <category term="Hexo" scheme="https://hocg.in/tags/Hexo/"/>
    
      <category term="CSS3" scheme="https://hocg.in/tags/CSS3/"/>
    
  </entry>
  
  <entry>
    <title>å®‰è£…å®ŒUbuntuå,æˆ‘è¯¥åšä»€ä¹ˆ</title>
    <link href="https://hocg.in/2016/03/20/%E5%AE%89%E8%A3%85%E5%AE%8CUbuntu%E5%90%8E-%E6%88%91%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88/"/>
    <id>https://hocg.in/2016/03/20/å®‰è£…å®ŒUbuntuå-æˆ‘è¯¥åšä»€ä¹ˆ/</id>
    <published>2016-03-20T06:34:20.000Z</published>
    <updated>2018-10-11T13:39:15.380Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™æ˜¯ä¸€ç¯‡æˆ‘å¯¹Ubuntuæ—¥å¸¸ä½¿ç”¨å’Œä¼˜åŒ–çš„æ•´ç†ï¼Œä¹Ÿæ˜¯ä¸€ç¯‡å€Ÿé‰´å‰äººçš„æ–‡ç« ï¼Œè¿˜æœ‰ä¸€äº›å¯èƒ½ä¼šé‡åˆ°çš„ç–‘éš¾æ‚ç—…çš„â€œåæ–¹â€ï¼Œå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©:)<br><strong>update</strong>: æ–°å¢<code>undistract-me</code>ç»ˆç«¯å‘½ä»¤å®Œæˆæé†’æ’ä»¶<br><a id="more"></a></p><h2 id="yuanè·å–"><a href="#yuanè·å–" class="headerlink" title="yuanè·å–"></a>yuanè·å–</h2><p>å®˜æ–¹åˆ—è¡¨ï¼š <a href="http://wiki.ubuntu.org.cn/%E6%BA%90%E5%88%97%E8%A1%A8" target="_blank" rel="external">http://wiki.ubuntu.org.cn/%E6%BA%90%E5%88%97%E8%A1%A8</a><br>ç½‘æ˜“163ï¼š <a href="http://mirrors.163.com/.help/ubuntu.html" target="_blank" rel="external">http://mirrors.163.com/.help/ubuntu.html</a></p><hr><h2 id="ç§»é™¤"><a href="#ç§»é™¤" class="headerlink" title="ç§»é™¤"></a>ç§»é™¤</h2><blockquote><p>åˆ é™¤libreoffice</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get remove libreoffice-common</span><br></pre></td></tr></table></figure><blockquote><p>åˆ é™¤Amazonçš„é“¾æ¥s</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get remove unity-webapps-common</span><br></pre></td></tr></table></figure><blockquote><p>åˆ æ‰åŸºæœ¬ä¸ç”¨çš„è‡ªå¸¦è½¯ä»¶</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get remove thunderbird totem rhythmbox empathy brasero simple-scan gnome-mahjongg aisleriot gnome-mines cheese transmission-common gnome-orca webbrowser-app gnome-sudoku  landscape-client-ui-install</span><br><span class="line">sudo apt-get remove onboard deja-dup</span><br></pre></td></tr></table></figure><blockquote><p>shang xia zuoyou</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get remove vim-common</span><br><span class="line">sudo apt-get install vim</span><br></pre></td></tr></table></figure><hr><h2 id="å­—ä½“"><a href="#å­—ä½“" class="headerlink" title="å­—ä½“"></a>å­—ä½“</h2><p>monaco<code>è‹¹æœå­—ä½“</code><br><a href="https://github.com/cstrap/monaco-font" target="_blank" rel="external">https://github.com/cstrap/monaco-font</a><br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -kL https://raw.github.com/cstrap/monaco-font/master/install-font-ubuntu.sh | bash</span><br></pre></td></tr></table></figure></p><p>consolas<code>å¾®è½¯å­—ä½“</code></p><hr><h2 id="Gnome3"><a href="#Gnome3" class="headerlink" title="Gnome3"></a>Gnome3</h2><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><h4 id="1-å®‰è£…Gnome3æ¡Œé¢"><a href="#1-å®‰è£…Gnome3æ¡Œé¢" class="headerlink" title="1.å®‰è£…Gnome3æ¡Œé¢"></a>1.å®‰è£…Gnome3æ¡Œé¢</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£…</span></span><br><span class="line">sudo add-apt-repository ppa:gnome3-team/gnome3</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install ppa-purge</span><br><span class="line">sudo ppa-purge ppa:gnome3-team/gnome3</span><br><span class="line">sudo apt-get dist-upgrade</span><br><span class="line">sudo apt-get install gnome-themes-standard ubuntu-desktop gnome-shell</span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ é™¤</span></span><br><span class="line">sudo apt-get install ppa-purge</span><br><span class="line">sudo ppa-purge ppa:gnome3-team/gnome3</span><br></pre></td></tr></table></figure><h4 id="2-Gnome3ç³»ç»Ÿ"><a href="#2-Gnome3ç³»ç»Ÿ" class="headerlink" title="2.Gnome3ç³»ç»Ÿ"></a>2.Gnome3ç³»ç»Ÿ</h4><p><a href="https://ubuntugnome.org/download/" target="_blank" rel="external">ä¸‹è½½</a></p><h3 id="ä¸»é¢˜"><a href="#ä¸»é¢˜" class="headerlink" title="ä¸»é¢˜"></a>ä¸»é¢˜</h3><p><code>ä¸»é¢˜æ–‡ä»¶ä½ç½®ï¼š~/.themes æˆ– /usr/share/themes</code></p><h4 id="1-Paper"><a href="#1-Paper" class="headerlink" title="1.Paper"></a>1.Paper</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ä¸‹æ‹‰git</span></span><br><span class="line">git clone https://github.com/snwh/paper-gtk-theme.git</span><br><span class="line"><span class="meta">#</span><span class="bash"> è¿è¡Œå®‰è£…è„šæœ¬</span></span><br><span class="line">sh ./install-gtk-theme.sh</span><br></pre></td></tr></table></figure><h4 id="2-Numix-Circle"><a href="#2-Numix-Circle" class="headerlink" title="2.Numix-Circle"></a>2.Numix-Circle</h4><blockquote><p>å¾ˆèµ</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£…</span></span><br><span class="line">sudo apt-add-repository ppa:numix/ppa</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install numix-icon-theme-circle</span><br></pre></td></tr></table></figure><h3 id="æ’ä»¶æ”¯æŒ"><a href="#æ’ä»¶æ”¯æŒ" class="headerlink" title="æ’ä»¶æ”¯æŒ"></a>æ’ä»¶æ”¯æŒ</h3><blockquote><p>gnome-tweak-tool Gnome3çš„è°ƒèŠ‚è½¯ä»¶<br>å¯ç›´æ¥ç®¡ç†æ’ä»¶</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install gnome-tweak-tool</span><br></pre></td></tr></table></figure><p><code>æ’ä»¶ä¸‹è½½ç½‘ç«™: https://extensions.gnome.org/</code></p><ol><li>ä½¿ç”¨Chrome æ’ä»¶</li><li>ç³»ç»Ÿå®‰è£…chrome-gnome-shell</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:ne0sight/chrome-gnome-shell</span><br><span class="line"><span class="meta">#</span><span class="bash"> trusty</span></span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install chrome-gnome-shell</span><br></pre></td></tr></table></figure><p><strong>æ’ä»¶åˆ—è¡¨</strong></p><table><thead><tr><th>åç§°</th><th>æè¿°</th><th>æ¨è</th></tr></thead><tbody><tr><td>Autohide battery</td><td>å¯ä»¥åœ¨ç”µæ± å……æ»¡çš„æƒ…å†µä¸‹éšè—ç”µæ± å›¾æ ‡</td><td>æ¨è</td></tr><tr><td>Battery status</td><td>å¯ä»¥æ˜¾ç¤ºå½“å‰ç”µæ± ç”µé‡ä»¥åŠå¯ä»¥ä½¿ç”¨çš„æ—¶é—´</td><td>æ¨è</td></tr><tr><td>Dash to dock</td><td>åœ¨å±å¹•å·¦è¾¹æ˜¾ç¤ºä¸€ä¸ªå¿«é€Ÿå¯åŠ¨æ¡</td><td>æ¨è</td></tr><tr><td>Freon</td><td>æ˜¾ç¤ºå½“å‰ç£ç›˜ï¼Œæ˜¾å¡ï¼ŒCPUç­‰ç­‰æ¸©åº¦</td><td>ä¸æ¨èï¼Œæ¨èSysPeek</td></tr><tr><td>Lock Keys</td><td>æ˜¾ç¤ºå½“å‰çš„ Num Lock, Caps Lock çš„çŠ¶æ€</td><td>æ¨è</td></tr><tr><td>Refesh wifi connections</td><td>åœ¨ wifi åˆ—è¡¨ä¸Šæ˜¾ç¤ºä¸€ä¸ªåˆ·æ–°å›¾æ ‡</td><td>æ¨è</td></tr><tr><td>status title bar</td><td>è®²çŠ¶æ€æ¡ä¸Šçš„æ ‡é¢˜æ”¹ä¸ºå½“å‰çª—å£çš„æ ‡é¢˜</td><td>æ¨è</td></tr><tr><td>Coverflow Alt-Tab</td><td>ç±»ä¼¼WIN 7åˆ‡æ¢ç‰¹æ•ˆ</td><td>å¤ªæ˜¾çœ¼ï¼Œä¸æ¨è</td></tr><tr><td>OpenWeather</td><td>å¤©æ°”é¢„æŠ¥</td><td>æ¨è</td></tr><tr><td>NetSpeed</td><td>æ˜¾ç¤ºç½‘é€Ÿ</td><td>ä¸æ¨èï¼Œæ¨èSysPeek</td></tr><tr><td>system-monitor</td><td>æ˜¾ç¤ºå½“å‰ç³»ç»Ÿä¿¡æ¯</td><td>å¤ªæ˜¾çœ¼ï¼Œä¸æ¨è</td></tr><tr><td>Dynamic Top Bar</td><td>åœ¨å½“å‰æ²¡æœ‰æœ€å¤§åŒ–çª—å£æ—¶ä½¿é¡¶æ é€æ˜</td><td>æ¨è</td></tr><tr><td>Impatience</td><td>Gnome Shell åŠ¨ç”»æé€Ÿ</td><td>æ¨è</td></tr><tr><td>Better Volume Indicator</td><td>é€è¿‡é¼ æ ‡æ»šè½®æ“ä½œæ›´ä¾¿æ·åœ°è°ƒæ•´éŸ³é‡</td><td>æ¨è</td></tr><tr><td>Media player indicator</td><td>æ˜¾ç¤ºéŸ³ä¹æ’­æ”¾å™¨çš„çŠ¶æ€</td><td>æ¨è</td></tr><tr><td>Workspaces-to-dock</td><td>å°†å·¥ä½œåŒºè½¬å˜ä¸ºä¸€ä¸ªå¯è‡ªåŠ¨éšè—çš„åœé æ </td><td>æ¨è</td></tr><tr><td>Panel OSD</td><td>ä¿®æ”¹é€šçŸ¥æ˜¾ç¤ºä½ç½®</td><td>æ¨è</td></tr><tr><td>Clipboard Indicator</td><td>å‰ªè´´æ¿æŒ‡ç¤ºå™¨</td><td>æ¨è</td></tr><tr><td>Caffeine</td><td>ç¦æ­¢è‡ªåŠ¨æŒ‚èµ·æˆ–é”å±</td><td>æ¨è</td></tr><tr><td>Transmission Daemon Indicator</td><td>Transmissioné¢æ¿æŒ‡ç¤ºå™¨</td><td>æ¨èï¼Œéœ€è¦Transmission Daemon</td></tr><tr><td>Icon Hider</td><td>æ˜¾ç¤º/éšè—é¡¶æ å›¾æ ‡</td><td>æ¨è</td></tr><tr><td>Top Panel Workspace Scroll</td><td>åœ¨é¡¶æ ä¸Šæ»šåŠ¨é¼ æ ‡ä¸­é”®æ¥å¿«é€Ÿåˆ‡æ¢å·¥ä½œåŒºã€‚åœ¨topbaræŒ‰ä½shift+æ»šè½®</td><td>æ¨è</td></tr><tr><td>Drop Down Terminal</td><td>ç»ˆç«¯å¿«æ·æ–¹å¼</td><td>æ¨è</td></tr><tr><td>Windows Blur Effects</td><td>ç»™æœªæ¿€æ´»çš„çª—å£æ·»åŠ æ¨¡ç³Šæ•ˆæœ</td><td>ä¸æ¨è</td></tr><tr><td>Modern Calc</td><td>åŠŸèƒ½é½å…¨çš„è®¡ç®—å™¨æ‰©å±•</td><td>æ²¡æ‰¾åˆ°</td></tr><tr><td>EasyScreenCast</td><td>å½•å±å·¥å…·</td><td>æ¨è</td></tr><tr><td>Place status indicator</td><td>å¿«é€Ÿè®¿é—®ä¸€äº›æ–‡ä»¶å¤¹</td><td>æ¨èï¼Œæ²¡è£…ä¸Š</td></tr><tr><td>Removable drive menu</td><td>æ˜¾ç¤ºè¿æ¥åˆ°ç”µè„‘çš„usbè®¾å¤‡</td><td>æ¨è</td></tr><tr><td>User themes</td><td>ç”¨æ¥å¯ç”¨è‡ªå®šä¹‰çš„shellä¸»é¢˜</td><td>æ¨èï¼Œæ²¡è£…ä¸Š</td></tr><tr><td>Workspace indicator</td><td>åœ¨é¡¶æ æ˜¾ç¤ºå½“å‰ç¤ºå·¥ä½œåŒºçš„åºå·</td><td>æ¨è</td></tr><tr><td>touchpad-indicator</td><td>æ’å…¥é¼ æ ‡æ—¶è‡ªåŠ¨ä½¿è§¦æ‘¸æ¿å¤±æ•ˆ</td><td>æ¨è</td></tr></tbody></table><hr><h2 id="å£çº¸"><a href="#å£çº¸" class="headerlink" title="å£çº¸"></a>å£çº¸</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1.å®‰è£…archibold</span></span><br><span class="line">curl -L -O http://archibold.io/sh/archibold</span><br><span class="line">chmod +x archibold</span><br><span class="line">sudo mv archibold /usr/bin</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2.æ‰§è¡Œ</span></span><br><span class="line">archibold login-background [å£çº¸çš„ä½ç½®]</span><br></pre></td></tr></table></figure><p>æ­¤å¤–è¿˜å¯ä»¥è®©æ¡Œé¢å’Œé”å±ç•Œé¢ä½¿ç”¨åŠ¨æ€å£çº¸ï¼ŒåŠ¨æ€å£çº¸ç”±ä¸€ä¸ªxmlæ–‡ä»¶æ„æˆï¼Œå°±åƒè¿™æ ·ï¼š<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">background</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">starttime</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">year</span>&gt;</span>2011<span class="tag">&lt;/<span class="name">year</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">month</span>&gt;</span>11<span class="tag">&lt;/<span class="name">month</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">day</span>&gt;</span>24<span class="tag">&lt;/<span class="name">day</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hour</span>&gt;</span>7<span class="tag">&lt;/<span class="name">hour</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">minute</span>&gt;</span>00<span class="tag">&lt;/<span class="name">minute</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">second</span>&gt;</span>00<span class="tag">&lt;/<span class="name">second</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">starttime</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">static</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">duration</span>&gt;</span>3600.0<span class="tag">&lt;/<span class="name">duration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">file</span>&gt;</span>picture1.jpg<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">static</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">transition</span> <span class="attr">type</span>=<span class="string">"overlay"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">duration</span>&gt;</span>18000.0<span class="tag">&lt;/<span class="name">duration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">from</span>&gt;</span>picture1.jpg<span class="tag">&lt;/<span class="name">from</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">to</span>&gt;</span>/picture2.jpg<span class="tag">&lt;/<span class="name">to</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">static</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">duration</span>&gt;</span>18000.0<span class="tag">&lt;/<span class="name">duration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">file</span>&gt;</span>picture2.jpg<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">static</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">transition</span> <span class="attr">type</span>=<span class="string">"overlay"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">duration</span>&gt;</span>21600.0<span class="tag">&lt;/<span class="name">duration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">from</span>&gt;</span>picture2.jpg<span class="tag">&lt;/<span class="name">from</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">to</span>&gt;</span>picture1.jpg<span class="tag">&lt;/<span class="name">to</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">background</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>ç®€å•è§£é‡Šä»¥ä¸‹è¿™ä¸ªxmlæ–‡ä»¶çš„å«ä¹‰ï¼š</p><p><code>starttime</code>ï¼šè¿™ä¸ªéƒ¨åˆ†è§„å®šäº†å£çº¸åˆ‡æ¢èµ·å§‹æ—¶é—´ï¼Œè®¾ç½®æˆè¿‡å»çš„æŸä¸ªæ—¶é—´å³å¯(è®¾ç½®æˆ2020å¹´å°±è¦ç­‰åˆ°2020å¹´æ‰ä¼šæœ‰æ•ˆæœ)<br><code>static</code>ï¼šè¿™ä¸ªéƒ¨åˆ†è¡¨ç¤ºåœ¨durationè§„å®šçš„æ—¶é—´(ä»¥ç§’ä¸ºå•ä½)ä¸­å£çº¸éƒ½æ˜¯fileä¸­ç»™å®šçš„é‚£å¼ å›¾ç‰‡<br><code>transition</code>ï¼šè¿™ä¸ªéƒ¨åˆ†è¡¨ç¤ºåœ¨durationè§„å®šçš„æ—¶é—´å†…å£çº¸ä»fromä¸­çš„å›¾ç‰‡åˆ‡æ¢åˆ°toä¸­çš„å›¾ç‰‡ä½ å¯ä»¥æ·»åŠ ä»»æ„å¤šä¸ªstatic+transitionçš„ç»„åˆï¼Œåªéœ€è¦æœ€åä¸€ä¸ªtransitionåˆ‡æ¢å›æœ€åˆçš„staticé‚£å¼ å›¾ç‰‡å°±å¯ä»¥å¾ªç¯æ›´æ¢å£çº¸äº†ã€‚  </p><p>é‚£ä¹ˆå¦‚ä½•å¯ç”¨è¿™æ ·çš„xmlæ–‡ä»¶å‘¢ï¼Œå•å‡­ç³»ç»Ÿè®¾ç½®æ— æ³•åŠåˆ°ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨dconfç³»ç»Ÿé…ç½®ç¼–è¾‘å™¨ã€‚<br>é¦–å…ˆæ‰“å¼€dconfç¼–è¾‘å™¨ï¼Œå±•å¼€<code>orgâ€“gnomeâ€“desktopâ€“background</code>è¿™ä¸€é¡¹ï¼Œå¯ä»¥çœ‹åˆ°å…¶ä¸­çš„<code>picture-uri</code>ä¿®è¿™ä¸€é¡¹çš„é»˜è®¤å€¼æ˜¯<code>file:///usr/share/backgrounds/gnome/adwaita-timed.xml</code>ï¼Œè¿™ä¸ªå°±æ˜¯ä½ åˆšè£…å¥½æ¡Œé¢æ˜¯çš„é»˜è®¤å£çº¸å•¦ï¼Œå°†å…¶æ”¹æˆä½ çš„xmlæ–‡ä»¶å°±å¯ä»¥äº†ã€‚<br>é”å±ç•Œé¢çš„å£çº¸æ›´æ¢æ–¹æ³•ä¹Ÿä¸€æ ·ï¼Œåªä¸è¿‡æŠŠ<code>orgâ€“gnomeâ€“desktopâ€“background</code>æ”¹æˆ<code>orgâ€“gnomeâ€“desktopâ€“screensaver</code>è€Œå·²</p><hr><h2 id="è½¯ä»¶å®‰è£…"><a href="#è½¯ä»¶å®‰è£…" class="headerlink" title="è½¯ä»¶å®‰è£…"></a>è½¯ä»¶å®‰è£…</h2><h3 id="æŒ‡ä»¤å®‰è£…"><a href="#æŒ‡ä»¤å®‰è£…" class="headerlink" title="æŒ‡ä»¤å®‰è£…"></a>æŒ‡ä»¤å®‰è£…</h3><blockquote><p>å‘½ä»¤é¢æ¿å°æç¤º</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£…</span></span><br><span class="line">sudo apt update</span><br><span class="line">sudo apt install python3-dev python3-pip</span><br><span class="line">sudo -H pip3 install thefuck</span><br></pre></td></tr></table></figure><blockquote><p>ç§‘å­¦ä¸Šç½‘ Client-SS</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£…</span></span><br><span class="line">sudo add-apt-repository ppa:hzwhuang/ss-qt5</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install shadowsocks-qt5</span><br><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£… pip</span></span><br><span class="line">sudo pip install genpac</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¸‹è½½è‡ªåŠ¨ç¿»å¢™åˆ—è¡¨</span></span><br><span class="line">genpac -p "SOCKS5 127.0.0.1:1080" --gfwlist-proxy="SOCKS5 127.0.0.1:1080" --output="~/Documents/autoproxy.pac" --gfwlist-url="https://autoproxy-gfwlist.googlecode.com/svn/trunk/gfwlist.txt" --user-rule-from="user-rules.txt"</span><br></pre></td></tr></table></figure><p><strong>æ·»åŠ å¼€æœºå¯åŠ¨</strong><br>commandï¼š<code>/usr/bin/ss-qt5</code></p><blockquote><p>å±å¹•æˆªå›¾ Shutter</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£…</span></span><br><span class="line">sudo apt-get install Shutter</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ‰“å¼€</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æœç´¢ Shutter</span></span><br></pre></td></tr></table></figure><blockquote><p>éŸ³è§†é¢‘è§£ç  ubuntu-restricted extras</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£…</span></span><br><span class="line">sudo apt-get install ubuntu-restricted-extras</span><br></pre></td></tr></table></figure><blockquote><p>ç»ˆç«¯å‘½ä»¤æ‰§è¡Œå®Œæˆæé†’</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£…</span></span><br><span class="line">sudo apt-get install undistract-me</span><br><span class="line"><span class="meta">#</span><span class="bash"> é…ç½®</span></span><br><span class="line">vim ~/.bashrc</span><br><span class="line"><span class="meta">#</span><span class="bash"> æ–°å¢å¦‚ä¸‹ä¸¤è¡Œ</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> . /usr/share/undistract-me/long-running.bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> notify_when_long_running_commands_finish_install</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ç”Ÿæ•ˆ</span></span><br><span class="line">source ~/.bashrc</span><br><span class="line"><span class="meta">#</span><span class="bash"> æµ‹è¯•</span></span><br><span class="line">sleep 11</span><br></pre></td></tr></table></figure><blockquote><p>GNOME MPV ä»£æ›¿VLCæ’­æ”¾å™¨</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£…</span></span><br><span class="line">sudo add-apt-repository ppa:xuzhen666/gnome-mpv</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install gnome-mpv</span><br></pre></td></tr></table></figure><blockquote><p>è§†é¢‘æ’­æ”¾ VLCæ’­æ”¾å™¨</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£…</span></span><br><span class="line">sudo add-apt-repository ppa:videolan/master-daily</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install vlc</span><br><span class="line"><span class="meta">#</span><span class="bash"> ä½¿ç”¨</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æœç´¢ vlc</span></span><br></pre></td></tr></table></figure><blockquote><p>Grubå¼•å¯¼ Grub Customizer<br>å¯é…ç½®å¯åŠ¨ç•Œé¢ï¼Œå¯åŠ¨é¡¹ç­‰</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£…</span></span><br><span class="line">sudo add-apt-repository ppa:danielrichter2007/grub-customizer</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install grub-customizer</span><br><span class="line"><span class="meta">#</span><span class="bash"> ä½¿ç”¨</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æœç´¢ Grub Customizer</span></span><br></pre></td></tr></table></figure><blockquote><p>Office WPS</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£…</span></span><br><span class="line">sudo apt-get install wps-office</span><br></pre></td></tr></table></figure><blockquote><p>[å°æ’ä»¶]æŒ‡ç¤ºå™¨æ€§èƒ½ SysPeek</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£…</span></span><br><span class="line">sudo add-apt-repository ppa:nilarimogard/webupd8  </span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install syspeeka</span><br></pre></td></tr></table></figure><blockquote><p>Synapse å¿«é€Ÿå¯åŠ¨å™¨</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:synapse-core/testing</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install synapse</span><br></pre></td></tr></table></figure><blockquote><p>Ugetä¸€æ¬¾ä¸‹è½½å·¥å…·ï¼Œé…åˆ aria2 æ’ä»¶ä½¿ç”¨æ•ˆæœå‡ºè‰²<br>curl + area2 + axel</p></blockquote><p>åœ°å€ï¼š<a href="http://baike.renwuyi.com/2014-11/2153.html" target="_blank" rel="external">å‚è€ƒ</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£…</span></span><br><span class="line">sudo add-apt-repository ppa:plushuang-tw/uget-stable</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install uget</span><br></pre></td></tr></table></figure><blockquote><p>redshiftç±»ä¼¼ f.lux çš„å±å¹•è‰²æ¸©è°ƒæ•´å·¥å…·</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£…</span></span><br><span class="line">sudo apt-get install redshift-gtk</span><br></pre></td></tr></table></figure><p><strong>æ·»åŠ å¼€æœºå¯åŠ¨</strong><br>commandï¼š<code>redshift-gtk -l 39.92:116.46 -t 5500:4500</code></p><blockquote><p>Go For It ä¸€æ¬¾æ•´åˆäº†å¾…åŠäº‹é¡¹ä¸è®¡æ—¶å™¨çš„ç”Ÿäº§åŠ›åº”ç”¨ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># å®‰è£…</span><br><span class="line">sudo add-apt-repository ppa:mank319/go-for-it</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install go-for-it</span><br></pre></td></tr></table></figure><blockquote><p>Catfish ä¸€æ¬¾ä¼˜é›…è¿…æ·çš„æ–‡ä»¶æœç´¢å·¥å…·<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£…</span></span><br><span class="line">sudo apt-get install catfish</span><br></pre></td></tr></table></figure></p><p>ç¥çº§å‘½ä»¤è¡Œè½¯ä»¶ Tmux <a href="http://www.wushxin.top/2016/03/28/%E4%BD%BF%E7%94%A8tmux.html" target="_blank" rel="external">è¯´æ˜</a><br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install tmux</span><br></pre></td></tr></table></figure></p><p><code>cat</code>ä»£ç é«˜äº®<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># å®‰è£…</span><br><span class="line">pip install pygments</span><br></pre></td></tr></table></figure></p></blockquote><p>é…ç½®<br>ï½/.bashrc<br>åŠ å…¥<code>alias cat=&#39;pygmentize -O style=monokai -f console256 -g&#39;</code></p><h3 id="è½¯ä»¶åŒ…å®‰è£…"><a href="#è½¯ä»¶åŒ…å®‰è£…" class="headerlink" title="è½¯ä»¶åŒ…å®‰è£…"></a>è½¯ä»¶åŒ…å®‰è£…</h3><p><a href="http://ubuntu-tweak.com/" target="_blank" rel="external">ç³»ç»Ÿç®¡ç† UbuntuTweak</a><br><code>æ‰“å¼€ï¼šæœç´¢ Ubuntu Tweak</code><br><a href="https://www.jianguoyun.com" target="_blank" rel="external">åŒæ­¥è½¯ä»¶ åšæœäº‘</a><br><code>æ‰“å¼€ï¼šæœç´¢ Nutstore</code><br><a href="https://github.com/LiuLang/bcloud-packages" target="_blank" rel="external">ç™¾åº¦ç½‘ç›˜æ¡Œé¢å®¢æˆ·ç«¯ BCloud</a><br><a href="https://launchpad.net/indicator-stickynotes" target="_blank" rel="external">ä¾¿ç­¾</a><br><a href="http://keepass.info/" target="_blank" rel="external">MarkDownç¼–è¾‘è½¯ä»¶ HarooPad</a><br><a href="http://pad.haroopress.com/" target="_blank" rel="external">å¯†ç ç®¡ç†å™¨ keepass2</a><br><a href="http://pinyin.sogou.com/linux/?r=pinyin" target="_blank" rel="external">æœç‹—è¾“å…¥æ³•</a><br><a href="http://cidian.youdao.com/multi.html#linuxAll" target="_blank" rel="external">æœ‰é“è¯å…¸</a><br><a href="http://www.vmware.com/products/workstation/" target="_blank" rel="external">VMware Workstation</a><br><a href="http://www.google.cn/chrome/browser/" target="_blank" rel="external">Chrome</a><br><a href="https://github.com/cosven/FeelUOwn" target="_blank" rel="external">ç½‘æ˜“éŸ³ä¹</a><br><a href="http://fabforce.net/dbdesigner4/" target="_blank" rel="external">æ•°æ®åº“è®¾è®¡è½¯ä»¶ DBdesigner4</a> - <a href="http://josemarfuregattideabreusilva.blogspot.com/2015/04/installing-dbdesigner-405-on-ubuntu.html" target="_blank" rel="external">é—®é¢˜1</a></p><hr><h3 id="å¬èµ·æ¥ä¸é”™"><a href="#å¬èµ·æ¥ä¸é”™" class="headerlink" title="å¬èµ·æ¥ä¸é”™"></a>å¬èµ·æ¥ä¸é”™</h3><ol><li>Deluge Bittorrent å®¢æˆ·ç«¯</li><li>Nuttyç½‘ç»œç›‘æµ‹å·¥å…·ã€‚</li><li>Synaptic æ–°ç«‹å¾—è½¯ä»¶åŒ…ç®¡ç†å™¨</li><li>UNetbootinå¯åŠ¨ç›˜åˆ¶ä½œå·¥å…·</li><li>Gpickæ‹¾è‰²å™¨ã€‚</li><li>gpaint å¾®è½¯ç”»å›¾</li><li>ddm é©±åŠ¨ç®¡ç†å™¨</li><li>Navicat <code>o(â•¯â–¡â•°)o ç«Ÿç„¶æ˜¯wineçš„</code></li><li>XMind</li></ol><h2 id="å°æŠ€å·§"><a href="#å°æŠ€å·§" class="headerlink" title="å°æŠ€å·§"></a>å°æŠ€å·§</h2><h3 id="å…³é—­ç³»ç»Ÿæ£€æµ‹æŠ¥å‘Š"><a href="#å…³é—­ç³»ç»Ÿæ£€æµ‹æŠ¥å‘Š" class="headerlink" title="å…³é—­ç³»ç»Ÿæ£€æµ‹æŠ¥å‘Š"></a>å…³é—­ç³»ç»Ÿæ£€æµ‹æŠ¥å‘Š</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit /etc/default/apport</span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¿®æ”¹enabled=0</span></span><br></pre></td></tr></table></figure><h3 id="å¼€æœºè‡ªåŠ¨å¼€å¯æ•°å­—é”®"><a href="#å¼€æœºè‡ªåŠ¨å¼€å¯æ•°å­—é”®" class="headerlink" title="å¼€æœºè‡ªåŠ¨å¼€å¯æ•°å­—é”®"></a>å¼€æœºè‡ªåŠ¨å¼€å¯æ•°å­—é”®</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install numlockx</span><br><span class="line">sudo vim /etc/gdm/Init/Default</span><br><span class="line"><span class="meta">#</span><span class="bash"> -----------</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åœ¨æ–‡ä»¶æœ€å<span class="built_in">exit</span> 0çš„å‰é¢æ·»åŠ ï¼š</span></span><br><span class="line">  if [ -x /usr/bin/numlockx ]; then</span><br><span class="line">      numlockx on</span><br><span class="line">  fi</span><br></pre></td></tr></table></figure><p>é‡å¯å³å¯</p><h3 id="æ’å…¥é¼ æ ‡æ—¶è‡ªåŠ¨ä½¿è§¦æ‘¸æ¿å¤±æ•ˆ"><a href="#æ’å…¥é¼ æ ‡æ—¶è‡ªåŠ¨ä½¿è§¦æ‘¸æ¿å¤±æ•ˆ" class="headerlink" title="æ’å…¥é¼ æ ‡æ—¶è‡ªåŠ¨ä½¿è§¦æ‘¸æ¿å¤±æ•ˆ"></a>æ’å…¥é¼ æ ‡æ—¶è‡ªåŠ¨ä½¿è§¦æ‘¸æ¿å¤±æ•ˆ</h3><p>å®‰è£…Touchpad Indicator (è§¦æ‘¸æ¿å¼€å…³ï¼‰<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:atareao/atareao  </span><br><span class="line">sudo apt-get update  </span><br><span class="line">sudo apt-get install touchpad-indicator</span><br></pre></td></tr></table></figure></p><p> æœç´¢ touchpad indicator</p><h3 id="é‡åˆ°æ˜¾ç¤ºä¿©ä¸ªè¾“å…¥æ³•å›¾æ ‡æƒ…å†µ"><a href="#é‡åˆ°æ˜¾ç¤ºä¿©ä¸ªè¾“å…¥æ³•å›¾æ ‡æƒ…å†µ" class="headerlink" title="é‡åˆ°æ˜¾ç¤ºä¿©ä¸ªè¾“å…¥æ³•å›¾æ ‡æƒ…å†µ"></a>é‡åˆ°æ˜¾ç¤ºä¿©ä¸ªè¾“å…¥æ³•å›¾æ ‡æƒ…å†µ</h3><p><code>æœ‰ä¸€å®šåŸå› æ˜¯è‡ªå¯é¡¹å¯åŠ¨äº†ä¸€ä¸ª</code></p><h3 id="é»‘å±"><a href="#é»‘å±" class="headerlink" title="é»‘å±"></a>é»‘å±</h3><p><code>95% æ˜¯å’Œæ˜¾å¡é©±åŠ¨æœ‰å…³</code></p><h3 id="Chrome-æ¯æ¬¡æ‰“å¼€éƒ½è¦æ±‚è¾“å…¥å¯†ç "><a href="#Chrome-æ¯æ¬¡æ‰“å¼€éƒ½è¦æ±‚è¾“å…¥å¯†ç " class="headerlink" title="Chrome æ¯æ¬¡æ‰“å¼€éƒ½è¦æ±‚è¾“å…¥å¯†ç "></a>Chrome æ¯æ¬¡æ‰“å¼€éƒ½è¦æ±‚è¾“å…¥å¯†ç </h3><p>ä¸€ã€åˆ é™¤ç°åœ¨çš„å¯†é’¥ç¯<br>  è§†å›¾-&gt;æ ¹æ®å¯†ç ç¯ åœ¨å¯†ç åŒºä¼šæœ‰ä¸€ä¸ªâ€œç™»å½•â€ä¸ºåå­—çš„å¯†é’¥ç¯ï¼Œå³å‡»å°†å…¶åˆ é™¤ã€‚<br>äºŒã€æ·»åŠ æ–°çš„å¯†é’¥ç¯<br>  ç»ˆç«¯è¾“å…¥seahorseæ‰“å¼€ç®¡ç†å¯†é’¥ç¯çš„è½¯ä»¶ï¼Œæ–‡ä»¶-&gt;æ–°å»º-&gt;å¯†ç å’Œå¯†é’¥-&gt;è¾“å…¥åå­—(è¿™é‡Œæ˜¯ä»¥â€chromeâ€ä¸ºä¾‹)ã€‚å¯†ç è®¾ç½®ä¸ºç©º</p><h3 id="æ·»åŠ æºå®‰è£…åï¼Œnot-fount-XX"><a href="#æ·»åŠ æºå®‰è£…åï¼Œnot-fount-XX" class="headerlink" title="æ·»åŠ æºå®‰è£…åï¼Œnot fount XX"></a>æ·»åŠ æºå®‰è£…åï¼Œnot fount XX</h3><p>ä¸€ã€ è¯•ç€è®¿é—®è¯¥é“¾æ¥<br>äºŒã€å¦‚æœå¯ä»¥æ‰‹åŠ¨æ‰¾åˆ°è¯¥è·¯å¾„ï¼Œé‚£ä¾¿å¯ä»¥ä¿®æ”¹<code>/etc/apt/source.list.d/</code>ç›®å½•ä¸‹ä½ æ·»åŠ çš„å®‰è£…æºæ–‡ä»¶<br><strong>ä¾‹å¦‚</strong><br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/apt/sources.list.d/sogoupinyin.list</span><br><span class="line"><span class="meta">#</span><span class="bash"> æ˜¾ç¤ºå†…å®¹</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> deb http://archive.ubuntukylin.com:10006/ubuntukylin trusty main</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¯ä¿®æ”¹é“¾æ¥éƒ¨åˆ†ã€‚</span></span><br></pre></td></tr></table></figure></p><h3 id="ç½‘å¡é©±åŠ¨-Realtek-RTL8723AE-æ— çº¿ç½‘å¡é©±åŠ¨"><a href="#ç½‘å¡é©±åŠ¨-Realtek-RTL8723AE-æ— çº¿ç½‘å¡é©±åŠ¨" class="headerlink" title="ç½‘å¡é©±åŠ¨ Realtek RTL8723AE æ— çº¿ç½‘å¡é©±åŠ¨"></a>ç½‘å¡é©±åŠ¨ <code>Realtek RTL8723AE æ— çº¿ç½‘å¡é©±åŠ¨</code></h3><p><strong>ç¬¬ä¸€ç§</strong>(é—­æºé©±åŠ¨)ï¼š  </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install linux-firmware-nonfree</span><br></pre></td></tr></table></figure><p><strong>ç¬¬äºŒç§</strong>(ç¬¬ä¸‰æ–¹é©±åŠ¨ï¼ŒPPAå®‰è£…)ï¼š  </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:hanipouspilot/rtlwifi</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install rtlwifi-new-dkms</span><br></pre></td></tr></table></figure><h3 id="å½“é‡åˆ°äº§å“æ— æ³•è¾“å…¥ä¸­æ–‡çš„æ—¶å€™"><a href="#å½“é‡åˆ°äº§å“æ— æ³•è¾“å…¥ä¸­æ–‡çš„æ—¶å€™" class="headerlink" title="å½“é‡åˆ°äº§å“æ— æ³•è¾“å…¥ä¸­æ–‡çš„æ—¶å€™"></a>å½“é‡åˆ°äº§å“æ— æ³•è¾“å…¥ä¸­æ–‡çš„æ—¶å€™</h3><p>å…ˆå°è¯•å¸è½½ibusï¼Œå¦‚æœè¿˜æ˜¯ä¸å¯ä»¥è¯•è¯•åœ¨xxx.shçš„å¯åŠ¨è„šæœ¬ä¸­æ·»åŠ å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">XMODIFIERS="@im=fcitx"</span><br><span class="line">export XMODIFIERS</span><br></pre></td></tr></table></figure><p>åˆ°</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ---------------------------------------------------------------------</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Run the IDE.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ---------------------------------------------------------------------</span></span><br></pre></td></tr></table></figure><p>ä¹‹å‰ã€‚<br><strong>é€šç”¨</strong><br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mv /usr/bin/ibus-daemon /usr/bin/ibus-daemon.fix</span><br></pre></td></tr></table></figure></p><h3 id="è§£å†³LC-CTYPE-cannot-change-locale-en-US-UTF-8-é”™è¯¯"><a href="#è§£å†³LC-CTYPE-cannot-change-locale-en-US-UTF-8-é”™è¯¯" class="headerlink" title="è§£å†³LC_CTYPE: cannot change locale (en_US.UTF-8) é”™è¯¯"></a>è§£å†³<code>LC_CTYPE: cannot change locale (en_US.UTF-8)</code> é”™è¯¯</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å¢åŠ en_US.UTF-8</span></span><br><span class="line">locale-gen en_US.UTF-8</span><br></pre></td></tr></table></figure><h3 id="ä¿®å¤VMwareæ•…éšœï¼Œé—ªé€€"><a href="#ä¿®å¤VMwareæ•…éšœï¼Œé—ªé€€" class="headerlink" title="ä¿®å¤VMwareæ•…éšœï¼Œé—ªé€€"></a>ä¿®å¤<code>VMware</code>æ•…éšœï¼Œé—ªé€€</h3><ol><li>ä¸‹è½½<a href="http://cdn.hocgin.top/Uefi.priv" target="_blank" rel="external">Uefi.priv</a>ã€<a href="http://cdn.hocgin.top/fix.sh" target="_blank" rel="external">fix.sh</a>ã€<a href="http://cdn.hocgin.top/Uefi.der" target="_blank" rel="external">Uefi.der</a>è‡³äºåŒä¸€ç›®å½•.</li><li>æ‰§è¡Œ  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh fix.sh</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™æ˜¯ä¸€ç¯‡æˆ‘å¯¹Ubuntuæ—¥å¸¸ä½¿ç”¨å’Œä¼˜åŒ–çš„æ•´ç†ï¼Œä¹Ÿæ˜¯ä¸€ç¯‡å€Ÿé‰´å‰äººçš„æ–‡ç« ï¼Œè¿˜æœ‰ä¸€äº›å¯èƒ½ä¼šé‡åˆ°çš„ç–‘éš¾æ‚ç—…çš„â€œåæ–¹â€ï¼Œå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©:)&lt;br&gt;&lt;strong&gt;update&lt;/strong&gt;: æ–°å¢&lt;code&gt;undistract-me&lt;/code&gt;ç»ˆç«¯å‘½ä»¤å®Œæˆæé†’æ’ä»¶&lt;br&gt;
    
    </summary>
    
      <category term="OS" scheme="https://hocg.in/categories/OS/"/>
    
    
      <category term="Tips" scheme="https://hocg.in/tags/Tips/"/>
    
      <category term="Ubuntu" scheme="https://hocg.in/tags/Ubuntu/"/>
    
      <category term="Gnome" scheme="https://hocg.in/tags/Gnome/"/>
    
  </entry>
  
  <entry>
    <title>hexo ä½¿ç”¨å°è®°</title>
    <link href="https://hocg.in/2016/03/15/hexo-%E4%BD%BF%E7%94%A8/"/>
    <id>https://hocg.in/2016/03/15/hexo-ä½¿ç”¨/</id>
    <published>2016-03-15T13:31:42.000Z</published>
    <updated>2017-01-12T02:37:02.000Z</updated>
    
    <content type="html"><![CDATA[<p>  è¿™æ˜¯ä¸€ç¯‡å…³äºå¦‚ä½•ä½¿ç”¨hexoçš„æ”¶é›†Box <strong>&gt;</strong> ä¸å®šæœŸæ›´æ–°å§ï¼<br>  <strong>update</strong> 2017å¹´01æœˆ12æ—¥10:33:55<br><a id="more"></a></p><blockquote><p>å‚ç…§ <a href="https://hexo.io/zh-cn/docs/tag-plugins.html" target="_blank" rel="external">hexo å®˜æ–¹æ–‡æ¡£</a><br>å‚ç…§ <a href="http://theme-next.iissnan.com/theme-settings.html" target="_blank" rel="external">next ä¸»é¢˜</a><br>å‚ç…§ <a href="https://github.com/iissnan/hexo-theme-next/wiki/%E5%88%9B%E5%BB%BA%E5%88%86%E7%B1%BB%E9%A1%B5%E9%9D%A2" target="_blank" rel="external">next ä¸»é¢˜ for github</a><br>å‚ç…§ <a href="http://www.tuicool.com/articles/AfQnQjy/" target="_blank" rel="external">æ›´å¤šæ‰©å±•ä½¿ç”¨</a></p></blockquote><h2 id="mdæ–‡æ¡£å¤´éƒ¨"><a href="#mdæ–‡æ¡£å¤´éƒ¨" class="headerlink" title="mdæ–‡æ¡£å¤´éƒ¨"></a>mdæ–‡æ¡£å¤´éƒ¨</h2><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr><td>layout</td><td>å¸ƒå±€</td><td>æœ‰å“ªäº›layoutå‘¢ï¼Œè¯·åˆ° scaffolds ç›®å½•ä¸‹æŸ¥çœ‹ï¼Œè¿™äº›æ–‡ä»¶åç§°å°±æ˜¯layoutåç§°</td></tr><tr><td>title</td><td>æ ‡é¢˜</td><td></td></tr><tr><td>date</td><td>å»ºç«‹æ—¥æœŸ</td><td>æ–‡ä»¶å»ºç«‹æ—¥æœŸ</td></tr><tr><td>updated</td><td>æ›´æ–°æ—¥æœŸ</td><td>æ–‡ä»¶æ›´æ–°æ—¥æœŸ</td></tr><tr><td>comments</td><td>å¼€å¯æ–‡ç« çš„è¯„è®ºåŠŸèƒ½</td><td>true</td></tr><tr><td>tags</td><td>æ ‡ç­¾ï¼ˆä¸é€‚ç”¨äºåˆ†é¡µï¼‰</td><td></td></tr><tr><td>categories</td><td>åˆ†ç±»ï¼ˆä¸é€‚ç”¨äºåˆ†é¡µï¼‰</td><td></td></tr><tr><td>permalink</td><td>è¦†ç›–æ–‡ç« ç½‘å€</td><td></td></tr><tr><td>description</td><td>æ·»åŠ æœ¬é¡µæè¿°</td><td>é»˜è®¤æ‰€æœ‰</td></tr><tr><td>photos</td><td>æ·»åŠ å›¾ç‰‡</td><td></td></tr></tbody></table><h2 id="hexo-åŸºç¡€å‘½ä»¤"><a href="#hexo-åŸºç¡€å‘½ä»¤" class="headerlink" title="hexo åŸºç¡€å‘½ä»¤"></a>hexo åŸºç¡€å‘½ä»¤</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> æ¸…é™¤</span><br><span class="line"><span class="meta">$</span> hexo clean</span><br><span class="line"><span class="meta">#</span> ä¸Šä¼  GitHub</span><br><span class="line"><span class="meta">$</span> hexo deploy</span><br><span class="line"><span class="meta">#</span> æ–°å»ºæ–‡ç« </span><br><span class="line"><span class="meta">$</span> hexo new "postName"</span><br><span class="line"><span class="meta">#</span> æ–°å»ºé¡µé¢</span><br><span class="line">hexo new page "pageName"</span><br><span class="line"><span class="meta">#</span> ç”Ÿæˆé™æ€é¡µé¢è‡³publicç›®å½•</span><br><span class="line">hexo generate</span><br><span class="line"><span class="meta">#</span> å¼€å¯é¢„è§ˆè®¿é—®ç«¯å£ï¼ˆé»˜è®¤ç«¯å£4000ï¼Œ'ctrl + c'å…³é—­serverï¼‰</span><br><span class="line">hexo server</span><br><span class="line"><span class="meta">#</span> å°†.deployç›®å½•éƒ¨ç½²åˆ°GitHub</span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure><h2 id="md-æ‰©å±•"><a href="#md-æ‰©å±•" class="headerlink" title=".md æ‰©å±•"></a>.md æ‰©å±•</h2><ol><li><p>æ‰©å¤§å›¾ç‰‡å®½åº¦</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% fi image-url, alt, title %&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ˜¾ç¤º æ›´å¤šæŒ‰é’®</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ä»¥ä¸Šæ˜¯æ‘˜è¦</span><br><span class="line"><span class="xml"><span class="comment">&lt;!--more--&gt;</span></span></span><br><span class="line">ä»¥ä¸‹æ˜¯ä½™ä¸‹å…¨æ–‡</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨æ ‡ç­¾åˆ«å</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% cq %&#125; æ ‡ç­¾åˆ«å &#123;% endcq %&#125;</span><br></pre></td></tr></table></figure></li></ol><h2 id="å¯èƒ½é‡åˆ°çš„é—®é¢˜"><a href="#å¯èƒ½é‡åˆ°çš„é—®é¢˜" class="headerlink" title="å¯èƒ½é‡åˆ°çš„é—®é¢˜"></a>å¯èƒ½é‡åˆ°çš„é—®é¢˜</h2><ol><li>å½“ä½ å‘å¸ƒçš„<code>.md</code>æ–‡ä»¶ä¸­æºå¸¦é€—å·<code>,</code>(å·²çŸ¥)ï¼Œåœ¨<code>å¤šè¯´</code>è¯„è®ºæ’ä»¶ä¸­å°†æ— æ³•è¯†åˆ«è¯„è®ºæ¡æ•°(å°±æ˜¯æ–‡ç« é¡¶éƒ¨é‚£ä¸ª)<blockquote><p>å€Ÿé‰´åŠæ³•ï¼šæ›¿æ¢æ–‡ä»¶å‘½åï¼Œå°†é€—å·å·²<code>_</code>æˆ–<code> </code>åˆ†éš”</p></blockquote></li></ol><h2 id="æ¢ç”µè„‘å-å¦‚ä½•è¿ç§»ï¼Ÿ"><a href="#æ¢ç”µè„‘å-å¦‚ä½•è¿ç§»ï¼Ÿ" class="headerlink" title="æ¢ç”µè„‘å, å¦‚ä½•è¿ç§»ï¼Ÿ"></a>æ¢ç”µè„‘å, å¦‚ä½•è¿ç§»ï¼Ÿ</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// ä¸ºäº†ä½¿ç”¨hexo dæ¥éƒ¨ç½²åˆ°gitä¸Šï¼Œéœ€è¦å®‰è£…</span><br><span class="line">npm install hexo-deployer-git --save</span><br><span class="line">// ä¸ºäº†å»ºç«‹RSSè®¢é˜…ï¼Œéœ€è¦å®‰è£…</span><br><span class="line">npm install hexo-generator-feed --save</span><br><span class="line">// ä¸ºäº†å»ºç«‹ç«™ç‚¹åœ°å›¾ï¼Œéœ€è¦å®‰è£…</span><br><span class="line">npm install hexo-generator-sitemap --save</span><br></pre></td></tr></table></figure><ul><li>å¯èƒ½ä¼šé‡åˆ° â€˜./build/Release/DTraceProviderBindingsâ€™] code: â€˜MODULE_NOT_FOUNDâ€™</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo --no-optional</span><br></pre></td></tr></table></figure><h2 id="End"><a href="#End" class="headerlink" title="End"></a>End</h2>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;  è¿™æ˜¯ä¸€ç¯‡å…³äºå¦‚ä½•ä½¿ç”¨hexoçš„æ”¶é›†Box &lt;strong&gt;&amp;gt;&lt;/strong&gt; ä¸å®šæœŸæ›´æ–°å§ï¼&lt;br&gt;  &lt;strong&gt;update&lt;/strong&gt; 2017å¹´01æœˆ12æ—¥10:33:55&lt;br&gt;
    
    </summary>
    
      <category term="Other" scheme="https://hocg.in/categories/Other/"/>
    
    
      <category term="Hexo" scheme="https://hocg.in/tags/Hexo/"/>
    
  </entry>
  
</feed>
