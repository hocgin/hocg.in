{"meta":{"title":"hocgin (à¹‘`ç¬Â´à¹‘)","subtitle":"Great minds have purpose, others have wishes.","description":"Ubuntu | Java | Android | HTML5 | CSS3","author":"hocgin","url":"https://hocg.in"},"pages":[{"title":"404","date":"2016-12-24T09:10:26.000Z","updated":"2016-05-28T07:27:40.000Z","comments":true,"path":"404.html","permalink":"https://hocg.in/404.html","excerpt":"","text":"(ï½¡â€¢Ìï¸¿â€¢Ì€ï½¡) æ‰¾ä¸åˆ°äº† body { background-color: #ECECEC; font-family: Arial, Helvetica, sans-serif; font-size: 14px; color: #3c3c3c; padding-top: 150px; } .page404 .f404 { text-align: center; font-size: 150px; font-weight: bold; line-height: 100px; letter-spacing: 5px; color: #fff; margin-bottom: 60px; } .page404 .f404 span { cursor: pointer; text-shadow: 0px 0px 2px #686868, 0px 1px 1px #ddd, 0px 2px 1px #d6d6d6, 0px 3px 1px #ccc, 0px 4px 1px #c5c5c5, 0px 5px 1px #c1c1c1, 0px 6px 1px #bbb, 0px 7px 1px #777, 0px 8px 3px rgba(100, 100, 100, 0.4), 0px 9px 5px rgba(100, 100, 100, 0.1), 0px 10px 7px rgba(100, 100, 100, 0.15), 0px 11px 9px rgba(100, 100, 100, 0.2), 0px 12px 11px rgba(100, 100, 100, 0.25), 0px 13px 15px rgba(100, 100, 100, 0.3); -webkit-transition: all .1s linear; transition: all .1s linear; } .page404 .f404 span:hover { text-shadow: 0px 0px 2px #686868, 0px 1px 1px #fff, 0px 2px 1px #fff, 0px 3px 1px #fff, 0px 4px 1px #fff, 0px 5px 1px #fff, 0px 6px 1px #fff, 0px 7px 1px #777, 0px 8px 3px #fff, 0px 9px 5px #fff, 0px 10px 7px #fff, 0px 11px 9px #fff, 0px 12px 11px #fff, 0px 13px 15px #fff; -webkit-transition: all .1s linear; transition: all .1s linear; } .page404 .f404-des { text-align: center; color: #666; font-family: cursive; font-size: 20px; text-shadow: 0 1px 0 #fff; letter-spacing: 1px; line-height: 2em; font-weight: bold; } .go-home { text-decoration: none; color: #666; } .go-home:hover { color: white; } 404 é¡µé¢è·‘æ²¡äº†!?"},{"title":"404","date":"2016-12-24T09:10:27.000Z","updated":"2016-04-14T09:17:59.000Z","comments":true,"path":"baidu_verify_JCkKHZdfNm.html","permalink":"https://hocg.in/baidu_verify_JCkKHZdfNm.html","excerpt":"","text":"JCkKHZdfNm"},{"title":"æ ‡ç­¾","date":"2018-05-05T16:10:31.323Z","updated":"2018-05-05T12:34:45.009Z","comments":true,"path":"tags/index.html","permalink":"https://hocg.in/tags/index.html","excerpt":"","text":""},{"title":"åˆ†ç±»","date":"2018-05-05T16:10:31.313Z","updated":"2018-05-05T12:32:30.213Z","comments":true,"path":"categories/index.html","permalink":"https://hocg.in/categories/index.html","excerpt":"","text":""}],"posts":[{"title":"å…³äºç½‘çº¦è½¦æ ¸å¿ƒä¸šåŠ¡-æ¨å•ç›¸å…³è®¾è®¡æ•´ç†","slug":"å…³äºç½‘çº¦è½¦æ ¸å¿ƒä¸šåŠ¡-æ¨å•ç›¸å…³æ•´ç†","date":"2019-04-18T10:20:20.000Z","updated":"2019-05-01T08:12:49.031Z","comments":true,"path":"2019/04/18/å…³äºç½‘çº¦è½¦æ ¸å¿ƒä¸šåŠ¡-æ¨å•ç›¸å…³æ•´ç†/","link":"","permalink":"https://hocg.in/2019/04/18/å…³äºç½‘çº¦è½¦æ ¸å¿ƒä¸šåŠ¡-æ¨å•ç›¸å…³æ•´ç†/","excerpt":"ç½‘çº¦è½¦æ ¸å¿ƒä¸šåŠ¡æ¨å•ç›¸å…³è®¾è®¡å’Œæ•´ç†ã€‚","text":"ç½‘çº¦è½¦æ ¸å¿ƒä¸šåŠ¡æ¨å•ç›¸å…³è®¾è®¡å’Œæ•´ç†ã€‚ å›¾æŠ¢å•æ¨¡å¼ è‡ªåŠ¨æ´¾å•æ¨¡å¼ æ‰‹åŠ¨æ´¾å•æ¨¡å¼ ä¸€äº›è¯´æ˜è®¢å•æ¨é€ç»™å¸æœº(ç›´æ¥è·å–è®¢å•)/æ‰‹åŠ¨æ´¾å•/å¸æœºç‚¹å‡»æ¥å—è®¢å• ç»‘å®šå¸æœº æ­¤å¤„éœ€è¦è·å–åˆ†å¸ƒå¼é”ï¼Œé”çš„èµ„æºä¸ºå¸æœºï¼Œå› æ­¤å¯ä»¥ç”¨ å¸æœºID ä¸ºé”çš„æ ‡è¯†ï¼Œç»‘å®šè®¢å•çš„å¸æœºæ—¶éœ€ä½¿ç”¨ ä¹è§‚é”æ–¹å¼ è¿›è¡Œæ›´æ–°ã€‚ æ£€æŸ¥æ˜¯å¦ä¸­æ­¢æ¨å• æ¨èä½¿ç”¨ redis è¿›è¡Œæ ‡è¯†æ˜¯å¦ç»ˆæ­¢è®¢å•æ¨é€ï¼Œéœ€è¦ä½¿ç”¨åŸå­+è¿‡æœŸç‰¹æ€§ã€‚ ç”¨æˆ·ä¸‹å• ç”¨æˆ·ä¸‹å•ä¼šå‘é€å¤šä¸ªæ¶ˆæ¯ æƒ…å†µä¸€: è‡ªåŠ¨æ´¾å•æ¨¡å¼ å‘é€è‡ªåŠ¨æ´¾å•æ¶ˆæ¯ å‘é€å–æ¶ˆè®¢å•æ¶ˆæ¯(å»¶è¿Ÿæ¶ˆæ¯) æƒ…å†µäºŒ: æŠ¢å•æ¨¡å¼ å‘é€æŠ¢å•æ´¾å•æ¶ˆæ¯ å‘é€æŠ¢å•å¯åŠ¨æ¶ˆæ¯(å»¶è¿Ÿæ¶ˆæ¯) å‘é€å–æ¶ˆè®¢å•æ¶ˆæ¯(å»¶è¿Ÿæ¶ˆæ¯) å…³äºæœåŠ¡é‡å¯è§£å†³æ–¹æ¡ˆ é‡å¯åè¿›è¡Œè®¢å•æ‰«æå¤„ç†(åˆ†æ‰¹æ¬¡æ‹‰å–æ¨¡å¼) å®šæ—¶å™¨æ ¸å¯¹è®¢å•çŠ¶æ€ï¼Œè¿›è¡ŒçŠ¶æ€å¤„ç† æ¶ˆæ¯è¿›è¡Œåˆæ³•æ ¡éªŒ(è¶…æ—¶ä¸¢å¼ƒï¼Œè®°å½•æ—¥å¿—)","categories":[{"name":"Web","slug":"Web","permalink":"https://hocg.in/categories/Web/"}],"tags":[{"name":"è®¾è®¡æ€è·¯","slug":"è®¾è®¡æ€è·¯","permalink":"https://hocg.in/tags/è®¾è®¡æ€è·¯/"}],"keywords":[{"name":"Web","slug":"Web","permalink":"https://hocg.in/categories/Web/"}]},{"title":"Linux ä¸‹ç½‘ç»œç›¸å…³çš„å‘½ä»¤","slug":"Linux ä¸‹ç½‘ç»œç›¸å…³çš„å‘½ä»¤","date":"2019-04-01T00:07:00.000Z","updated":"2019-04-10T10:04:38.417Z","comments":true,"path":"2019/04/01/Linux ä¸‹ç½‘ç»œç›¸å…³çš„å‘½ä»¤/","link":"","permalink":"https://hocg.in/2019/04/01/Linux ä¸‹ç½‘ç»œç›¸å…³çš„å‘½ä»¤/","excerpt":"Linux ä¸‹ç½‘ç»œç›¸å…³çš„å‘½ä»¤","text":"Linux ä¸‹ç½‘ç»œç›¸å…³çš„å‘½ä»¤ ğŸ”—Linux-Nettools vs Iproute2 net-toolsifconfig123456789101112131415161718192021222324enp2s0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt; mtu 1500 inet 192.168.8.23 netmask 255.255.255.0 broadcast 192.168.8.255 inet6 fe80::794c:57e0:a7ca:518e prefixlen 64 scopeid 0x20&lt;link&gt; ether 50:9a:4c:17:e9:da txqueuelen 1000 (Ethernet) RX packets 4412700 bytes 3603093632 (3.3 GiB) RX errors 0 dropped 20 overruns 0 frame 0 TX packets 1877167 bytes 507480177 (483.9 MiB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt; mtu 65536 inet 127.0.0.1 netmask 255.0.0.0 inet6 ::1 prefixlen 128 scopeid 0x10&lt;host&gt; loop txqueuelen 1000 (Local Loopback) RX packets 14009901 bytes 2441347518 (2.2 GiB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 14009901 bytes 2441347518 (2.2 GiB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0wlp3s0: flags=4099&lt;UP,BROADCAST,MULTICAST&gt; mtu 1500 ether 54:13:79:5b:c3:29 txqueuelen 1000 (Ethernet) RX packets 6 bytes 1296 (1.2 KiB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 34 bytes 5037 (4.9 KiB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 enp2s0: ç½‘ç»œè®¾å¤‡å· flags=4163: ç½‘ç»œè®¾å¤‡çŠ¶æ€æ ‡è¯† mtu 1500: mtu inet 192.168.8.23 netmask 255.255.255.0 broadcast 192.168.8.255: IPv4 åè®® inet6 fe80::794c:57e0:a7ca:518e: IPv6 åè®® ether 50:9a:4c:17:e9:da TX: å‘é€/ä¸Šè¡Œ RX: æ¥æ”¶/ä¸‹è¡Œ packets 4412700: åŒ…æ€»æ•°é‡ bytes 2441347518 (2.2 GiB): æµé‡å¤§å° errors 0: é”™è¯¯åŒ…æ•°é‡ dropped 0: ä¸¢åŒ…æ•°é‡ overruns 0: è¶…æ—¶åŒ…æ•°é‡ collisions 0: å†²çªåŒ…æ•°é‡ frame 0: å¸§æ•°é‡ txqueuelen 1000 (Ethernet): å­˜å‚¨ä¼ è¾“æ•°æ®ç¼“å­˜çš„å¤§å° prefixlen 64 scopeid 0x20 route1234Kernel IP routing tableDestination Gateway Genmask Flags Metric Ref Use Ifacedefault 192.168.8.1 0.0.0.0 UG 100 0 0 enp2s0192.168.8.0 0.0.0.0 255.255.255.0 U 100 0 0 enp2s0 Genmask: å­ç½‘æ©ç  Destination: ç›®çš„åœ° Destination/Genmask ç»„æˆå±€åŸŸç½‘ default = 0.0.0.0/0.0.0.0 Gateway: ç½‘å…³ Flags: ç½‘ç»œæ ‡è¯† U (route is up): è·¯ç”±å¯åŠ¨çŠ¶æ€ H (target is a host): ç›®æ ‡æ˜¯ä¸»æœº G (use gateway): éœ€è¦ä½¿ç”¨ç½‘å…³æ¥ä¼ è¾“ R (reinstate route for dynamic routing): D (dynamically installed by daemon or redirect): M (modified from routing daemon or redirect): ! (reject route): æ‹’ç»/é»‘åå• Metric: ç›®æ ‡çš„è·ç¦» Ref: Use: è·¯çº¿æŸ¥æ‰¾è®¡æ•° Iface: æ¥æ”¶æ•°æ®çš„ç½‘ç»œæ¥å£ ç½‘ç»œå‡ºå£ç½‘å¡ iproute2ip link é…ç½®ç½‘ç»œè®¾å¤‡å‚æ•°OSI ä¸ƒå±‚åè®®ä¸­, äºŒå±‚ç›¸å…³ä¿¡æ¯eg. MTU, MAC, å¼€å…³â€¦1234567891011121314151617181920212223242526272829303132333435363738ip link show1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:002: enp2s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP mode DEFAULT group default qlen 1000 link/ether 50:9a:4c:17:e9:da brd ff:ff:ff:ff:ff:ff3: wlp3s0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN mode DORMANT group default qlen 1000 link/ether 54:13:79:5b:c3:29 brd ff:ff:ff:ff:ff:ff# æ˜¾ç¤ºçŠ¶æ€è¯¦æƒ…ip -s link show1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 RX: bytes packets errors dropped overrun mcast 2507975007 14838472 0 0 0 0 TX: bytes packets errors dropped carrier collsns 2507975007 14838472 0 0 0 0 2: enp2s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP mode DEFAULT group default qlen 1000 link/ether 50:9a:4c:17:e9:da brd ff:ff:ff:ff:ff:ff RX: bytes packets errors dropped overrun mcast 3657508487 4607298 0 23 0 154201 TX: bytes packets errors dropped carrier collsns 536627449 1943192 0 0 0 0 3: wlp3s0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN mode DORMANT group default qlen 1000 link/ether 54:13:79:5b:c3:29 brd ff:ff:ff:ff:ff:ff RX: bytes packets errors dropped overrun mcast 1296 6 0 0 0 0 TX: bytes packets errors dropped carrier collsns 5037 34 0 0 0 0 # æ“ä½œç‰¹å®šç½‘å¡ eg. ip link set eth0 upip link set &#123;ç½‘ç»œè®¾å¤‡&#125; &#123;æ“ä½œ&#125;- ç½‘ç»œè®¾å¤‡: eg. enp2s0 - æ“ä½œ - up: å¼€å¯ - down: å…³é—­ - address: Mac åœ°å€`ff:ff:ff:ff:ff:ff` - name: ç½‘ç»œè®¾å¤‡åç§° - mtu: mtuå€¼`1500` ip addr é…ç½®ç½‘ç»œç›¸å…³ä¿¡æ¯OSI ä¸ƒå±‚åè®®ä¸­, ä¸‰å±‚ç›¸å…³ä¿¡æ¯eg. ç½‘å…³, å­ç½‘æ©ç .. 123456789101112131415161718192021222324252627281: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever2: enp2s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000 link/ether 50:9a:4c:17:e9:da brd ff:ff:ff:ff:ff:ff inet 192.168.8.23/24 brd 192.168.8.255 scope global noprefixroute enp2s0 valid_lft forever preferred_lft forever inet6 fe80::794c:57e0:a7ca:518e/64 scope link noprefixroute valid_lft forever preferred_lft forever3: wlp3s0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN group default qlen 1000 link/ether 54:13:79:5b:c3:29 brd ff:ff:ff:ff:ff:ff# è®¾å®šIPç›¸å…³å‚æ•°ip address &#123;add|del&#125; &#123;IPç›¸å…³é…ç½®&#125; &#123;ç½‘ç»œè®¾å¤‡&#125; &#123;ç›¸å…³å‚æ•°&#125;- add|del: æ–°å¢æˆ–åˆ é™¤- IPç›¸å…³é…ç½®: eg. 192.168.8.23/24- ç½‘ç»œè®¾å¤‡: eg. enp2s0- ç›¸å…³å‚æ•°: - broadcast: å¹¿æ’­åœ°å€, &quot;+&quot;ä¸ºè‡ªåŠ¨è®¡ç®— - label: åˆ¥ååˆ«å - scope: ä½œç”¨åŸŸ - global - site - link - host lo: ç½‘å¡label. : ç½‘ç»œè®¾å¤‡çŠ¶æ€æ ‡è¯† BROADCAST, MULTICAST: å¯ä»¥å‘é€å¹¿æ’­, å¯ä»¥å‘é€å¤šæ’­åŒ… LOOPBACK: æœ¬åœ°ç¯å› UP: ç½‘ç»œè®¾å¤‡çŠ¶æ€ LOWER_UP: å·²è¿çº¿ mtu 65536: æœ€å¤§ä¼ è¾“å•å…ƒ qdisc pfifo_fast: æ’é˜Ÿè§„åˆ™. noqueue pfifo_fast group default: æ‰€åœ¨ç»„. inet 127.0.0.1/8: IPv4 åœ°å€åŠå­ç½‘æ©ç  inet6 fe80::794c:57e0:a7ca:518e/64: IPv6 åœ°å€åŠå­ç½‘æ©ç  brd ff:ff:ff:ff:ff:ff: å¹¿æ’­åœ°å€ scope global: ä½œç”¨åŸŸ. global: å…è®¸æ‰€æœ‰æ¥æº site: ä»…IPv6, å…è®¸ä»…æœ¬æœºè¿æ¥ link: ä»…å…è®¸è‡ªæˆ‘è¿æ¥ host: ä»…å…è®¸æœ¬ä¸»æœºå†…éƒ¨è¿æ¥ noprefixroute enp2s0 preferred_lft forever: valid_lft forever: æœ‰æ•ˆæœŸé™ qlen 1000 ip route è·¯ç”±ç›¸å…³è®¾ç½® 1234567891011ip routedefault via 192.168.8.1 dev enp2s0 proto static metric 100 192.168.8.0/24 dev enp2s0 proto kernel scope link src 192.168.8.23 metric 100# è®¾å®šrouteç›¸å…³å‚æ•°ip route &#123;add|del&#125; &#123;IP|ç½‘ç»œ&#125; &#123;via ç½‘å…³&#125; &#123;ç½‘ç»œè®¾å¤‡&#125;- add|del: æ–°å¢æˆ–åˆ é™¤- IP|ç½‘ç»œ: eg. IP æˆ– 192.168.8.23/24- ç½‘å…³: æŒ‡å®šå‡ºå£ç½‘å…³(å¯é€‰)- ç½‘ç»œè®¾å¤‡: æŒ‡å®šå‡ºå£ç½‘ç»œè®¾å¤‡ eg. enp2s0- mtu: é…ç½®mtuå‚æ•° 192.168.8.0/24: ç½‘ç»œ dev enp2s0: ç½‘ç»œè®¾å¤‡ proto kernel: è·¯ç”±åè®® [redirect, kernel, boot, static, ra] scope link: ä½œç”¨åŸŸ ç½‘ç»œä¾¦æŸ¥ping ç½‘ç»œçŠ¶æ€ 12345âœ ~ ping www.baidu.com -c 5PING www.a.shifen.com (14.215.177.39) 56(84) bytes of data.64 bytes from 14.215.177.39 (14.215.177.39): icmp_seq=1 ttl=54 time=20.6 ms64 bytes from 14.215.177.39 (14.215.177.39): icmp_seq=2 ttl=54 time=20.5 ms64 bytes from 14.215.177.39 (14.215.177.39): icmp_seq=3 ttl=54 time=20.4 ms 64 bytes: ICMPå°åŒ…å¤§å° icmp_seq=3: ä¾¦æµ‹åºå· ttl=54: é»˜è®¤255, æ¯ç»è¿‡ä¸€ä¸ªå«MACåœ°å€æ—¶-1 time=20.5 ms: è€—æ—¶ traceroute ç½‘è·¯çŠ¶æ€12345678910111213âœ ~ traceroute www.baidu.com traceroute to www.baidu.com (14.215.177.39), 30 hops max, 60 byte packets 1 192.168.8.1 (192.168.8.1) 0.784 ms 1.348 ms 1.866 ms 2 192.168.5.1 (192.168.5.1) 0.138 ms 0.174 ms 0.217 ms 3 1.224.77.125.broad.xm.fj.dynamic.163data.com.cn (125.77.224.1) 1.458 ms 1.486 ms 1.694 ms 4 61.154.238.229 (61.154.238.229) 4.692 ms 4.704 ms 61.154.238.225 (61.154.238.225) 2.400 ms 5 61.154.238.77 (61.154.238.77) 5.834 ms 117.30.27.185 (117.30.27.185) 1.948 ms 61.154.238.77 (61.154.238.77) 6.106 ms 6 * 202.97.40.169 (202.97.40.169) 19.847 ms 202.97.78.37 (202.97.78.37) 19.233 ms 7 113.96.4.90 (113.96.4.90) 32.771 ms 28.773 ms 113.96.4.106 (113.96.4.106) 42.485 ms 8 * * * 9 14.29.117.234 (14.29.117.234) 19.359 ms 14.29.121.182 (14.29.121.182) 17.646 ms 14.29.121.190 (14.29.121.190) 28.106 ms10 * * *11 * * * æ¯ä¸ªåºå·éƒ½æ˜¯åŒä¸€å±‚è¿›è¡Œä¸‰æ¬¡è¿æ¥çš„è€—æ—¶ * * *: å¯èƒ½æ˜¯é˜²ç«å¢™é—®é¢˜æˆ–è·¯ç”±é—®é¢˜ netstat æŸ¥çœ‹æœ¬æœºçš„ç½‘ç»œè¿æ¥1234# ç›®å‰æ‰€æœ‰çš„ç½‘ç»œçº¿è·¯çŠ¶æ€# netstat -tulnpProto Recv-Q Send-Q Local Address Foreign Address State PID/Program name tcp 0 0 0.0.0.0:8000 0.0.0.0:* LISTEN 10247/node Proto: ç½‘ç»œåè®® Recv-Q: æœªä½¿ç”¨å­—èŠ‚ Send-Q: æ²¡æœ‰ç¡®è®¤çš„å­—èŠ‚ Local Address: æœ¬åœ°åœ°å€+ç«¯å£ Foreign Address: ç›®æ ‡åœ°å€+ç«¯å£ stat: çŠ¶æ€ ESTABLISED: å·²è¿çº¿ SYN_SENT: å‘é€è¿çº¿ç¡®è®¤åŒ… SYN_RECV: æ¥æ”¶è¿çº¿ç¡®è®¤åŒ… FIN_WAIT1: æ­£åœ¨æ–­çº¿ä¸­-ç¬¬ä¸€æ­¥ FIN_WAIT2: æ­£åœ¨æ–­çº¿ä¸­(ç­‰å¾…å¯¹æ–¹ç¡®è®¤)-ç¬¬äºŒæ­¥ TIME_WAIT: å·²æ–­çº¿(ç­‰å¾…å…³é—­)-ç¬¬ä¸‰æ­¥ LISTEN: æ­£åœ¨ç›‘å¬ PID/Program name: è¿›ç¨‹å’ŒPID host, nslookup, dig åŸŸåè½¬IP host123456789âœ ~ host www.baidu.com 114.114.114.114Using domain server:Name: 114.114.114.114Address: 114.114.114.114#53Aliases: www.baidu.com is an alias for www.a.shifen.com.www.a.shifen.com has address 14.215.177.39www.a.shifen.com has address 14.215.177.38 nslookup123456789âœ ~ nslookup www.google.comServer: 218.85.152.99Address: 218.85.152.99#53Non-authoritative answer:Name: www.google.comAddress: 75.126.150.210Name: www.google.comAddress: 2400:cb00:2048:1::6814:224e dig12345678910111213141516171819202122232425262728293031323334âœ ~ dig www.google.com; &lt;&lt;&gt;&gt; DiG 9.11.3-1-Debian &lt;&lt;&gt;&gt; www.google.com;; global options: +cmd;; Got answer:;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 26052;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 4, ADDITIONAL: 8;; QUESTION SECTION:;www.google.com. IN A;; ANSWER SECTION:www.google.com. 600 IN A 75.126.150.210;; AUTHORITY SECTION:google.com. 153873 IN NS ns2.google.com.google.com. 153873 IN NS ns1.google.com.google.com. 153873 IN NS ns3.google.com.google.com. 153873 IN NS ns4.google.com.;; ADDITIONAL SECTION:ns1.google.com. 340640 IN A 216.239.32.10ns1.google.com. 160867 IN AAAA 2001:4860:4802:32::ans2.google.com. 147310 IN A 216.239.34.10ns2.google.com. 167153 IN AAAA 2001:4860:4802:34::ans3.google.com. 170088 IN A 216.239.36.10ns3.google.com. 343381 IN AAAA 2001:4860:4802:36::ans4.google.com. 342199 IN A 216.239.38.10ns4.google.com. 340238 IN AAAA 2001:4860:4802:38::a;; Query time: 3 msec;; SERVER: 218.85.152.99#53(218.85.152.99);; WHEN: Tue Apr 02 11:54:08 CST 2019;; MSG SIZE rcvd: 296 Hook tcpdump 1234567891011121314151617181920212223242526272829âœ ~ sudo tcpdump -i enp2s0tcpdump: verbose output suppressed, use -v or -vv for full protocol decodelistening on enp2s0, link-type EN10MB (Ethernet), capture size 262144 bytes16:03:36.920320 IP 192.168.8.23.32842 &gt; 106.37.75.114.80: Flags [.], ack 1334, win 1134, options [nop,nop,TS val 2465645746 ecr 4170196622], length 016:07:25.848706 IP 192.168.8.23.45512 &gt; 203.107.41.32.9015: Flags [P.], seq 858:897, ack 771, win 37440, length 3915:23:53.248962 IP6 fe80::485c:9c0f:61ce:2886 &gt; ff02::1:ffb6:3f84: ICMP6, neighbor solicitation, who has fe80::32e1:71ff:feb6:3f84, length 3215:23:53.249199 IP 192.168.8.23.55804 &gt; FJ-DNS.xm.fj.cn.domain: 41679+ PTR? 4.8.f.3.6.b.f.f.1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.2.0.f.f.ip6.arpa. (90)15:23:53.251749 IP FJ-DNS.xm.fj.cn.domain &gt; 192.168.8.23.55804: 41679 NXDomain* 0/1/0 (154)15:23:53.251809 IP 192.168.8.23.57994 &gt; FJ-DNS.xm.fj.cn.domain: 8140+ PTR? 6.8.8.2.e.c.1.6.f.0.c.9.c.5.8.4.0.0.0.0.0.0.0.0.0.0.0.0.0.8.e.f.ip6.arpa. (90)15:23:53.254241 ARP, Request who-has 192.168.8.250 tell 192.168.8.134, length 4615:23:53.255081 IP FJ-DNS.xm.fj.cn.domain &gt; 192.168.8.23.57994: 8140 NXDomain* 0/1/0 (139)# æŒ‡ä»¤tcpdump [-AennqX] [-i ç½‘ç»œæ¥å£] [-w å¯¼å‡ºæ–‡ä»¶] [-c æ¬¡æ•°] \\ [-r å¯¼å…¥æ–‡ä»¶] [è¿‡æ»¤è§„åˆ™]-Aï¼š æ˜¾ç¤ºä¸ºASCIIç -e: OSI äºŒå±‚æ˜¾ç¤ºMACå°åŒ…-nn: è§£æåœ°å€(æ˜¾ç¤ºä¸ºipå’Œç«¯å£)-q: æ‰“å°ç®€çŸ­çš„ä¿¡æ¯-X: æ˜¾ç¤º16è¿›åˆ¶åŠASCIIç -i: éœ€è¦ç›‘å¬çš„ç½‘ç»œæ¥å£-w: å†™å‡ºå­˜å‚¨æ–‡ä»¶-r: è¯»å–å­˜å‚¨æ–‡ä»¶-c: ç›‘å¬æ•°é‡è¿‡æ»¤è§„åˆ™: å¯ä»¥ä½¿ç”¨ and å’Œ or è¿›è¡Œç»„åˆ - &apos;host foo&apos;, &apos;host 127.0.0.1&apos; ï¼šç›‘å¬ç‰¹å®šçš„ä¸»æœº - &apos;net 192.168&apos; ï¼šç›‘å¬ç‰¹å®šçš„ç½‘æ®µ - &apos;src host 127.0.0.1&apos; &apos;dst net 192.168&apos;ï¼š ç›‘å¬ç‰¹å®šçš„æ¥æº(src)æˆ–ç›®çš„åœ°(dst) - &apos;tcp port 21&apos;ï¼šç›‘å¬ç‰¹å®šçš„åè®®ï¼Œå¦‚ tcp, udp, arp, ether.. 15:23:53.248962: æ—¶:åˆ†:ç§’.æ¯«ç§’ IP: ä½¿ç”¨çš„åè®® 192.168.8.23.32842 &gt;: å‘èµ·ç«¯ 106.37.75.114.80: æ¥æ”¶ç«¯ Flags [.]: ä¼ è¾“æ ‡è¯† [.P]: æ¨é€PUSH ack 1334: ack å· seq 858:897: ä¼ è¾“èµ„æ–™ 858~897 byte iptables è®¿é—®æ§åˆ¶ tc æµé‡æ§åˆ¶ mtr æ˜¾ç¤ºç½‘ç»œè·¯å¾„çš„çŠ¶å†µ","categories":[{"name":"Linux","slug":"Linux","permalink":"https://hocg.in/categories/Linux/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://hocg.in/tags/Linux/"},{"name":"TCP/IP","slug":"TCP-IP","permalink":"https://hocg.in/tags/TCP-IP/"}],"keywords":[{"name":"Linux","slug":"Linux","permalink":"https://hocg.in/categories/Linux/"}]},{"title":"Elasticsearch éšæ‰‹è®°","slug":"Elasticsearch éšæ‰‹è®°","date":"2019-03-23T05:53:00.000Z","updated":"2019-03-23T07:33:38.002Z","comments":true,"path":"2019/03/23/Elasticsearch éšæ‰‹è®°/","link":"","permalink":"https://hocg.in/2019/03/23/Elasticsearch éšæ‰‹è®°/","excerpt":"Elasticsearch éšæ‰‹è®° ğŸ˜‹","text":"Elasticsearch éšæ‰‹è®° ğŸ˜‹ ElasticSearch å¯¹æ¯” MySQL Index -&gt; Database Type -&gt; Table Document -&gt; Row ç´¢å¼•æ¨¡ç‰ˆæ•°æ®ç±»å‹ å­—ç¬¦ä¸²ç±»å‹ string,text,keyword æ•´æ•°ç±»å‹ integer,long,short,byte æµ®ç‚¹ç±»å‹ double,float,half_float,scaled_float é€»è¾‘ç±»å‹ boolean æ—¥æœŸç±»å‹ date èŒƒå›´ç±»å‹ range äºŒè¿›åˆ¶ç±»å‹ binary å¤åˆç±»å‹ æ•°ç»„ç±»å‹ array å¯¹è±¡ç±»å‹ object åµŒå¥—ç±»å‹ nested åœ°ç†ç±»å‹ åœ°ç†åæ ‡ç±»å‹ geo_point åœ°ç†åœ°å›¾ geo_shape ç‰¹æ®Šç±»å‹ IPç±»å‹ ip èŒƒå›´ç±»å‹ completion ä»¤ç‰Œè®¡æ•°ç±»å‹ token_count é™„ä»¶ç±»å‹ attachment æŠ½å–ç±»å‹ percolator API æ¥å£ pretty æ ¼å¼åŒ–explain=true åˆ†æ é€šé…ç¬¦ ç›‘æ§æ“ä½œ ç›‘æ§12# æŸ¥è¯¢æ‰€æœ‰ç›‘æ§æŒ‡ä»¤curl --user elastic:changeme -XGET http://127.0.0.1:9200/_cat èŠ‚ç‚¹æ“ä½œ æŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€ 12# æŸ¥çœ‹è®¾ç½®curl --user elastic:changeme -XGET http://127.0.0.1:9200/_cluster/settings?pretty å®æ—¶æ›´æ”¹é…ç½® 123456789# æ°¸ä¹…ç”Ÿæ•ˆcurl --user elastic:changeme -XPUT http://127.0.0.1:9200/_cluster/settings -H \"Content-type: application/json\" -d '&#123; \"persistent\": &#123; &#125;&#125;'# æš‚æ—¶ç”Ÿæ•ˆcurl --user elastic:changeme -XPUT http://127.0.0.1:9200/_cluster/settings -H \"Content-type: application/json\" -d '&#123; \"transient\": &#123;&#125;&#125;' æ•°æ®æ“ä½œ åˆ›å»ºç´¢å¼•æ¨¡ç‰ˆ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455curl --user elastic:changeme -XPUT http://127.0.0.1:9200/db_test2 -H \"Content-type: application/json\" -d '&#123; \"settings\":&#123; # èŠ‚ç‚¹æ•°é‡ \"number_of_replicas\": 0, # åˆ†ç‰‡æ•°é‡ # \"number_of_shards\": 5, # ç´¢å¼•å­˜å‚¨ç±»å‹ # \"index.store.type\": \"niofs\", # é»˜è®¤æ£€ç´¢å­—æ®µ # \"index.query.default_field\": \"title\" # \"index.unassigned.node_left.delayed_timeout\": \"5m\" &#125;, \"mappings\": &#123; \"example\": &#123; # åŠ¨æ€å˜æ›´ \"dynamic\": false, # 5.x ä»¥ä¸ŠåºŸé™¤ \"_all\": &#123; \"enabled\": false &#125;, \"properties\": &#123; \"example_id\": &#123; \"type\": \"long\" &#125;, \"name\": &#123; \"type\": \"text\", # æŒ‡å®šåˆ†è¯å™¨ \"analyzer\": \"ik_max_word\", \"search_analyzer\": \"ik_max_word\" &#125;, \"text\": &#123; \"type\": \"keyword\" &#125;, \"title\": &#123; \"type\": \"text\", \"index\": true &#125;, \"createdAt\": &#123; \"type\": \"date\", \"format\": \"strict_date_optional_time||epoch_millis\" &#125;, \"age\": &#123; \"type\": \"integer\" &#125;, \"location\": &#123; # es ä¸­å­˜å‚¨ç»“æ„ä¸º: &#123;lon: 0.000, lat: 0.000&#125; \"type\": \"geo_point\" &#125;, \"suggest\": &#123; \"type\": \"completion\" &#125; &#125; &#125; &#125;&#125;' åˆ é™¤ç´¢å¼•æ¨¡ç‰ˆ 1curl --user elastic:changeme -XDELETE http://127.0.0.1:9200/db_test æŸ¥è¯¢ç´¢å¼•æ¨¡ç‰ˆ 1curl --user elastic:changeme -XGET http://127.0.0.1:9200/db_test\\?pretty æ’å…¥æ•°æ® 123curl --user elastic:changeme -XPOST http://127.0.0.1:9200/db_test/example -H \"Content-type: application/json\" -d '&#123; \"example_id\": 666&#125;' æŸ¥è¯¢æ•°æ® 12345678910111213# æŸ¥è¯¢æ‰€æœ‰curl --user elastic:changeme -XPOST http://127.0.0.1:9200/db_test/example/_search?pretty# æŒ‰æ¡ä»¶æŸ¥è¯¢curl --user elastic:changeme -XPOST http://127.0.0.1:9200/db_test/example/_search?pretty&amp;explain=true -H \"Content-type: application/json\" -d '&#123; \"query\": &#123; \"match\": &#123; \"example_id\": 666 &#125; &#125;&#125;'# æŸ¥è¯¢æŒ‡å®šcurl --user elastic:changeme -XGET http://127.0.0.1:9200/db_test/example/PiAmoGkBJAdUJ3wD4CMC?pretty=true åˆ†ææ“ä½œ åˆ†è¯å™¨æ¥å£123456789# ä½¿ç”¨é»˜è®¤åˆ†è¯å™¨curl --user elastic:changeme -XPOST http://127.0.0.1:9200/_analyze?pretty -H 'Content-Type:application/json' -d'&#123; \"text\": \"Hello World\" &#125;'# ä½¿ç”¨æŒ‡å®šåˆ†è¯å™¨curl --user elastic:changeme -XPOST http://127.0.0.1:9200/_analyze?pretty -H 'Content-Type:application/json' -d'&#123; \"analyzer\": \"ik_max_word\", \"text\": \"Hello World\" &#125;' Java è°ƒç”¨ åˆ›å»ºç´¢å¼• 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667private boolean createOrUpdateIndex(Long id) &#123; if (house == null) &#123; return false; &#125; ExampleIndexTemplate template = // .. é€šè¿‡æ„å»ºå¾—å‡º SearchRequestBuilder requestBuilder = this.esClient.prepareSearch(INDEX_NAME) .setTypes(INDEX_TYPE) .setQuery(QueryBuilders.termQuery(\"example_id\", id)); logger.debug(requestBuilder.toString()); SearchResponse searchResponse = requestBuilder.get(); boolean success; long totalHit = searchResponse.getHits().getTotalHits(); if (totalHit == 0) &#123; success = create(template); &#125; else if (totalHit == 1) &#123; String esId = searchResponse.getHits().getAt(0).getId(); success = update(id, template); &#125; else &#123; success = deleteAndCreate(totalHit, template); &#125;&#125;// -- private boolean create(ExampleIndexTemplate indexTemplate) &#123; try &#123; IndexResponse response = this.esClient.prepareIndex(INDEX_NAME, INDEX_TYPE) .setSource(objectMapper.writeValueAsBytes(indexTemplate), XContentType.JSON).get(); if (response.status() == RestStatus.CREATED) &#123; return true; &#125; else &#123; return false; &#125; &#125; catch (JsonProcessingException e) &#123; return false; &#125; &#125; private boolean update(Long id, ExampleIndexTemplate indexTemplate) &#123; try &#123; UpdateResponse response = this.esClient.prepareUpdate(INDEX_NAME, INDEX_TYPE, id).setDoc(objectMapper.writeValueAsBytes(indexTemplate), XContentType.JSON).get(); if (response.status() == RestStatus.OK) &#123; return true; &#125; else &#123; return false; &#125; &#125; catch (JsonProcessingException e) &#123; return false; &#125; &#125; private boolean deleteAndCreate(long totalHit, ExampleIndexTemplate indexTemplate) &#123; DeleteByQueryRequestBuilder builder = DeleteByQueryAction.INSTANCE .newRequestBuilder(esClient) .filter(QueryBuilders.termQuery(\"example_id\", indexTemplate.getId())) .source(INDEX_NAME); BulkByScrollResponse response = builder.get(); long deleted = response.getDeleted(); if (deleted != totalHit) &#123; return false; &#125; else &#123; return create(indexTemplate); &#125; &#125; ç§»é™¤ç´¢å¼•æ¨¡ç‰ˆ 12345678private void remove(Long id) &#123; DeleteByQueryRequestBuilder builder = DeleteByQueryAction.INSTANCE .newRequestBuilder(esClient) .filter(QueryBuilders.termQuery(\"example_id\", id)) .source(INDEX_NAME); BulkByScrollResponse response = builder.get(); long deleted = response.getDeleted();&#125; ç®€å•æœç´¢ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556// é€šè¿‡æœç´¢æŸ¥è¯¢å‡ºidï¼Œ ç„¶åäº mysql ä¹‹ç±»æ•°æ®åº“è¿›è¡ŒèšåˆList&lt;Serializable&gt; search(SearchBody body)&#123; BoolQueryBuilder boolQuery = QueryBuilders.boolQuery(); // æ»¡è¶³filterå­å¥çš„æ¡ä»¶ã€‚ä½†æ˜¯ä¸ä¼šåƒMustä¸€æ ·ï¼Œå‚ä¸è®¡ç®—åˆ†å€¼ boolQuery.filter( // QueryBuilders.termQuery // QueryBuilders.rangeQuery //.. )// æé«˜æƒé‡, å¦‚æœéœ€è¦çš„è¯// boolQuery.must(// QueryBuilders.matchQuery(\"title\", body.getKeywords())// .boost(2.0f)// ); // [å¿…é¡»æ»¡è¶³çš„æ„æ€] æ»¡è¶³mustå­å¥çš„æ¡ä»¶ï¼Œå¹¶ä¸”å‚ä¸è®¡ç®—åˆ†å€¼ boolQuery.must( // QueryBuilders.multiMatchQuery å…³é”®è¯åŒ¹é…å¤šä¸ªå­—æ®µ //.. ) // æ»¡è¶³shouldå­å¥çš„æ¡ä»¶ã€‚åœ¨ä¸€ä¸ªBoolæŸ¥è¯¢ä¸­ï¼Œå¦‚æœæ²¡æœ‰mustæˆ–è€…filterï¼Œæœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªshouldå­å¥ï¼Œé‚£ä¹ˆåªè¦æ»¡è¶³ä¸€ä¸ªå°±å¯ä»¥è¿”å› boolQuery.should( //.. ) // ä¸æ»¡è¶³must_notå®šä¹‰çš„æ¡ä»¶ boolQuery.should( //.. ) SearchRequestBuilder requestBuilder = this.esClient.prepareSearch(INDEX_NAME) .setTypes(INDEX_TYPE) // æŸ¥è¯¢æ¡ä»¶ .setQuery(boolQuery) // æ’åº .addSort( \"createdAt\", \"DESC\" ) // å¼€å§‹ä½ç½® .setFrom(0) .setSize(100) // è®¾ç½®è¯¥å­—æ®µå¯ä»¥æœ‰æ•ˆå‡å°‘è¿”å›æ•°æ®é‡ .setFetchSource(\"id\", null); SearchResponse response = requestBuilder.get(); List&lt;Long&gt; ids = new ArrayList&lt;&gt;(); for (SearchHit hit : response.getHits()) &#123; System.out.println(hit.getSource()); ids.add(Longs.tryParse(String.valueOf(hit.getSource().get(\"example_id\")))); &#125; return ids;&#125; è‡ªåŠ¨è¡¥å…¨ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980// åŒ¹é…Collection&lt;String&gt; suggest(String prefix)&#123; CompletionSuggestionBuilder suggestion = SuggestBuilders.completionSuggestion(\"suggest\").prefix(prefix).size(5); SuggestBuilder suggestBuilder = new SuggestBuilder(); suggestBuilder.addSuggestion(\"autocomplete\", suggestion); SearchRequestBuilder requestBuilder = this.esClient.prepareSearch(INDEX_NAME) .setTypes(INDEX_TYPE) .suggest(suggestBuilder); SearchResponse response = requestBuilder.get(); Suggest suggest = response.getSuggest(); if (suggest == null) &#123; return ServiceResult.of(new ArrayList&lt;&gt;()); &#125; Suggest.Suggestion result = suggest.getSuggestion(\"autocomplete\"); int maxSuggest = 0; Set&lt;String&gt; suggestSet = new HashSet&lt;&gt;(); for (Object term : result.getEntries()) &#123; if (term instanceof CompletionSuggestion.Entry) &#123; CompletionSuggestion.Entry item = (CompletionSuggestion.Entry) term; if (item.getOptions().isEmpty()) &#123; continue; &#125; for (CompletionSuggestion.Entry.Option option : item.getOptions()) &#123; String tip = option.getText().string(); if (suggestSet.contains(tip)) &#123; continue; &#125; suggestSet.add(tip); maxSuggest++; &#125; &#125; if (maxSuggest &gt; 5) &#123; break; &#125; &#125; return suggestSet;&#125;// è®¾ç½®æƒé‡private boolean updateSuggest(ExampleIndexTemplate indexTemplate) &#123; AnalyzeRequestBuilder requestBuilder = new AnalyzeRequestBuilder( this.esClient, AnalyzeAction.INSTANCE, INDEX_NAME, // ä¼šè¢«æœç´¢çš„å­—æ®µçš„å€¼.. ); // ä½¿ç”¨çš„åˆ†è¯å™¨ requestBuilder.setAnalyzer(\"ik_smart\"); AnalyzeResponse response = requestBuilder.get(); List&lt;AnalyzeResponse.AnalyzeToken&gt; tokens = response.getTokens(); if (tokens == null) &#123; return false; &#125; List&lt;HouseSuggest&gt; suggests = new ArrayList&lt;&gt;(); for (AnalyzeResponse.AnalyzeToken token : tokens) &#123; // ç”Ÿæ•ˆé™åˆ¶ if (\"&lt;NUM&gt;\".equals(token.getType()) || token.getTerm().length() &lt; 2) &#123; continue; &#125; ExampleSuggest suggest = // .. suggests.add(suggest); &#125; // å…¶ä»–å½±å“å› ç´  ExampleSuggest suggest = // .. suggests.add(suggest); indexTemplate.setSuggest(suggests); return true;&#125; èšåˆç»Ÿè®¡ 1234567891011121314151617181920212223242526272829303132333435long aggregateNumber(String c1, String c2, String c3)&#123; BoolQueryBuilder boolQuery = QueryBuilders.boolQuery() .filter(QueryBuilders.termQuery( // èšåˆæ¡ä»¶ )) .filter(QueryBuilders.termQuery( // èšåˆæ¡ä»¶ )) .filter(QueryBuilders.termQuery( \"field_name\", c1 )); SearchRequestBuilder requestBuilder = this.esClient.prepareSearch(INDEX_NAME) .setTypes(INDEX_TYPE) .setQuery(boolQuery) .addAggregation( AggregationBuilders.terms(\"agg_number\") .field(\"field_name\") ).setSize(0); logger.debug(requestBuilder.toString()); SearchResponse response = requestBuilder.get(); if (response.status() == RestStatus.OK) &#123; Terms terms = response.getAggregations().get(\"agg_number\"); if (terms.getBuckets() != null &amp;&amp; !terms.getBuckets().isEmpty()) &#123; return terms.getBucketByKey(c1).getDocCount(); &#125; &#125; else &#123; return 0L; &#125; return 0L;&#125; ä½ç½®èŒƒå›´æŸ¥è¯¢ 123456789101112131415161718192021222324252627282930313233343536@Overridepublic Collection&lt;Long&gt; mapQuery(SearchBody body) &#123; BoolQueryBuilder boolQuery = QueryBuilders.boolQuery(); boolQuery.filter(QueryBuilders.termQuery( // .. )); boolQuery.filter( QueryBuilders.geoBoundingBoxQuery(\"location\") .setCorners( // å·¦ä¸Šè§’ new GeoPoint(body.getLeftLatitude(), body.getLeftLongitude()), // å³ä¸‹è§’ new GeoPoint(body.getRightLatitude(), body.getRightLongitude()) )); SearchRequestBuilder builder = this.esClient.prepareSearch(INDEX_NAME) .setTypes(INDEX_TYPE) .setQuery(boolQuery) .addSort( // .. ) .setFrom(0) .setSize(100); List&lt;Long&gt; ids = new ArrayList&lt;&gt;(); SearchResponse response = builder.get(); if (RestStatus.OK != response.status()) &#123; return ids; &#125; for (SearchHit hit : response.getHits()) &#123; ids.add(hit.getSource().get(\"example_id\")); &#125; return ids;&#125; JSONæ ¼å¼æŸ¥è¯¢è¯­æ³•å®˜æ–¹æ–‡æ¡£ æ¦‚è¦ mustå‚ä¸è®¡ç®—åˆ†å€¼ -&gt; and filterä¸å‚ä¸è®¡ç®—åˆ†å€¼ -&gt; and should -&gt; or must_not -&gt; not1234567891011121314151617181920212223242526272829303132// å¸ƒå°”æŸ¥è¯¢&#123; \"query\": &#123; \"bool\": &#123; // The clause (query) must appear in matching documents and will contribute to the score. // æ‰€æœ‰\"must\"æ¡ä»¶å¿…é¡»åŒ¹é…æˆåŠŸ, ä¸”è®¡ç®—åˆ†æ•° \"must\": [ &#123; \"match\": &#123; \"title\": \"Search\" &#125;&#125;, &#123; \"match\": &#123; \"content\": \"Elasticsearch\" &#125;&#125; ], // The clause (query) must appear in matching documents. However unlike must the score of the query will be ignored. Filter clauses are executed in filter context, meaning that scoring is ignored and clauses are considered for caching. // æ‰€æœ‰\"filter\"æ¡ä»¶å¿…é¡»åŒ¹é…æˆåŠŸ, ä¸è®¡ç®—åˆ†æ•°(å› æ­¤æŸ¥è¯¢é€Ÿåº¦è¾ƒå¿«) \"filter\": [ &#123; \"term\": &#123; \"status\": \"published\" &#125;&#125;, &#123; \"range\": &#123; \"publish_date\": &#123; \"gte\": \"2015-01-01\" &#125;&#125;&#125; ], // The clause (query) should appear in the matching document. If the bool query is in a query context and has a must or filter clause then a document will match the bool query even if none of the should queries match. In this case these clauses are only used to influence the score. If the bool query is a filter context or has neither must or filter then at least one of the should queries must match a document for it to match the bool query. This behavior may be explicitly controlled by settings the minimum_should_match parameter. // æƒ…å†µä¸€(åµŒå¥—bool): å½“\"should\"æ¡ä»¶åœ¨\"must\"æ¡ä»¶æˆ–è€…\"filter\"æ¡ä»¶å†…, æ­¤æ—¶ä¸è¦æ±‚æ»¡è¶³\"should\"æ¡ä»¶, ä½†æ˜¯ä¼šå½±å“åˆ°æŸ¥è¯¢åˆ†æ•° // æƒ…å†µäºŒ(å•æ¡bool): å½“\"should\"æ¡ä»¶ä¸åœ¨\"must\"æ¡ä»¶æˆ–è€…\"filter\"æ¡ä»¶å†…, é»˜è®¤æƒ…å†µè‡³å°‘æœ‰ä¸€ä¸ª\"should\"å­å¥éœ€è¦æ»¡è¶³(å¯é€šè¿‡é…ç½®`minimum_should_match`å‚æ•°è¿›è¡Œå˜æ›´) \"should\": [ &#123; \"range\": &#123;\"age\" : &#123; \"gte\" : 10, \"lte\" : 20 &#125;&#125;&#125; ], \"minimum_should_match\": 1, // The clause (query) must not appear in the matching documents. Clauses are executed in filter context meaning that scoring is ignored and clauses are considered for caching. Because scoring is ignored, a score of 0 for all documents is returned. // æ‰€æœ‰\"must_not\"æ¡ä»¶ä¸èƒ½åŒ¹é…æˆåŠŸ \"must_not\": [ &#123; \"term\": &#123; \"tag\" : \"wow\" &#125;&#125;, &#123; \"term\": &#123; \"tag\" : \"elasticsearch\" &#125;&#125; ] &#125; &#125;&#125; å…¨æ–‡æœç´¢ ä¼šèµ°åˆ†æå™¨ matchæè¿°: åŒ¹é…æŸ¥è¯¢, åªéœ€åŒ…å«éƒ¨åˆ†ã€‚eg: hello world, åªåŒ¹é…â€helloâ€æˆ–è€…â€worldâ€å¯æ¥å—ç±»å‹: text/numerics/dates1234567891011121314151617181920GET /_search// ç®€å•æŸ¥è¯¢&#123; \"query\": &#123; \"match\" : &#123; \"message\" : \"this is a test\" &#125; &#125;&#125;// å¤æ‚æŸ¥è¯¢&#123; \"query\": &#123; \"match\" : &#123; \"message\" : &#123; \"query\": \"this is a test\", \"å‚æ•°\": \"å€¼\" &#125; &#125; &#125;&#125; match_phrase æè¿°: åŒ¹é…è¯ç»„æŸ¥è¯¢, å¤šä¸ªè¯ä¸€èµ·è¢«æŸ¥è¯¢. eg: hello world, åŒ¹é…â€hello worldâ€ match_phrase_prefix æè¿°: åŒmatch_phraseä½†æ˜¯æœ€åä¸€ä¸ªè¯ä¼šè¢«å½“ä½œå‰ç¼€å»åŒ¹é…. eg: hello wo, å¯åŒ¹é…åˆ°â€hello worldâ€ multi_match æè¿°: åŒmatchä½†æ˜¯å¯ä»¥ä½œç”¨åœ¨å¤šä¸ªå­—æ®µä¸Šï¼Œä¸”å­—æ®µæ”¯æŒè¡¨è¾¾å¼ 12345678910GET /_search&#123; \"query\": &#123; \"multi_match\" : &#123; \"query\": \"this is a test\", \"fields\": [ \"subject\", \"*_name\" ], \"å‚æ•°\": \"å€¼\" &#125; &#125;&#125; common æè¿°: æ ¹æ®è¯é¢‘è¿›è¡ŒåŒ¹é…. 123456789101112GET /_search&#123; \"query\": &#123; \"common\": &#123; \"body\": &#123; \"query\": \"this is bonsai cool\", // è¯é¢‘ç‡: [0, 1] \"cutoff_frequency\": 0.001 &#125; &#125; &#125;&#125; query_string æè¿°: æ ¹æ®è¡¨è¾¾å¼è¿›è¡ŒåŒ¹é…, è¾“å…¥çš„å€¼ä¸ºè¡¨è¾¾å¼, æ”¯æŒä¸€äº›å†…ç½®å‚æ•°å’Œè¯­æ³•ã€‚ 12345678GET /_search&#123; \"query\": &#123; \"query_string\": &#123; \"query\": \"(content:this OR name:this) AND (content:that OR name:that)\" &#125; &#125;&#125; simple_query_string æè¿°: ä¸query_stringç±»ä¼¼, æ”¯æŒä¸€äº›æ›´ç®€ä¾¿çš„ç¬¦å·ã€‚ 12345678910GET /_search&#123; \"query\": &#123; \"simple_query_string\" : &#123; \"query\": \"\\\"fried eggs\\\" +(eggplant | potato) -frittata\", \"fields\": [\"title^5\", \"body\"], \"default_operator\": \"and\" &#125; &#125;&#125; æ¡ä»¶æŸ¥è¯¢ ç²¾å‡†æœç´¢ä¸€èˆ¬ç”¨äºç»“æ„åŒ–æ•°æ®è€Œéå…¨æ–‡åŒ¹é…: numbers, dates, and enums term æè¿°: åŒ¹é…å•ä¸ªå€¼, ç±»ä¼¼â€=â€, ä½†æ˜¯å…¶å…·å¤‡Elasticsearchçš„ç‰¹æ€§å¦‚: åˆ†æ•° 123456789101112131415161718192021222324252627282930// ç®€å•POST _search&#123; \"query\": &#123; \"term\" : &#123; \"user\" : \"Kimchy\" &#125; &#125;&#125;// å¤æ‚ï¼Œè®¾å®šåŒ¹é…åˆ†æ•°ä¹‹ç±»çš„GET _search&#123; \"query\": &#123; \"bool\": &#123; \"should\": [ &#123; \"term\": &#123; \"status\": &#123; \"value\": \"urgent\", \"boost\": 2.0 &#125; &#125; &#125;, &#123; \"term\": &#123; \"status\": \"normal\" &#125; &#125; ] &#125; &#125;&#125; terms æè¿°: åŒ¹é…å¤šä¸ªå€¼, ç±»ä¼¼â€inâ€ 1234567// ç®€å•GET /_search&#123; \"query\": &#123; \"terms\" : &#123; \"user\" : [\"kimchy\", \"elasticsearch\"]&#125; &#125;&#125; terms_set æè¿°: å®šåˆ¶åŒ–åŒ¹é…è§„åˆ™ 1234567891011GET /my-index/_search&#123; \"query\": &#123; \"terms_set\": &#123; \"codes\" : &#123; \"terms\" : [\"abc\", \"def\", \"ghi\"], \"minimum_should_match_field\": \"required_matches\" &#125; &#125; &#125;&#125; range æè¿°: èŒƒå›´åŒ¹é…, æ”¯æŒ: stringï¼Œdateï¼Œnumeric 123456789101112GET _search&#123; \"query\": &#123; \"range\" : &#123; \"age\" : &#123; \"gte\" : 10, \"lte\" : 20, \"boost\" : 2.0 &#125; &#125; &#125;&#125; exists æè¿°: å­˜åœ¨æŸ¥è¯¢, å¿…é¡»è‡³å°‘å­˜åœ¨ä¸€ä¸ªénullå€¼. eg: user: [null, â€˜hocginâ€™] 123456GET /_search&#123; \"query\": &#123; \"exists\" : &#123; \"field\" : \"user\" &#125; &#125;&#125; prefix æè¿°: å‰ç¼€åŒ¹é…. 12345GET /_search&#123; \"query\": &#123; \"prefix\" : &#123; \"user\" : \"ki\" &#125; &#125;&#125; wildcard æè¿°: é€šé…ç¬¦åŒ¹é…ã€‚ç±»ä¼¼like 123456GET /_search&#123; \"query\": &#123; \"wildcard\" : &#123; \"user\" : \"ki*y\" &#125; &#125;&#125; regexp æè¿°: æ­£åˆ™åŒ¹é…ï¼Œå…è®¸ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ã€‚âš ï¸: æ€§èƒ½å–å†³äºæ­£åˆ™è¡¨è¾¾å¼å†™æ³•ï¼Œå»ºè®®ç”¨é¥¥é¥¿æ¨¡å¼ 12345678GET /_search&#123; \"query\": &#123; \"regexp\":&#123; \"name.first\": \"s.*y?\" &#125; &#125;&#125; fuzzy æè¿°: æ¨¡ç³ŠæŸ¥è¯¢. é€‚ç”¨äºæ‹¼å†™é”™è¯¯æ—¶æœç´¢ã€‚ 123456GET /_search&#123; \"query\": &#123; \"fuzzy\" : &#123; \"user\" : \"ki\" &#125; &#125;&#125; type æè¿°: æ–‡æ¡£ç±»å‹æŸ¥è¯¢ 12345678GET /_search&#123; \"query\": &#123; \"type\" : &#123; \"value\" : \"_doc\" &#125; &#125;&#125; ids æè¿°: æ ¹æ®idå­—æ®µè¿‡æ»¤æ–‡æ¡£æ•°æ® 123456789GET /_search&#123; \"query\": &#123; \"ids\" : &#123; \"type\" : \"_doc\", \"values\" : [\"1\", \"4\", \"100\"] &#125; &#125;&#125; å¤åˆæŸ¥è¯¢ constant_score æè¿°: å¿½ç•¥è¯„åˆ†æŸ¥è¯¢, æŸ¥è¯¢é€Ÿåº¦æ›´å¿«(ä½¿ç”¨ç¼“å­˜)ã€‚ 1234567891011GET /_search&#123; \"query\": &#123; \"constant_score\" : &#123; \"filter\" : &#123; \"term\" : &#123; \"user\" : \"kimchy\"&#125; &#125;, \"boost\" : 1.2 &#125; &#125;&#125; Bool æŸ¥è¯¢ æè¿°: ä½¿ç”¨å…¶ä»–æŸ¥è¯¢çš„boolå€¼ç»„åˆçš„æŸ¥è¯¢ã€‚è¯¦ç»†å‚è€ƒæ¦‚è¦ 123456789101112131415161718192021222324POST _search&#123; \"query\": &#123; \"bool\" : &#123; \"must\" : &#123; \"term\" : &#123; \"user\" : \"kimchy\" &#125; &#125;, \"filter\": &#123; \"term\" : &#123; \"tag\" : \"tech\" &#125; &#125;, \"must_not\" : &#123; \"range\" : &#123; \"age\" : &#123; \"gte\" : 10, \"lte\" : 20 &#125; &#125; &#125;, \"should\" : [ &#123; \"term\" : &#123; \"tag\" : \"wow\" &#125; &#125;, &#123; \"term\" : &#123; \"tag\" : \"elasticsearch\" &#125; &#125; ], \"minimum_should_match\" : 1, \"boost\" : 1.0 &#125; &#125;&#125; Dis Max Query æè¿°: å–å¤šä¸ªæ¡ä»¶æŸ¥è¯¢ç»“æœä¸­ï¼Œå¾—åˆ†æœ€é«˜çš„æŸ¥è¯¢ç»“æœã€‚å¯ä»¥é€šè¿‡: tie_breaker æ¥å…³è”å…¶ä»–æŸ¥è¯¢ç»“æœçš„åˆ†æ•°ã€‚ 123456789101112131415161718GET /_search&#123; \"query\": &#123; \"dis_max\" : &#123; // æ­¤å¤„ç›¸å½“äºé™¤æœ€ä½³åŒ¹é…å¤–ï¼Œå…¶ä»–åŒ¹é…ç»“æœçš„å‚ä¸ç¨‹åº¦. --- è¨€å¤–ä¹‹æ„, å¤šæ–¹é¢è€ƒè™‘ \"tie_breaker\" : 0.7, \"boost\" : 1.2, \"queries\" : [ &#123; \"term\" : &#123; \"age\" : 34 &#125; &#125;, &#123; \"term\" : &#123; \"age\" : 35 &#125; &#125; ] &#125; &#125;&#125; Function Score Query æè¿°: æ‰“åˆ†å™¨. æœ€åæ‰“åˆ†é˜¶æ®µï¼Œå¼•å…¥ä¸€äº›æœ€ä½³å€¼çš„è®¡ç®—æ–¹å¼. â€” è¨€å¤–ä¹‹æ„ï¼Œä½œå¼Šå™¨ 1234567891011GET /_search&#123; \"query\": &#123; \"function_score\": &#123; \"query\": &#123; \"match_all\": &#123;&#125; &#125;, \"boost\": \"5\", \"random_score\": &#123;&#125;, \"boost_mode\":\"multiply\" &#125; &#125;&#125; Boosting Query æè¿°: è®¾ç½®æ¡ä»¶çš„æƒé‡. 123456789101112131415161718GET /_search&#123; \"query\": &#123; \"boosting\" : &#123; \"positive\" : &#123; \"term\" : &#123; \"field1\" : \"value1\" &#125; &#125;, \"negative\" : &#123; \"term\" : &#123; \"field2\" : \"value2\" &#125; &#125;, \"negative_boost\" : 0.2 &#125; &#125;&#125; è¿æ¥æŸ¥è¯¢ Nested Query æè¿° 1234567891011121314151617181920GET /_search&#123; \"query\": &#123; \"nested\" : &#123; // åµŒå¥—å¯¹è±¡è·¯å¾„ \"path\" : \"obj1\", // å½±å“çš„è®¡åˆ†æ–¹å¼ \"score_mode\" : \"avg\", \"query\" : &#123; \"bool\" : &#123; \"must\" : [ // âš ï¸: å­—æ®µå¿…é¡»æ˜¯å®Œæ•´è·¯å¾„ &#123; \"match\" : &#123;\"obj1.name\" : \"blue\"&#125; &#125;, &#123; \"range\" : &#123;\"obj1.count\" : &#123;\"gt\" : 5&#125;&#125; &#125; ] &#125; &#125; &#125; &#125;&#125; Has Child Query æè¿°: è¿›è¡Œå­æ–‡æ¡£æŸ¥è¯¢, è¿”å›çˆ¶æ–‡æ¡£. æ…¢æŸ¥è¯¢ï¼Œæ…ç”¨ 1234567891011121314GET /_search&#123; \"query\": &#123; \"has_child\" : &#123; \"type\" : \"blog_tag\", \"score_mode\" : \"min\", \"query\" : &#123; \"term\" : &#123; \"tag\" : \"something\" &#125; &#125; &#125; &#125;&#125; Has Parent Query æè¿°: çˆ¶æ–‡æ¡£æŸ¥è¯¢ï¼Œè¿”å›å­æ–‡æ¡£. 12345678910111213GET /_search&#123; \"query\": &#123; \"has_parent\" : &#123; \"parent_type\" : \"blog\", \"query\" : &#123; \"term\" : &#123; \"tag\" : \"something\" &#125; &#125; &#125; &#125;&#125; Parent Id Query æè¿°: çˆ¶IDæŸ¥è¯¢ï¼Œè¿”å›å­æ–‡æ¡£ 123456789GET /my_index/_search&#123; \"query\": &#123; \"parent_id\": &#123; \"type\": \"my_child\", \"id\": \"1\" &#125; &#125;&#125; åœ°ç†ä½ç½®æŸ¥è¯¢ éœ€è¦geo_shapeç±»å‹ GeoShape Queryæè¿°: GeoShape æŸ¥è¯¢ï¼ŒæŸ¥è¯¢åœ¨å¤šè¾¹å½¢(åŸºäºGeoJSON)å†…çš„ç‚¹ã€‚æ—¢: ç”¨ä¸€ä¸ªå¤šè¾¹å½¢å»æœç´¢ã€‚ 123456789101112131415161718192021GET /example/_search&#123; \"query\":&#123; \"bool\": &#123; \"must\": &#123; \"match_all\": &#123;&#125; &#125;, \"filter\": &#123; \"geo_shape\": &#123; \"location\": &#123; \"shape\": &#123; \"type\": \"envelope\", \"coordinates\" : [[13.0, 53.0], [14.0, 52.0]] &#125;, \"relation\": \"within\" &#125; &#125; &#125; &#125; &#125;&#125; Geo Bounding Box Query æè¿°: åœ°ç†è¾¹ç•Œæ¡†æŸ¥è¯¢ï¼Œå³ç”¨ä¸€ä¸ªè¾¹ç•ŒèŒƒå›´å»æœç´¢ã€‚ 123456789101112131415161718192021222324GET /_search&#123; \"query\": &#123; \"bool\" : &#123; \"must\" : &#123; \"match_all\" : &#123;&#125; &#125;, \"filter\" : &#123; \"geo_bounding_box\" : &#123; \"pin.location\" : &#123; \"top_left\" : &#123; \"lat\" : 40.73, \"lon\" : -74.1 &#125;, \"bottom_right\" : &#123; \"lat\" : 40.01, \"lon\" : -71.12 &#125; &#125; &#125; &#125; &#125; &#125;&#125; Geo Distance Query æè¿°: åœ°ç†è·ç¦»æŸ¥è¯¢ 12345678910111213141516171819GET /my_locations/_search&#123; \"query\": &#123; \"bool\" : &#123; \"must\" : &#123; \"match_all\" : &#123;&#125; &#125;, \"filter\" : &#123; \"geo_distance\" : &#123; \"distance\" : \"200km\", \"pin.location\" : &#123; \"lat\" : 40, \"lon\" : -70 &#125; &#125; &#125; &#125; &#125;&#125; Geo Polygon Query æè¿°: åœ°ç†å¤šè¾¹å½¢æŸ¥è¯¢, è¿”å›å›´æ å†…çš„æ•°æ® 123456789101112131415161718192021GET /_search&#123; \"query\": &#123; \"bool\" : &#123; \"must\" : &#123; \"match_all\" : &#123;&#125; &#125;, \"filter\" : &#123; \"geo_polygon\" : &#123; \"person.location\" : &#123; \"points\" : [ &#123;\"lat\" : 40, \"lon\" : -70&#125;, &#123;\"lat\" : 30, \"lon\" : -80&#125;, &#123;\"lat\" : 20, \"lon\" : -90&#125; ] &#125; &#125; &#125; &#125; &#125;&#125; å®šåˆ¶åŒ–æŸ¥è¯¢ More Like This Query æè¿°: æ ¹æ®å­—æ®µè¿›è¡ŒåŒ¹é…æ–‡å­—çš„ç›¸è¯†åº¦ï¼Œä¸€èˆ¬ç”¨äºè¿›è¡Œæ–‡ç« æˆ–å†…å®¹çš„ç›¸è¯†åº¦æ¨è 1234567891011GET /_search&#123; \"query\": &#123; \"more_like_this\" : &#123; \"fields\" : [\"title\", \"description\"], \"like\" : \"Once upon a time\", \"min_term_freq\" : 1, \"max_query_terms\" : 12 &#125; &#125;&#125; Script Query æè¿°: è„šæœ¬æŸ¥è¯¢ï¼Œä½¿ç”¨ç‰¹å®šçš„è¯­æ³•è„šæœ¬è¿›è¡ŒæŸ¥è¯¢ã€‚ 123456789101112131415GET /_search&#123; \"query\": &#123; \"bool\" : &#123; \"filter\" : &#123; \"script\" : &#123; \"script\" : &#123; \"source\": \"doc['num1'].value &gt; 1\", \"lang\": \"painless\" &#125; &#125; &#125; &#125; &#125;&#125; Percolate Query æè¿°: PercolateæŸ¥è¯¢ï¼Œå¯ç”¨äºåŒ¹é…å­˜å‚¨åœ¨ç´¢å¼•ä¸­çš„æŸ¥è¯¢, 1234567891011GET /my-index/_search&#123; \"query\" : &#123; \"percolate\" : &#123; \"field\" : \"query\", \"document\" : &#123; \"message\" : \"A new bonsai tree in the office\" &#125; &#125; &#125;&#125; Wrapper Query æè¿°: åŒ…è£…å™¨æŸ¥è¯¢, å°†æŸ¥è¯¢æ¡ä»¶å­—ç¬¦ä¸² base64 ç¼–ç  123456789GET /_search&#123; \"query\" : &#123; \"wrapper\": &#123; // &#123;\"term\" : &#123; \"user\" : \"Kimchy\" &#125;&#125; \"query\" : \"eyJ0ZXJtIiA6IHsgInVzZXIiIDogIktpbWNoeSIgfX0=\" &#125; &#125;&#125; è·¨åº¦æŸ¥è¯¢ Span Term Query æè¿°: ç­‰ä»·äºterm 123456GET /_search&#123; \"query\": &#123; \"span_term\" : &#123; \"user\" : \"kimchy\" &#125; &#125;&#125; Span Multi Term Query æè¿°: å¤šä¸ªè·¨åº¦æŸ¥è¯¢ç»„åˆ, å…è®¸ (wildcard, fuzzy, prefix, range or regexp query) ä¹‹ä¸€ 12345678910GET /_search&#123; \"query\": &#123; \"span_multi\":&#123; \"match\":&#123; \"prefix\" : &#123; \"user\" : &#123; \"value\" : \"ki\", \"boost\" : 1.08 &#125; &#125; &#125; &#125; &#125;&#125; Span First Query æè¿°: è·¨åº¦ä¼˜å…ˆæŸ¥è¯¢ï¼Œ 1234567891011GET /_search&#123; \"query\": &#123; \"span_first\" : &#123; \"match\" : &#123; \"span_term\" : &#123; \"user\" : \"kimchy\" &#125; &#125;, \"end\" : 3 &#125; &#125;&#125; Span Near Query æè¿°: æ¥å—å¤šä¸ªè·¨åº¦æŸ¥è¯¢ï¼Œå…¶åŒ¹é…å¿…é¡»åœ¨å½¼æ­¤çš„æŒ‡å®šè·ç¦»å†…ï¼Œå¹¶ä¸”å¯èƒ½ä»¥ç›¸åŒçš„é¡ºåºã€‚ 1234567891011121314GET /_search&#123; \"query\": &#123; \"span_near\" : &#123; \"clauses\" : [ &#123; \"span_term\" : &#123; \"field\" : \"value1\" &#125; &#125;, &#123; \"span_term\" : &#123; \"field\" : \"value2\" &#125; &#125;, &#123; \"span_term\" : &#123; \"field\" : \"value3\" &#125; &#125; ], \"slop\" : 12, \"in_order\" : false &#125; &#125;&#125; Span Or Query æè¿°: ç»„åˆå¤šä¸ªè·¨åº¦æŸ¥è¯¢ - è¿”å›ä¸ä»»ä½•æŒ‡å®šæŸ¥è¯¢åŒ¹é…çš„æ–‡æ¡£ã€‚ 123456789101112GET /_search&#123; \"query\": &#123; \"span_or\" : &#123; \"clauses\" : [ &#123; \"span_term\" : &#123; \"field\" : \"value1\" &#125; &#125;, &#123; \"span_term\" : &#123; \"field\" : \"value2\" &#125; &#125;, &#123; \"span_term\" : &#123; \"field\" : \"value3\" &#125; &#125; ] &#125; &#125;&#125; Span Not Query æè¿°: åŒ…è£…å¦ä¸€ä¸ªspanæŸ¥è¯¢ï¼Œå¹¶æ’é™¤ä¸è¯¥æŸ¥è¯¢åŒ¹é…çš„ä»»ä½•æ–‡æ¡£ã€‚ 1234567891011121314151617181920GET /_search&#123; \"query\": &#123; \"span_not\" : &#123; \"include\" : &#123; \"span_term\" : &#123; \"field1\" : \"hoya\" &#125; &#125;, \"exclude\" : &#123; \"span_near\" : &#123; \"clauses\" : [ &#123; \"span_term\" : &#123; \"field1\" : \"la\" &#125; &#125;, &#123; \"span_term\" : &#123; \"field1\" : \"hoya\" &#125; &#125; ], \"slop\" : 0, \"in_order\" : true &#125; &#125; &#125; &#125;&#125; Span Containing Query æè¿°: æ¥å—è·¨åº¦æŸ¥è¯¢åˆ—è¡¨ï¼Œä½†ä»…è¿”å›ä¸ç¬¬äºŒä¸ªè·¨åº¦æŸ¥è¯¢åŒ¹é…çš„è·¨åº¦ã€‚ 123456789101112131415161718192021curl -X GET \"localhost:9200/_search\" -H 'Content-Type: application/json' -d'&#123; \"query\": &#123; \"span_containing\" : &#123; \"little\" : &#123; \"span_term\" : &#123; \"field1\" : \"foo\" &#125; &#125;, \"big\" : &#123; \"span_near\" : &#123; \"clauses\" : [ &#123; \"span_term\" : &#123; \"field1\" : \"bar\" &#125; &#125;, &#123; \"span_term\" : &#123; \"field1\" : \"baz\" &#125; &#125; ], \"slop\" : 5, \"in_order\" : true &#125; &#125; &#125; &#125;&#125;' Span Within Query æè¿°: åªè¦å…¶è·¨åº¦è½åœ¨ç”±å…¶ä»–è·¨åº¦æŸ¥è¯¢åˆ—è¡¨è¿”å›çš„è·¨åº¦å†…ï¼Œå°±ä¼šè¿”å›å•è·¨åº¦æŸ¥è¯¢çš„ç»“æœã€‚ 123456789101112131415161718192021curl -X GET \"localhost:9200/_search\" -H 'Content-Type: application/json' -d'&#123; \"query\": &#123; \"span_within\" : &#123; \"little\" : &#123; \"span_term\" : &#123; \"field1\" : \"foo\" &#125; &#125;, \"big\" : &#123; \"span_near\" : &#123; \"clauses\" : [ &#123; \"span_term\" : &#123; \"field1\" : \"bar\" &#125; &#125;, &#123; \"span_term\" : &#123; \"field1\" : \"baz\" &#125; &#125; ], \"slop\" : 5, \"in_order\" : true &#125; &#125; &#125; &#125;&#125;' Span Field Masking Query æè¿°: å…è®¸æŸ¥è¯¢ä¸åŒçš„å­—æ®µspan-nearæˆ–span-orè·¨ä¸åŒå­—æ®µã€‚ 123456789101112131415161718192021222324252627curl -X GET \"localhost:9200/_search\" -H 'Content-Type: application/json' -d'&#123; \"query\": &#123; \"span_near\": &#123; \"clauses\": [ &#123; \"span_term\": &#123; \"text\": \"quick brown\" &#125; &#125;, &#123; \"field_masking_span\": &#123; \"query\": &#123; \"span_term\": &#123; \"text.stems\": \"fox\" &#125; &#125;, \"field\": \"text\" &#125; &#125; ], \"slop\": 5, \"in_order\": false &#125; &#125;&#125;' æ’ä»¶ elasticsearch-plugin install {url} ä¸­æ–‡åˆ†è¯æ’ä»¶ æ–‡æ¡£ElasticSearch å®˜æ–¹æ–‡æ¡£å…¨æ–‡æœç´¢å¼•æ“ Elasticsearch å…¥é—¨æ•™ç¨‹","categories":[{"name":"æœåŠ¡ç«¯","slug":"æœåŠ¡ç«¯","permalink":"https://hocg.in/categories/æœåŠ¡ç«¯/"}],"tags":[{"name":"Elasticsearch","slug":"Elasticsearch","permalink":"https://hocg.in/tags/Elasticsearch/"}],"keywords":[{"name":"æœåŠ¡ç«¯","slug":"æœåŠ¡ç«¯","permalink":"https://hocg.in/categories/æœåŠ¡ç«¯/"}]},{"title":"K8s ä¸ kubeadm ä½¿ç”¨çš„ä¸€äº›è®°å½•","slug":"k8sä¸kubeadmä½¿ç”¨çš„ä¸€äº›è®°å½•","date":"2019-03-08T01:13:00.000Z","updated":"2019-04-09T03:00:39.738Z","comments":true,"path":"2019/03/08/k8sä¸kubeadmä½¿ç”¨çš„ä¸€äº›è®°å½•/","link":"","permalink":"https://hocg.in/2019/03/08/k8sä¸kubeadmä½¿ç”¨çš„ä¸€äº›è®°å½•/","excerpt":"è¿™ç¯‡æ˜¯äº†è§£ k8s è¿‡ç¨‹éšæ‰‹è®°å½•ä¸ä¹‹ç›¸å…³çš„ä¸€äº›æ¦‚å¿µ","text":"è¿™ç¯‡æ˜¯äº†è§£ k8s è¿‡ç¨‹éšæ‰‹è®°å½•ä¸ä¹‹ç›¸å…³çš„ä¸€äº›æ¦‚å¿µ Dockeråº•å±‚æŠ€æœ¯ é™åˆ¶, Cgoups ç”¨æ¥åˆ†é…èµ„æºçš„, å¦‚cpu,å†…å­˜ éš”ç¦», NamespaceæŠ€æœ¯ æœ‰ç‚¹ç±»ä¼¼å‘½åç©ºé—´çš„æ¦‚å¿µ, éš”ç¦»è¿›ç¨‹ å®¹å™¨æœ¬è´¨æ—¢ç‰¹æ®Šè¿›ç¨‹ pid=1 æ–‡ä»¶ç³»ç»Ÿ, pivot_root/chroot æ„å»ºæ–‡ä»¶ç³»ç»Ÿ æ–‡ä»¶å±‚, Union File System k8s å¤„ç†å®¹å™¨é—´çš„å…³ç³», æ—¢ç¼–æ’ Master Node ç»„ä»¶å’ŒèŒè´£ Master èŠ‚ç‚¹ kube-apiserver è´Ÿè´£APIæœåŠ¡ etcd æŒä¹…åŒ–æ•°æ® kubelet æ ¸å¿ƒ ä¸å®¹å™¨äº¤äº’(CRI) ç®¡ç†å®¿ä¸»æœº(Device Plugin) ç½‘ç»œé…ç½®(CNI) æŒä¹…åŒ–å­˜å‚¨(CSI) kube-scheduler è´Ÿè´£è°ƒåº¦ kube-controller-manager è´Ÿè´£å®¹å™¨ç¼–æ’ Worker èŠ‚ç‚¹ kubeadmå‡†å¤‡æºç¯å¢ƒ OS: Ubuntu 16.04 LTS Master èŠ‚ç‚¹ å‡†å¤‡æºç¯å¢ƒ 123456789curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add -cat &lt;&lt;EOF &gt; /etc/apt/sources.list.d/kubernetes.listdeb http://apt.kubernetes.io/ kubernetes-xenial mainEOFapt-get update# E: The method driver /usr/lib/apt/methods/https could not be found.# sudo apt-get install apt-transport-httpsapt-get install -y docker.io kubeadm å‡†å¤‡kubeadm.ymlè„šæœ¬ 123456789apiVersion: kubeadm.k8s.io/v1alpha1kind: MasterConfigurationcontrollerManagerExtraArgs: horizontal-pod-autoscaler-use-rest-clients: \"true\" horizontal-pod-autoscaler-sync-period: \"10s\" node-monitor-grace-period: \"10s\"apiServerExtraArgs: runtime-config: \"api/all=true\"kubernetesVersion: \"stable-1.11\" æ‰§è¡Œ kubeadm åˆå§‹åŒ– 1kubeadm init config kubeadm.yml æ‰§è¡Œç»“æœ 1234567891011121314151617# ...Your Kubernetes master has initialized successfully!To start using your cluster, you need to run the following as a regular user: mkdir -p $HOME/.kube sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config sudo chown $(id -u):$(id -g) $HOME/.kube/configYou should now deploy a pod network to the cluster.Run \"kubectl apply -f [podnetwork].yaml\" with one of the options listed at: https://kubernetes.io/docs/concepts/cluster-administration/addons/You can now join any number of machines by running the following on each nodeas root: kubeadm join 10.140.0.2:6443 --token 9tf8vg.633b2jjzzsglp9n6 --discovery-token-ca-cert-hash sha256:7bc87892cf9715e1393da6c9aace18e13bc6eeeec2ed8bbf8f01d3bccc5b0c20 éœ€è¦çš„é›†ç¾¤é…ç½® 123mkdir -p $HOME/.kubesudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/configsudo chown $(id -u):$(id -g) $HOME/.kube/config éƒ¨ç½²ç½‘ç»œæ’ä»¶ 1kubectl apply -f https://git.io/weave-kube-1.6 Cluster èŠ‚ç‚¹ åŒ [Master èŠ‚ç‚¹ 1. å‡†å¤‡æºç¯å¢ƒ] å°† Cluster åŠ å…¥ Master ç®¡ç† æ‰§è¡Œ [Master èŠ‚ç‚¹ 4. æ‰§è¡Œç»“æœ ä¸­çš„ kubeadm join ...]:é‡ç‚¹: æœ‰ä¸€ç§æƒ…å†µ, å½“kubeadm initç”Ÿæˆçš„tokenè¿‡æœŸæ—¶, å¯ä½¿ç”¨kubeadm token createé‡æ–°ç”Ÿæˆ åŸºæœ¬æŒ‡ä»¤123456789101112131415# æŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€kubectl get nodes# æŸ¥çœ‹èŠ‚ç‚¹å¯¹è±¡çš„è¯¦æƒ…kubectl describe node k8s-3# æŸ¥çœ‹è¯¥èŠ‚ç‚¹, kube-system ç³»ç»Ÿä¸Š pods çŠ¶æ€kubectl get pods -n kube-system# å®‰è£…æ’ä»¶, ä¾‹å¦‚: å®‰è£…ç½‘ç»œæ’ä»¶kubectl apply -f https://git.io/weave-kube-1.6# ç§»é™¤æ‰€æœ‰ Taint, \"-\" åŒ¹é… \":xx\"# æ³¨æ„: å•æœº Master éœ€è¦ä½¿ç”¨kubectl taint nodes --all node-role.kubernetes.io/master- æ’ä»¶1234567# Dashboard, ä»ªè¡¨ç›˜, é¡¹ç›®åœ°å€: https://github.com/kubernetes/dashboardkubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v1.10.1/src/deploy/recommended/kubernetes-dashboard.yaml# Rook, äº‘å­˜å‚¨, é¡¹ç›®åœ°å€: https://github.com/rook/rookkubectl apply -f https://raw.githubusercontent.com/rook/rook/master/cluster/examples/kubernetes/ceph/operator.yamlkubectl apply -f https://raw.githubusercontent.com/rook/rook/master/cluster/examples/kubernetes/ceph/cluster.yaml é«˜å¯ç”¨é¡¹ç›®12# RocketMQkubectl apply -f https://raw.githubusercontent.com/apache/rocketmq-externals/master/rocketmq-docker/4.4.0/kubernetes/deployment.yaml ç¼–æ’æ–‡ä»¶123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051apiVersion: extensions/v1beta1 # å¿…é€‰ï¼Œç‰ˆæœ¬å·kind: Deployment # å¿…é€‰metadata: # å…ƒæ•°æ® name: rocketmq# =========== æ§åˆ¶å™¨éƒ¨åˆ† ===========spec: replicas: 1 # Pods æ•°é‡# =========== Pods éƒ¨åˆ† =========== template: metadata: labels: app: rocketmq spec: containers: - name: broker image: rocketmqinc/rocketmq:4.4.0 command: [\"sh\",\"mqbroker\", \"-n\",\"localhost:9876\"] imagePullPolicy: IfNotPresent ports: - containerPort: 10909 # å®¹å™¨ç«¯å£ # - hostPort: 10909 # ä¸»æœºç«¯å£ - containerPort: 10911 volumeMounts: - mountPath: /root/logs name: brokeroptlogs - mountPath: /root/store name: brokeroptstore - name: namesrv image: rocketmqinc/rocketmq:4.4.0 command: [\"sh\",\"mqnamesrv\"] imagePullPolicy: IfNotPresent ports: - containerPort: 9876 volumeMounts: - mountPath: /root/logs name: namesrvoptlogs - mountPath: /root/store name: namesrvoptstore volumes: - name: brokeroptlogs hostPath: path: /data/broker/logs - name: brokeroptstore hostPath: path: /data/broker/store - name: namesrvoptlogs hostPath: path: /data/namesrv/logs - name: namesrvoptstore hostPath: path: /data/namesrv/store çŸ¥è¯†ç‚¹: serviceÂ·podsÂ·nodeÂ·clusterÂ·container Service: ä¸€ç»„ pods. çŸ¥è¯†ç‚¹: nodePortÂ·portÂ·targetPortÂ·containerPortserviceç›¸å…³ Service çš„ç±»å‹ä¸º ClusterIP port: æš´éœ²åœ¨ Service(Cluster IP) ä¸Šçš„ç«¯å£, å³é›†ç¾¤ä¸­ä½¿ç”¨. service æš´éœ²åœ¨ cluster ip ä¸Šçš„ç«¯å£ï¼Œ:port æ˜¯æä¾›ç»™é›†ç¾¤å†…éƒ¨å®¢æˆ·è®¿é—® service çš„å…¥å£ targetPort: æŒ‡å®š pod ä¸Šçš„ç«¯å£, ä¼šè¢«æ˜ å°„åˆ° port ä¸Š. targetPort æ˜¯ pod ä¸Šçš„ç«¯å£ï¼Œä» port å’Œ nodePort ä¸Šåˆ°æ¥çš„æ•°æ®æœ€ç»ˆç»è¿‡ kube-proxy æµå…¥åˆ°åç«¯ pod çš„ targetPort ä¸Šè¿›å…¥å®¹å™¨ Service çš„ç±»å‹ä¸º NodePort nodePort: ç”¨äºé›†ç¾¤å¤–éƒ¨è®¿é—® Cluster IP åªèƒ½é›†ç¾¤å†…éƒ¨è®¿é—®(æºä¸ç›®æ ‡éœ€è¦æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶: kube-proxyæ­£å¸¸è¿è¡Œï¼Œè·¨ä¸»æœºå®¹å™¨ç½‘ç»œé€šä¿¡æ­£å¸¸)ï¼ŒNodePort ä¼šåœ¨æ¯ä¸ª kubelet èŠ‚ç‚¹çš„å®¿ä¸»æœºå¼€å¯ä¸€ä¸ªç«¯å£ï¼Œç”¨äºåº”ç”¨é›†ç¾¤å¤–éƒ¨è®¿é—®ã€‚ å®¹å™¨ç›¸å…³ç±»ä¼¼docker -p containerPort: å®¹å™¨éœ€è¦æš´éœ²çš„ç«¯å£ hostPort: å®¹å™¨æš´éœ²çš„ç«¯å£æ˜ å°„åˆ°çš„ä¸»æœºç«¯å£ï¼Œé»˜è®¤ä¸Containerç›¸åŒ éšç¬” ç´§å¯†äº¤äº’å…³ç³», Pod å…±äº«ä¸€ç»„ Network Namespace, ä¸€ç»„æ•°æ®å· Service åˆ†é… Pod å›ºå®šçš„è™šæ‹ŸIP Pod æ´ç™–æœºåˆ¶, Taint/Toleration kubeadm æ–¹æ¡ˆ, ä¸€é”®éƒ¨ç½², å¯é€šè¿‡é…ç½®å®ç°ç”Ÿäº§ç¯å¢ƒä½¿ç”¨(æœªåˆ°GAé˜¶æ®µ) minikuke æ–¹æ¡ˆ, ä¸€é”®éƒ¨ç½², ä»…èƒ½ç”¨äºæœ¬åœ°å®éªŒ kops æ–¹æ¡ˆ, å¯ç”¨äºéƒ¨ç½²ç”Ÿäº§ç¯å¢ƒ","categories":[{"name":"K8s","slug":"K8s","permalink":"https://hocg.in/categories/K8s/"}],"tags":[{"name":"K8s","slug":"K8s","permalink":"https://hocg.in/tags/K8s/"}],"keywords":[{"name":"K8s","slug":"K8s","permalink":"https://hocg.in/categories/K8s/"}]},{"title":"å¦‚ä½•åšå•å…ƒæµ‹è¯•","slug":"å¦‚ä½•åšå•å…ƒæµ‹è¯•","date":"2019-02-02T05:17:21.000Z","updated":"2019-04-09T03:18:06.278Z","comments":true,"path":"2019/02/02/å¦‚ä½•åšå•å…ƒæµ‹è¯•/","link":"","permalink":"https://hocg.in/2019/02/02/å¦‚ä½•åšå•å…ƒæµ‹è¯•/","excerpt":"å¦‚ä½•åœ¨é¡¹ç›®ä¸­åšå¥½å•å…ƒæµ‹è¯•ï¼Œåœ¨æ­¤æ€»ç»“å’Œè®°å½•","text":"å¦‚ä½•åœ¨é¡¹ç›®ä¸­åšå¥½å•å…ƒæµ‹è¯•ï¼Œåœ¨æ­¤æ€»ç»“å’Œè®°å½• å•å…ƒæµ‹è¯•æ —å­ å„å±‚æµ‹è¯•æ–¹å¼Controller å±‚ ä½¿ç”¨ Rest æ¨¡æ‹Ÿè¯·æ±‚ Mock ç›¸å…³ Service æ¥å£ Service å±‚ ä½¿ç”¨ Mockit Mock å‡½æ•° Mapper å±‚- ä½¿ç”¨ @Sql åˆ¶é€ æ•°æ®é“¾æ¥ å‚è€ƒç¤ºä¾‹ å°è°ˆ Java å•å…ƒæµ‹è¯• - èŠ‹é“æºç  - CSDNåšå®¢ Apolloï¼ˆé˜¿æ³¢ç½—ï¼‰","categories":[{"name":"Java","slug":"Java","permalink":"https://hocg.in/categories/Java/"}],"tags":[{"name":"Tips","slug":"Tips","permalink":"https://hocg.in/tags/Tips/"},{"name":"Java","slug":"Java","permalink":"https://hocg.in/tags/Java/"}],"keywords":[{"name":"Java","slug":"Java","permalink":"https://hocg.in/categories/Java/"}]},{"title":"å…³äºé¡¹ç›®ç»“æ„åˆ’åˆ†","slug":"å…³äºé¡¹ç›®ç»“æ„åˆ’åˆ†","date":"2019-01-12T04:24:23.000Z","updated":"2019-04-09T03:14:36.640Z","comments":true,"path":"2019/01/12/å…³äºé¡¹ç›®ç»“æ„åˆ’åˆ†/","link":"","permalink":"https://hocg.in/2019/01/12/å…³äºé¡¹ç›®ç»“æ„åˆ’åˆ†/","excerpt":"å…³äºé¡¹ç›®ç»“æ„åˆ’åˆ†çš„æ€è€ƒå’Œæ€»ç»“","text":"å…³äºé¡¹ç›®ç»“æ„åˆ’åˆ†çš„æ€è€ƒå’Œæ€»ç»“ é¡¹ç›®åˆ†å±‚ Controller å‚æ•°å¸¸è§„åˆæ³•æ€§æ ¡éªŒ æ¯ä¸ªControllerå‡½æ•°å¯¹åº”ä¸€ä¸ªServiceå‡½æ•° Service ä¸šåŠ¡å±‚ï¼Œå¤ç”¨æ€§ä½ å‚æ•°ä¸šåŠ¡åˆæ³•æ€§æ ¡éªŒï¼Œä½¿ç”¨ throw å¤„ç†å¼‚å¸¸ Manager å¯å¤ç”¨é€»è¾‘å±‚ ä¸»è¦æ˜¯Cacheã€MQã€å¤åˆManagerã€RCPã€HTTPç­‰æœåŠ¡ Mapper æ•°æ®åº“è®¿é—®å±‚ 1. åªå…è®¸è‡ªå·±çš„Serviceè®¿é—®ï¼Œå…¶ä»–Serviceè®¿é—®ä»…èƒ½é€šè¿‡å…¶Serviceé¢†åŸŸæ¨¡å‹DO Data Object ä¸æ•°æ®åº“è¡¨ç»“æ„å¯¹åº”ï¼Œä½œä¸º Mapper çš„è¿”å›å€¼ DTO Data Transfer Object æ•°æ®ä¼ è¾“å¯¹è±¡ï¼Œä½œä¸º Service æˆ– Manager çš„è¿”å›å€¼ BO Business Object ä¸šåŠ¡å¯¹è±¡ï¼Œä½œä¸º Service çš„è¿”å›å€¼ï¼Œå°è£…äº†ä¸šåŠ¡é€»è¾‘çš„å¯¹è±¡ AO Application Object åº”ç”¨å¯¹è±¡ï¼Œ VO View Object æ˜¾ç¤ºå±‚å¯¹è±¡ï¼Œé€šå¸¸ä¸º Web å±‚è¿”å›å†…å®¹æˆ–æ¨¡ç‰ˆæ¸²æŸ“ä¼ è¾“å¯¹è±¡ Query æ•°æ®æŸ¥è¯¢å¯¹è±¡ï¼Œä¸Šå±‚å°è£…çš„æŸ¥è¯¢å¯¹è±¡ ç®€åŒ–åçš„æ–¹æ¡ˆ Mapper å±‚è¿”å›çš„ DO ä»…å…è®¸ä¼ å…¥åˆ° Service æˆ– Manager Service æˆ– Manager è¿”å›çš„ VO ä»…å…è®¸ä¼ å…¥åˆ° Controller æˆ– TService æ€»ç»“12C -Queryâ€”&gt; S â€”DTOâ€”&gt; MC &lt;â€”VO- S &lt;â€”DO- M é“¾æ¥åŸæ–‡åœ°å€","categories":[{"name":"Java","slug":"Java","permalink":"https://hocg.in/categories/Java/"}],"tags":[{"name":"Tips","slug":"Tips","permalink":"https://hocg.in/tags/Tips/"},{"name":"Java","slug":"Java","permalink":"https://hocg.in/tags/Java/"}],"keywords":[{"name":"Java","slug":"Java","permalink":"https://hocg.in/categories/Java/"}]},{"title":"2018 å›¾ç‰‡å¢™","slug":"2018 å›¾ç‰‡å¢™","date":"2018-12-31T15:59:59.000Z","updated":"2018-10-11T13:39:15.374Z","comments":true,"path":"2018/12/31/2018 å›¾ç‰‡å¢™/","link":"","permalink":"https://hocg.in/2018/12/31/2018 å›¾ç‰‡å¢™/","excerpt":"","text":"","categories":[{"name":"ç”Ÿæ´»","slug":"ç”Ÿæ´»","permalink":"https://hocg.in/categories/ç”Ÿæ´»/"}],"tags":[{"name":"å›¾ç‰‡å¢™","slug":"å›¾ç‰‡å¢™","permalink":"https://hocg.in/tags/å›¾ç‰‡å¢™/"}],"keywords":[{"name":"ç”Ÿæ´»","slug":"ç”Ÿæ´»","permalink":"https://hocg.in/categories/ç”Ÿæ´»/"}]},{"title":"Reactä½¿ç”¨è¿‡ç¨‹ä¸­çš„è®°å½•ç‚¹","slug":"Reactä½¿ç”¨è¿‡ç¨‹ä¸­çš„è®°å½•ç‚¹","date":"2018-11-20T11:15:36.000Z","updated":"2019-04-09T03:09:26.162Z","comments":true,"path":"2018/11/20/Reactä½¿ç”¨è¿‡ç¨‹ä¸­çš„è®°å½•ç‚¹/","link":"","permalink":"https://hocg.in/2018/11/20/Reactä½¿ç”¨è¿‡ç¨‹ä¸­çš„è®°å½•ç‚¹/","excerpt":"React ä½¿ç”¨è¿‡ç¨‹ä¸­çš„ä¸€äº›è®°å½•..","text":"React ä½¿ç”¨è¿‡ç¨‹ä¸­çš„ä¸€äº›è®°å½•.. å®šä¹‰æ¸…æ™°å¯ç»´æŠ¤çš„æ¥å£ é¿å… renderæ›¿ä»£æ–¹å¼ 123const SplitTimes = (props) =&gt; &#123; //TODO: è¿”å›JSX&#125; å›è°ƒç±» props å±æ€§ä½¿ç”¨å‰ç¼€on 1&lt;div onDone=&#123;&#125;/&gt; å°½é‡å†™ props-type ç»„ä»¶çš„å†…éƒ¨å®ç° è§£æ„èµ‹å€¼ 123constructor() &#123; super(...arguments); //æ°¸è¿œæ­£ç¡®ï¼&#125; é¿å…å†…è”å‡½æ•° 1234567&lt;ControlButtons activated=&#123;this.state.isStarted&#125; onStart=&#123;() =&gt; &#123; /* TODO */&#125;&#125; onPause=&#123;() =&gt; &#123; /* TODO */&#125;&#125; onReset=&#123;() =&gt; &#123; /* TODO */&#125;&#125; onSplit=&#123;() =&gt; &#123; /* TODO */&#125;&#125;/&gt; åˆ©ç”¨å±æ€§åˆå§‹åŒ–ï¼ˆproperty initializerï¼‰æ¥å®šä¹‰ state å’Œæˆå‘˜å‡½æ•°ã€‚ 1234567891011121314state = &#123; isStarted: false, startTime: null, currentTime: null, splits: [], &#125;onReset = () =&gt; &#123; this.setState(&#123; startTime: null, currentTime: null, splits: [], &#125;); &#125; ç»„ä»¶åŒ–æ ·å¼ é¿å…å†…è” style123&lt;h1 style=&#123;&#123; 'font-family': 'monospace' &#125;&#125;&gt;&#123;ms2Time(milliseconds)&#125;&lt;/h1&gt; èªæ˜ç»„ä»¶å’Œå‚»ç“œç»„ä»¶ ä¸ç”¨ PureComponent å†™ä¸€ä¸ªå‚»ç“œç»„ä»¶123456const Joke = React.memo(() =&gt; ( &lt;div&gt; &lt;img src=&#123;SmileFace&#125; /&gt; &#123;this.props.value || 'loading...' &#125; &lt;/div&gt;)); render props æ¨¡å¼ é«˜é˜¶ç»„ä»¶ å¯ä»¥æ˜¯æ™®é€šå±æ€§ï¼Œä¹Ÿå¯ä»¥æ˜¯children 123456789101112131415161718192021const Auth= (props) =&gt; &#123; const userName = getUserName(); if (userName) &#123; const allProps = &#123;userName, ...props&#125;; return ( &lt;React.Fragment&gt; &#123;props.login(allProps)&#125; &lt;/React.Fragment&gt; ); &#125; else &#123; &lt;React.Fragment&gt; &#123;props.nologin(props)&#125; &lt;/React.Fragment&gt; &#125;&#125;; &lt;Auth login=&#123;(&#123;userName&#125;) =&gt; &lt;h1&gt;Hello &#123;userName&#125;&lt;/h1&gt;&#125; nologin=&#123;() =&gt; &lt;h1&gt;Please login&lt;/h1&gt;&#125; /&gt; æä¾›è€…æ¨¡å¼ æ–°ç‰ˆ-æä¾›è€…æ¨¡å¼1234567891011121314151617181920const ThemeContext = React.createContext();const ThemeProvider = ThemeContext.Provider;const ThemeConsumer = ThemeContext.Consumer;class Subject extends React.Component &#123; render() &#123; return ( &lt;ThemeConsumer&gt; &#123; (theme) =&gt; ( &lt;h1 style=&#123;&#123;color: theme.mainColor&#125;&#125;&gt; &#123;this.props.children&#125; &lt;/h1&gt; ) &#125; &lt;/ThemeConsumer&gt; ); &#125;&#125; ç»„åˆç»„ä»¶ æ¨¡å¼ = é—®é¢˜åœºæ™¯ + è§£å†³åŠæ³• ç»„åˆç»„ä»¶1234567891011121314151617181920212223242526272829303132333435363738394041424344454647// æ¡ˆä¾‹ &lt;Tabs&gt; &lt;TabItem&gt;One&lt;/TabItem&gt; &lt;TabItem&gt;Two&lt;/TabItem&gt; &lt;TabItem&gt;Three&lt;/TabItem&gt; &lt;/Tabs&gt;// TabItemconst TabItem = (props) =&gt; &#123; const &#123;active, onClick&#125; = props; const tabStyle = &#123; 'max-width': '150px', color: active ? 'red' : 'green', border: active ? '1px red solid' : '0px', &#125;; return ( &lt;h1 style=&#123;tabStyle&#125; onClick=&#123;onClick&#125;&gt; &#123;props.children&#125; &lt;/h1&gt; );&#125;;// Tabsclass Tabs extends React.Component &#123; state = &#123; activeIndex: 0 &#125; render() &#123; const newChildren = React.Children.map(this.props.children, (child, index) =&gt; &#123; if (child.type) &#123; return React.cloneElement(child, &#123; active: this.state.activeIndex === index, onClick: () =&gt; this.setState(&#123;activeIndex: index&#125;) &#125;); &#125; else &#123; return child; &#125; &#125;); return ( &lt;Fragment&gt; &#123;newChildren&#125; &lt;/Fragment&gt; ); &#125;&#125; React å•å…ƒæµ‹è¯• æµ‹è¯•æ¡†æ¶ Jest ç»„ä»¶çŠ¶æ€ props æ˜¯ç»„ä»¶å¤–ä¼ é€’è¿›æ¥çš„æ•°æ®ï¼Œstate ä»£è¡¨çš„å°±æ˜¯ React ç»„ä»¶çš„å†…éƒ¨çŠ¶æ€ã€‚ åˆ¤æ–­ä¸€ä¸ªæ•°æ®æ”¾åœ¨å“ª å¦‚æœæ•°æ®ç”±å¤–éƒ¨ä¼ å…¥ï¼Œæ”¾åœ¨ props ä¸­ï¼› å¦‚æœæ˜¯ç»„ä»¶å†…éƒ¨çŠ¶æ€ï¼Œæ˜¯å¦è¿™ä¸ªçŠ¶æ€æ›´æ”¹åº”è¯¥ç«‹åˆ»å¼•å‘ä¸€æ¬¡ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Ÿå¦‚æœæ˜¯ï¼Œæ”¾åœ¨ state ä¸­ï¼›ä¸æ˜¯ï¼Œæ”¾åœ¨æˆå‘˜å˜é‡ä¸­ã€‚ å‡½æ•°å‚æ•°çš„ state æ›´æ–°12345678// 1function increment(state, props) &#123; return &#123;count: state.count + 1&#125;;&#125;this.setState(increment);// 2 this.setState((preState, props) =&gt; (&#123;&#125;) Redux ä½¿ç”¨æ¨¡å¼ connect( mapStateToProps , mapDispatchToProps ) å‰è€…æŠŠ state æ˜ å°„åˆ° props ä¸Š åè€…æŠŠ dispatch æ˜ å°„åˆ° props ä¸Š123456789// åç»­å†™æ³•connect(( state )=&gt;(&#123; count: state.count,&#125;), ( dispatch )=&gt;(&#123; onIncrement: () =&gt; dispatch(&#123;type: 'INCREMENT'&#125;), $fetch: (&#123;payload, callback&#125;)=&gt; dispatch(&#123;type: 'fetch', payload, callback&#125;),&#125;))// this.props.$fetch(&#123;&#125;) React Router è·¯ç”±çš„ç§ç±» HashRouter /#/about BrowserRouter /about æ¨è æ‹¥æŠ±å¼‚æ­¥æ¸²æŸ“ åœ¨ componentDidMount å‘èµ·ç½‘ç»œè¯·æ±‚","categories":[{"name":"React","slug":"React","permalink":"https://hocg.in/categories/React/"}],"tags":[{"name":"Tips","slug":"Tips","permalink":"https://hocg.in/tags/Tips/"},{"name":"React","slug":"React","permalink":"https://hocg.in/tags/React/"}],"keywords":[{"name":"React","slug":"React","permalink":"https://hocg.in/categories/React/"}]},{"title":"å…³äºJava IOã€NIOã€AIO","slug":"å…³äºJava IOã€NIOã€AIO","date":"2018-07-02T00:10:39.000Z","updated":"2018-07-03T05:31:16.752Z","comments":true,"path":"2018/07/02/å…³äºJava IOã€NIOã€AIO/","link":"","permalink":"https://hocg.in/2018/07/02/å…³äºJava IOã€NIOã€AIO/","excerpt":"å…³äºJavaå¸¸ç”¨æ•°æ®ç»“æ„ï¼ŒåæœŸç»§ç»­æ•´ç†","text":"å…³äºJavaå¸¸ç”¨æ•°æ®ç»“æ„ï¼ŒåæœŸç»§ç»­æ•´ç† å…³äº IO BIO åŒæ­¥å¹¶é˜»å¡ NIO åŒæ­¥éé˜»å¡ AIO(NIO.2) JDK7, å¼‚æ­¥éé˜»å¡ NIO Channel é€šé“ ä¼ è¾“ Buffer ç¼“å†²åŒº å­˜å‚¨ Selectors å¤šè·¯å¤ç”¨å™¨ ç›‘å¬ Channel IO çŠ¶å†µ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349/** * Created by hocgin on 2018/7/2. * email: hocgin@gmail.com * NIO * Non-blocking IOï¼ˆéé˜»å¡IOï¼‰ * - Selectors å¤šè·¯å¤ç”¨å™¨ï¼Œç”¨äºç›‘æ§ SelectableChannel IOçŠ¶å†µ * -- SelectableChannel * ----SocketChannel * ----ServerSocketChannel * ----DatagramChannel * &lt;p&gt; * ----Pipe.SinkChannel å•å‘ç®¡é“-å†™ * ----Pipe.SourceChannel å•å‘ç®¡é“-è¯» * &lt;p&gt; * - Channels * &lt;p&gt; * - Buffers * -- capacity æ€»å®¹é‡ * -- limit ç•Œé™ï¼Œå¯æ“ä½œæœ€å¤§èŒƒå›´ * -- position å½“å‰æ“ä½œä½ç½® * -- mark æ ‡è®°ï¼Œè®°å½•position * &lt;p&gt; * 0 &lt;= mark &lt;= position &lt;= limit &lt;= capacity */public class NIOTest &#123; /** * é˜»å¡æ¨¡å¼çš„ Socket NIO */ @Test public void nio_client() &#123; String path = \"/Users/hocgin/Document/Projects/GitHub/23-Day/src/test/java/in/hocg/Test.java\"; try ( SocketChannel channel = SocketChannel.open(new InetSocketAddress(\"127.0.0.1\", 9898)); FileChannel inChannel = FileChannel.open(Paths.get(path), StandardOpenOption.READ); ) &#123; ByteBuffer buffer = ByteBuffer.allocate(1024); while (inChannel.read(buffer) != -1) &#123; buffer.flip(); channel.write(buffer); buffer.clear(); &#125; channel.shutdownOutput(); /** * æ¥æ”¶åé¦ˆ */ while (channel.read(buffer) != -1) &#123; buffer.flip(); System.out.println(new String(buffer.array(), 0, buffer.limit())); buffer.clear(); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; /** * é˜»å¡æ¨¡å¼çš„ Socket NIO */ @Test public void nio_server() &#123; try ( ServerSocketChannel channel = ServerSocketChannel.open(); ) &#123; channel.bind(new InetSocketAddress(9898)); SocketChannel socketChannel = channel.accept(); ByteBuffer buffer = ByteBuffer.allocate(1024); while (socketChannel.read(buffer) != -1) &#123; buffer.flip(); System.out.println(new String(buffer.array(), 0, buffer.limit())); buffer.clear(); &#125; buffer.put(\"æ¥æ”¶å®Œæ¯•\".getBytes()); buffer.flip(); socketChannel.write(buffer); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; /** * éé˜»å¡æ¨¡å¼çš„ Socket NIO */ @Test public void nio_client2() &#123; try ( SocketChannel channel = SocketChannel.open(new InetSocketAddress(\"127.0.0.1\", 9898)); ) &#123; // éé˜»å¡ channel.configureBlocking(false); ByteBuffer buffer = ByteBuffer.allocate(1024); /** * å‘é€ä¿¡æ¯ */ buffer.put(LocalDateTime.now().toString().getBytes()); buffer.flip(); channel.write(buffer); /** * æ¥æ”¶åé¦ˆ */ &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; /** * éé˜»å¡æ¨¡å¼çš„ Socket NIO */ @Test public void nio_server2() &#123; try ( ServerSocketChannel channel = ServerSocketChannel.open(); ) &#123; // éé˜»å¡ channel.configureBlocking(false); channel.bind(new InetSocketAddress(9898)); Selector selector = Selector.open(); /** * æ³¨å†Œé€šé“ æŒ‡å®šäº‹ä»¶ç±»å‹ */ channel.register(selector, SelectionKey.OP_ACCEPT); while (selector.select() &gt; 0) &#123; Iterator&lt;SelectionKey&gt; iterator = selector.selectedKeys().iterator(); while (iterator.hasNext()) &#123; SelectionKey action = iterator.next(); if (action.isAcceptable()) &#123; SocketChannel socketChannel = channel.accept(); socketChannel.configureBlocking(false); socketChannel.register(selector, SelectionKey.OP_READ); &#125; else if (action.isReadable()) &#123; SocketChannel socketChannel = (SocketChannel) action.channel(); ByteBuffer buffer = ByteBuffer.allocate(1024); try &#123; while (socketChannel.read(buffer) != -1) &#123; buffer.flip(); String s = new String(buffer.array(), 0, buffer.limit()); if (!Strings.isNullOrEmpty(s)) &#123; System.out.println(s); &#125; buffer.clear(); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; iterator.remove(); &#125; &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; @Test public void aio_server() throws IOException, InterruptedException &#123;// AsynchronousChannelGroup group = AsynchronousChannelGroup.withCachedThreadPool(Executors.newCachedThreadPool(), 10); AsynchronousServerSocketChannel channel = AsynchronousServerSocketChannel.open(); channel.bind(new InetSocketAddress(9898)); channel.accept(null, new CompletionHandler&lt;AsynchronousSocketChannel, Void&gt;() &#123; final ByteBuffer buffer = ByteBuffer.allocate(1024); @Override public void completed(AsynchronousSocketChannel result, Void attachment) &#123; try &#123; result.read(buffer).get(); buffer.flip(); System.out.println(String.format(\"æœåŠ¡ç«¯ æˆåŠŸ :%s\", new String(buffer.array()).trim())); result.close(); channel.accept(null, this); &#125; catch (IOException | InterruptedException | ExecutionException e) &#123; e.printStackTrace(); &#125; &#125; @Override public void failed(Throwable exc, Void attachment) &#123; System.out.println(\"failed\"); &#125; &#125;); LockSupport.park(); &#125; @Test public void aio_client() throws IOException &#123; AsynchronousSocketChannel channel = AsynchronousSocketChannel.open(); channel.connect(new InetSocketAddress(\"127.0.0.1\", 9898), null, new CompletionHandler&lt;Void, Void&gt;() &#123; @Override public void completed(Void result, Void attachment) &#123; ByteBuffer buffer = ByteBuffer.allocate(1024); buffer.put(\"ä½ å¥½\".getBytes()); buffer.flip(); channel.write(buffer); &#125; @Override public void failed(Throwable exc, Void attachment) &#123; System.out.println(exc); &#125; &#125;); &#125; /** * Buffer * * @throws IOException */ @Test public void buffer() throws IOException &#123; ByteBuffer buffer = ByteBuffer.allocate(1024); System.out.println(buffer.position()); // 0 System.out.println(buffer.limit()); // 1024 System.out.println(buffer.capacity()); // 1024 buffer.put(\"asd\".getBytes()); buffer.flip(); // è®¾ç½®è¯»å–çš„èŒƒå›´é™åˆ¶è‡³ position byte[] dst = new byte[buffer.limit()]; buffer.get(dst); System.out.println(new String(dst, 0, dst.length)); buffer.rewind(); // é‡è¯» position = 0 mark = -1 buffer.clear(); // æ¸…ç©º position = 0 limit = capacity mark = -1 buffer.mark(); // æ ‡è®° mark = position buffer.reset(); // positionæ¢å¤ä¸ºæ ‡è®°ä½ç½® position = mark buffer.hasRemaining(); // æ˜¯å¦æœ‰å‰©ä½™æ•°æ® position &lt; limit buffer.remaining(); // å‰©ä½™æ•°é‡ limit - position &#125; /** * getChannel * - æœ¬åœ° * - FileInputStream/FileOutputStream * - RandomAccessFile * - ç½‘ç»œ * - Socket * - ServerSocket * - DatagramSocket * - JDK 7 * - xxChannel.open() * - Files.newByteChannel() * - Channels.newXXX */ @Test public void channel() throws IOException &#123; String path = \"/Users/hocgin/Document/Projects/GitHub/23-Day/src/test/java/in/hocg/Test.java\"; FileInputStream in = new FileInputStream(path); ReadableByteChannel channel = Channels.newChannel(in); ByteBuffer buffer = ByteBuffer.allocate(1024); while (channel.read(buffer) != -1) &#123; buffer.flip(); System.out.println(String.format(\"%s\", new String(buffer.array(), 0, buffer.limit()))); buffer.clear(); &#125; channel.close(); in.close(); &#125; /** * ç›´æ¥ç¼“å†²åŒº */ @Test public void channel2() &#123; String path = \"/Users/hocgin/Document/Projects/GitHub/23-Day/src/test/java/in/hocg/Test.java\"; try ( FileChannel inChannel = FileChannel.open(Paths.get(path), StandardOpenOption.READ); FileChannel outChannel = FileChannel.open(Paths.get(path), StandardOpenOption.READ, StandardOpenOption.WRITE, StandardOpenOption.CREATE) ) &#123; MappedByteBuffer inMap = inChannel.map(FileChannel.MapMode.READ_ONLY, 0, inChannel.size()); MappedByteBuffer outMap = outChannel.map(FileChannel.MapMode.READ_WRITE, 0, inChannel.size()); byte[] bytes = new byte[inMap.limit()]; inMap.get(bytes); outMap.put(bytes); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; /** * é€šé“é—´çš„æ•°æ®ä¼ è¾“(ç›´æ¥ç¼“å†²åŒº) */ @Test public void transfer() &#123; String path = \"/Users/hocgin/Document/Projects/GitHub/23-Day/src/test/java/in/hocg/Test.java\"; try ( FileChannel inChannel = FileChannel.open(Paths.get(path), StandardOpenOption.READ); FileChannel outChannel = FileChannel.open(Paths.get(path), StandardOpenOption.READ, StandardOpenOption.WRITE, StandardOpenOption.CREATE) ) &#123; inChannel.transferTo(0, inChannel.size(), outChannel);// inChannel.transferFrom(outChannel,0, inChannel.size()); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; /** * åˆ†æ•£è¯»å–(Scatter) * èšé›†å†™å…¥(Gather) */ @Test public void scatter() &#123; String path = \"/Users/hocgin/Document/Projects/GitHub/23-Day/src/test/java/in/hocg/Test.java\"; try ( RandomAccessFile f = new RandomAccessFile(path, \"rw\"); ) &#123; FileChannel channel = f.getChannel(); ByteBuffer allocate1 = ByteBuffer.allocate(1024); ByteBuffer allocate2 = ByteBuffer.allocate(1024); ByteBuffer[] all = &#123;allocate1, allocate2&#125;; // åˆ†æ•£è¯»å– channel.read(all); // èšé›†å†™å…¥ channel.write(all); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; public static void main(String[] args) &#123; SortedMap&lt;String, Charset&gt; map = Charset.availableCharsets(); System.out.println(map); System.out.println(Charset.defaultCharset()); Charset charset = Charset.forName(\"UTF-8\"); CharsetEncoder charsetEncoder = charset.newEncoder(); CharsetDecoder charsetDecoder = charset.newDecoder(); &#125; &#125;","categories":[{"name":"Java","slug":"Java","permalink":"https://hocg.in/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://hocg.in/tags/Java/"},{"name":"IO","slug":"IO","permalink":"https://hocg.in/tags/IO/"}],"keywords":[{"name":"Java","slug":"Java","permalink":"https://hocg.in/categories/Java/"}]},{"title":"ä½¿ç”¨ GitLab æ¥å¯¹ Spring Boot é¡¹ç›®è¿›è¡Œ CI/CD","slug":"ä½¿ç”¨ GitLab æ¥å¯¹ Spring Boot é¡¹ç›®è¿›è¡Œ CI:CD","date":"2018-06-20T14:34:20.000Z","updated":"2018-06-20T14:44:41.968Z","comments":true,"path":"2018/06/20/ä½¿ç”¨ GitLab æ¥å¯¹ Spring Boot é¡¹ç›®è¿›è¡Œ CI:CD/","link":"","permalink":"https://hocg.in/2018/06/20/ä½¿ç”¨ GitLab æ¥å¯¹ Spring Boot é¡¹ç›®è¿›è¡Œ CI:CD/","excerpt":"åˆ©ç”¨ GitLab Pipelines æ¥è¿›è¡Œé¡¹ç›®çš„æŒç»­é›†æˆå’Œéƒ¨ç½²ã€‚","text":"åˆ©ç”¨ GitLab Pipelines æ¥è¿›è¡Œé¡¹ç›®çš„æŒç»­é›†æˆå’Œéƒ¨ç½²ã€‚ ä½¿ç”¨ GitLab CI æ„å»º Spring Boot é¡¹ç›®æ­å»º GitLab CE ä½¿ç”¨ Docker æ–¹å¼æ­å»º GitLab CE 12345678910sudo docker run --detach \\ --publish 443:443 \\ --publish 80:80 \\ --publish 2222:22 \\ --name gitlab \\ --restart always \\ --volume /data/gitlab/config:/etc/gitlab \\ --volume /data/gitlab/logs:/var/log/gitlab \\ --volume /data/gitlab/data:/var/opt/gitlab \\ gitlab/gitlab-ce:latest æ­å»º GitLab Runner123456sudo docker run --rm -t -d -i -p 8084:8080 \\ -v /data/gitlab-runner:/etc/gitlab-runner \\ -v /var/run/docker.sock:/var/run/docker.sock \\ --add-host ad4aac43c567:172.17.0.2 \\ --name gitlab-runner \\ gitlab/gitlab-runner æ­¤å¤„éœ€æ³¨æ„--add-hostè¯·è‡ªè¡Œæ›¿æ¢ä¸ºGitLab CE Docker å®¹å™¨ IDï¼Œæ­¤å¤„æ˜¯ä¸ºäº†è®© GitLab CE Docker å®¹å™¨å¯ä»¥è¢« GitLab Runner è®¿é—®åˆ°, å¦‚æœä½¿ç”¨å…¬ç½‘ IP å¯ä»¥å¿½ç•¥ã€‚ å¦‚æœé€šè¿‡/etc/hostsä»ç„¶æ— æ³•è§£å†³HOSTé—®é¢˜, è¯·è‡ªè¡Œæ›´æ”¹/data/gitlab-runner/config.tomlæ–‡ä»¶ï¼Œåœ¨[runners.docker]èŠ‚ç‚¹ä¸‹é¢æ·»åŠ extra_hosts = [&quot;ad4aac43c567:172.17.0.2&quot;]ã€‚ æ³¨å†Œ Runner12345678910sudo docker exec -it gitlab-runner gitlab-runner register -n \\ --url http://192.168.1.13/ \\ --registration-token pfHxurfRMBctWwkqrt1c \\ --tag-list=docker-privileged \\ --description \"dockersock\" \\ --docker-privileged=false \\ --docker-image \"docker:latest\" \\ --docker-volumes /var/run/docker.sock:/var/run/docker.sock \\ --docker-volumes /root/m2:/root/.m2 \\ --executor docker url: GitLab CE é‡Œé¢ CI æ ç›®æŸ¥çœ‹ registration-token: GitLab CE é‡Œé¢ CI æ ç›®æŸ¥çœ‹ tag-list: æ ‡ç­¾, åç»­ç”¨äºæ‰§è¡Œæ­¥éª¤æ—¶æŒ‡å®š Runner description: æè¿° docker-image: å¤–å±‚ä½¿ç”¨çš„ Docker é•œåƒ executor: æ‰§è¡Œå™¨ ç¼–å†™ .gitlab-ci.ymlç‚¹å‡».gitlab-ci.ymlæŸ¥çœ‹ ä¸€é”®éƒ¨ç½²ç‚¹å‡»è·å–, è®°å¾—ä¿®æ”¹HOSTã€‚ æºç GitLab-CI","categories":[{"name":"DevOps","slug":"DevOps","permalink":"https://hocg.in/categories/DevOps/"}],"tags":[{"name":"DevOps","slug":"DevOps","permalink":"https://hocg.in/tags/DevOps/"},{"name":"GitLab","slug":"GitLab","permalink":"https://hocg.in/tags/GitLab/"},{"name":"CI/CD","slug":"CI-CD","permalink":"https://hocg.in/tags/CI-CD/"}],"keywords":[{"name":"DevOps","slug":"DevOps","permalink":"https://hocg.in/categories/DevOps/"}]},{"title":"å…³äºJava-æ•°æ®ç»“æ„","slug":"å…³äºJava-æ•°æ®ç»“æ„","date":"2018-03-20T09:10:39.000Z","updated":"2019-04-20T05:07:51.981Z","comments":true,"path":"2018/03/20/å…³äºJava-æ•°æ®ç»“æ„/","link":"","permalink":"https://hocg.in/2018/03/20/å…³äºJava-æ•°æ®ç»“æ„/","excerpt":"å…³äºJavaå¸¸ç”¨æ•°æ®ç»“æ„ï¼ŒåæœŸç»§ç»­æ•´ç†","text":"å…³äºJavaå¸¸ç”¨æ•°æ®ç»“æ„ï¼ŒåæœŸç»§ç»­æ•´ç† List Listå¿…é¡»ä¿æŒå…ƒç´ ç‰¹å®šçš„é¡ºåº LinkedList Listã€Queue åŒé“¾è¡¨Node éçº¿ç¨‹å®‰å…¨çš„ è½¬æ¢ä¸ºçº¿ç¨‹å®‰å…¨Collections.synchronizedList(new LinkedList(...)); ç‰¹ç‚¹: å®ç°äº†Listã€Dequeæ¥å£ï¼ŒåŒå‘é“¾è¡¨ï¼Œé€‚åˆé¢‘ç¹æ’å…¥/åˆ é™¤ï¼Œä¸é€‚åˆä½¿ç”¨setã€setã€‚ ArrayList List æ•°ç»„å®ç° éçº¿ç¨‹å®‰å…¨çš„ ç‰¹ç‚¹: åŠ¨æ€é•¿åº¦(é»˜è®¤é•¿åº¦ä¸º10ï¼Œå¢é•¿é»˜è®¤ä¸ºå½“å‰é•¿åº¦çš„1/2ï¼Œä¸å¯å¤§äºInteger.MAX_VALUE - 8ï¼Œå¦åˆ™ OutOfMemoryError), getã€setç›´æ¥è®¿é—®ã€‚ Vector List çº¿ç¨‹å®‰å…¨ ç”¨synchronizedä¿®é¥°å‡½æ•° CopyOnWriteArrayList List æ•°ç»„å®ç° çº¿ç¨‹å®‰å…¨ ç‰¹ç‚¹: æ•°ç»„é•¿åº¦é»˜è®¤ä¸º0ï¼Œæ¯æ¬¡ä¿®æ”¹éƒ½ä¼šé‡æ–°å¢é•¿é•¿åº¦å’Œæ‹·è´æ•°ç»„ã€‚ Stack çº¿ç¨‹å®‰å…¨ æ•°ç»„å®ç° ç‰¹ç‚¹: æ¨¡æ‹Ÿæ ˆã€‚ å·¥å…·ç±» è½¬æ¢ä¸ºçº¿ç¨‹å®‰å…¨Collections.synchronizedList(new ArrayList(...)); å†…éƒ¨æ˜¯ç”¨Listå®ç°å­˜å‚¨çš„ ä¸Vectorå·®åˆ«æ˜¯å¯ä»¥ä¼ å…¥å®šåˆ¶çš„é”ã€‚ è½¬ä¸ºä¸å¯å˜List Collections.unmodifiableList(new ArrayList&lt;&gt;()) é—¨é¢æ¨¡å¼(List) çº¿ç¨‹å®‰å…¨ ç‰¹ç‚¹: ä¸å¯å˜ã€‚ å¸¸ç”¨æŠ€å·§123456789101112131415161718192021222324252627282930313233@Testpublic void lists() &#123; /** * æ‰“ä¹±æ•°ç»„ */ List&lt;Integer&gt; list = Arrays.asList(1, 2, 3); Collections.shuffle(list); System.out.println(String.format(\"æ‰“ä¹± %s\", list)); /** * ç§»é™¤æ‰€æœ‰ NULL */ list.removeIf(Objects::isNull); /** * å»é‡ */ list = list.stream().distinct().collect(Collectors.toList()); /** * åˆ†ç»„ */ Map&lt;String, List&lt;Integer&gt;&gt; collect = list.stream() .collect(Collectors.groupingBy(Object::toString)); /** * æŸ¥æ‰¾ä¸€ä¸ªå…ƒç´  */ Integer integer = list.stream().filter(item -&gt; &#123; return item == 1; &#125;).findAny().orElse(null); &#125; Set Setä¸èƒ½æœ‰é‡å¤å…ƒç´  HashSet Set çº¿ç¨‹ä¸å®‰å…¨ åˆ©ç”¨ HashMap çš„ Key å€¼è¿›è¡Œå­˜å‚¨ã€‚ æ— åº åˆ©ç”¨Hashå­˜å‚¨ï¼Œå­˜å–å’ŒæŸ¥æ‰¾é«˜æ•ˆã€‚ LinkedHashSet Set çº¿ç¨‹ä¸å®‰å…¨ åˆ©ç”¨ LinkedHashMap çš„ Key å€¼è¿›è¡Œå­˜å‚¨ã€‚ æŒ‰æ’å…¥æ’åº TreeSet Set çº¿ç¨‹ä¸å®‰å…¨ åˆ©ç”¨ TreeMap çš„ Key å€¼è¿›è¡Œå­˜å‚¨ã€‚ æ’å…¥æœ‰åº, é»˜è®¤è‡ªç„¶æ’åºã€‚ Queue Queueä¿æŒä¸€ä¸ªé˜Ÿåˆ—(å…ˆè¿›å…ˆå‡º)çš„é¡ºåº. PriorityQueue Queue çº¿ç¨‹ä¸å®‰å…¨ æ•°ç»„å®ç° Deque Queue åŒç«¯é˜Ÿåˆ—ArrayDeque Queue æ•°ç»„å®ç° çº¿ç¨‹ä¸å®‰å…¨ åŠ¨æ€é•¿åº¦ BlockingQueueDelayQueueMap ç”¨äºä¿å­˜å…·æœ‰â€æ˜ å°„å…³ç³»â€çš„æ•°æ® HashMap ä¸èƒ½ä¿è¯key-valueå¯¹çš„é¡ºåº çº¿ç¨‹ä¸å®‰å…¨ LinkedHashMap æ’å…¥é¡ºåº çº¿ç¨‹ä¸å®‰å…¨ TreeMap çº¿ç¨‹ä¸å®‰å…¨ æ’å…¥æœ‰åº, é»˜è®¤è‡ªç„¶æ’åºã€‚ ConcurrentHashMap çº¿ç¨‹å®‰å…¨ ç‰¹ç‚¹: åˆ†å¤šä¸ªå— æ•´ç†äº†ä¸¤å¼ å›¾ æ¨è","categories":[{"name":"Java","slug":"Java","permalink":"https://hocg.in/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://hocg.in/tags/Java/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"https://hocg.in/tags/æ•°æ®ç»“æ„/"}],"keywords":[{"name":"Java","slug":"Java","permalink":"https://hocg.in/categories/Java/"}]},{"title":"å…³äºJavaå¤šçº¿ç¨‹-å‡ ä¸ªè¾…åŠ©ç±»","slug":"å…³äºJavaå¤šçº¿ç¨‹-å‡ ä¸ªè¾…åŠ©ç±»","date":"2018-03-06T09:13:39.000Z","updated":"2018-07-03T05:24:51.368Z","comments":true,"path":"2018/03/06/å…³äºJavaå¤šçº¿ç¨‹-å‡ ä¸ªè¾…åŠ©ç±»/","link":"","permalink":"https://hocg.in/2018/03/06/å…³äºJavaå¤šçº¿ç¨‹-å‡ ä¸ªè¾…åŠ©ç±»/","excerpt":"å…³äºJavaå¤šçº¿ç¨‹-å‡ ä¸ªè¾…åŠ©ç±»ï¼ŒåæœŸç»§ç»­æ•´ç†","text":"å…³äºJavaå¤šçº¿ç¨‹-å‡ ä¸ªè¾…åŠ©ç±»ï¼ŒåæœŸç»§ç»­æ•´ç† å‡ ä¸ªè¾…åŠ©ç±» CountDownLatch è®¡æ•°å™¨ CyclicBarrier åŒæ­¥å™¨ Phaser 1.7 é˜¶æ®µæ€§ã€åŒæ­¥ã€è®¡æ•° Example123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188 ExecutorService executorService = Executors.newFixedThreadPool(4); /** * è®¡æ•°å™¨ latch.await() ä¼šç­‰å¾…è®¡æ•°ä¸º 0 * @throws InterruptedException */ @Test public void countDownLatch() throws InterruptedException &#123; CountDownLatch latch = new CountDownLatch(4); LongStream.range(0, 4).forEach((i)-&gt;&#123; executorService.submit(latch::countDown); System.out.println(String.format(\"index: %d\", latch.getCount())); &#125;); latch.await(); System.out.println(String.format(\"index: %d\", latch.getCount()));// index: 4// index: 3// index: 2// index: 1// index: 0 &#125; /** * ç­‰å¾…æŒ‡å®šæ•°ç›®çš„çº¿ç¨‹å®Œæˆå, æ‰ç»§ç»­æ‰§è¡Œ * @throws InterruptedException */ @Test public void cyclicBarrier() throws InterruptedException &#123; CyclicBarrier cyclicBarrier = new CyclicBarrier(4, ()-&gt;&#123; System.out.println(\"æ‰€æœ‰ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œç»§ç»­\"); &#125;); LongStream.range(0, 4).forEach((i)-&gt;&#123; executorService.submit(()-&gt;&#123; try &#123; System.out.println(String.format(\"å·²ç»å®Œæˆæ•°ç›®: %d/%d\", cyclicBarrier.getNumberWaiting(), cyclicBarrier.getParties())); Thread.sleep(100); cyclicBarrier.await(); &#125; catch (InterruptedException | BrokenBarrierException e) &#123; e.printStackTrace(); &#125; System.out.println(String.format(\"è¿›è¡Œå…¶ä»–ä»»åŠ¡ %s\", Thread.currentThread().getName())); &#125;); &#125;); Thread.sleep(1000); // å·²ç»å®Œæˆæ•°ç›®: 0/4// å·²ç»å®Œæˆæ•°ç›®: 0/4// å·²ç»å®Œæˆæ•°ç›®: 0/4// å·²ç»å®Œæˆæ•°ç›®: 0/4// æ‰€æœ‰ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œç»§ç»­// è¿›è¡Œå…¶ä»–ä»»åŠ¡ pool-1-thread-4// è¿›è¡Œå…¶ä»–ä»»åŠ¡ pool-1-thread-2// è¿›è¡Œå…¶ä»–ä»»åŠ¡ pool-1-thread-1// è¿›è¡Œå…¶ä»–ä»»åŠ¡ pool-1-thread-3 &#125; /** * é…ç½®åŒæ—¶å…è®¸ç”³è¯·è®¸å¯çš„æ•°ç›®ï¼Œå¦‚æœæ•°ç›®å·²æ»¡åˆ™è¿›è¡Œé˜»å¡ç­‰å¾…é‡Šæ”¾è®¸å¯ã€‚ * Semaphore å¯é…ç½®æ˜¯å¦ä½¿ç”¨å…¬å¹³æœºåˆ¶ï¼Œç±»ä¼¼Lock * @throws InterruptedException */ @Test public void semaphore() throws InterruptedException &#123; Semaphore semaphore = new Semaphore(2); LongStream.range(0, 4).forEach((i)-&gt;&#123; executorService.submit(()-&gt;&#123; try &#123; System.out.println(String.format(\"æ­£åœ¨ç”³è¯·è®¸å¯ ID:%s\", Thread.currentThread().getName())); semaphore.acquire(); System.out.println(String.format(\"ç”³è¯·è®¸å¯æˆåŠŸ %s\", Thread.currentThread().getName())); Thread.sleep(100); System.out.println(String.format(\"è¿›è¡Œä»»åŠ¡ %s\", Thread.currentThread().getName())); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125;finally &#123; System.out.println(String.format(\"é‡Šæ”¾è®¸å¯ %s\", Thread.currentThread().getName())); semaphore.release(); &#125; &#125;); &#125;); Thread.sleep(1000); // æ­£åœ¨ç”³è¯·è®¸å¯ ID:pool-1-thread-2// æ­£åœ¨ç”³è¯·è®¸å¯ ID:pool-1-thread-1// ç”³è¯·è®¸å¯æˆåŠŸ pool-1-thread-2// æ­£åœ¨ç”³è¯·è®¸å¯ ID:pool-1-thread-4// æ­£åœ¨ç”³è¯·è®¸å¯ ID:pool-1-thread-3// ç”³è¯·è®¸å¯æˆåŠŸ pool-1-thread-1// è¿›è¡Œä»»åŠ¡ pool-1-thread-1// è¿›è¡Œä»»åŠ¡ pool-1-thread-2// é‡Šæ”¾è®¸å¯ pool-1-thread-1// é‡Šæ”¾è®¸å¯ pool-1-thread-2// ç”³è¯·è®¸å¯æˆåŠŸ pool-1-thread-4// ç”³è¯·è®¸å¯æˆåŠŸ pool-1-thread-3// è¿›è¡Œä»»åŠ¡ pool-1-thread-4// è¿›è¡Œä»»åŠ¡ pool-1-thread-3// é‡Šæ”¾è®¸å¯ pool-1-thread-4// é‡Šæ”¾è®¸å¯ pool-1-thread-3 &#125; /** * é˜¶æ®µæ€§, ä¼šç­‰å¾…æ‰€æœ‰äººå®Œæˆè¯¥æ­¥éª¤å†è¿›å…¥ä¸‹ä¸€ä¸ªæ­¥éª¤ * - æ¯ä¸ªé˜¶æ®µå‡å¯è¿›è¡ŒåŠ å…¥æˆ–ç§»é™¤ * * å‡½æ•° * - arriveAndAwaitAdvance ç­‰å¾…é˜¶æ®µ * - arriveAndDeregister ç§»é™¤ * - bulkRegister åŠ å…¥ */ @Test public void phaser() throws InterruptedException &#123; Phaser phaser = new Phaser(4); /** * é˜¶æ®µæ€§ä»»åŠ¡ */ System.out.println(\"ã€é˜¶æ®µæ€§ä»»åŠ¡ã€‘\"); LongStream.range(0, 4).forEach((i)-&gt;&#123; executorService.submit(()-&gt;&#123; try &#123; System.out.println(String.format(\"ç¬¬ä¸€æ­¥ %s\", Thread.currentThread().getName())); Thread.sleep(100); phaser.arriveAndAwaitAdvance(); Thread.sleep(100); System.out.println(String.format(\"ç¬¬2æ­¥ %s\", Thread.currentThread().getName())); phaser.arriveAndAwaitAdvance(); Thread.sleep(100); System.out.println(String.format(\"ç¬¬ä¸‰æ­¥ %s\", Thread.currentThread().getName())); phaser.arriveAndAwaitAdvance(); System.out.println(\"Done\"); &#125;catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125;); &#125;); Thread.sleep(1000); /** * è®¡æ•°ä»»åŠ¡ */ System.out.println(\"ã€è®¡æ•°ä»»åŠ¡ã€‘\"); LongStream.range(0, 4).forEach((i)-&gt;&#123; executorService.submit(()-&gt;&#123; try &#123; System.out.println(String.format(\"å·²ç»å®Œæˆ %s\", Thread.currentThread().getName())); Thread.sleep(100); phaser.awaitAdvance(phaser.getPhase()); //cyclicBarrier.await(); &#125;catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125;); &#125;); phaser.arrive(); System.out.println(\"è®¡æ•°å®Œæˆ\"); // ã€é˜¶æ®µæ€§ä»»åŠ¡ã€‘// ç¬¬ä¸€æ­¥ pool-1-thread-2// ç¬¬ä¸€æ­¥ pool-1-thread-3// ç¬¬ä¸€æ­¥ pool-1-thread-1// ç¬¬ä¸€æ­¥ pool-1-thread-4// ç¬¬2æ­¥ pool-1-thread-2// ç¬¬2æ­¥ pool-1-thread-1// ç¬¬2æ­¥ pool-1-thread-4// ç¬¬2æ­¥ pool-1-thread-3// ç¬¬ä¸‰æ­¥ pool-1-thread-1// ç¬¬ä¸‰æ­¥ pool-1-thread-4// ç¬¬ä¸‰æ­¥ pool-1-thread-2// ç¬¬ä¸‰æ­¥ pool-1-thread-3// Done// Done// Done// Done// ã€è®¡æ•°ä»»åŠ¡ã€‘// è®¡æ•°å®Œæˆ// å·²ç»å®Œæˆ pool-1-thread-2// å·²ç»å®Œæˆ pool-1-thread-4// å·²ç»å®Œæˆ pool-1-thread-3// å·²ç»å®Œæˆ pool-1-thread-1 &#125;","categories":[{"name":"Java","slug":"Java","permalink":"https://hocg.in/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://hocg.in/tags/Java/"},{"name":"å¤šçº¿ç¨‹","slug":"å¤šçº¿ç¨‹","permalink":"https://hocg.in/tags/å¤šçº¿ç¨‹/"}],"keywords":[{"name":"Java","slug":"Java","permalink":"https://hocg.in/categories/Java/"}]},{"title":"å…³äºJavaå¤šçº¿ç¨‹-å¯è§æ€§ã€CASã€AQSã€é”","slug":"å…³äºJavaå¤šçº¿ç¨‹-å¯è§æ€§ã€CASã€AQSã€é”","date":"2018-03-03T01:13:39.000Z","updated":"2018-07-03T05:25:02.728Z","comments":true,"path":"2018/03/03/å…³äºJavaå¤šçº¿ç¨‹-å¯è§æ€§ã€CASã€AQSã€é”/","link":"","permalink":"https://hocg.in/2018/03/03/å…³äºJavaå¤šçº¿ç¨‹-å¯è§æ€§ã€CASã€AQSã€é”/","excerpt":"å…³äºJavaå¤šçº¿ç¨‹-å¯è§æ€§ã€CASã€AQSã€é”","text":"å…³äºJavaå¤šçº¿ç¨‹-å¯è§æ€§ã€CASã€AQSã€é” å‰æ è§£å†³å¤šçº¿ç¨‹æ“ä½œå‡ºç°çš„è„è¯»å’Œæ•°æ®ã€æ“ä½œä¸ä¸€è‡´é—®é¢˜ã€‚ volatileå¯è§æ€§ Java å†…å­˜åˆ†ä¸ºä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜ã€‚æ­£å¸¸æƒ…å†µæ¯ä¸ªçº¿ç¨‹éƒ½æ‹¥æœ‰è‡ªå·±çš„å·¥ä½œå†…å­˜ï¼Œç„¶åæ¯éš”ä¸€æ®µæ—¶é—´ä¼šåŒæ­¥åˆ°ä¸»å†…å­˜ä¸Šï¼Œå› æ­¤ä¼šå­˜åœ¨ä¸ä¸€è‡´çš„æƒ…å†µã€‚è€Œvolatileåˆ™æ˜¯ä¸ºäº†è®©æ ‡è®°å­—æ®µçš„è¯»å–å’Œå†™å…¥éƒ½æ˜¯åœ¨ä¸»å†…å­˜ä¸­ï¼Œä¿è¯å…¶ä¸€è‡´æ€§ã€‚æ³¨æ„:ä½†å…¶ä»ä¸èƒ½ä¿è¯å†™å…¥æ“ä½œçš„åŸå­æ€§ã€‚ CAS Compare And Swap, æ¯”è¾ƒå¹¶äº¤æ¢ã€‚ç”¨äºè§£å†³å¤šçº¿ç¨‹ä½¿ç”¨é”é€ æˆçš„æ€§èƒ½æŸè€—ã€‚Java æ˜¯åˆ©ç”¨Unsafeæ¥å®ç°CASï¼Œè¿›è¡Œç¡¬ä»¶çº§åˆ«çš„åŸå­æ€§æ“ä½œã€‚ AQS AbstractQueuedSynchronizer, è¿™ä¸ªä¸º Java ç±», å…¬å¹³é”FairSyncå’Œéå…¬å¹³é”NonfairSyncå‡æ˜¯é€šè¿‡æ­¤å®ç°çš„ã€‚å…¶åˆ©ç”¨é˜Ÿåˆ—æ¥å®ç°é˜»å¡é”å’ŒåŒæ­¥ã€‚ ABA é—®é¢˜ æƒ…æ™¯: åˆå§‹å€¼ä¸ºA[çº¿ç¨‹1è·å–çš„å€¼ä¸ºA][çº¿ç¨‹2è·å–çš„å€¼ä¸ºA,å¹¶æ›´æ”¹å€¼Aä¸ºå€¼B,å†æ›´æ”¹å€¼Bä¸ºå€¼A][çº¿ç¨‹1æ›´æ”¹å€¼Aä¸ºå€¼B]ã€‚å‡ºç°é—®é¢˜: çº¿ç¨‹1æ„Ÿè§‰ä¸åˆ°å€¼æœ‰ä¸€æ®µå˜åŒ–çš„è¿‡ç¨‹ï¼Œè¿™æ˜¯ä¹è§‚é”å‡ºç°çš„é—®é¢˜ã€‚è§£å†³æ–¹æ¡ˆ: AtomicStampedReference/AtomicMarkableReferenceä½ å€¼å¾—æ‹¥æœ‰ã€‚ AtomicStampedReference æ¯æ¬¡ä¿®æ”¹ä¼šå­˜å‚¨ç‰ˆæœ¬å·,ç‰ˆæœ¬å·å®ç°ç”¨intã€‚ AtomicMarkableReference æ¯æ¬¡ä¿®æ”¹ä¼šå­˜å‚¨ç‰ˆæœ¬å·,ç‰ˆæœ¬å·å®ç°ç”¨booleanã€‚ é”çš„åè¯å¯é‡å…¥é” å·²è·å–çš„é”å¯ä»¥ä¸å¿…å»é‡æ–°ç”³è¯·ã€‚ synchronized/ReentrantLock æ˜¯å¯é‡å…¥é”. å¯ä¸­æ–­é” å¯ä»¥å–æ¶ˆç”³è¯·é”çš„æ“ä½œã€‚ synchronized ä¸æ˜¯å¯ä¸­æ–­é”ã€‚ å…¬å¹³é” å…¬å¹³é”æ˜¯æ ¹æ®è¯·æ±‚é¡ºåºåˆ†å‘é”, å”¤é†’éœ€è¦æ—¶é—´ï¼Œèƒ½ä¿- è¯æ“ä½œçš„é¡ºåºã€‚ éå…¬å¹³é”ä¼šå‡ºç°æ’é˜Ÿæƒ…å†µï¼Œæ€§èƒ½é«˜ï¼Œä½†æ˜¯ä¸èƒ½ä¿è¯æ“ä½œçš„é¡ºåºã€‚ synchronized ä¸æ˜¯å…¬å¹³é”ã€‚ ReentrantLock/ReentrantReadWriteLocké»˜è®¤æƒ…å†µæ˜¯éå…¬å¹³é”NonfairSync,ä½†å¯ä»¥è®¾ç½®ä¸ºå…¬å¹³é”FairSync ä¹è§‚é” æ¯æ¬¡ä¸åŠ é”ï¼Œå‡è®¾æ²¡æœ‰å†²çªå»å®ŒæˆæŸé¡¹æ“ä½œï¼Œå¦‚æœå› ä¸ºå†²çªå¤±è´¥å°±é‡è¯•ï¼Œç›´åˆ°æˆåŠŸä¸ºæ­¢ã€‚ Atomic* ä¹è§‚é” ç”±äºåœ¨å¤šçº¿ç¨‹æ“ä½œä¸­æ— æ³•ä¿è¯æ“ä½œçš„åŸå­æ€§ï¼Œå› æ­¤å¼•å…¥äº†é”å’ŒCASã€‚AtomicStampedReference/AtomicMarkableReference ç”¨äºè§£å†³ CAS çš„ ABA é—®é¢˜ å• AtomicInteger Integerç±»å‹ AtomicLong Longç±»å‹ AtomicBoolean Booleanç±»å‹,å†…éƒ¨ä½¿ç”¨intå®ç°ã€‚ AtomicReference å¯¹è±¡ç±»å‹ æ•°ç»„ AtomicIntegerArray Integeræ•°ç»„ AtomicLongArray Longæ•°ç»„ AtomicReferenceArray å¯¹è±¡æ•°ç»„ å¯¹è±¡å†…å­—æ®µ AtomicIntegerFieldUpdater å¯¹è±¡å†…Integerç±»å‹å­—æ®µ AtomicLongFieldUpdater å¯¹è±¡å†…Longç±»å‹å­—æ®µ AtomicReferenceFieldUpdater å¯¹è±¡å†…å¯¹è±¡ç±»å‹å­—æ®µ æ ¹æ®ç‰ˆæœ¬å·è¿›è¡Œæ“ä½œ AtomicStampedReference æ¯æ¬¡ä¿®æ”¹ä¼šå­˜å‚¨ç‰ˆæœ¬å·,ç‰ˆæœ¬å·å®ç°ç”¨intã€‚ AtomicMarkableReference æ¯æ¬¡ä¿®æ”¹ä¼šå­˜å‚¨ç‰ˆæœ¬å·,ç‰ˆæœ¬å·å®ç°ç”¨booleanã€‚ é”å’ŒåŒæ­¥ é”å’ŒåŒæ­¥çš„ä½œç”¨ä¿è¯ä»£ç åŒºåŸŸåœ¨åŒä¸€æ—¶é—´åªè¿è¡Œä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œ,å…¶ä½™çº¿ç¨‹å¤„äºé˜»å¡çŠ¶æ€(BLOCKED)ã€‚ é”å’ŒåŒæ­¥çš„å·®å¼‚ã€‚ ä½œç”¨èŒƒå›´, Lock å¯ä»¥è·¨æ–¹æ³•ï¼Œsynchronized åªèƒ½åœ¨åŒä¸€ä¸ªæ–¹æ³•ä¸­ã€‚ å…¬å¹³é”, Lock ä½¿ç”¨å…¬å¹³é”ï¼Œsynchronized ä½¿ç”¨éå…¬å¹³é”ã€‚ å¯ä¸­æ–­ï¼ŒLock å¯ä»¥ä½¿ç”¨lockInterruptibly()ä¸­æ–­é”ï¼Œsynchronized æ— æ³•ä¸­æ–­ã€‚ å½“ synchronized æ— æ³•è®¿é—®æ—¶ä¼šè¢«é˜»å¡ï¼ŒLock æä¾›tryLock()å‡å°‘é˜»å¡æ—¶é—´ã€‚ ä¸é‡Šæ”¾é”æ“ä½œ åŒæ­¥ä»£ç ä¸­ä½¿ç”¨Thread.sleep/Thread.yield, çº¿ç¨‹å¤„äºWAITING/TIMED_WAITINGçŠ¶æ€ åŒæ­¥ä»£ç ä¸­çº¿ç¨‹è¢«suspend() ä¼šé‡Šæ”¾é”æ“ä½œ åŒæ­¥ä»£ç è¢«breakã€return åŒæ­¥ä»£ç è¢«å¼‚å¸¸æˆ–é”™è¯¯ç»ˆæ­¢ åŒæ­¥ä»£ç å—æ‰§è¡Œç»“æŸ åŒæ­¥ä»£ç å—è¢« wait(), çº¿ç¨‹å¤„äºWAITING/TIMED_WAITINGçŠ¶æ€ é”Lockçš„ç›¸å…³å®ç° NonfairSyncã€FairSync ReentrantLock1234567891011121314151617181920212223242526272829303132 /** * å¯é‡å…¥é” * å·²è·å–çš„é”å¯ä»¥ä¸å¿…å»é‡æ–°ç”³è¯·ã€‚ * ä¾‹å¦‚ï¼š * synchronized(lock)&#123; * synchronized(lock)&#123; * //.. * &#125; * &#125; */@Testpublic void reentrantLock() &#123; ReentrantLock lock = new ReentrantLock(); System.out.println(String.format(\"æ˜¯å¦å…¬å¹³é” %b\", lock.isFair())); // æ˜¯å¦å…¬å¹³é” false /** * å¯é‡å…¥é”, åœ¨åŒä¸€ä¸ªçº¿ç¨‹å†…ä¸ç”¨åå¤ç”³è¯·é”(åªæ˜¯è®¡æ•°+1)ã€‚ * å¦‚æœä¸åŒçº¿ç¨‹ä¼šå°è¯•å…³æ‰å½“å‰çº¿ç¨‹(interrupt) */ lock.lock(); System.out.println(String.format(\"è¯¥é”æ˜¯å¦å·²è¢«è·å– %b\", lock.isHeldByCurrentThread())); // è¯¥é”æ˜¯å¦å·²è¢«è·å– true System.out.println(String.format(\"æ˜¯å¦æœ‰çº¿ç¨‹åœ¨ç­‰å¾…è·å–è¯¥é” %b\", lock.hasQueuedThreads())); // æ˜¯å¦æœ‰çº¿ç¨‹åœ¨ç­‰å¾…è·å–è¯¥é” false lock.lock(); System.out.println(String.format(\"è¯¥é”æ˜¯å¦å·²è¢«è·å– %b\", lock.isHeldByCurrentThread())); // è¯¥é”æ˜¯å¦å·²è¢«è·å– true System.out.println(String.format(\"æ˜¯å¦æœ‰çº¿ç¨‹åœ¨ç­‰å¾…è·å–è¯¥é” %b\", lock.hasQueuedThreads())); // æ˜¯å¦æœ‰çº¿ç¨‹åœ¨ç­‰å¾…è·å–è¯¥é” false lock.unlock(); System.out.println(String.format(\"è¯¥é”æ˜¯å¦å·²è¢«è·å– %b\", lock.isHeldByCurrentThread())); // è¯¥é”æ˜¯å¦å·²è¢«è·å– true System.out.println(String.format(\"æ˜¯å¦æœ‰çº¿ç¨‹åœ¨ç­‰å¾…è·å–è¯¥é” %b\", lock.hasQueuedThreads())); // æ˜¯å¦æœ‰çº¿ç¨‹åœ¨ç­‰å¾…è·å–è¯¥é” false lock.unlock(); System.out.println(String.format(\"è¯¥é”æ˜¯å¦å·²è¢«è·å– %b\", lock.isHeldByCurrentThread())); // è¯¥é”æ˜¯å¦å·²è¢«è·å– false System.out.println(String.format(\"æ˜¯å¦æœ‰çº¿ç¨‹åœ¨ç­‰å¾…è·å–è¯¥é” %b\", lock.hasQueuedThreads())); // æ˜¯å¦æœ‰çº¿ç¨‹åœ¨ç­‰å¾…è·å–è¯¥é” false&#125; ReentrantReadWriteLock è¯»å†™é” 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091 /** * è¯»å†™é” * è¯»é” &amp; è¯»é” ä¹‹é—´ä¸ä¼šå µå¡ * å†™é” &amp; è¯»é”/å†™é” éƒ½ä¼šå‘ç”Ÿå µå¡ */ @Test public void reentrantReadWriteLock() throws InterruptedException &#123; ReentrantReadWriteLock lock = new ReentrantReadWriteLock(); Runnable rRunable = () -&gt; &#123; lock.readLock().lock(); System.out.println(String.format(\"è·å– %sé” %s\", lock.isWriteLocked()?\"å†™\":\"è¯»\", Thread.currentThread().getName())); try &#123; Thread.sleep(1000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println(String.format(\"å…³æ‰ %sé” %s\", lock.isWriteLocked()?\"å†™\":\"è¯»\", Thread.currentThread().getName())); lock.readLock().unlock(); &#125;; Runnable wRunable = () -&gt; &#123; lock.writeLock().lock(); System.out.println(String.format(\"è·å– %sé” %s\", lock.isWriteLocked()?\"å†™\":\"è¯»\", Thread.currentThread().getName())); try &#123; Thread.sleep(1000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println(String.format(\"å…³æ‰ %sé” %s\", lock.isWriteLocked()?\"å†™\":\"è¯»\", Thread.currentThread().getName())); lock.writeLock().unlock(); &#125;; Thread rthread = new Thread(rRunable); Thread rthread2 = new Thread(rRunable); Thread wthread = new Thread(wRunable); Thread wthread2 = new Thread(wRunable); /** * è¯»-&gt;å†™-&gt;è¯» * * è·å– è¯»é” Thread-1 * å…³æ‰ è¯»é” Thread-1 * è·å– å†™é” Thread-3 * å…³æ‰ å†™é” Thread-3 * è·å– è¯»é” Thread-2 * å…³æ‰ è¯»é” Thread-2 */// System.out.println(\"è¯»-&gt;å†™-&gt;è¯»\");// rthread.start();// Thread.sleep(100);// wthread.start();// Thread.sleep(100);// rthread2.start(); /** * è¯»-&gt;è¯»-&gt;å†™ * è·å– è¯»é” Thread-1 * è·å– è¯»é” Thread-2 * å…³æ‰ è¯»é” Thread-1 * å…³æ‰ è¯»é” Thread-2 * è·å– å†™é” Thread-3 * å…³æ‰ å†™é” Thread-3 */// System.out.println(\"è¯»-&gt;è¯»-&gt;å†™\");// rthread.start();// Thread.sleep(100);// rthread2.start();// Thread.sleep(100);// wthread.start(); /** * å†™-&gt;å†™-&gt;è¯» * è·å– å†™é” Thread-3 * å…³æ‰ å†™é” Thread-3 * è·å– å†™é” Thread-4 * å…³æ‰ å†™é” Thread-4 * è·å– è¯»é” Thread-1 * å…³æ‰ è¯»é” Thread-1 */ System.out.println(\"å†™-&gt;å†™-&gt;è¯»\"); wthread.start(); Thread.sleep(100); wthread2.start(); Thread.sleep(100); rthread.start(); Thread.sleep(5000); &#125; StampedLock é‚®ç¥¨é”, ReentrantReadWriteLock çš„å‡çº§ç‰ˆå†™é”ã€è¯»é”ã€æ–°å¢(ä¹è§‚è¯»é”ã€é”çš„è½¬æ¢) 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748/** * é‚®ç¥¨é” * @throws InterruptedException */@Testpublic void stampedLock() throws InterruptedException &#123; StampedLock lock = new StampedLock(); int demo = 0; /** * å†™é” */ long stamp = lock.writeLock(); try &#123; demo = 1; &#125;finally &#123; lock.unlockWrite(stamp); &#125; /** * è¯»é” */ stamp = lock.readLock(); try &#123; System.out.println(demo); &#125;finally &#123; lock.unlockRead(stamp); &#125; /** * ä¹è§‚è¯»é” * ä¸€èˆ¬æƒ…å†µè¯»å†™å¹¶ä¸å†²çªï¼Œä½†ä¹Ÿå¯ä»¥é€šè¿‡æ£€æµ‹ç”³è¯·ä¹è§‚è¯»é”åæ˜¯å¦æœ‰å†™é”è¢«ç”³è¯·ï¼Œå¦‚æœæœ‰å¯ä»¥å†è¿›è¡Œé‡æ–°ç”³è¯·ä¸ºè¯»é”ã€‚ */ stamp = lock.tryOptimisticRead(); if (!lock.validate(stamp)) &#123; stamp = lock.readLock(); try &#123; System.out.println(demo); &#125; finally &#123; lock.unlockRead(stamp); &#125; &#125; else &#123; System.out.println(demo); &#125;&#125; Synchronizedä½¿ç”¨çº§åˆ« å®ä¾‹å¯¹è±¡å‡½æ•°thisé” é™æ€å‡½æ•°classé” ä»£ç å—æŒ‡å®šçš„é” 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110public class SynchronizedTest &#123; /** * å½“çº¿ç¨‹1åŒæ­¥å—æ­£åœ¨æ‰§è¡Œï¼Œçº¿ç¨‹2å¤„äºé˜»å¡çŠ¶æ€(BLOCKED) * * @throws InterruptedException */ @Test public void state() throws InterruptedException &#123; Runnable runnable = () -&gt; &#123; synchronized (SynchronizedTest.class) &#123; try &#123; // ä¸ä¼šè®©å‡ºé” Thread.sleep(1000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125;; Thread thread = new Thread(runnable); Thread thread2 = new Thread(runnable); thread.start(); thread2.start(); Thread.sleep(100); System.out.println(String.format(\"é˜»å¡çš„çº¿ç¨‹2(%s) çŠ¶æ€: %s\", thread2.getName(), thread2.getState())); // é˜»å¡çš„çº¿ç¨‹2(Thread-2) çŠ¶æ€: BLOCKED &#125; /** * å¤šä¸ªåŒæ­¥å—å…±ç”¨ä¸€æŠŠé”, å½“çº¿ç¨‹1åŒæ­¥å—1æ­£åœ¨æ‰§è¡Œï¼Œçº¿ç¨‹2åœ¨åŒæ­¥å—2å¤„äºé˜»å¡çŠ¶æ€(BLOCKED) */ @Test public void multiSync() throws InterruptedException &#123; class Demo &#123; private final Object LOCK = new Object(); public void sync1() throws InterruptedException &#123; synchronized (LOCK) &#123; Thread.sleep(1000); &#125; &#125; public void sync2() &#123; synchronized (LOCK) &#123; System.out.println(\"æ‰§è¡Œä¸­..\"); &#125; &#125; &#125; Demo demo = new Demo(); Thread thread = new Thread(() -&gt; &#123; try &#123; demo.sync1(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125;); Thread thread2 = new Thread(demo::sync2); thread.start(); thread2.start(); Thread.sleep(100); System.out.println(String.format(\"é˜»å¡çš„çº¿ç¨‹2(%s) çŠ¶æ€: %s\", thread2.getName(), thread2.getState())); // é˜»å¡çš„çº¿ç¨‹2(Thread-2) çŠ¶æ€: BLOCKED &#125; /** * æ­»é” * * @throws InterruptedException */ @Test public void deadlock() throws InterruptedException &#123; Object LOCK = new Object(); Object LOCK2 = new Object(); Thread thread = new Thread(() -&gt; &#123; synchronized (LOCK) &#123; try &#123; Thread.sleep(10); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; synchronized (LOCK2) &#123; ; &#125; &#125; &#125;); Thread thread2 = new Thread(() -&gt; &#123; synchronized (LOCK2) &#123; synchronized (LOCK) &#123; ; &#125; &#125; &#125;); thread.start(); thread2.start(); Thread.sleep(100); boolean b = thread.getState().equals(Thread.State.BLOCKED) &amp;&amp; thread2.getState().equals(Thread.State.BLOCKED); if (b) &#123; System.out.println(String.format(\"%s å’Œ %s æ­»é”\", thread.getName(), thread2.getName())); &#125; else &#123; System.out.println(\"æœªå‘ç”Ÿæ­»é”\"); &#125; // Thread-1 å’Œ Thread-2 æ­»é” &#125; &#125;","categories":[{"name":"Java","slug":"Java","permalink":"https://hocg.in/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://hocg.in/tags/Java/"},{"name":"å¤šçº¿ç¨‹","slug":"å¤šçº¿ç¨‹","permalink":"https://hocg.in/tags/å¤šçº¿ç¨‹/"}],"keywords":[{"name":"Java","slug":"Java","permalink":"https://hocg.in/categories/Java/"}]},{"title":"å…³äºJava-Unsafe/LockSupport","slug":"å…³äºJava-Unsafe:LockSupport","date":"2018-03-02T02:02:39.000Z","updated":"2018-07-03T05:29:39.417Z","comments":true,"path":"2018/03/02/å…³äºJava-Unsafe:LockSupport/","link":"","permalink":"https://hocg.in/2018/03/02/å…³äºJava-Unsafe:LockSupport/","excerpt":"å…³äºJava Unsafe/LockSupport","text":"å…³äºJava Unsafe/LockSupport Unsafe ä¸€ä¸ªé«˜æ•ˆåº•å±‚å‡½æ•°ï¼Œå¯ä»¥å®ç°å†…å­˜ç®¡ç†ã€å¯¹è±¡å®ä¾‹åŒ–(ä¸é€šè¿‡æ„é€ å‡½æ•°)ã€æ“ä½œå‡½æ•°+ç±»+å˜é‡(é€šè¿‡ä½¿ç”¨åœ°å€)ã€å¤šçº¿ç¨‹åŒæ­¥(æŒ‚èµ·é”ã€CAS)ã€æŒ‚èµ·å’Œæ¢å¤ã€æ•°ç»„ã€å†…å­˜å±éšœã€‚ å…·ä½“å®è·µä»£ç  Unsafe ä¸­åœ¨é«˜å¹¶å‘å’Œé«˜æ€§èƒ½çš„åœºæ™¯ä¸‹å…·æœ‰æ˜¾è‘—çš„æ•ˆæœã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180package in.hocg.lock;import org.junit.jupiter.api.Test;import sun.misc.Unsafe;import java.lang.reflect.Field;/** * Created by hocgin on 2018/3/2. * email: hocgin@gmail.com */public class UnsafeTest &#123; static class Demo &#123; private Integer integer; static &#123; System.out.println(\"static&#123;&#125;\"); &#125; &#123; System.out.println(\"&#123;&#125;\"); &#125; public Demo() &#123; integer = 0; System.out.println(\"Demo()\"); &#125; public Integer getInteger() &#123; System.out.println(\"getInteger()\"); return integer; &#125; public void setInteger(Integer integer) &#123; System.out.println(\"setInteger()\"); this.integer = integer; &#125; &#125; /** * ä½¿ç”¨ Unsafe åˆ›å»ºå¯¹è±¡ï¼Œä¸ä¼šè°ƒç”¨æ„é€ å‡½æ•°ã€‚ * * @throws NoSuchFieldException * @throws IllegalAccessException * @throws InstantiationException */ @Test public void instantiation() throws NoSuchFieldException, IllegalAccessException, InstantiationException &#123; Demo o = ((Demo) getUnsafe().allocateInstance(Demo.class)); System.out.println(String.format(\"hashCode:: %d\", o.hashCode())); // æ­¤å¤„ä¼šæ‰“å° \"static&#123;&#125;\" å› æ­¤ä»ç„¶ä¼šæ‰§è¡Œé™æ€ä»£ç å—å†…å®¹ &#125; /** * ä½¿ç”¨ Unsafe ä¿®æ”¹ç§æœ‰å­—æ®µ */ @Test public void altering() throws NoSuchFieldException, IllegalAccessException &#123; Demo demo = new Demo(); Field field = demo.getClass().getDeclaredField(\"integer\"); Unsafe unsafe = getUnsafe(); unsafe.putObject(demo, unsafe.objectFieldOffset(field), 1); System.out.println(String.format(\"getInteger() = %d\", demo.getInteger())); &#125; /** * ä½¿ç”¨ Unsafe æŠ›å‡ºå¼‚å¸¸ * * @throws NoSuchFieldException * @throws IllegalAccessException */ @Test public void throwing() throws NoSuchFieldException, IllegalAccessException &#123; getUnsafe().throwException(new NullPointerException()); &#125; /** * åˆ†é…ä¸€å—GCæ— æ³•ç®¡ç†çš„å†…å­˜åŒºåŸŸ */ @Test public void memory() throws NoSuchFieldException, IllegalAccessException &#123; Unsafe unsafe = getUnsafe(); int size = 1024; // åˆ†é…å†…å­˜åœ°å€ long address = unsafe.allocateMemory(size * 1); // å†™å…¥ unsafe.putInt(address + 4 * 1, 100); // è¯»å– int i = unsafe.getInt(address + 4 * 1); System.out.println(i); // é‡Šæ”¾å†…å­˜ unsafe.freeMemory(address); &#125; /** * è¿›è¡ŒCASæ“ä½œï¼Œå•çº¯ä½¿ç”¨ Java å¹¶ä¸èƒ½æœ‰æ•ˆçš„è§£å†³CASæ“ä½œ, å…¶ä¸»è¦é€šè¿‡ Unsafe ä½¿ç”¨ç¡¬ä»¶çº§åˆ«æ¥è§£å†³CASæ“ä½œ * @throws NoSuchFieldException * @throws IllegalAccessException */ @Test public void cas() throws NoSuchFieldException, IllegalAccessException &#123; Unsafe unsafe = getUnsafe(); Demo demo = new Demo(); Field field = demo.getClass().getDeclaredField(\"integer\"); /** * compareAndSwapXXX * å‚æ•° * 1. æŒ‡å®šå¯¹è±¡ * 2. å­—æ®µçš„åç§»åœ°å€ * 3. å½“å‰å€¼ * 4. æœŸæœ›å€¼ * è¿”å›å€¼ * \"è®¤ä¸ºçš„æ—§å€¼\"==\"å®é™…æ—§å€¼\",ä¿®æ”¹æˆ\"æœŸæœ›å€¼\"å†è¿”å› True: ä¿®æ”¹æˆåŠŸ * \"è®¤ä¸ºçš„æ—§å€¼\"!=\"å®é™…æ—§å€¼\",ç›´æ¥è¿”å› False: ä¿®æ”¹å¤±è´¥ */ boolean state; // CAS çŠ¶æ€ Integer integer1 = 0; // è®¤ä¸ºçš„æ—§å€¼ Integer integer2 = demo.getInteger(); // å®é™…æ—§å€¼ int o1 = 1; // æœŸæœ›å€¼ while (!(state = unsafe.compareAndSwapObject(demo, unsafe.objectFieldOffset(field), integer1, o1))) &#123; System.out.println(\"å†æ¬¡å°è¯•ä¿®æ”¹\"); &#125; System.out.println(String.format(\"1 .CAS State: %b, è®¤ä¸ºçš„æ—§å€¼ %d, å®é™…æ—§å€¼ %d, æœŸæœ›å€¼ %d\", state, integer1, integer2, o1)); integer2 = demo.getInteger(); // å®é™…æ—§å€¼ state = unsafe.compareAndSwapObject(demo, unsafe.objectFieldOffset(field), integer1, o1); System.out.println(String.format(\"2 .CAS State: %b, è®¤ä¸ºçš„æ—§å€¼ %d, å®é™…æ—§å€¼ %d, æœŸæœ›å€¼ %d\", state, integer1, integer2, o1)); &#125; /** * åˆ©ç”¨OSåº•å±‚çš„æ–¹å¼æ¥å®ç°æŒ‚èµ·ï¼Œç›¸è¾ƒäºObject.wait()æ‹¥æœ‰æ›´å¥½çš„æ€§èƒ½ * @throws NoSuchFieldException * @throws IllegalAccessException * @throws InterruptedException */ @Test public void park() throws NoSuchFieldException, IllegalAccessException, InterruptedException &#123; Unsafe unsafe = getUnsafe(); Thread thread = new Thread(() -&gt; &#123; /** * å‚æ•° * 1. isAbsolute, æ˜¯å¦ä¸ºç»å¯¹æ—¶é—´ã€‚ * 2. time, ç¬¬ä¸€ä¸ªå‚æ•°(isAbsolute)ä¸º True æ—¶è¯¥å‚æ•°åº”ä¸ºçº³ç§’, False æ—¶è¯¥å‚æ•°åº”ä¸ºæ¯«ç§’ã€‚0ä¸ºæ— çº¿ç­‰å¾…ï¼Œç›´åˆ°unparkã€‚ */ unsafe.park(false, 0); // æŒ‚èµ· -&gt; WAITING &#125;); thread.start(); Thread.sleep(100); System.out.println(String.format(\"çº¿ç¨‹ %s çŠ¶æ€ %s\", thread.getName(), thread.getState())); Thread.sleep(100); unsafe.unpark(thread); Thread.sleep(100); System.out.println(String.format(\"çº¿ç¨‹ %s çŠ¶æ€ %s\", thread.getName(), thread.getState())); &#125; /** * Basic * Unsafe unsafe = Unsafe.getUnsafe(); * * @return * @throws IllegalAccessException * @throws NoSuchFieldException */ public static Unsafe getUnsafe() throws IllegalAccessException, NoSuchFieldException &#123; Field f = Unsafe.class.getDeclaredField(\"theUnsafe\"); f.setAccessible(true); return (Unsafe) f.get(null); &#125;&#125; LockSupport å…¶æœ¬è´¨æ˜¯Unsafeçš„è–„å°è£…ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041@Testpublic void park() throws InterruptedException &#123; Thread thread = new Thread(() -&gt; &#123; /** * è¿›è¡ŒæŒ‚èµ· * æœ¬è´¨ä½¿ç”¨ UNSAFE.park(false, 0L); */ LockSupport.park(); &#125;); thread.start(); Thread.sleep(1000); System.out.println(String.format(\"æŒ‚èµ·çº¿ç¨‹çŠ¶æ€ %s\", thread.getState())); // WAITING /** * è¿›è¡Œè§£é™¤ * æœ¬è´¨ä½¿ç”¨ UNSAFE.unpark(thread) */ LockSupport.unpark(thread); Thread.sleep(100); System.out.println(String.format(\"è§£é™¤æŒ‚èµ·çº¿ç¨‹çŠ¶æ€ %s\", thread.getState())); // TERMINATED&#125;@Testpublic void blocker() throws InterruptedException &#123; Thread thread = new Thread(()-&gt;&#123; /** * çº¿ç¨‹å†…éƒ¨æœ‰ä¸ª parkBlocker å­—æ®µ, LockSupport æœ¬è´¨ä¸Šä½¿ç”¨ Unsafe è¿›è¡Œå†…å­˜ä¿®æ”¹ã€‚ */ LockSupport.park(\"sdas\"); &#125;); thread.start(); Thread.sleep(100); System.out.println(String.format(\"æŒ‚èµ· %s\", LockSupport.getBlocker(thread))); // æŒ‚èµ· sdas LockSupport.unpark(thread); Thread.sleep(100); System.out.println(String.format(\"è§£é™¤æŒ‚èµ· %s\", LockSupport.getBlocker(thread))); // è§£é™¤æŒ‚èµ· null &#125; é˜»å¡å’Œè§£é™¤é˜»å¡ æ€»ç»“: ä½¿ç”¨LockSupportæ›´å…·æœ‰çµæ´»æ€§ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253public static final Object LOCK = new Object();/** * notifyAll å®ç° * @throws InterruptedException */@Testpublic void notifyAll2() throws InterruptedException &#123; Runnable runnable = () -&gt; &#123; System.out.println(String.format(\"å¼€å§‹è¿è¡Œ %s\", Thread.currentThread().getName())); synchronized (LOCK) &#123; try &#123; LOCK.wait(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; System.out.println(String.format(\"è§£é™¤é” %s\", Thread.currentThread().getName())); &#125;; CompletableFuture.allOf(CompletableFuture.runAsync(runnable), CompletableFuture.runAsync(runnable), CompletableFuture.runAsync(runnable), CompletableFuture.runAsync(runnable)); Thread.sleep(1000); synchronized (LOCK) &#123; LOCK.notify(); System.out.println(\"é€šçŸ¥å®Œæ¯•\"); &#125;&#125;/** * unpark é€šçŸ¥æ‰€æœ‰éœ€è‡ªå·±å®ç° * @throws InterruptedException */@Testpublic void unparkAll() throws InterruptedException &#123; List&lt;Thread&gt; threads = Collections.synchronizedList(new ArrayList&lt;&gt;()); Runnable runnable = () -&gt; &#123; Thread thread = Thread.currentThread(); threads.add(thread); System.out.println(String.format(\"å¼€å§‹è¿è¡Œ %s\", thread.getName())); LockSupport.park(); System.out.println(String.format(\"è§£é™¤é” %s\", thread.getName())); &#125;; CompletableFuture&lt;Void&gt; future = CompletableFuture.allOf(CompletableFuture.runAsync(runnable), CompletableFuture.runAsync(runnable), CompletableFuture.runAsync(runnable), CompletableFuture.runAsync(runnable)); Thread.sleep(1000); for (Thread thread : threads) &#123; LockSupport.unpark(thread); &#125; System.out.println(\"é€šçŸ¥å®Œæ¯•\");&#125; park/unpark ä¸ wait/notify æ€»ç»“ç›¸æ¯”äºä½¿ç”¨ Object.wait/Object.notify,LockSupport.unpark/LockSupport.park æ›´å…·æœ‰çµæ´»æ€§ã€‚ ä¸å±€é™äºåŒæ­¥å—å†… çµæ´»çš„ API(ä¾‹å¦‚æ—¶é—´) å¯æŒ‡å®šå”¤é†’(å½“å¤šä¸ªè¿›å…¥waitæ—¶Object.notifyæ˜¯éšæœºå”¤é†’å…¶ä¸­ä¸€ä¸ª)ã€‚","categories":[{"name":"Java","slug":"Java","permalink":"https://hocg.in/categories/Java/"}],"tags":[{"name":"å¤šçº¿ç¨‹","slug":"å¤šçº¿ç¨‹","permalink":"https://hocg.in/tags/å¤šçº¿ç¨‹/"},{"name":"é”","slug":"é”","permalink":"https://hocg.in/tags/é”/"}],"keywords":[{"name":"Java","slug":"Java","permalink":"https://hocg.in/categories/Java/"}]},{"title":"å…³äºJavaå¹¶å‘-çº¿ç¨‹","slug":"å…³äºJavaå¤šçº¿ç¨‹-çº¿ç¨‹","date":"2018-02-26T17:13:39.000Z","updated":"2018-10-11T13:39:15.386Z","comments":true,"path":"2018/02/27/å…³äºJavaå¤šçº¿ç¨‹-çº¿ç¨‹/","link":"","permalink":"https://hocg.in/2018/02/27/å…³äºJavaå¤šçº¿ç¨‹-çº¿ç¨‹/","excerpt":"å…³äºJavaå¹¶å‘-çº¿ç¨‹","text":"å…³äºJavaå¹¶å‘-çº¿ç¨‹ å¹¶å‘å’Œå¹¶è¡Œå¹¶è¡Œ: å¤šæ ¸åŒæ—¶æ‰§è¡Œå¹¶å‘: å•æ ¸åˆ‡æ¢æ‰§è¡Œ çº¿ç¨‹çº¿ç¨‹çŠ¶æ€Thread.State @since 1.5å…³äº Java Thread çŠ¶æ€ä¸å¾—ä¸è¯´çš„æ•…äº‹(ç½‘ç»œä¸Šå„ç§ç‰ˆæœ¬).. çº¿ç¨‹çš„çŠ¶æ€åŸæ–‡URL å¤šçº¿ç¨‹æ“ä½œ å…³äºwaitå’Œnotifyæ­¤å¤„æ¶‰åŠåˆ°çº¿ç¨‹ä¸­çš„å‡ ä¸ªçŠ¶æ€ï¼Œè¯·å‹¿æ··æ·†ã€‚ ä½¿ç”¨wait/notifyå¯¹çº¿ç¨‹è¿›è¡Œæ“ä½œä½¿ç”¨wait/notifyå¯¹çº¿ç¨‹è¿›è¡Œæ“ä½œ å¯èƒ½çš„è¯¯åŒº å­çº¿ç¨‹è¢«å…³é—­ï¼Œå­çº¿ç¨‹æ‰€å¼€å¯çš„å­çº¿ç¨‹(å­å­çº¿ç¨‹)ä¼šä¸ä¼šè¢«å…³é—­ï¼Ÿç­”æ¡ˆ: ä¸ä¼šçš„, å­çº¿ç¨‹çš„å­çº¿ç¨‹æœ¬è´¨ä¸Šå’Œå­çº¿ç¨‹æ˜¯åŒä¸€ç­‰çº§çš„å¹¶ä¸ä¼šè¢«å…¶å½±å“ã€‚ å®ˆæŠ¤çº¿ç¨‹ä»€ä¹ˆæƒ…å†µä¼šè¢«å…³é—­ï¼Ÿç­”æ¡ˆ: 1. å®ˆæŠ¤çº¿ç¨‹æ‰§è¡Œå®Œ(è‡ªç„¶å…³é—­)ã€‚ 2.æ‰€æœ‰ç”¨æˆ·çº¿ç¨‹çš„å…³é—­(å¼ºè¡Œå…³é—­) ä»€ä¹ˆæ˜¯å®ˆæŠ¤çº¿ç¨‹ï¼Ÿç­”æ¡ˆ: å½“çº¿ç¨‹t.setDaemon(true)è¯¥çº¿ç¨‹å³ä¸ºå®ˆæŠ¤çº¿ç¨‹ã€‚é“›é“›é“›ï¼Œæœ€å‡ºåçš„å®ˆæŠ¤çº¿ç¨‹GCã€‚ ç”¨æˆ·çº¿ç¨‹ å’Œ å®ˆæŠ¤çº¿ç¨‹ çš„åŒºåˆ«ï¼Ÿç­”æ¡ˆ: å®ˆæŠ¤çº¿ç¨‹[setDaemon(true)]å’Œç”¨æˆ·çº¿ç¨‹å¤§ä½“å¹¶æ²¡å•¥åŒºåˆ«, ä½†æ˜¯å®ˆæŠ¤çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸæ˜¯éšç€æ‰€æœ‰ç”¨æˆ·çº¿ç¨‹çš„å…³é—­è€Œé€€å‡ºçš„ã€‚ å¦‚ä½•æ€æ­»ä¸€ä¸ªJavaçº¿ç¨‹ï¼Ÿç­”æ¡ˆ: Javaå·²ç»ä¸æ¨èä½¿ç”¨stopè¿›è¡Œçº¿ç¨‹çš„å…³é—­äº†ã€‚å¦‚æœçº¿ç¨‹æ˜¯é‚£ç§æŒä¹…å‹æ“ä½œç±»å‹çš„ï¼Œå»ºè®®å¼€è¾Ÿä¸€ä¸ªå®ˆæŠ¤ç±»å‹çš„çº¿ç¨‹è¿›è¡Œå›æ”¶(æƒ³æ³•å‚ç…§Go)ã€‚ 1234567891011121314151617181920@Testpublic void interrupt() throws InterruptedException &#123; Thread thread = new Thread(() -&gt; &#123; while (!Thread.currentThread().isInterrupted()) &#123; System.out.println(\"Do something\"); &#125; &#125;); thread.start(); Thread.sleep(100); System.out.println(String.format(\"çº¿ç¨‹ %s çŠ¶æ€ %s\", thread.getName(), thread.getState())); /** * çº¿ç¨‹ RUNNABLE çŠ¶æ€ä¼šæ ‡è®°ä¸ºå…³é—­ï¼Œå¹¶ä¸è¿›è¡Œå…³é—­ã€‚ * çº¿ç¨‹ å…¶ä»– çŠ¶æ€ä¼šæ ‡è®°å¹¶è¿›è¡Œå…³é—­ã€‚ * - å·²ç»ä¸æ¨èä½¿ç”¨ thread.stop(); å¯èƒ½ä¼šå¼•èµ·èµ„æºé—®é¢˜ã€‚ */ thread.interrupt(); Thread.sleep(100); System.out.println(String.format(\"çº¿ç¨‹ %s çŠ¶æ€ %s\", thread.getName(), thread.getState()));&#125; çº¿ç¨‹æ± å‰ç½® Runable æ— è¿”å›å€¼ Callable æœ‰è¿”å›å€¼ Future è¿”å›ç»“æœ newCachedThreadPool() åˆ›å»ºä¸€ä¸ªå¯ç¼“å­˜çš„çº¿ç¨‹æ± ï¼Œå…¶æŒ‡å®šçº¿ç¨‹æ± ä¸­çº¿ç¨‹çš„å­˜æ´»æ—¶é—´ï¼Œé»˜è®¤ä¸º 60sã€‚ 12345public static ExecutorService newCachedThreadPool() &#123; return new ThreadPoolExecutor(0, Integer.MAX_VALUE, 60L, TimeUnit.SECONDS, new SynchronousQueue&lt;Runnable&gt;());&#125; è¿™è¾¹æºç æœ‰æ³¨é‡Š:å½“ä½ æƒ³å®ç°ä¸€äº›ç¼“å­˜ç›¸å…³çš„ç»†èŠ‚(å¦‚è¶…æ—¶æ—¶é—´)ï¼Œåº”è¯¥è‡ªå·±ä½¿ç”¨ThreadPoolExecutorçš„æ„é€ å‡½æ•°æ¥åˆ›å»ºã€‚ newSingleThreadExecutor åˆ›å»ºä¸€ä¸ªæ–°çš„å•çº¿ç¨‹Executorï¼Œå…¶æŒ‡å®šçº¿ç¨‹æ± ä¸­çº¿ç¨‹æœ€å¤§æ•°é‡ä¸º1ã€‚ 123456public static ExecutorService newSingleThreadExecutor() &#123; return new FinalizableDelegatedExecutorService (new ThreadPoolExecutor(1, 1, 0L, TimeUnit.MILLISECONDS, new LinkedBlockingQueue&lt;Runnable&gt;()));&#125; æ­¤å¤„ä¸ºä½•ä½¿ç”¨é—¨é¢æ¨¡å¼å‘¢ï¼Ÿæ³¨é‡Šå†™æ˜åªæš´éœ²ExecutorServiceæ¥å£çš„æ–¹æ³•, åº”è¯¥æ˜¯ä¸ºäº†é˜²æ­¢å¼ºåˆ¶ä½¿ç”¨ThreadPoolExecutorç›¸å…³å‡½æ•°ã€‚ ç›¸æ¯”äºnewFixedThreadPool(1), è¯¥å‡½æ•°ä¿è¯ä¸ä¼šè¢«é‡æ–°åˆ†é…åˆ°å…¶ä»–çš„çº¿ç¨‹ã€‚ newFixedThreadPool åˆ›å»ºä¸€ä¸ªå›ºå®šå¤§å°çš„çº¿ç¨‹æ± 12345public static ExecutorService newFixedThreadPool(int nThreads) &#123; return new ThreadPoolExecutor(nThreads, nThreads, 0L, TimeUnit.MILLISECONDS, new LinkedBlockingQueue&lt;Runnable&gt;());&#125; æ³¨é‡Šä¸­è¯´æ˜: æäº¤çš„ä»»åŠ¡çº¿ç¨‹å°†ä¸€ç›´å­˜åœ¨ï¼Œç›´åˆ°ä½¿ç”¨ ExecutorService#shutdown è¿›è¡Œé€€å‡º newScheduledThreadPool åˆ›å»ºä¸€ä¸ªå›ºå®šå¤§å°ä¸”å¯å®šæ—¶çš„çº¿ç¨‹æ±  123public static ScheduledExecutorService newScheduledThreadPool(int corePoolSize) &#123; return new ScheduledThreadPoolExecutor(corePoolSize);&#125; newSingleThreadScheduledExecutor åˆ›å»ºä¸€ä¸ªå¤§å°ä¸º1ä¸”å¯å®šæ—¶çš„çº¿ç¨‹æ±  1234public static ScheduledExecutorService newSingleThreadScheduledExecutor() &#123; return new DelegatedScheduledExecutorService (new ScheduledThreadPoolExecutor(1));&#125; åŒæ ·ä½¿ç”¨äº†é—¨é¢æ¨¡å¼ newWorkStealingPool å¹¶è¡Œ åˆ›å»ºä¸€ä¸ªå¹¶è¡Œçº¿ç¨‹æ± (å¹¶è¡Œæ•°ç›®é»˜è®¤ä¸º:ç³»ç»Ÿå¯ç”¨çº¿ç¨‹æ•°ç›®)@since 1.8 123456public static ExecutorService newWorkStealingPool() &#123; return new ForkJoinPool (Runtime.getRuntime().availableProcessors(), ForkJoinPool.defaultForkJoinWorkerThreadFactory, null, true);&#125; Fork/Join å¹¶è¡Œ ä½¿ç”¨å¹¶è¡Œè¿›è¡Œæ“ä½œ@since 1.7 ç›¸å…³ç±»/æ¥å£è¯´æ˜ ForkJoinTask é¡¶å±‚æ¥å£, å…¶å®ç°äº†Futureã€‚ RecursiveTask æœ‰è¿”å›å€¼ RecursiveAction æ— è¿”å›å€¼ ForkJoinPool ç±»ä¼¼Executor æ¡ˆä¾‹12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849/*** Main.java* å“åº”ç»“æœ:* TASK:ForkJoinPool.commonPool-worker-1* TASK:ForkJoinPool.commonPool-worker-1* TASK:ForkJoinPool.commonPool-worker-2* TASK:ForkJoinPool.commonPool-worker-1* æœ‰æ•ˆå€¼ 4* TASK:ForkJoinPool.commonPool-worker-2* æœ‰æ•ˆå€¼ 5* TASK:ForkJoinPool.commonPool-worker-1* æœ‰æ•ˆå€¼ 6* TASK:ForkJoinPool.commonPool-worker-1* æœ‰æ•ˆå€¼ 7* 22**/ @Test public void forkJoinPool() throws ExecutionException, InterruptedException &#123; ForkJoinPool forkJoinPool = ForkJoinPool.commonPool(); IRecursiveTask iRecursiveTask = new IRecursiveTask(); ForkJoinTask&lt;Integer&gt; task = forkJoinPool.submit(iRecursiveTask); System.out.println(task.get()); &#125;/*** IRecursiveTask.java* .fork() è¿›è¡Œä»»åŠ¡åˆ†è£‚ï¼Œå¹¶ä½¿ç”¨çº¿ç¨‹è¿›è¡Œæ‰§è¡Œ* .join() ç­‰å¾…æ‰§è¡Œå®Œæˆå¹¶è·å–ç»“æœ**/public class IRecursiveTask extends RecursiveTask&lt;Integer&gt; &#123; public static AtomicInteger FLAG = new AtomicInteger(0); @Override protected Integer compute() &#123; System.out.println(\"TASK:\" + Thread.currentThread().getName()); FLAG.addAndGet(1); if (FLAG.get() &gt; 3) &#123; System.out.println(String.format(\"æœ‰æ•ˆå€¼ %d\", FLAG.get())); return FLAG.get(); &#125; // ä¸ºä»€ä¹ˆä¸ç”¨ this.fork()ï¼Ÿ // this.fork() è¿”å›çš„æ˜¯ this Integer join1 = new IRecursiveTask().fork().join(); Integer join2 = new IRecursiveTask().fork().join(); return join1 + join2; &#125;&#125; CompletableFuture/CompletionStage å¼‚æ­¥+å¹¶è¡Œ ç›¸æ¯”äº1.7è¿›è¡Œäº†æ›´ç®€ä¾¿ã€å‹å¥½çš„å°è£…ï¼Œå¹¶å¢åŠ äº†å¼‚æ­¥é€šçŸ¥çš„åŠŸèƒ½ï¼Œæ‘†è„±äº†é˜»å¡é—®é¢˜ã€‚@since 1.8 CompletableFuture CompletableFutureå®ç°äº†CompletionStageç”¨äºè¿›è¡Œå¼‚æ­¥å¹¶è¡Œ,å¹¶æä¾›å‡½æ•°è®©å¤šä¸ªCompletionStageå¯ä»¥è¿›è¡Œç»„åˆæ“ä½œå’Œæˆ–æ“ä½œã€‚ é™æ€å‡½æ•°, è¿”å›CompletionStage CompletableFuture.anyOf ä»»æ„ä¸€ä¸ªæ‰§è¡Œå®Œæˆ CompletableFuture.allOf æ‰€æœ‰æ‰§è¡Œå®Œæˆ CompletableFuture.supplyAsync æ‰§è¡Œå•ä¸ªå¼‚æ­¥,æœ‰è¿”å›å€¼(é»˜è®¤ä½¿ç”¨:ForkJoinPool#commonPool())ã€‚ CompletableFuture.runAsync æ‰§è¡Œå•ä¸ªå¼‚æ­¥,æ— è¿”å›å€¼ CompletableFuture.completedFuture è®¾å®šç»“æœ CompletionStage å‡½æ•° thenXXX æµçš„æµå‘(ç­‰å¾…ä¸Šä¸€æ­¥æ‰§è¡Œå®Œæˆ) thenApplyXXX è¿›è¡Œè¾“å…¥çš„è½¬æ¢(Applyï¼šæœ‰è¾“å…¥æœ‰è¾“å‡º) thenRunXXX å¯¹ä¸Šä¸€ä¸ªç»“æœä¸å…³å¿ƒï¼Œä¹Ÿæ²¡æœ‰è¿”å›å€¼(Runï¼šæ— è¾“å…¥æ— è¾“å‡º) thenAcceptXXX è¿›è¡Œè¾“å…¥å¯¹å¤„ç†(Acceptï¼šæœ‰è¾“å…¥æ— è¾“å‡º) thenAcceptBothXXX(CompletionStage,BiConsumer) åŠ å…¥CompletionStage, è¿›è¡ŒæŒ‡å®šå¤„ç†(ç»„åˆæ“ä½œï¼Œæœ‰è¾“å…¥æ— è¾“å‡º)ã€‚ thenCombineXXX(CompletionStage,BiFunction) åŠ å…¥CompletionStage, è¿›è¡ŒæŒ‡å®šå¤„ç†(ç»„åˆæ“ä½œï¼Œæœ‰è¾“å…¥æœ‰è¾“å‡º)ã€‚ runAfterXXX è¿è¡Œä¹‹å runAfterBothXXX(CompletionStage, Runnable) åŠ å…¥CompletionStage, å¹¶åœ¨å…¶è¿è¡ŒåæŒ‡å®šæ‰§è¡Œ(ç»„åˆæ“ä½œï¼Œæ— è¾“å…¥æ— è¾“å‡º)ã€‚ runAfterEither(CompletionStage, Runnable) (æˆ–æ“ä½œ) å®Œæˆ whenCompleteXXX å®Œæˆä¹‹åå¤„ç†ã€‚(æœ‰è¾“å…¥æ— è¾“å‡º) handleXXX å®Œæˆä¹‹åå¤„ç†ã€‚(æœ‰è¾“å…¥æœ‰è¾“å‡º) å¼‚å¸¸å¤„ç† exceptionally å¼‚å¸¸å¤„ç†ã€‚ å…¶ä»– .complete() // ç«‹å³ç»“æŸå¹¶è¿”å›æŒ‡å®šçš„ç»“æœ .completeExceptionally() //ç«‹å³å¼‚å¸¸ç»“æŸ è¯´æ˜: xxxEither åŠ å…¥CompletionStageè¿›è¡ŒORæ“ä½œ(ä¸ä¹‹å‰çš„è¿›è¡Œå¯¹æ¯”),å–æœ€å…ˆè¿”å›çš„ç»“æœå–å…¶ç»“æœå€¼ã€‚ xxxAsync éƒ½æ˜¯å¼‚æ­¥æ‰§è¡Œ ç¨å¾®æä¸€ä¸‹,çº¿ç¨‹ç»„ ä¸ºç®¡ç† Thread è€Œå­˜åœ¨çš„ï¼Œå¯ä»¥è¿›è¡Œæ‰¹é‡æ ‡è®°ã€æ£€æŸ¥ã€‚","categories":[{"name":"Java","slug":"Java","permalink":"https://hocg.in/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://hocg.in/tags/Java/"},{"name":"å¤šçº¿ç¨‹","slug":"å¤šçº¿ç¨‹","permalink":"https://hocg.in/tags/å¤šçº¿ç¨‹/"}],"keywords":[{"name":"Java","slug":"Java","permalink":"https://hocg.in/categories/Java/"}]},{"title":"æ—¥å¿—ç³»ç»ŸELKåœ¨Spring Bootä¸Šçš„åˆæ­¥é›†æˆ","slug":"æ—¥å¿—ç³»ç»Ÿ ELK åœ¨ Spring Boot ä¸Šçš„åˆæ­¥é›†æˆ","date":"2018-01-22T08:53:00.000Z","updated":"2019-03-23T07:30:11.353Z","comments":true,"path":"2018/01/22/æ—¥å¿—ç³»ç»Ÿ ELK åœ¨ Spring Boot ä¸Šçš„åˆæ­¥é›†æˆ/","link":"","permalink":"https://hocg.in/2018/01/22/æ—¥å¿—ç³»ç»Ÿ ELK åœ¨ Spring Boot ä¸Šçš„åˆæ­¥é›†æˆ/","excerpt":"æ—¥å¿—ç³»ç»Ÿ ELK åœ¨ Spring Boot ä¸Šçš„åˆæ­¥é›†æˆ ğŸ˜‹","text":"æ—¥å¿—ç³»ç»Ÿ ELK åœ¨ Spring Boot ä¸Šçš„åˆæ­¥é›†æˆ ğŸ˜‹ ELK Elasticsearch + Logstash + Kibanaï¼Œä¸€ä¸ªæ¯”è¾ƒæµè¡Œçš„æ—¥å¿—ç³»ç»Ÿã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥å°è¯•ä½¿ç”¨é˜¿é‡Œäº‘ã€‚å¦‚æœé’±å¤šçš„è¯:) Logstash æ—¥å¿—æ¬è¿, å¯ä»¥æŒ‡å®šä» Redis/Log4j..å¤„è·å–æ—¥å¿—ä¿¡æ¯ï¼Œç„¶åè¿›è¡Œè¿‡æ»¤ï¼Œå†æäº¤ç»™ Elasticsearch è¿›è¡Œåˆ†æã€‚ 1234# å®‰è£… &amp; å¯åŠ¨brew install logstash# brew services restart logstash# ./bin/logstash -f config/logstash.conf Elasticsearch æ—¥å¿—å­˜å‚¨ / æŸ¥è¯¢ / åˆ†æ 123# å®‰è£… &amp; å¯åŠ¨brew install elasticsearchbrew services restart elasticsearch å¦‚æœä½ æƒ³ç›´æ¥æŸ¥çœ‹ã€æ“ä½œæˆ–è€…ç ”ç©¶ elasticsearch å­˜å‚¨çš„å†…å®¹ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ elasticsearch-head è¿›è¡Œæ“ä½œã€‚ UI æ“ä½œç•Œé¢12345git clone git://github.com/mobz/elasticsearch-head.gitcd elasticsearch-headnpm installnpm run startopen http://localhost:9100 å¦‚æœ Elasticsearch å®‰è£…äº† X-Path é‚£ä¹ˆéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­(elasticsearch.yml), åŠ å…¥:123http.cors.enabled: true http.cors.allow-origin: '*' http.cors.allow-headers: \"Authorization\" å¯¹äº†, è¿™é‡Œæœ‰ä¸€æ¬¾elasticsearch-head Chrome Plug-in æ¨èã€‚ Kibana UI ç•Œé¢ 1234wget https://www.elastic.co/downloads/kibanatar -xvf kibana.tar.gz./kibana/bin/kibanaopen http://localhost:5601/ Spring Boot é›†æˆ pom.xml å¼•å…¥ logback æ”¯æŒã€‚ 12345&lt;dependency&gt; &lt;groupId&gt;net.logstash.logback&lt;/groupId&gt; &lt;artifactId&gt;logstash-logback-encoder&lt;/artifactId&gt; &lt;version&gt;4.11&lt;/version&gt;&lt;/dependency&gt; åœ¨ resources/ æ–‡ä»¶å¤¹å†…åˆ›å»º logback-spring.xml æ–‡ä»¶ã€‚ 123456789101112131415&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;configuration&gt; &lt;appender name=\"LOGSTASH\" class=\"net.logstash.logback.appender.LogstashTcpSocketAppender\"&gt; &lt;destination&gt;dev.local:4560&lt;/destination&gt; &lt;encoder charset=\"UTF-8\" class=\"net.logstash.logback.encoder.LogstashEncoder\"/&gt; &lt;/appender&gt; &lt;include resource=\"org/springframework/boot/logging/logback/base.xml\"/&gt; &lt;root level=\"INFO\"&gt; &lt;appender-ref ref=\"LOGSTASH\"/&gt; &lt;appender-ref ref=\"CONSOLE\"/&gt; &lt;/root&gt;&lt;/configuration&gt; é…ç½® logstash, åˆ›å»º logstash.confã€‚ 123456789101112131415input &#123; tcp &#123; port =&gt; 4560 codec =&gt; json_lines &#125;&#125;output &#123; elasticsearch &#123; action =&gt; &quot;index&quot; hosts =&gt; [&quot;127.0.0.1:9200&quot;] index =&gt; &quot;applog&quot; ; user =&gt; &quot;elastic&quot; ; password =&gt; &quot;changeme&quot; &#125;&#125; å¯åŠ¨logstash ./bin/logstash -f logstash.conf ä½¿ç”¨ã€‚12345678910111213141516@RunWith(SpringRunner.class)@SpringBootTest@Slf4jpublic class TestControllerTest &#123; Random random = new Random(); @Test public void testList() throws Exception &#123; while (true) &#123; Thread.sleep(1000); log.info(\"Hello world form hocgin\"); if (random.nextBoolean()) &#123; log.info(\"sksdjkf \" + random.nextInt(1000)); &#125; &#125; &#125;&#125; å…³äº Kibana å®‰å…¨é…ç½® Configuring Security in Kibana å®‰è£… x-pack. 123456logstash-plugin install x-packelasticsearch-plugin install x-packkibana-plugin install x-pack ä¿®æ”¹ config/kibana.yml 12elasticsearch.username: &quot;elastic&quot; elasticsearch.password: &quot;changeme&quot; ä¿®æ”¹ logstash.confã€‚ 123456789101112131415input &#123; tcp &#123; port =&gt; 4560 codec =&gt; json_lines &#125;&#125;output &#123; elasticsearch &#123; action =&gt; &quot;index&quot; hosts =&gt; [&quot;127.0.0.1:9200&quot;] index =&gt; &quot;applog&quot; user =&gt; &quot;elastic&quot; password =&gt; &quot;changeme&quot; &#125;&#125; å¦‚æœå¿˜è®° ElasticSearch å¯†ç  åœæ­¢ ElasticSearch æœåŠ¡ åˆ›å»ºä¸€ä¸ªç®¡ç†å‘˜ç”¨æˆ· 1x-pack/users useradd my_admin -p my_password -r superuser å¯åŠ¨ ElasticSearch æœåŠ¡ ä½¿ç”¨ API ä¿®æ”¹å¯†ç 1234567891011121314curl -u my_admin -XPUT 'http://localhost:9200/_xpack/security/user/elastic/_password?pretty' -H 'Content-Type: application/json' -d'&#123; \"password\" : \"new_password\"&#125;'``## ELK Docker- [ELK Docker](https://github.com/spujadas/elk-docker)ç®€è€Œè¨€ä¹‹:```shell# :5601 - Kibana# :9200 - Elasticsearch# :5044 - Logstashsudo docker run -p 5601:5601 -p 9200:9200 -p 5044:5044 -it --name elk sebp/elk :2019å¹´3æœˆ23æ—¥ï¼Œæ˜ŸæœŸå…­ è¡¥å…… ELKLé…ç½®æ–‡ä»¶ä½ç½®: {}/config/123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384; è¾“å…¥input &#123; file &#123; path =&gt; [&quot;&#123;path&#125;&quot;] ; è®¾ç½®ç±»å‹ type =&gt; &quot;nginx_access&quot; ; èµ·ç‚¹ä½ç½® start_position =&gt; &quot;beginning&quot; &#125;&#125;; æ•°æ®æ¸…æ´—filter &#123; if [type] == &quot;nginx_access&quot; &#123; grok &#123; patterns_dir =&gt; &quot;&#123;path&#125;&quot; match =&gt; &#123; &quot;message&quot; =&gt; &quot;%&#123;NGINXACCESS&#125;&quot; &#125; &#125; ; æ ¼å¼åŒ–dateå­—æ®µæ—¶é—´æ ¼å¼ date &#123; match =&gt; [&quot;timestamp&quot;, &quot;dd/MMM/YYYY:HH:mm:ss Z&quot;] &#125; ; è§£æparamå­—æ®µ if[param] &#123; ruby &#123; init =&gt; &quot;@kname = [&apos;quote&apos;, &apos;url_args&apos;]&quot; code =&gt; &quot; new_event = LogStash::Event.new(Hash[@kname.zip(event.get(&apos;param&apos;).split(&apos;?&apos;))]) new_event.remove(&apos;@timestamp&apos;) event.append(new_event) &quot; &#125; &#125; if[url_args] &#123; ruby &#123; init =&gt; &quot;@kname = [&apos;key&apos;, &apos;value&apos;]&quot; code =&gt; &quot; event.set( &apos;nested_args&apos;, event.get(&apos;url_args&apos;).split(&apos;&amp;&apos;).collect &#123;|i| Hash[@kname.zip(i.split(&apos;=&apos;))]&#125; ) &quot; remove_field =&gt; [&quot;url_args&quot;, &quot;param&quot;, &quot;quote&quot;] &#125; &#125; ;ä¿®æ”¹æŒ‡å®šå­—æ®µçš„å†…å®¹ mutate &#123; ; è½¬æ¢ç±»å‹ convert =&gt; [&quot;response&quot;, &quot;integer&quot;] remove_field =&gt; [&quot;timestamp&quot;] &#125; &#125; &#125;; è¾“å‡ºoutput &#123; stdout &#123; codec =&gt; rubydebug &#125; elasticsearch &#123; ; ä½ç½® hosts =&gt; [&quot;&#123;url&#125;&quot;] ; ç´¢å¼•æ ¼å¼ index =&gt; &quot;logstash-%&#123;type&#125;-%&#123;+YYYY.MM.dd&#125;&quot; document_type =&gt; &quot;%&#123;type&#125;&quot; ; æ¯æ¬¡å¤šå°‘æ•°é‡ flush_size =&gt; 200 ; å‘é€é—´éš”æ—¶é—´ idle_flush_time =&gt; 1 ; æ˜¯å¦é‡æ–°æ¸…æ´— sniffing = true ; ç”¨æˆ·å user =&gt; &quot;&#123;user&#125;&quot; ; å¯†ç  password =&gt; &quot;&#123;password&#125;&quot; &#125;&#125; è§£æå™¨æ–‡ä»¶ä½ç½®: {}/config/patterns/ Ké…ç½®æ–‡ä»¶ä½ç½®: {}/config/kibana.yml123elasticsearch.url: '&#123;url&#125;'elasticsearch.username: '&#123;username&#125;'elasticsearch.password: '&#123;password&#125;' é»˜è®¤ç«¯å£: 8601","categories":[{"name":"æœåŠ¡ç«¯","slug":"æœåŠ¡ç«¯","permalink":"https://hocg.in/categories/æœåŠ¡ç«¯/"}],"tags":[{"name":"ELK","slug":"ELK","permalink":"https://hocg.in/tags/ELK/"}],"keywords":[{"name":"æœåŠ¡ç«¯","slug":"æœåŠ¡ç«¯","permalink":"https://hocg.in/categories/æœåŠ¡ç«¯/"}]},{"title":"Spring Bootå¯åŠ¨è¿‡ç¨‹å’ŒBeançš„åˆ›å»ºè¿‡ç¨‹","slug":"Spring Boot å¯åŠ¨è¿‡ç¨‹å’Œ Bean çš„åˆ›å»ºè¿‡ç¨‹","date":"2018-01-15T09:10:20.000Z","updated":"2018-05-05T17:58:24.257Z","comments":true,"path":"2018/01/15/Spring Boot å¯åŠ¨è¿‡ç¨‹å’Œ Bean çš„åˆ›å»ºè¿‡ç¨‹/","link":"","permalink":"https://hocg.in/2018/01/15/Spring Boot å¯åŠ¨è¿‡ç¨‹å’Œ Bean çš„åˆ›å»ºè¿‡ç¨‹/","excerpt":"è¿™å‡ å¤©åˆ†æäº†ä¸€ä¸‹ Spring Boot å¯åŠ¨è¿‡ç¨‹å’Œ Bean çš„åˆ›å»ºè¿‡ç¨‹ï¼Œåœ¨æ­¤è®°å½•ä¸‹æ¥ã€‚å¦‚æœæœ‰ä»€ä¹ˆä¸å¯¹çš„åœ°æ–¹ï¼Œæ¬¢è¿æå‡ºğŸ™ã€‚","text":"è¿™å‡ å¤©åˆ†æäº†ä¸€ä¸‹ Spring Boot å¯åŠ¨è¿‡ç¨‹å’Œ Bean çš„åˆ›å»ºè¿‡ç¨‹ï¼Œåœ¨æ­¤è®°å½•ä¸‹æ¥ã€‚å¦‚æœæœ‰ä»€ä¹ˆä¸å¯¹çš„åœ°æ–¹ï¼Œæ¬¢è¿æå‡ºğŸ™ã€‚ å¯åŠ¨è¿‡ç¨‹123456789101112131415161718192021222324252627282930// å°† new SpringApplicationBuilder(sources...) åŠ å…¥ sources åˆ—è¡¨ã€‚// ---------------æ¨æ–­æ˜¯å¦æ˜¯Webç¯å¢ƒ------------// SpringApplication.deduceMainApplicationClass#248// ä¸»è¦æ˜¯å¦åŒ…å« javax.servlet.Servlet ..// ---------------Initializer------------// ä½¿ç”¨ ClassLoader// åˆ†æå¼•å…¥æ‰€æœ‰åŒ…çš„: META-INF/spring.factories æ–‡ä»¶// - spring-boot-actuator-1.5.8.RELEASE.jar// - spring-data-redis-1.8.8.RELEASE.jar// - ..// è·å¾— Key ä¸º`org.springframework.context.ApplicationContextInitializer`çš„æ‰€æœ‰èŠ‚ç‚¹(Class), å®ä¾‹åŒ–å¹¶é€šè¿‡ @Order è¿›è¡Œæ’åºã€‚// ---------------Listener------------// ä½¿ç”¨ ClassLoader// åˆ†æå¼•å…¥æ‰€æœ‰åŒ…çš„: META-INF/spring.factories æ–‡ä»¶// - spring-boot-actuator-1.5.8.RELEASE.jar// - spring-data-redis-1.8.8.RELEASE.jar// - ..// è·å¾— Key ä¸º`org.springframework.context.ApplicationListener`çš„æ‰€æœ‰èŠ‚ç‚¹(Class), å®ä¾‹åŒ–å¹¶é€šè¿‡ @Order è¿›è¡Œæ’åºã€‚// ---------------æ¨æ–­Mainç±»------------// SpringApplication.deduceMainApplicationClass#252// æ¨æ–­å½“å‰åº”ç”¨çš„å…¥å£å‡½æ•°(æ–¹æ³•åä¸ºmain)ã€‚ new SpringApplicationBuilder() .sources(Application.class) // -------åˆ¤æ–­æ˜¯å¦çƒ­éƒ¨ç½²çŠ¶æ€--------- // ---å¦‚æœè®¾ç½®äº† parent() è¿›è¡Œé…ç½®----- // configureAsChildIfNecessary(args);å¦‚æœé…ç½®äº†ä¼šåŠ å…¥ä¸€ä¸ª ParentContextApplicationContextInitializer // ---------åˆå§‹åŒ–å½“å‰åº”ç”¨---------- // SpringApplication.run(args) .run(args); åˆ†æ SpringApplication.run(args)1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162// è®¡æ—¶å™¨, ç”¨äºè®°å½•å¯åŠ¨æ—¶é—´StopWatch stopWatch = new StopWatch();stopWatch.start();ConfigurableApplicationContext context = null;FailureAnalyzers analyzers = null;// è®¾ç½®ä¸ºæ— è¾“å…¥/è¾“å‡ºè®¾å¤‡æ¨¡å¼configureHeadlessProperty();// ä½¿ç”¨ ClassLoader// åˆ†æå¼•å…¥æ‰€æœ‰åŒ…çš„: META-INF/spring.factories æ–‡ä»¶// è·å¾— Key ä¸º`org.springframework.boot.SpringApplicationRunListener`çš„æ‰€æœ‰èŠ‚ç‚¹(Class), å®ä¾‹åŒ–å¹¶é€šè¿‡ @Order è¿›è¡Œæ’åºã€‚// å¹¶å°è£…è¿›å…¥ SpringApplicationRunListeners ç±»ã€‚SpringApplicationRunListeners listeners = getRunListeners(args);// ç”± SpringApplicationRunListeners æ§åˆ¶ç±»çš„å¯åŠ¨ã€‚listeners.starting();try &#123; // å°è£…æˆ‘ä»¬æä¾›çš„ args å‚æ•° ApplicationArguments applicationArguments = new DefaultApplicationArguments(args); // æ ¹æ®æ˜¯å¦ Web ç¯å¢ƒ(webEnvironment) è·å¾—ç¯å¢ƒ(StandardServletEnvironment/StandardEnvironment) // - åŠ è½½é»˜è®¤çš„å‚æ•°æº(StandardServletEnvironment.customizePropertySources) // - åŠ è½½æˆ‘ä»¬æä¾›çš„å¯åŠ¨å‚æ•°(args)ä½œä¸ºå‚æ•°æºã€‚å½“ç„¶ï¼Œå‰ææ˜¯ addCommandLineProperties ä¸º trueã€‚ // é€šè¿‡ SpringApplicationRunListeners.environmentPrepared(..) å¤„ç†ä¸Šé¢æä¾›çš„åº”ç”¨ç¯å¢ƒå‚æ•°ã€‚ ConfigurableEnvironment environment = prepareEnvironment(listeners, applicationArguments); // æ‰“å° bannerã€‚æœ¬èº«æ˜¯ç”± Banner ç±»å®ç°çš„ Banner printedBanner = printBanner(environment); // å®ä¾‹åŒ–ä¸€ä¸ªåº”ç”¨çš„å½“å‰ç¯å¢ƒ, Spring Boot æä¾›äº†2ç§ç¯å¢ƒæ ¹æ®æ˜¯å¦æ˜¯webç¯å¢ƒè¿›è¡ŒåŠ¨æ€å®ä¾‹åŒ–(webEnvironment), åˆ†åˆ«æ˜¯(AnnotationConfigEmbeddedWebApplicationContext/ConfigurableWebApplicationContext) // è¿™æ˜¯ä¼šåˆ›å»ºä¸¤ä¸ªç”¨äºæ‰«ææ³¨è§£çš„é‡è¦å¯¹è±¡ // - AnnotatedBeanDefinitionReader è¯»å–å™¨, è®¾ç½®ç¯å¢ƒå‚æ•°ï¼Œåˆ›å»ºæ—¶æ³¨å†Œäº†ä¸€ç³»åˆ—çš„ç”¨äº Bean çš„è§£æå™¨(AnnotatedBeanDefinitionReader#65) // - ClassPathBeanDefinitionScanner æ‰«æå™¨, è®¾ç½®è·¯å¾„ &amp; ç¯å¢ƒ &amp; æ‹¦æˆªå™¨(Component.class) context = createApplicationContext(); // ----------åˆ›å»ºå¤±è´¥è§£æå™¨------------ // å½“åˆå§‹åŒ–å‡ºç°é”™è¯¯æ—¶è¿›è¡Œé”™è¯¯åˆ†æå™¨ // ä½¿ç”¨ ClassLoader // åˆ†æå¼•å…¥æ‰€æœ‰åŒ…çš„: META-INF/spring.factories æ–‡ä»¶ // - spring-boot-actuator-1.5.8.RELEASE.jar // - spring-data-redis-1.8.8.RELEASE.jar // - .. // è·å¾— Key ä¸º`org.springframework.boot.diagnostics.FailureAnalyzer`çš„æ‰€æœ‰èŠ‚ç‚¹(Class), å®ä¾‹åŒ–å¹¶é€šè¿‡ @Order è¿›è¡Œæ’åºã€‚ // å¹¶åŠ å…¥ FailureAnalyzers ç®¡ç†ã€‚ analyzers = new FailureAnalyzers(context); // è¯¦æƒ…è§ä¸‹æ–¹ã€SpringApplication.prepareContext(..)ã€‘ prepareContext(context, environment, listeners, applicationArguments, printedBanner); // è¯¦æƒ…è§ä¸‹æ–¹ã€åˆ†æ AbstractApplicationContext.refreshContext(context);ã€‘ refreshContext(context); // ApplicationRunner &amp; CommandLineRunner.run æŒ‰ç±»å‹ä» Bean å®¹å™¨ä¸­å–å‡ºï¼Œå¹¶è°ƒç”¨ run(..) afterRefresh(context, applicationArguments); // å¹¿æ’­é€šçŸ¥ SpringApplicationRunListener.finished listeners.finished(context, null); // å…³é—­è®¡æ—¶å™¨ï¼Œè®°å½•å¯åŠ¨æ—¶é—´ stopWatch.stop(); // æ˜¯å¦å¯åŠ¨æ—¥å¿— if (this.logStartupInfo) &#123; new StartupInfoLogger(this.mainApplicationClass) .logStarted(getApplicationLog(), stopWatch); &#125; return context;&#125; catch (Throwable ex) &#123; // å¤„ç†é€€å‡ºå¼‚å¸¸, å­˜å‚¨ ExitCodeEvent // å¹¿æ’­é€šçŸ¥ listener(listener.finished(context, exception);) // ä½¿ç”¨ analyzers è¿›è¡Œå¤±è´¥åˆ†æ handleRunFailure(context, listeners, analyzers, ex); throw new IllegalStateException(ex);&#125; åˆ†æ SpringApplication.prepareContext(..)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748private void prepareContext(ConfigurableApplicationContext context, ConfigurableEnvironment environment, SpringApplicationRunListeners listeners, ApplicationArguments applicationArguments, Banner printedBanner) &#123; // è®¾ç½®ç¯å¢ƒå‚æ•° context.setEnvironment(environment); // // - æ³¨å†Œè‡ªå®šä¹‰ beanNameGeneratorï¼Œå¦‚æœæœ‰çš„è¯ã€‚ // - æ³¨å†Œè‡ªå®šä¹‰ resourceLoaderï¼Œå¦‚æœæœ‰çš„è¯ã€‚ // å…¶ä¸­, resourceLoader åˆ†ä¸ºä¸¤ç§ç±»å‹ // - GenericApplicationContext(ResourceLoader) // - DefaultResourceLoader(ClassLoader) postProcessApplicationContext(context); // åˆå§‹åŒ–æ‰€æœ‰ä¹‹å‰åŠ è½½çš„ ApplicationContextInitializer èŠ‚ç‚¹ applyInitializers(context); // æ‰€æœ‰ç›‘å¬å™¨é€šçŸ¥è¿›å…¥ contextPrepared é˜¶æ®µ listeners.contextPrepared(context); // æ˜¯å¦å¯åŠ¨æ—¥å¿— if (this.logStartupInfo) &#123; // äº¤ç”±é¡¶çº§æ‰“å°æ—¥å¿—ä¿¡æ¯ logStartupInfo(context.getParent() == null); // æ‰“å°é…ç½®æ–‡ä»¶ä¿¡æ¯ logStartupProfileInfo(context); &#125; // Add boot specific singleton beans context.getBeanFactory().registerSingleton(\"springApplicationArguments\", applicationArguments); if (printedBanner != null) &#123; context.getBeanFactory().registerSingleton(\"springBootBanner\", printedBanner); &#125; // Load the sources Set&lt;Object&gt; sources = getSources(); Assert.notEmpty(sources, \"Sources must not be empty\"); // åˆ›å»º Bean çš„åŠ è½½å™¨, BeanDefinitionLoader // ---------------è§£æå™¨--------------- // - æ³¨è§£ AnnotatedBeanDefinitionReader // - xml XmlBeanDefinitionReader // - goovy GroovyBeanDefinitionReader // - ç±»è·¯å¾„ ClassPathBeanDefinitionScanner // ---------------è‡ªå®šä¹‰----------------- // - åŠ è½½è‡ªå®šä¹‰ beanNameGeneratorï¼Œå¦‚æœæœ‰çš„è¯ã€‚ // - åŠ è½½è‡ªå®šä¹‰ resourceLoaderï¼Œå¦‚æœæœ‰çš„è¯ã€‚ // - åŠ è½½è‡ªå®šä¹‰ environmentï¼Œå¦‚æœæœ‰çš„è¯ã€‚ load(context, sources.toArray(new Object[sources.size()])); // é€šçŸ¥ç¯å¢ƒåŠ è½½ç»“æŸ listeners.contextLoaded(context);&#125; åˆ†æ AbstractApplicationContext.refreshContext(context);123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110@Overridepublic void refresh() throws BeansException, IllegalStateException &#123; synchronized (this.startupShutdownMonitor) &#123; // è®¾ç½®ä¸ºå¯åŠ¨çŠ¶æ€ // æ ¡éªŒå¿…é¡»å­—æ®µ, ä½¿ç”¨ ConfigurablePropertyResolver#setRequiredProperties è¿›è¡Œè®¾ç½®ã€‚ // Prepare this context for refreshing. prepareRefresh(); // åˆ·æ–°å½“å‰ beanFactory çš„ID, å€¼å¾—ä¸€æçš„æ˜¯é»˜è®¤çš„ BeanFactory æ˜¯ org.springframework.beans.factory.support.DefaultListableBeanFactoryã€‚ // Tell the subclass to refresh the internal bean factory. ConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory(); // ----------BeanFactoryé‡ç‚¹åˆå§‹åŒ–(AbstractApplicationContext.prepareBeanFactory#627)--------------- // - è®¾ç½® BeanClassLoader // - è®¾ç½® å­—ç¬¦è§£æå™¨(SpelExpressionParser) // - è®¾ç½® èµ„æºä½ç½® // - æ·»åŠ  å¤„ç†å™¨ // - å¿½ç•¥ æŸäº›æ¥å£ // - æ³¨å†ŒæŸäº›è§£æå™¨è§£å†³ä¾èµ–å…³ç³» // - æ·»åŠ ä¸€ä¸ªç›‘å¬å™¨ // - æ³¨å†Œ é»˜è®¤çš„ environment Bean(3ä¸ª), å¦‚æœä¸å­˜åœ¨çš„è¯ã€‚ // Prepare the bean factory for use in this context. prepareBeanFactory(beanFactory); try &#123; // AnnotationConfigEmbeddedWebApplicationContext.postProcessBeanFactory#182 // - åŠ å…¥ WebApplicationContextServletContextAwareProcessor ä½œä¸º BeanPostProcessor // - beanFactory.ignoreDependencyInterface(ServletContextAware.class); // ä¹Ÿä¼šè¯»å–æ³¨å†Œçš„æ³¨è§£ç±» å’Œ é…ç½®è¦æ‰«æçš„åŒ…ä½ç½®ã€‚ // Allows post-processing of the bean factory in context subclasses. postProcessBeanFactory(beanFactory); // PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(currentRegistryProcessors, registry) // é€šè¿‡ ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry#308 æ‰«ææ‰€æœ‰åº”ç”¨æ–‡ä»¶ã€‚ // - æ‰«æé¢„åˆ¶çš„é…ç½®æ–‡ä»¶ // - æ‰«æåº”ç”¨çš„æ‰€æœ‰æ³¨è§£é…ç½®æˆ Bean å­—å…¸ // Invoke factory processors registered as beans in the context. invokeBeanFactoryPostProcessors(beanFactory); // ä½¿ç”¨ BeanPostProcessor.class è·å– Bean(æ‰€æœ‰ Bean å‡åœ¨beanDefinitionMap å†…å«æœ‰), æ’åºå, æ³¨å†Œä¸º Bean å¤„ç†å™¨ã€‚ // åŠ å…¥ BeanPostProcessorChecker.class ç”¨äºç›‘å¬Beançš„åˆ›å»ºå‘¨æœŸã€‚ // - priorityOrderedPostProcessors // - orderedPostProcessors // - nonOrderedPostProcessors // - internalPostProcessors // åŠ å…¥ ApplicationListenerDetector ä½œä¸ºå…œåº• BeanPostProcessor // Register bean processors that intercept bean creation. registerBeanPostProcessors(beanFactory); // åˆå§‹åŒ–æ¶ˆæ¯èµ„æº(MessageSource) // ä¸€èˆ¬æ˜¯ä½œä¸º i18 çš„èµ„æºæ–‡ä»¶ã€‚ // Initialize message source for this context. initMessageSource(); // åˆå§‹åŒ–åº”ç”¨å¹¿æ’­å™¨(ApplicationEventMulticaster) // ä¸€èˆ¬ç”¨äºç®¡ç† ApplicationListener // Initialize event multicaster for this context. initApplicationEventMulticaster(); // EmbeddedWebApplicationContext.onRefresh#131 // åˆ›å»ºåµŒå…¥å¼ Servlet å®¹å™¨ // Initialize other special beans in specific context subclasses. onRefresh(); // æ³¨å†Œ listener beans åˆ° ApplicationEventMulticasterã€‚ // å¹¿æ’­ (Set&lt;ApplicationEvent&gt; earlyEventsToProcess).multicastEvent // Check for listener beans and register them. registerListeners(); // - è½¬åŒ– BeanFactory ç±»å‹ // - æä¾›é»˜è®¤çš„åµŒå…¥å€¼è§£æå™¨ï¼Œå¦‚æœéœ€è¦çš„è¯ã€‚ // - è£…è½½ LoadTimeWeaverAware.class ç±»å‹çš„ Bean // - åœæ­¢ä¸´æ—¶çš„ ClassLoad // - å†»ç»“é…ç½® // - é¢„å…ˆè£…è½½æ‰€æœ‰å•ä¾‹ Beanã€‚ // - åˆå§‹åŒ–@Controller @RequestMapping ä¹‹ç±»çš„è¿‡ç¨‹, åŸºæœ¬ä¸Šæˆ‘ä»¬ä½¿ç”¨çš„æ³¨è§£éƒ½æ˜¯è¯¥é˜¶æ®µè¿›è¡Œè®¾ç½®çš„ã€‚ // Instantiate all remaining (non-lazy-init) singletons. finishBeanFactoryInitialization(beanFactory); // ----------å‘å¸ƒäº‹ä»¶é€šçŸ¥---------------- // æ³¨å†Œ LifecycleProcessorï¼Œå¹¶å‘å¸ƒ onRefresh() äº‹ä»¶ã€‚ // earlyApplicationEvents.add(new ContextRefreshedEvent(this)) åŠ å…¥ Context åˆ·æ–°äº‹ä»¶ // æ³¨å†Œ LiveBeanï¼Œå¦‚æœæœ‰çš„è¯ã€‚..DevTool Debug é‚£ä¸ª // Last step: publish corresponding event. finishRefresh(); &#125; catch (BeansException ex) &#123; if (logger.isWarnEnabled()) &#123; logger.warn(\"Exception encountered during context initialization - \" + \"cancelling refresh attempt: \" + ex); &#125; // Destroy already created singletons to avoid dangling resources. destroyBeans(); // Reset 'active' flag. cancelRefresh(ex); // Propagate exception to caller. throw ex; &#125; finally &#123; // Reset common introspection caches in Spring's core, since we // might not ever need metadata for singleton beans anymore... resetCommonCaches(); &#125; &#125;&#125; å…³äº Bean BeanDefinitionRegistry, Bean å®šä¹‰æ³¨å†Œè¡¨ï¼Œç±»ä¼¼ Bean çš„ä»“åº“ã€‚ BeanDefinition å­˜å‚¨ Bean çš„ä¿¡æ¯ã€‚ Bean çš„ scope ç§ç±», prototype, æ¯æ¬¡è·å–æ—¶åˆ›å»ºã€‚ request, session, global session, singleton(é»˜è®¤), å•ä¾‹ã€‚ BeanFactory, Bean å·¥å‚ã€‚ ç”¨äº æ³¨å†Œ Bean, è·å¾— Bean, æ¸…é™¤ Bean, é…ç½® Bean çš„ç›¸å…³ç­–ç•¥ã€‚ DefaultListableBeanFactory æ˜¯ Spring é»˜è®¤çš„ BeanFactoryã€‚ registeredSingletons å·²æ³¨å†Œçš„ Bean åˆ—è¡¨, å­˜å‚¨ BeanNameã€‚ singletonObjects å­˜å‚¨ Bean å¯¹è±¡, ä½¿ç”¨ Map ç»“æ„ã€‚ earlySingletonObjects å­˜å‚¨ç”± ObjectFactory åˆ›å»ºçš„ Bean å¯¹è±¡ã€‚ singletonFactories å­˜å‚¨ä¹‹å‰åˆ›å»ºçš„ ObjectFactory å…¶æœ¬è´¨æ˜¯ Bean å¯¹è±¡ã€‚ beanDefinitionMap æ‰«æå­˜å‚¨çš„è®°å½•ï¼Œå¯ä»¥ç†è§£ä¸º Bean çš„æ€»åå•ã€‚ mergedBeanDefinitions è·å– Bean getBean(..)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169// AbstractBeanFactory.class @Override public Object getBean(String name) throws BeansException &#123; return doGetBean(name, null, null, false); &#125; @SuppressWarnings(\"unchecked\") protected &lt;T&gt; T doGetBean( final String name, final Class&lt;T&gt; requiredType, final Object[] args, boolean typeCheckOnly) throws BeansException &#123; // è§£æ BeanName final String beanName = transformedBeanName(name); Object bean; // æ£€æŸ¥ç¼“å­˜ä¸­æ˜¯å¦å­˜åœ¨è¯¥ Bean, å¦‚æœå­˜åœ¨åˆ™å®ä¾‹åŒ–ã€‚ // Eagerly check singleton cache for manually registered singletons. Object sharedInstance = getSingleton(beanName); if (sharedInstance != null &amp;&amp; args == null) &#123; if (logger.isDebugEnabled()) &#123; if (isSingletonCurrentlyInCreation(beanName)) &#123; logger.debug(\"Returning eagerly cached instance of singleton bean '\" + beanName + \"' that is not fully initialized yet - a consequence of a circular reference\"); &#125; else &#123; logger.debug(\"Returning cached instance of singleton bean '\" + beanName + \"'\"); &#125; &#125; bean = getObjectForBeanInstance(sharedInstance, name, beanName, null); &#125; else &#123; // Bean ä¸åœ¨ç¼“å­˜ // å½“æ­£åœ¨åˆ›å»ºçš„ Bean çš„ Scope ä¸º Prototype æ—¶ï¼ŒæŠ›å‡ºå¼‚å¸¸ã€‚ // å› ä¸º Prototype æ¨¡å¼æ— æ³•è§£å†³ä¾èµ–é—®é¢˜ã€‚ // Fail if we're already creating this bean instance: // We're assumably within a circular reference. if (isPrototypeCurrentlyInCreation(beanName)) &#123; throw new BeanCurrentlyInCreationException(beanName); &#125; // å¦‚æœå½“å‰ BeanFactory ä¸åŒ…æ‹¬è¯¥ BeanName å¹¶ä¸”è¯¥ BeanFactory æœ‰çˆ¶ BeanFactory æ—¶ï¼Œå°è¯•ä»çˆ¶ BeanFactory è·å–è¯¥ Beanã€‚ // Check if bean definition exists in this factory. BeanFactory parentBeanFactory = getParentBeanFactory(); if (parentBeanFactory != null &amp;&amp; !containsBeanDefinition(beanName)) &#123; // Not found -&gt; check parent. String nameToLookup = originalBeanName(name); if (args != null) &#123; // Delegation to parent with explicit args. return (T) parentBeanFactory.getBean(nameToLookup, args); &#125; else &#123; // No args -&gt; delegate to standard getBean method. return parentBeanFactory.getBean(nameToLookup, requiredType); &#125; &#125; // å¦‚æœä¸åªä¾é ç±»å‹è¿›è¡Œè·å–, è¿›è¡Œæ ‡è®°ã€‚ if (!typeCheckOnly) &#123; markBeanAsCreated(beanName); &#125; try &#123; // å°†è§£æè½¬åŒ–ä¸º Bean çš„ä¿¡æ¯ï¼Œæ³¨å†Œå¹¶è·å–å…¶ä¾èµ–çš„ Beanã€‚ final RootBeanDefinition mbd = getMergedLocalBeanDefinition(beanName); checkMergedBeanDefinition(mbd, beanName, args); // Guarantee initialization of beans that the current bean depends on. String[] dependsOn = mbd.getDependsOn(); if (dependsOn != null) &#123; for (String dep : dependsOn) &#123; if (isDependent(beanName, dep)) &#123; throw new BeanCreationException(mbd.getResourceDescription(), beanName, \"Circular depends-on relationship between '\" + beanName + \"' and '\" + dep + \"'\"); &#125; registerDependentBean(dep, beanName); getBean(dep); &#125; &#125; // å½“ Bean çš„ Scope ä¸º Singleton æ—¶ // Create bean instance. if (mbd.isSingleton()) &#123; sharedInstance = getSingleton(beanName, new ObjectFactory&lt;Object&gt;() &#123; @Override public Object getObject() throws BeansException &#123; try &#123; return createBean(beanName, mbd, args); &#125; catch (BeansException ex) &#123; // Explicitly remove instance from singleton cache: It might have been put there // eagerly by the creation process, to allow for circular reference resolution. // Also remove any beans that received a temporary reference to the bean. destroySingleton(beanName); throw ex; &#125; &#125; &#125;); bean = getObjectForBeanInstance(sharedInstance, name, beanName, mbd); &#125; // å½“ Bean çš„ Scope ä¸º Prototype æ—¶ else if (mbd.isPrototype()) &#123; // It's a prototype -&gt; create a new instance. Object prototypeInstance = null; try &#123; beforePrototypeCreation(beanName); prototypeInstance = createBean(beanName, mbd, args); &#125; finally &#123; afterPrototypeCreation(beanName); &#125; bean = getObjectForBeanInstance(prototypeInstance, name, beanName, mbd); &#125; // å½“ Bean çš„ Scope ä¸º å…¶ä»– æ—¶ else &#123; String scopeName = mbd.getScope(); final Scope scope = this.scopes.get(scopeName); if (scope == null) &#123; throw new IllegalStateException(\"No Scope registered for scope name '\" + scopeName + \"'\"); &#125; try &#123; Object scopedInstance = scope.get(beanName, new ObjectFactory&lt;Object&gt;() &#123; @Override public Object getObject() throws BeansException &#123; beforePrototypeCreation(beanName); try &#123; return createBean(beanName, mbd, args); &#125; finally &#123; afterPrototypeCreation(beanName); &#125; &#125; &#125;); bean = getObjectForBeanInstance(scopedInstance, name, beanName, mbd); &#125; catch (IllegalStateException ex) &#123; throw new BeanCreationException(beanName, \"Scope '\" + scopeName + \"' is not active for the current thread; consider \" + \"defining a scoped proxy for this bean if you intend to refer to it from a singleton\", ex); &#125; &#125; &#125; catch (BeansException ex) &#123; cleanupAfterBeanCreationFailure(beanName); throw ex; &#125; &#125; // æ£€æŸ¥è·å¾—çš„ Bean ç±»å‹æ˜¯å¦ç¬¦åˆé¢„æœŸç»“æœã€‚ // Check if required type matches the type of the actual bean instance. if (requiredType != null &amp;&amp; bean != null &amp;&amp; !requiredType.isInstance(bean)) &#123; try &#123; return getTypeConverter().convertIfNecessary(bean, requiredType); &#125; catch (TypeMismatchException ex) &#123; if (logger.isDebugEnabled()) &#123; logger.debug(\"Failed to convert bean '\" + name + \"' to required type '\" + ClassUtils.getQualifiedName(requiredType) + \"'\", ex); &#125; throw new BeanNotOfRequiredTypeException(name, requiredType, bean.getClass()); &#125; &#125; return (T) bean; &#125; åˆ›å»º Bean createBean(..)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163// AbstractAutowireCapableBeanFactory.class @Override protected Object createBean(String beanName, RootBeanDefinition mbd, Object[] args) throws BeanCreationException &#123; if (logger.isDebugEnabled()) &#123; logger.debug(\"Creating instance of bean '\" + beanName + \"'\"); &#125; RootBeanDefinition mbdToUse = mbd; // æ ¹æ®ä¿¡æ¯(mbd, beanName)è·å– Bean çš„ç±»å‹ // Make sure bean class is actually resolved at this point, and // clone the bean definition in case of a dynamically resolved Class // which cannot be stored in the shared merged bean definition. Class&lt;?&gt; resolvedClass = resolveBeanClass(mbd, beanName); if (resolvedClass != null &amp;&amp; !mbd.hasBeanClass() &amp;&amp; mbd.getBeanClassName() != null) &#123; mbdToUse = new RootBeanDefinition(mbd); mbdToUse.setBeanClass(resolvedClass); &#125; // æ ¡éªŒé‡è½½å‡½æ•° // Prepare method overrides. try &#123; mbdToUse.prepareMethodOverrides(); &#125; catch (BeanDefinitionValidationException ex) &#123; throw new BeanDefinitionStoreException(mbdToUse.getResourceDescription(), beanName, \"Validation of method overrides failed\", ex); &#125; try &#123; // Spring æä¾›çš„ï¼Œç”± BeanPostProcessor è¿›è¡Œå¤„ç†æ¥å…¥ç‚¹ã€‚ // Give BeanPostProcessors a chance to return a proxy instead of the target bean instance. Object bean = resolveBeforeInstantiation(beanName, mbdToUse); if (bean != null) &#123; return bean; &#125; &#125; catch (Throwable ex) &#123; throw new BeanCreationException(mbdToUse.getResourceDescription(), beanName, \"BeanPostProcessor before instantiation of bean failed\", ex); &#125; // é»˜è®¤çš„åˆ›å»º Bean æ–¹å¼ Object beanInstance = doCreateBean(beanName, mbdToUse, args); if (logger.isDebugEnabled()) &#123; logger.debug(\"Finished creating instance of bean '\" + beanName + \"'\"); &#125; return beanInstance; &#125;// AbstractAutowireCapableBeanFactory.class protected Object doCreateBean(final String beanName, final RootBeanDefinition mbd, final Object[] args) throws BeanCreationException &#123; // æ ¹æ® Bean ä¿¡æ¯å®ä¾‹åŒ– Bean // Instantiate the bean. BeanWrapper instanceWrapper = null; if (mbd.isSingleton()) &#123; instanceWrapper = this.factoryBeanInstanceCache.remove(beanName); &#125; if (instanceWrapper == null) &#123; instanceWrapper = createBeanInstance(beanName, mbd, args); &#125; final Object bean = (instanceWrapper != null ? instanceWrapper.getWrappedInstance() : null); Class&lt;?&gt; beanType = (instanceWrapper != null ? instanceWrapper.getWrappedClass() : null); mbd.resolvedTargetType = beanType; // ä½¿ç”¨ MergedBeanDefinitionPostProcessor è¿›è¡Œå¤„ç† // Allow post-processors to modify the merged bean definition. synchronized (mbd.postProcessingLock) &#123; if (!mbd.postProcessed) &#123; try &#123; applyMergedBeanDefinitionPostProcessors(mbd, beanType, beanName); &#125; catch (Throwable ex) &#123; throw new BeanCreationException(mbd.getResourceDescription(), beanName, \"Post-processing of merged bean definition failed\", ex); &#125; mbd.postProcessed = true; &#125; &#125; // Eagerly cache singletons to be able to resolve circular references // even when triggered by lifecycle interfaces like BeanFactoryAware. boolean earlySingletonExposure = (mbd.isSingleton() &amp;&amp; this.allowCircularReferences &amp;&amp; isSingletonCurrentlyInCreation(beanName)); // å•ä¾‹ &amp; å…è®¸å¾ªç¯å¼•ç”¨ &amp; æ­£åœ¨åˆ›å»º if (earlySingletonExposure) &#123; if (logger.isDebugEnabled()) &#123; logger.debug(\"Eagerly caching bean '\" + beanName + \"' to allow for resolving potential circular references\"); &#125; // ä½¿ç”¨ ObjectFactory æ¥ç®¡ç† Bean é˜²æ­¢å¾ªç¯ä¾èµ–ã€‚ addSingletonFactory(beanName, new ObjectFactory&lt;Object&gt;() &#123; @Override public Object getObject() throws BeansException &#123; return getEarlyBeanReference(beanName, mbd, bean); &#125; &#125;); &#125; // Initialize the bean instance. Object exposedObject = bean; try &#123; // å¯¹ Bean çš„å±æ€§è¿›è¡Œå¡«å…… populateBean(beanName, mbd, instanceWrapper); if (exposedObject != null) &#123; // åˆå§‹åŒ– Bean å®ä¾‹ exposedObject = initializeBean(beanName, exposedObject, mbd); &#125; &#125; catch (Throwable ex) &#123; if (ex instanceof BeanCreationException &amp;&amp; beanName.equals(((BeanCreationException) ex).getBeanName())) &#123; throw (BeanCreationException) ex; &#125; else &#123; throw new BeanCreationException( mbd.getResourceDescription(), beanName, \"Initialization of bean failed\", ex); &#125; &#125; if (earlySingletonExposure) &#123; Object earlySingletonReference = getSingleton(beanName, false); // å­˜åœ¨å·²åˆ›å»ºçš„å•ä¾‹, ä¸€èˆ¬æƒ…å†µä¸ºè§£å†³ä¾èµ–çš„æ—¶å€™ã€‚ if (earlySingletonReference != null) &#123; if (exposedObject == bean) &#123; exposedObject = earlySingletonReference; &#125; // å…è®¸å¾ªç¯ä¾èµ–ä¸ä¸€è‡´ &amp; Bean å«æœ‰ä¾èµ–ã€‚ // æ­¤æ—¶å¦‚æœå­˜åœ¨ä¾èµ–ï¼Œå°†ä¼šå‘ç”Ÿå¼‚å¸¸ã€‚ else if (!this.allowRawInjectionDespiteWrapping &amp;&amp; hasDependentBean(beanName)) &#123; String[] dependentBeans = getDependentBeans(beanName); Set&lt;String&gt; actualDependentBeans = new LinkedHashSet&lt;String&gt;(dependentBeans.length); for (String dependentBean : dependentBeans) &#123; if (!removeSingletonIfCreatedForTypeCheckOnly(dependentBean)) &#123; actualDependentBeans.add(dependentBean); &#125; &#125; if (!actualDependentBeans.isEmpty()) &#123; throw new BeanCurrentlyInCreationException(beanName, \"Bean with name '\" + beanName + \"' has been injected into other beans [\" + StringUtils.collectionToCommaDelimitedString(actualDependentBeans) + \"] in its raw version as part of a circular reference, but has eventually been \" + \"wrapped. This means that said other beans do not use the final version of the \" + \"bean. This is often the result of over-eager type matching - consider using \" + \"'getBeanNamesOfType' with the 'allowEagerInit' flag turned off, for example.\"); &#125; &#125; &#125; &#125; // æ³¨å†Œä¸€æ¬¡æ€§ Bean // Register bean as disposable. try &#123; registerDisposableBeanIfNecessary(beanName, bean, mbd); &#125; catch (BeanDefinitionValidationException ex) &#123; throw new BeanCreationException( mbd.getResourceDescription(), beanName, \"Invalid destruction signature\", ex); &#125; return exposedObject; &#125;","categories":[{"name":"Web","slug":"Web","permalink":"https://hocg.in/categories/Web/"}],"tags":[{"name":"Spring Boot","slug":"Spring-Boot","permalink":"https://hocg.in/tags/Spring-Boot/"},{"name":"Web","slug":"Web","permalink":"https://hocg.in/tags/Web/"}],"keywords":[{"name":"Web","slug":"Web","permalink":"https://hocg.in/categories/Web/"}]},{"title":"ä½¿ç”¨ Docker äº¤å‰ç¼–è¯‘ OpenWrt ä¸Šè¿è¡Œçš„ Golang ç¨‹åº","slug":"ä½¿ç”¨ Docker äº¤å‰ç¼–è¯‘ OpenWrt ä¸Šè¿è¡Œçš„ Golang ç¨‹åº","date":"2017-11-23T02:17:02.000Z","updated":"2018-01-09T00:33:32.850Z","comments":true,"path":"2017/11/23/ä½¿ç”¨ Docker äº¤å‰ç¼–è¯‘ OpenWrt ä¸Šè¿è¡Œçš„ Golang ç¨‹åº/","link":"","permalink":"https://hocg.in/2017/11/23/ä½¿ç”¨ Docker äº¤å‰ç¼–è¯‘ OpenWrt ä¸Šè¿è¡Œçš„ Golang ç¨‹åº/","excerpt":">.&lt;","text":">.&lt; å‰è¨€ ä½¿ç”¨ https://github.com/gomini/go-mips32 å¯¹ Go ç¨‹åºè¿›è¡Œäº¤å‰ç¼–è¯‘. ä½¿ç”¨ Docker äº¤å‰ç¼–è¯‘ Go ç¨‹åº æ‹‰å–é•œåƒ 1docker pull conoro/go-mips32:v1 å¯åŠ¨é•œåƒå¹¶æŒ‚è½½æœ¬åœ°ç›®å½• 123456docker run -it -v ç¨‹åºç›®å½•:/go/src conoro/go-mips32:v1 /bin/shcd src# ç¼–è¯‘# export GOOS=linux# export GOARCH=mips32lego build main.go","categories":[{"name":"Docker","slug":"Docker","permalink":"https://hocg.in/categories/Docker/"}],"tags":[{"name":"OpenWrt","slug":"OpenWrt","permalink":"https://hocg.in/tags/OpenWrt/"},{"name":"Docker","slug":"Docker","permalink":"https://hocg.in/tags/Docker/"},{"name":"Go","slug":"Go","permalink":"https://hocg.in/tags/Go/"}],"keywords":[{"name":"Docker","slug":"Docker","permalink":"https://hocg.in/categories/Docker/"}]},{"title":"è‡ªç¼–è¯‘ OpenWrt ç³»ç»Ÿ","slug":"è‡ªç¼–è¯‘ OpenWrt ç³»ç»Ÿ","date":"2017-11-22T02:18:02.000Z","updated":"2018-01-04T10:30:58.409Z","comments":true,"path":"2017/11/22/è‡ªç¼–è¯‘ OpenWrt ç³»ç»Ÿ/","link":"","permalink":"https://hocg.in/2017/11/22/è‡ªç¼–è¯‘ OpenWrt ç³»ç»Ÿ/","excerpt":"ğŸ˜Œ æ•´ç†ã€è®°å½•ä¸€ä¸‹æ­¥éª¤..","text":"ğŸ˜Œ æ•´ç†ã€è®°å½•ä¸€ä¸‹æ­¥éª¤.. å‰ç½®æ›´æ”¹æº123sed -i.bak 's/\\/us.archive.ubuntu.com\\//\\/cn.archive.ubuntu.com\\//g' /etc/apt/sources.listsudo apt update å…³é—­IPv6echo 1 &gt; /proc/sys/net/ipv6/conf//disable_ipv6 å‰ç½®å®‰è£… git subversion make automake autoconf gcc g++ binutils make, ç¼ºçœå®‰è£… libncurses5-dev libssl-dev gawk å‰ç½® GitHub(git clone https://github.com/openwrt/openwrt) è·å– OpenWrt, æ›´æ”¹ openWrt ç›®å½•ä¸ºå½“å‰ç”¨æˆ·æ‰€æœ‰æƒ12# ä¾‹å¦‚:chown -R hocgin:hocgin openwrt ç¼–è¯‘(openwrt/)ç¼–è¯‘è¿‡ç¨‹ make ./script/feeds update -a ./script/feeds install -a 14. make deconfig # ä½¿ç”¨é»˜è®¤çš„é…ç½® 15. make menuconfig # åŸºäºç»ˆç«¯çš„ä¸€ç§é…ç½®æ–¹å¼ï¼Œæä¾›äº†æ–‡æœ¬æ¨¡å¼çš„å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡å…‰æ ‡ç§»åŠ¨æ¥æµè§ˆæ‰€æ”¯æŒçš„å„ç§ç‰¹æ€§ã€‚ å›ºä»¶é…ç½®, å¯ä»¥é€‰æ‹©ç¼–è¯‘çš„è½¯ä»¶åŒ… ## éƒ¨åˆ†é€‰é¡¹ - æ¶æ„(AR7xxx) - FLASH(Generic) - è·¯ç”±å™¨å‹å·(WNDR3800) - æ–‡ä»¶ç³»ç»Ÿ(squashfs) - é€šç”¨è®¾ç½® - [-] Crytographically signed package lists - [-] Compile with support for patented functionallty - [-] Enable shadow password support - [-] Crash logging - [-] Compile the kernel with debug information - [-] Compile the kernel SysRq support - [-] Enable process core dump support - [-] Enable printk timestamps - [-] Enable Ipv6 support in packages - [-] Compile certain packages parallelized - [-] Enable gcc format-security - [-] Build the OpenWrt Image Builder - [-] In - [-] Build the OpenWrt SDK - [-] Package the OpenWrt-based Toolchain å…¶ä½™é»˜è®¤ã€‚ make kernel_config å†…æ ¸é…ç½®[å¼€å¯æµ®ç‚¹æ•°æ¨¡æ‹Ÿ(FPU)] make V=s -j&lt;å¤„ç†å™¨æ•°é‡&gt; ç¼–è¯‘å®Œæˆåï¼Œç§»å‡ºbin/ar71xx/OpenWrt-ImageBuilder-ar71xx-generic.Linux-x86_64.tar.bz2 æ–‡ä»¶, å¹¶è§£å‹(tar xvf). è¿›å…¥(OpenWrt-ImageBuilder-ar71xx-generic.Linux-x86_64/) ç¼–è¯‘æˆé•œåƒ 12345# æ£€æŸ¥åŸºç¡€é•œåƒparallels@ubuntu:~/OpenWrt/OpenWrt-ImageBuilder-ar71xx-generic.Linux-x86_64$ make image PROFILE=WNDR3700# åŒ…å«å¿…å¤‡åŒ…`é¢„è£…è½¯ä»¶`çš„é•œåƒparallels@ubuntu:~/OpenWrt/OpenWrt-ImageBuilder-ar71xx-generic.Linux-x86_64$ make image PROFILE=WNDR3700 PACKAGES=\"-dnsmasq dnsmasq-full ipset openssh-keygen openssh-server openssh-sftp-server kmod-fs-ext4 kmod-fs-ntfs kmod-fs-vfat kmod-usb2 kmod-usb-core kmod-usb-storage kmod-usb-storage-extras luci-app-firewall luci-app-samba luci-app-upnp luci luci-theme-material curl kmod-ipt-nat-extra libpcre\" ç”Ÿæˆé•œåƒ(~/OpenWrt/OpenWrt-ImageBuilder-ar71xx-generic.Linux-x86_64/bin/) openwrt-ar71xx-generic-wndr3800-squashfs-sysupgrade.bin openwrt-ar71xx-generic-wndr3800-squashfs-factory.img","categories":[{"name":"OpenWrt","slug":"OpenWrt","permalink":"https://hocg.in/categories/OpenWrt/"}],"tags":[{"name":"OpenWrt","slug":"OpenWrt","permalink":"https://hocg.in/tags/OpenWrt/"}],"keywords":[{"name":"OpenWrt","slug":"OpenWrt","permalink":"https://hocg.in/categories/OpenWrt/"}]},{"title":"åˆ¶ä½œ.ipkå®‰è£…æ–‡ä»¶","slug":"åˆ¶ä½œ.ipk","date":"2017-11-19T04:30:21.000Z","updated":"2018-01-09T00:35:43.000Z","comments":true,"path":"2017/11/19/åˆ¶ä½œ.ipk/","link":"","permalink":"https://hocg.in/2017/11/19/åˆ¶ä½œ.ipk/","excerpt":".ipk æœ¬è´¨æ˜¯tar.gzæ ¼å¼çš„å‹ç¼©åŒ…, æŒ‰ç…§æŸç§è§„èŒƒæ ¼å¼(ç±»ä¼¼.debåŒ…)è¿›è¡Œ â€¦","text":".ipk æœ¬è´¨æ˜¯tar.gzæ ¼å¼çš„å‹ç¼©åŒ…, æŒ‰ç…§æŸç§è§„èŒƒæ ¼å¼(ç±»ä¼¼.debåŒ…)è¿›è¡Œ â€¦ å‰è¨€ .ipk æœ¬è´¨æ˜¯tar.gzæ ¼å¼çš„å‹ç¼©åŒ…, æŒ‰ç…§æŸç§è§„èŒƒæ ¼å¼(ç±»ä¼¼.debåŒ…)è¿›è¡Œå‹ç¼©è€Œæˆçš„ã€‚ å½“æˆ‘ä»¬å¯¹å®ƒçš„å†…å®¹è¿›è¡Œæ“ä½œæ—¶å€™æ‰€ä½¿ç”¨çš„ç”¨æˆ·å³æ˜¯å®ƒå®‰è£…åæ‰€æ‹¥æœ‰çš„ç”¨æˆ·å’Œæƒé™(sudo chown root:root -R .)ã€‚ å·²ç»å­˜åœ¨çš„æ–‡ä»¶å¹¶ä¸èƒ½è¿›è¡Œæ›¿æ¢, åˆ‡è®°ã€‚ æ–‡ä»¶ä»‹ç»1234.â”œâ”€â”€ control.tar.gz # å®‰è£…/å¸è½½ è„šæœ¬â”œâ”€â”€ data.tar.gz # äºŒè¿›åˆ¶/é…ç½®æ–‡ä»¶..â””â”€â”€ debian-binary # å›ºæœ‰æ–‡ä»¶ control.tar.gz å†…å®¹1234.â”œâ”€â”€ control # æ–‡ä»¶ä»‹ç»[åŒ…æ‹¬: ä¾èµ–/ç‰ˆæœ¬/æ¶æ„/ä½œè€…..]â”œâ”€â”€ postinst # å®‰è£…è„šæœ¬â””â”€â”€ postrm # å¸è½½è„šæœ¬ control æ­¤å¤„ä¸¾ä¸ªæ —å­1234567Package: IPKName # .ipk NAMEVersion: 1Section: netPriority: optionalArchitecture: ar71xx # ç³»ç»Ÿæ¶æ„Maintainer: hocgin &lt;hocgin@gmail.com&gt;Description: my first ipk postinst å®‰è£…è„šæœ¬ å› ä¸ºå‰è¨€çš„3åŸå› , å½“æˆ‘ä»¬éœ€è¦å¯¹å·²å­˜åœ¨æ–‡ä»¶è¿›è¡Œä¿®æ”¹æ—¶, åªèƒ½ä½¿ç”¨å†™å…¥çš„æ–¹å¼è¿›è¡Œä¿®æ”¹ã€‚ ä¾‹å¦‚:12#!/bin/shecho \"installed done\" &gt; /tmp/ipk.log postinst å¸è½½è„šæœ¬ è‡ªå·±çº¦çš„XğŸ¤£ã€‚ã€‚ ä¾‹å¦‚:12#!/bin/shrm -rf /tmp/ipk.log æ‰“åŒ…~1sudo tar -czf control.tar.gz * data.tar.gz æ­¤å¤„å®Œå…¨æ˜¯æ ¹æ®ä½ è¦å¢åŠ çš„è„šæœ¬æŒ‰æ ¹ç›®å½•è¿›è¡Œå­˜æ”¾çš„ã€‚ ä¾‹å¦‚:1234567891011121314151617181920.â”œâ”€â”€ binâ”‚ â”œâ”€â”€ ss-redirâ”‚ â””â”€â”€ ss-tunnelâ”œâ”€â”€ data.tar.gzâ”œâ”€â”€ etcâ”‚ â”œâ”€â”€ dnsmasq.dâ”‚ â”‚ â”œâ”€â”€ address.confâ”‚ â”‚ â”œâ”€â”€ dns.confâ”‚ â”‚ â”œâ”€â”€ ipset.confâ”‚ â”‚ â”œâ”€â”€ option.confâ”‚ â”‚ â””â”€â”€ server.confâ”‚ â”œâ”€â”€ pdnsd.confâ”‚ â””â”€â”€ shadowsock.jsonâ”œâ”€â”€ rootâ”‚ â”œâ”€â”€ addDnsmasq.shâ”‚ â””â”€â”€ changeService.shâ””â”€â”€ usr â””â”€â”€ sbin â””â”€â”€ pdnsd æ‰“åŒ…~1sudo tar -czf data.tar.gz * æœ€å å°†ä¸‰ä¸ªæ–‡ä»¶æ”¾åœ¨ä¸€èµ·è¿›è¡Œæ‰“åŒ… 1sudo tar -czf mIPK.ipk *","categories":[{"name":"OpenWrt","slug":"OpenWrt","permalink":"https://hocg.in/categories/OpenWrt/"}],"tags":[{"name":"Tips","slug":"Tips","permalink":"https://hocg.in/tags/Tips/"},{"name":"OpenWrt","slug":"OpenWrt","permalink":"https://hocg.in/tags/OpenWrt/"},{"name":"Shell","slug":"Shell","permalink":"https://hocg.in/tags/Shell/"}],"keywords":[{"name":"OpenWrt","slug":"OpenWrt","permalink":"https://hocg.in/categories/OpenWrt/"}]},{"title":"IDEA ä¸­çš„ Spring Boot å¼€å‘æ¨¡å¼","slug":"IDEA-ä¸­çš„-Spring-Boot-å¼€å‘æ¨¡å¼","date":"2017-10-20T15:28:09.000Z","updated":"2018-10-11T13:39:15.407Z","comments":true,"path":"2017/10/20/IDEA-ä¸­çš„-Spring-Boot-å¼€å‘æ¨¡å¼/","link":"","permalink":"https://hocg.in/2017/10/20/IDEA-ä¸­çš„-Spring-Boot-å¼€å‘æ¨¡å¼/","excerpt":"ğŸ¤‘ å®Œå…¨çƒ­éƒ¨ç½², é…ç½®å®Œæˆç¬é—´èˆ’çˆ½æ— æ¯”ã€‚","text":"ğŸ¤‘ å®Œå…¨çƒ­éƒ¨ç½², é…ç½®å®Œæˆç¬é—´èˆ’çˆ½æ— æ¯”ã€‚ .java æ–‡ä»¶å’Œé…ç½®æ–‡ä»¶æ›´æ”¹åè¿›è¡Œè‡ªåŠ¨é‡å¯ æ›´æ”¹IDEAä¸­çš„å¦‚ä¸‹è®¾ç½®Build project automaticallyã€‚ æ‰“å¼€IDEAçš„Action window, å¿«æ·é”®å¦‚ä¸‹: Linux : CTRL+SHIFT+A Mac OSX : SHIFT+COMMAND+A Windows : CTRL+ALT+SHIFT+/è¾“å…¥(é€‰æ‹©) Registry..., é€‰æ‹©å¦‚ä¸‹: æ­¤æ—¶è¿›è¡Œ.java æ–‡ä»¶å’Œé…ç½®æ–‡ä»¶ä¿®æ”¹æ—¶, ä¼šè¿›è¡Œ Spring Boot é‡å¯ã€‚ å½“æ›´æ”¹é™æ€HTMLè¿›è¡Œå®æ—¶åˆ·æ–° åŠ å…¥ä¾èµ– 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;&lt;/dependency&gt; å®‰è£…æµè§ˆå™¨æ’ä»¶ Chrome æ’ä»¶ Firefox æ’ä»¶ Safari æ’ä»¶ æ›´æ”¹æ–‡ä»¶å’Œé™æ€é¡µé¢(HTML)éƒ½å¯ä»¥è¿›è¡Œçƒ­éƒ¨ç½²ç±»ã€‚ å®æ—¶åˆ·æ–°thymeleafæ¨¡ç‰ˆæ–‡ä»¶é…ç½®æ–‡ä»¶è®¾ç½®å–æ¶ˆç¼“å­˜: 123spring: thymeleaf: cache: false Chrome è®¾ç½®å–æ¶ˆç¼“å­˜: æ­¤æ—¶å‡ ä¹æ‰€æœ‰çš„ä¸œè¥¿(.java/`/SpringBoot é…ç½®æ–‡ä»¶`)éƒ½å¯ä»¥è¿›è¡Œçƒ­éƒ¨ç½²äº†ã€‚åŒ…æ‹¬: ä¿®æ”¹ .java æ–‡ä»¶ã€‚ ä¿®æ”¹é¡µé¢(thymeleaf html ..) æ–‡ä»¶ã€‚ ä¿®æ”¹ SpringBoot é…ç½®æ–‡ä»¶ã€‚ å¢åˆ é™æ€æ–‡ä»¶(css js å›¾ç‰‡)ã€‚ å…³äºå®šåˆ¶åŒ–çƒ­éƒ¨ç½² å¯æŸ¥è¯¢spring-boot-devtoolsçš„ä½¿ç”¨, ä½¿ç”¨ä»¥ä¸‹å­é¡¹è¿›è¡Œé…ç½®ã€‚ 12spring: devtools: IDEA æ‰©å±• pom.xml æ·»åŠ ä»¥ä¸‹ä¾èµ–å¯æŸ¥çœ‹æ›´å¤šçš„ä¿¡æ¯ã€‚è¯¥ä¾èµ–æ˜¯å¯æŸ¥çœ‹ç›‘æ§ä¿¡æ¯çš„, æ›´å¤šä½¿ç”¨ç§»æ­¥ Google.comã€‚ 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;&lt;/dependency&gt; IDEA æ˜¾ç¤ºå¦‚ä¸‹:","categories":[{"name":"Server","slug":"Server","permalink":"https://hocg.in/categories/Server/"}],"tags":[{"name":"Ubuntu","slug":"Ubuntu","permalink":"https://hocg.in/tags/Ubuntu/"},{"name":"Tips","slug":"Tips","permalink":"https://hocg.in/tags/Tips/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://hocg.in/tags/SpringBoot/"}],"keywords":[{"name":"Server","slug":"Server","permalink":"https://hocg.in/categories/Server/"}]},{"title":"JQuery.pjax æ— æ³•å†æ¬¡åˆå§‹åŒ–å½“å‰é¡µé¢çš„JS","slug":"JQuery.pjaxæ— æ³•å†æ¬¡åˆå§‹åŒ–å½“å‰é¡µé¢çš„JS","date":"2017-10-19T14:07:20.000Z","updated":"2017-10-22T04:16:22.962Z","comments":true,"path":"2017/10/19/JQuery.pjaxæ— æ³•å†æ¬¡åˆå§‹åŒ–å½“å‰é¡µé¢çš„JS/","link":"","permalink":"https://hocg.in/2017/10/19/JQuery.pjaxæ— æ³•å†æ¬¡åˆå§‹åŒ–å½“å‰é¡µé¢çš„JS/","excerpt":"Pjax å¾ˆä¹…ä¹‹å‰ç”¨è¿‡ä¸€æ¬¡, è¿™ä¸€æ¬¡åœ¨æ•´åˆåå°æ¨¡ç‰ˆï¼Œå‘ç°ç½‘ä¸Šå¯¹è¿™ä¸ªå‘ç«Ÿç„¶æ˜¯æ”¹æºç â€¦åœ¨è¿™è¯¦ç»†è®°å½•ä¸€ä¸‹ã€‚","text":"Pjax å¾ˆä¹…ä¹‹å‰ç”¨è¿‡ä¸€æ¬¡, è¿™ä¸€æ¬¡åœ¨æ•´åˆåå°æ¨¡ç‰ˆï¼Œå‘ç°ç½‘ä¸Šå¯¹è¿™ä¸ªå‘ç«Ÿç„¶æ˜¯æ”¹æºç â€¦åœ¨è¿™è¯¦ç»†è®°å½•ä¸€ä¸‹ã€‚ é—®é¢˜å½“ JQuery.pjax åŠ è½½é¡µé¢å, å†æ¬¡åŠ è½½è¯¥é¡µé¢æ—¶ï¼Œå…¶å†…éƒ¨çš„åˆå§‹åŒ– JS æˆ– script inline å¹¶ä¸èƒ½è¢«å†æ¬¡æ‰§è¡Œã€‚ä¾‹å¦‚:123456789101112131415161718192021222324252627&lt;div id=\"pjax-container\"&gt; &lt;!-- .. --&gt;&lt;/div&gt;&lt;!-- jQuery 3 --&gt;&lt;script th:src=\"jquery.min.js\"&gt;&lt;/script&gt;&lt;!-- jQuery Pjax --&gt;&lt;script th:src=\"jquery.pjax.js\"&gt;&lt;/script&gt;&lt;script type=\"text/javascript\"&gt; $(document).ready(function () &#123; if ($.support.pjax) &#123; $(document).pjax('a[data-pjax]', '#pjax-container', &#123; maxCacheLength: 0, push: false, replace: true, fragment: '#pjax-container', timeout: 8000 &#125;); &#125; &#125;);&lt;/script&gt;&lt;script type=\"text/javascript\"&gt; $(function()&#123; console.log(\"ä¸èƒ½è¢«å†æ¬¡æ‰§è¡Œ\"); &#125;);&lt;/script&gt;&lt;!-- ä¸èƒ½è¢«å†æ¬¡æ‰§è¡Œ --&gt;&lt;script type=\"text/javascript\" src=\"init.js\"&gt;&lt;/script&gt; è§£å†³åŠæ³• å…¶åŸå› æ˜¯JQuery.pjaxå¯¹jsè¿›è¡Œäº†ç¼“å­˜, å¯ä»¥ä½¿ç”¨JQueryè¿›è¡ŒåŠ è½½, å½“ç„¶å…¶ä»£ä»·æ˜¯ç‰ºç‰²äº†è¿™éƒ¨åˆ†éƒ½ç¼“å­˜, ä¸è¿‡å› ä¸ºæ˜¯ç‰¹å®šé¡µé¢çš„è„šæœ¬, ç‰ºç‰²çš„ç¼“å­˜å‡ ä¹å¯ä»¥å¿½ç•¥ã€‚ä¾‹å­å¦‚ä¸‹:123456789101112131415161718192021222324252627282930&lt;div id=\"pjax-container\"&gt; &lt;!-- .. --&gt; &lt;!-- èƒ½è¢«å†æ¬¡æ‰§è¡Œ --&gt; &lt;script th:inline=\"javascript\"&gt; $.getScript('/admin-lte/dist/js/pages/dashboard2.js'); &lt;/script&gt; &lt;script type=\"text/javascript\" src=\"init.js\"&gt;&lt;/script&gt; &lt;script type=\"text/javascript\"&gt; $(function()&#123; console.log(\"èƒ½è¢«å†æ¬¡æ‰§è¡Œ\"); &#125;); &lt;/script&gt;&lt;/div&gt;&lt;!-- jQuery 3 --&gt;&lt;script th:src=\"jquery.min.js\"&gt;&lt;/script&gt;&lt;!-- jQuery Pjax --&gt;&lt;script th:src=\"jquery.pjax.js\"&gt;&lt;/script&gt;&lt;script type=\"text/javascript\"&gt; $(document).ready(function () &#123; if ($.support.pjax) &#123; $(document).pjax('a[data-pjax]', '#pjax-container', &#123; maxCacheLength: 0, push: false, replace: true, fragment: '#pjax-container', timeout: 8000 &#125;); &#125; &#125;);&lt;/script&gt;","categories":[{"name":"Web","slug":"Web","permalink":"https://hocg.in/categories/Web/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://hocg.in/tags/JavaScript/"},{"name":"Pjax","slug":"Pjax","permalink":"https://hocg.in/tags/Pjax/"}],"keywords":[{"name":"Web","slug":"Web","permalink":"https://hocg.in/categories/Web/"}]},{"title":"Thymeleaf 3.0 æ‰‹å†Œ","slug":"Thymeleaf-3.0-æ‰‹å†Œ","date":"2017-10-18T08:40:51.000Z","updated":"2018-01-04T08:26:38.907Z","comments":true,"path":"2017/10/18/Thymeleaf-3.0-æ‰‹å†Œ/","link":"","permalink":"https://hocg.in/2017/10/18/Thymeleaf-3.0-æ‰‹å†Œ/","excerpt":"Spring å®˜æ–¹æ¨å´‡çš„æ¨¡ç‰ˆå¼•æ“ï¼Œéµå¾ª HTML5è§„èŒƒã€‚","text":"Spring å®˜æ–¹æ¨å´‡çš„æ¨¡ç‰ˆå¼•æ“ï¼Œéµå¾ª HTML5è§„èŒƒã€‚ HTML5è‹¥è¦å®Œå…¨éµå¾ªHTML5è§„èŒƒï¼Œå¯ä½¿ç”¨ data-th-* ä»£æ›¿ th:*ã€‚ æ ‡ç­¾th:each foreach å¾ªç¯è¯­æ³•: th:each=â€obj, index:listâ€12345678&lt;th:block th:each=\"permission, i:$&#123;role.permissions&#125;\"&gt; &lt;tr th:attr=\"data-tt-id=$&#123;permission.id&#125;, data-tt-parent-id=$&#123;permission.parent&#125;, data-tt-branch=$&#123;permission.hasChildren&#125;\"&gt; &lt;td th:text=\"$&#123;permission.name&#125;\"&gt;&lt;/td&gt; &lt;td th:text=\"$&#123;permission.url&#125;\"&gt;&lt;/td&gt; &lt;td th:text=\"$&#123;permission.type&#125;\"&gt;&lt;/td&gt; &lt;td th:text=\"$&#123;permission.permission&#125;\"&gt;&lt;/td&gt; &lt;/tr&gt;&lt;/th:block&gt; th:inline è§£æå†…åµŒè¯­æ³•, ä¸€èˆ¬æ˜¯æ··åˆjavascriptè¯­æ³•: th:inline=â€javascript|text|noneâ€123456&lt;script th:inline=\"javascript\"&gt;/*&lt;![CDATA[*/var welcome = [[$&#123;welcome&#125;]] 'è¿™æ˜¯ä¸€ä¸ª Thymeleaf å˜é‡';var default_value = [[$&#123;maxCount?:0&#125;]]/*]]&gt;*/&lt;/script&gt; th:fragment å®šä¹‰æ¨¡ç‰ˆï¼Œè¯­æ³•: th:fragment=â€æ¨¡å—å(å˜é‡)â€å˜é‡éƒ¨åˆ†ä¸ºå¯é€‰, é…åˆ th:with ä½¿ç”¨ã€‚123456&lt;!-- ä¸ä¿ç•™æœ¬èº«çš„æ ‡ç­¾, ä¿ç•™ th:fragment çš„æ ‡ç­¾ --&gt;&lt;div th:replace=\"/admin/fragments/header::header\"&gt;&lt;/div&gt;&lt;!-- ä¿ç•™æœ¬èº«çš„æ ‡ç­¾, ä¿ç•™ th:fragment çš„æ ‡ç­¾ --&gt;&lt;div th:insert=\"/admin/fragments/header::header\"&gt;&lt;/div&gt;&lt;!-- @è¿‡æœŸ, ä¿ç•™æœ¬èº«çš„æ ‡ç­¾, ä¸ä¿ç•™ th:fragment çš„æ ‡ç­¾ --&gt;&lt;div th:include=\"/admin/fragments/header::header\"&gt;&lt;/div&gt; th:with å®šä¹‰å˜é‡ã€‚è¯­æ³•: th:with=â€å­—æ®µ1=å€¼, å­—æ®µ2=å€¼2â€1&lt;div th:with=\"id='UploadImage',var='image',height=1,maxCount=1\"&gt;&lt;/div&gt; th:if å°±æ˜¯ if ..1234567&lt;div th:if=\"$&#123;true&#125;\"&gt;&lt;/div&gt;&lt;!-- å¸ƒå°”å€¼. 0 = false \"false\"/\"off\"/\"no\" = false null = false --&gt; th:switch/th:case1234&lt;ul th:switch=\"$&#123;val&#125;\"&gt; &lt;li th:case=\"1\"&gt;1&lt;/li&gt; &lt;li th:case=\"2\"&gt;2&lt;/li&gt;&lt;/ul&gt; th:selected å¯ç”¨äº æ ‡ç­¾1234&lt;select class=\"form-control\" id=\"type\" name=\"type\"&gt; &lt;option value=\"0\" th:selected=\"$&#123;permission?.type==0&#125;\"&gt;èœå•&lt;/option&gt; &lt;option value=\"1\" th:selected=\"$&#123;permission?.type==1&#125;\"&gt;æ•°æ®&lt;/option&gt;&lt;/select&gt; æ³¨é‡Šè¯­æ³•123456789&lt;!--/* è¿™é‡Œæ˜¯ ç¼–è¯‘å™¨æ˜¾ç¤ºä¸ºæ³¨é‡Š, æµè§ˆå™¨ä¸å¯è§ */--&gt;&lt;!--/*--&gt;&lt;div&gt;è¿™é‡Œæ˜¯ ç¼–è¯‘å™¨æ˜¾ç¤ºä¸æ³¨é‡Šï¼Œæµè§ˆå™¨ä¸å¯è§ &lt;/div&gt;&lt;!--*/--&gt;&lt;!--/*/&lt;div th:text=\"$&#123;'è¿™é‡Œæ˜¯ ç¼–è¾‘å™¨æ˜¾ç¤ºä¸ºæ³¨é‡Š, æµè§ˆå™¨å¯è§'&#125;\"&gt;...&lt;/div&gt;/*/--&gt; è¡¨è¾¾å¼URL è¡¨è¾¾å¼123456&lt;img th:src=\"@&#123;/img/tup.png&#125;\" alt=\"ç»å¯¹è·¯å¾„\"&gt;&lt;!-- &lt;img alt=\"ç»å¯¹è·¯å¾„\" src=\"/img/tup.png\"&gt; --&gt;&lt;img th:src=\"@&#123;../img/tup.png&#125;\" alt=\"ç›¸å¯¹è·¯å¾„\"&gt;&lt;!-- &lt;img alt=\"ç›¸å¯¹è·¯å¾„\" src=\"../img/tup.png\"&gt; --&gt;&lt;img th:src=\"@&#123;../img/tup.png(size=$&#123;100&#125;)&#125;\" alt=\"å¸¦å‚æ•°çš„è·¯å¾„\"&gt;&lt;!-- &lt;img alt=\"å¸¦å‚æ•°çš„è·¯å¾„\" src=\"../img/tup.png?size=100\"&gt; --&gt; å›½é™…åŒ–è¡¨è¾¾å¼ åˆ›å»º resources/messages_zh_CN.properties, å…¶å†…å®¹: 1message.error=é”™è¯¯ é…ç½® application.yml (ä½¿ç”¨ xml çš„æ‰§è¡Œè½¬æ¢) 123spring: messages: basename: messages_zh_CN ä½¿ç”¨ 1&lt;div th:text=\"#&#123;message.error&#125;\"&gt;Error&lt;/div&gt; å˜é‡è¡¨è¾¾å¼ æœ€åŸºæœ¬çš„è¡¨è¾¾å¼, ç±»ä¼¼äº EL è¡¨è¾¾å¼ã€‚ åˆ org.springframework.ui.Model ä½¿ç”¨ã€‚ å¯ä»¥ä½¿ç”¨ä¼—å¤šå†…ç½®å¯¹è±¡ã€‚ @è®¿é—® Spring å®¹å™¨å†…å¯¹è±¡ 1&lt;span th:text=\"$&#123;author.name&#125;\"&gt; å˜é‡è¡¨è¾¾å¼ - æ‰©å±• 11234567891011121314&lt;ul th:object=\"$&#123;author&#125;\"&gt; &lt;li th:text=\"*&#123;name&#125;\"&gt;&lt;/li&gt; &lt;li th:text=\"*&#123;mail&#125;\"&gt;&lt;/li&gt; &lt;li th:text=\"*&#123;address&#125;\"&gt;&lt;/li&gt;&lt;/ul&gt;&lt;!-- ç­‰ä»·äº &lt;ul&gt; &lt;li th:text=\"$&#123;author.name&#125;\"&gt;&lt;/li&gt; &lt;li th:text=\"$&#123;author.mail&#125;\"&gt;&lt;/li&gt; &lt;li th:text=\"$&#123;author.address&#125;\"&gt;&lt;/li&gt; &lt;/ul&gt;--&gt; å˜é‡è¡¨è¾¾å¼ - æ‰©å±• 21&lt;div th:text=\"$&#123;@demoService.getStr('hocgin')&#125;\"&gt;&lt;/div&gt; é¢„å¤„ç†è¡¨è¾¾å¼ å‰ç½®è®¾ç½®, Controller 12345678@GetMapping(&#123;\"/test.html\"&#125;)public String index(Model model, @PathVariable String page) &#123; model.addAttribute(\"key\", \"error\"); HashMap&lt;String, String&gt; vm = new HashMap&lt;&gt;(); vm.put(\"error\", \"æ¥è‡ª $&#123;&#125; è¡¨è¾¾å¼\"); model.addAttribute(\"obj\", vm); return String.format(\"test.html\", page);&#125; å‰ç½®è®¾ç½®, messages_zh_CN.properties å‚è€ƒå›½é™…åŒ–è¡¨è¾¾å¼ 1message.error=é”™è¯¯ test.html ç¼–å†™ 123456&lt;a th:href=\"@&#123;/img/__$&#123;1+1&#125;__&#125;\"&gt;è¿æ¥&lt;/a&gt;&lt;!-- &lt;a href=\"/img/2\"&gt;è¿æ¥&lt;/a&gt; --&gt;&lt;div th:text=\"#&#123;message.__$&#123;key&#125;__&#125;\"&gt;&lt;/div&gt;&lt;!-- &lt;div&gt;é”™è¯¯&lt;/div&gt; --&gt;&lt;div th:text=\"$&#123;obj.__$&#123;key&#125;__&#125;\"&gt;&lt;/div&gt;&lt;!-- &lt;div&gt;æ¥è‡ª $&#123;&#125; è¡¨è¾¾å¼&lt;/div&gt; --&gt; Fragment è¡¨è¾¾å¼ ~{â€¦} è¡¨è¾¾å¼è¯­æ³•å­—ç¬¦ä¸²æ‹¼æ¥ä½¿ç”¨ + æˆ–è€… |..| 1234&lt;span th:text=\"'1+1=' + $&#123;1+1&#125;\"&gt;&lt;/span&gt;&lt;!-- 1+1=2 --&gt;&lt;span th:text=\"|1+1=$&#123;1+1&#125;|\"&gt;&lt;/span&gt;&lt;!-- 1+1=2 --&gt; è¿ç®—ç¬¦å·ä½¿ç”¨ +, -, *, /, %ã€‚ 12&lt;span th:text=\"-((1+1-1)*2/2)%9\"&gt;&lt;/span&gt;&lt;!-- -1 --&gt; ä¸ æˆ– éä½¿ç”¨ and , or å’Œ ! , notã€‚ 123456789101112&lt;span th:text=\"1==1 and true\"&gt;&lt;/span&gt;&lt;!-- true --&gt;&lt;span th:text=\"true and false\"&gt;&lt;/span&gt;&lt;!-- false --&gt;&lt;span th:text=\"true or false\"&gt;&lt;/span&gt;&lt;!-- true --&gt;&lt;span th:text=\"not true\"&gt;&lt;/span&gt;&lt;!-- false --&gt;&lt;span th:text=\"! false\"&gt;&lt;/span&gt;&lt;!-- true --&gt; å…³ç³»è¡¨è¾¾å¼ä½¿ç”¨ &gt;, &lt;, &gt;=, &lt;=, ==, !=ã€‚æˆ–è€… gt, lt, ge, le, eq, neã€‚ 1234&lt;span th:text=\"((1 &gt; 2 and 2 &lt; 3) or (2 &gt;= 2 and 2 &lt;= 5)) and (1 == 1 and 1 != 2)\"&gt;&lt;/span&gt;&lt;!-- true --&gt;&lt;span th:text=\"((1 gt 2 and 2 lt 3) or (2 ge 2 and 2 le 5)) and (1 eq 1 and 1 ne 2)\"&gt;&lt;/span&gt;&lt;!-- true --&gt; ç®€å•æ¡ä»¶è¡¨è¾¾å¼ä½¿ç”¨:if-then (if) ? (then)if-then-else (if) ? (then) : (else)default (value) ?: (defaultValue) 123456&lt;span th:text=\"true ? 'hocgin'\"&gt;&lt;/span&gt;&lt;!-- hocgin --&gt;&lt;span th:text=\"false ? 'hocgin' : 'hocg.in'\"&gt;&lt;/span&gt;&lt;!-- hocg.in --&gt;&lt;span th:text=\"$&#123;iname&#125; ?: 'hocgin'\"&gt;&lt;/span&gt;&lt;!-- hocgin --&gt; è§£æä¼˜å…ˆçº§ çº§åˆ« æè¿° thå±æ€§ 1 (Fragment inclusion)ä»£ç ç‰‡æ®µå¯¼å…¥ th:insert,th:replace 2 (Fragment iteration)è¿­ä»£ th:each 3 (Conditional evaluation)æ¡ä»¶ th:if,th:unless,th:switch,th:case 4 (Local variable definition)å±€éƒ¨å˜é‡ th:object,th:with 5 (General attribute modification)é€šç”¨å±æ€§ä¿®æ”¹ th:attr,th:attrprepend,th:attrappend 6 (Specific attribute modification)å…·ä½“å±æ€§ä¿®æ”¹ th:value,th:href,th:src â€¦ 7 (Text tag body modification) æ–‡æœ¬èŠ‚ç‚¹ä¿®æ”¹ th:text,th:utext 8 (Fragment specification) ä»£ç æ®µå®šä¹‰ th:fragment 9 (Fragment removal) ä»£ç æ®µåˆ é™¤ th:remove åŸºç¡€å¯¹è±¡#ctx (org.thymeleaf.spring4.context.SpringWebContext)123456789101112131415161718192021/** * org.thymeleaf.context.IContext **/// å½“å‰è¯­è¨€ç¯å¢ƒ(eg. en_US)ã€‚ ç­‰ä»·äº &#123;#locale&#125;$&#123;#ctx.locale&#125;// org.thymeleaf.context.VariablesMap å¯¹è±¡, å†…éƒ¨å­˜å‚¨çš„æ˜¯å¯ç”¨äºå½“å‰ä¸Šä¸‹æ–‡(Context)çš„å¯¹è±¡ã€‚ç­‰ä»·äº &#123;#vars&#125;$&#123;#ctx.variables&#125;/** * org.thymeleaf.context.IWebContext **/$&#123;#ctx.applicationAttributes&#125;// ç­‰ä»·äº &#123;#httpServletRequest&#125;$&#123;#ctx.httpServletRequest&#125;$&#123;#ctx.httpServletResponse&#125;// ç­‰ä»·äº &#123;#httpSession&#125;$&#123;#ctx.httpSession&#125;$&#123;#ctx.requestAttributes&#125;$&#123;#ctx.requestParameters&#125;$&#123;#ctx.servletContext&#125;$&#123;#ctx.sessionAttributes&#125; param (org.apache.catalina.util.ParameterMap)åŒ…å«å½“å‰é¡µé¢çš„è¯·æ±‚çš„å‚æ•°(eg. http://localhost:8080/admin/test.html?name=hocgin)ã€‚ 1234567// è¿”å›å¯¹è±¡$&#123;param.name&#125; // è·å¾—å€¼: hocgin$&#123;param.name[0]&#125; $&#123;param.size()&#125;$&#123;param.isEmpty()&#125;$&#123;param.containsKey('name')&#125; session (org.thymeleaf.context.WebSessionVariablesMap)ä» Session è·å–å†…å®¹ã€‚ 12345// è·å¾—å€¼: hocgin$&#123;session.name&#125;$&#123;session.size()&#125;$&#123;session.isEmpty()&#125;$&#123;session.containsKey('name')&#125; #httpServletRequest (org.apache.catalina.connector.RequestFacade)#themes (org.thymeleaf.spring4.expression.Themes)application#dates (org.thymeleaf.expression.Dates)#calendars (org.thymeleaf.expression.Calendars)#numbers (org.thymeleaf.expression.Numbers)#strings (org.thymeleaf.expression.Strings)#objects (org.thymeleaf.expression.Objects)#bools (org.thymeleaf.expression.Bools)#arrays (org.thymeleaf.expression.Arrays)#lists (org.thymeleaf.expression.Lists)#sets (org.thymeleaf.expression.Sets)#maps (org.thymeleaf.expression.Maps)#aggregates (org.thymeleaf.expression.Aggregates)#messages (org.thymeleaf.expression.Messages)#ids (org.thymeleaf.expression.Ids)ä»£ç ç¤ºä¾‹ 123456789101112131415161718192021222324### `#locale` (&lt;span th:text=\"$&#123;#locale&#125;\"&gt;&lt;/span&gt;)&lt;br&gt;### `#ctx` (&lt;span th:text=\"$&#123;#ctx&#125;\"&gt;&lt;/span&gt;)&lt;br&gt;### `#vars` (&lt;span th:text=\"$&#123;#vars&#125;\"&gt;&lt;/span&gt;)&lt;br&gt;### `param` (&lt;span th:text=\"$&#123;param&#125;\"&gt;&lt;/span&gt;)&lt;br&gt;### `application` (&lt;span th:text=\"$&#123;application&#125;\"&gt;&lt;/span&gt;)&lt;br&gt;### `session` (&lt;span th:text=\"$&#123;session&#125;\"&gt;&lt;/span&gt;)&lt;br&gt;### `#httpSession` (&lt;span th:text=\"$&#123;#httpSession&#125;\"&gt;&lt;/span&gt;)&lt;br&gt;### `#httpServletRequest` (&lt;span th:text=\"$&#123;#httpServletRequest&#125;\"&gt;&lt;/span&gt;)&lt;br&gt;### `#themes` (&lt;span th:text=\"$&#123;#themes&#125;\"&gt;&lt;/span&gt;)&lt;br&gt;### `#dates` (&lt;span th:text=\"$&#123;#dates&#125;\"&gt;&lt;/span&gt;)&lt;br&gt;### `#calendars` (&lt;span th:text=\"$&#123;#calendars&#125;\"&gt;&lt;/span&gt;)&lt;br&gt;### `#numbers` (&lt;span th:text=\"$&#123;#numbers&#125;\"&gt;&lt;/span&gt;)&lt;br&gt;### `#strings` (&lt;span th:text=\"$&#123;#strings&#125;\"&gt;&lt;/span&gt;)&lt;br&gt;### `#objects` (&lt;span th:text=\"$&#123;#objects&#125;\"&gt;&lt;/span&gt;)&lt;br&gt;### `#bools` (&lt;span th:text=\"$&#123;#bools&#125;\"&gt;&lt;/span&gt;)&lt;br&gt;### `#arrays` (&lt;span th:text=\"$&#123;#arrays&#125;\"&gt;&lt;/span&gt;)&lt;br&gt;### `#lists` (&lt;span th:text=\"$&#123;#lists&#125;\"&gt;&lt;/span&gt;)&lt;br&gt;### `#sets` (&lt;span th:text=\"$&#123;#sets&#125;\"&gt;&lt;/span&gt;)&lt;br&gt;### `#maps` (&lt;span th:text=\"$&#123;#maps&#125;\"&gt;&lt;/span&gt;)&lt;br&gt;### `#aggregates` (&lt;span th:text=\"$&#123;#aggregates&#125;\"&gt;&lt;/span&gt;)&lt;br&gt;### `#messages` (&lt;span th:text=\"$&#123;#messages&#125;\"&gt;&lt;/span&gt;)&lt;br&gt;### `#ids` (&lt;span th:text=\"$&#123;#ids&#125;\"&gt;&lt;/span&gt;)&lt;br&gt; é‡ç‚¹ åœ¨ thymeleaf ä¸­ä½¿ç”¨ Spring å®¹å™¨å†…çš„å•ä¾‹. 1&lt;div th:text=\"$&#123;@demoService.getStr('hocgin')&#125;\"&gt;&lt;/div&gt; å¼•å…¥æ¨¡ç‰ˆç‰‡æ®µ XPath è¡¨è¾¾å¼ 1&lt;div th:include=\"mytemplate :: [//div[@class='content']]\"&gt;&lt;/div&gt; CSS è¡¨è¾¾å¼ 1&lt;div th:include=\"mytemplate :: [div.content]\"&gt;&lt;/div&gt; å¼•å…¥å…¬æœ‰ç‰‡æ®µ(JS æˆ– CSS) 123&lt;css th:replace=\"mytemplate :: common-css\"&gt;&lt;/css&gt;&lt;js th:replace=\"@&#123;mytemplate&#125; :: common-css\"&gt;&lt;/js&gt;&lt;!-- å¯ç»“åˆ è·¯å¾„è¡¨è¾¾å¼ --&gt; æ‰©å±•thymeleaf-layout-dialect ä¸€èˆ¬æƒ…å†µç½‘ç«™éƒ½æœ‰ä¸€ä¸ªå¤–éƒ¨æ¡†æ¶, å¦‚ header æˆ–è€… footer, è¿™ä¸ªæ‰©å±•ä¾¿æ˜¯ç”¨äºæŠ½ç¦»é‚£äº›é‡å¤çš„éƒ¨åˆ†çš„ã€‚ layout:decoratoræŒ‡å®šéœ€ä½¿ç”¨çš„çˆ¶çº§æ¨¡ç‰ˆ123456&lt;html lang=\"en\" xmlns:th=\"http://www.thymeleaf.org\" xmlns:layout=\"http://www.ultraq.net.nz/thymeleaf/layout\" layout:decorator=\"/admin/_layouts/default\"&gt; ...&lt;/html&gt; layout:fragment åœ¨çˆ¶æ¨¡ç‰ˆä¸­ä½¿ç”¨å®šä¹‰ä¸€ä¸ªæ ‡è®°ï¼Œåœ¨å­æ¨¡ç‰ˆä¸­ä½¿ç”¨è¦†ç›–åˆ°çˆ¶æ¨¡ç‰ˆä½ç½®ã€‚123456789101112&lt;!-- çˆ¶ --&gt;&lt;div layout:fragment=\"content\"&gt; &lt;p&gt;çˆ¶æ¨¡ç‰ˆå†…å®¹&lt;/p&gt;&lt;/div&gt;&lt;!-- å­ --&gt;&lt;div layout:fragment=\"content\"&gt; &lt;p&gt;å­æ¨¡ç‰ˆå†…å®¹&lt;/p&gt;&lt;/div&gt;&lt;!-- ç”Ÿæˆ --&gt;&lt;div&gt; &lt;p&gt;å­æ¨¡ç‰ˆå†…å®¹&lt;/p&gt;&lt;/div&gt; layout:title-pattern ç”¨ä¸ æ ‡ç­¾, æŒ‡å®š title çš„å€¼ã€‚12&lt;!-- åå° - å­æ ‡é¢˜ --&gt;&lt;title layout:title-pattern=\"$DECORATOR_TITLE - $CONTENT_TITLE\"&gt;åå°&lt;/title&gt; é»‘ç§‘æŠ€ å½“æˆ‘ä»¬æƒ³å–ä¸€ä¸ªå¯¹è±¡é‡Œé¢çš„ä¸€ä¸ªå±æ€§, ä½†è¿™ä¸ªå¯¹è±¡å¯èƒ½ä¸ºç©ºæ—¶(ğŸ˜‹)ã€‚1&lt;td th:text=\"$&#123;user?.address?.city&#125;\"&gt;&lt;/td&gt;","categories":[{"name":"Server","slug":"Server","permalink":"https://hocg.in/categories/Server/"}],"tags":[{"name":"HTML5","slug":"HTML5","permalink":"https://hocg.in/tags/HTML5/"},{"name":"Thymeleaf","slug":"Thymeleaf","permalink":"https://hocg.in/tags/Thymeleaf/"}],"keywords":[{"name":"Server","slug":"Server","permalink":"https://hocg.in/categories/Server/"}]},{"title":"JDK8 æ–°ç‰¹æ€§çš„ä½¿ç”¨","slug":"JDK8 æ–°ç‰¹æ€§çš„ä½¿ç”¨","date":"2017-10-10T02:02:00.000Z","updated":"2019-04-09T02:52:28.033Z","comments":true,"path":"2017/10/10/JDK8 æ–°ç‰¹æ€§çš„ä½¿ç”¨/","link":"","permalink":"https://hocg.in/2017/10/10/JDK8 æ–°ç‰¹æ€§çš„ä½¿ç”¨/","excerpt":"JDK8 æ–°ç‰¹æ€§çš„ä½¿ç”¨","text":"JDK8 æ–°ç‰¹æ€§çš„ä½¿ç”¨ JDK8 æ–°ç‰¹æ€§Lambda è¡¨è¾¾å¼ &amp;&amp; @FunctionalInterfaceJava8 æ”¯æŒäº† Lambda è¡¨è¾¾å¼ï¼Œè¯­æ³•å¦‚ä¸‹:12345678910// æ ‡å‡†å¼(å½¢å‚) -&gt; &#123; ..ä»£ç &#125;// ç®€åŒ–å¼() -&gt; System.out.print(\"ç®€åŒ–å¼\")// æ¡ˆä¾‹ï¼šnew Thread(() -&gt; System.out.print(\"run\")).run(); ç”±äº Lambda è¡¨è¾¾å¼æ˜¯å¯¹å•ä¸ªå‡½æ•°çš„æ¥å£(interface)è¿›è¡Œç®€åŒ–å¤„ç†ï¼Œå³è¦ä¿è¯æ¥å£ä¸èƒ½å­˜åœ¨åç»­æ–°å¢å‡½æ•°å£°æ˜ï¼Œè¿™æ—¶å°±éœ€è¦å¼•å…¥ @FunctionalInterface è¿›è¡Œæ³¨è§£ã€‚ä»¥ä¸‹æ˜¯ Java8 ä¸‹ Runable æ¥å£çš„å£°æ˜ï¼š123456789101112131415@FunctionalInterfacepublic interface Runnable &#123; /** * When an object implementing interface &lt;code&gt;Runnable&lt;/code&gt; is used * to create a thread, starting the thread causes the object's * &lt;code&gt;run&lt;/code&gt; method to be called in that separately executing * thread. * &lt;p&gt; * The general contract of the method &lt;code&gt;run&lt;/code&gt; is that it may * take any action whatsoever. * * @see java.lang.Thread#run() */ public abstract void run();&#125; æ³¨: @FunctionalInterface æ¥å£å†…å…è®¸æœ‰é™æ€å‡½æ•°å®ç°å’Œé»˜è®¤å‡½æ•°å®ç°ã€‚ å³å¦‚ä¸‹123456789101112interface R2 extends Runnable &#123; // é»˜è®¤å‡½æ•°å®ç° default String to() &#123; return getClass().toString(); &#125; // é™æ€å‡½æ•°å®ç° static String in() &#123; return \"in()\"; &#125;&#125; è¿™ä¹Ÿæ˜¯ Java8 interface ä¸­çš„æ–°ç‰¹æ€§ã€‚å…³äº :: å‡½æ•°çš„å¼•ç”¨ (é™æ€å‡½æ•°å¼•ç”¨ã€æ„é€ å‡½æ•°å¼•ç”¨ã€ç‰¹å®šå¯¹è±¡å‡½æ•°å¼•ç”¨) 12345678910111213141516171819202122232425262728293031public class Main &#123; public static void main(String[] args) &#123; // å¯¹æ„é€ å‡½æ•°è¿›è¡Œå¼•ç”¨ï¼Œç®€å•å·¥å‚å®ç° Supplier&lt;Car&gt; aNew = Car::new; for (int i = 0; i &lt; 3; i++) &#123; System.out.println(aNew.get()); &#125; // é™æ€å‡½æ•°å¼•ç”¨ Function&lt;Supplier&lt;Car&gt;, Car&gt; create = Car::create; Car car = create.apply(Car::new); // ç‰¹å®šå¯¹è±¡çš„å‡½æ•°å¼•ç”¨ // è¡¥å……:åœ¨ Car å‡½æ•°ä¸­ä½¿ç”¨ this::to ä¹Ÿæ˜¯ä¸€ç§ Function&lt;String, String&gt; to = car::to; System.out.println(to.apply(\"Shanghai\")); &#125; &#125;class Car &#123; public static Car create(Supplier&lt;Car&gt; carSupplier) &#123; return carSupplier.get(); &#125; public String to(String address) &#123; return String.format(\"to %s \", address); &#125;&#125; æ³¨: Function&lt;å‚æ•°, è¿”å›å€¼&gt; create = Car::create;æµ‹è¯•åå‘ç°åªæ”¯æŒæœ€å¤š2ä¸ªå‚æ•°çš„å‡½æ•°å¯¹åº” Function, BiFunctionã€‚ å³, :: æ˜¯å¯¹å‡½æ•°è¿›è¡Œå¼•ç”¨ã€‚ä½¿ç”¨ @Repeatable æ”¯æŒé‡å¤æ³¨è§£åœ¨ Java8 ä¸­, ä¸å†é™åˆ¶ç›¸åŒçš„æ³¨è§£åœ¨åŒä¸€ä½ç½®åªèƒ½å£°æ˜ä¸€æ¬¡ã€‚ç®€å•ç¤ºä¾‹:123456789101112131415161718192021222324public class RepeatableMain &#123; @Filter(\"filter-1\") @Filter(\"filter-2\") public static void main(String[] args) &#123; for (Method method : RepeatableMain.class.getDeclaredMethods()) &#123; System.out.println(Arrays.asList(method.getAnnotations()).toString()); &#125; &#125; @Target(ElementType.METHOD) @Retention(RetentionPolicy.RUNTIME) @interface Filters &#123; Filter[] value(); &#125; @Target(ElementType.METHOD) @Retention(RetentionPolicy.RUNTIME) @Repeatable(Filters.class) // æŒ‡å®šå¤šæ³¨è§£çš„æ³¨è§£ç±» @interface Filter &#123; String value(); &#125;&#125; æ–°å¢æ³¨è§£æ”¯æŒç±»å‹ ElementType.TYPE_PARAMETERElementType.TYPE_USE12345678910111213141516171819202122232425262728public class Annotations &#123; @Retention(RetentionPolicy.RUNTIME) @Target(&#123;ElementType.TYPE_USE, ElementType.TYPE_PARAMETER&#125;) public @interface Both &#123; &#125; @Retention(RetentionPolicy.RUNTIME) @Target(&#123;ElementType.TYPE_PARAMETER&#125;) public @interface Parameter &#123; &#125; @Retention(RetentionPolicy.RUNTIME) @Target(&#123;ElementType.TYPE_USE&#125;) public @interface Use &#123; &#125; public static class Holder&lt;@Both @Use @Parameter T&gt; extends @Both @Use Object &#123; public void method() throws @Both @Use Exception &#123; &#125; &#125; @SuppressWarnings(\"unused\") public static void main(String[] args) &#123; final Holder&lt;String&gt; holder = new @Both @Use Holder&lt;&gt;(); @Both @Use Collection&lt;@Both @Use String&gt; strings = new ArrayList&lt;&gt;(); &#125;&#125; ElementType.TYPE_PARAMETER è¡¨ç¤ºæ³¨è§£å¯ä»¥åœ¨æ³›å‹å£°æ˜å‰ä½¿ç”¨ã€‚ ElementType.TYPE_USE è¡¨ç¤ºæ³¨è§£å¯ä»¥åœ¨å…¨éƒ¨ç±»å‹ä½ç½®ä½¿ç”¨ã€‚ Java ç¼–è¯‘å™¨æ–°ç‰¹æ€§åœ¨ java8 ä¸­, å¯ä»¥åœ¨ç¼–è¯‘æ—¶ä½¿ç”¨â€“parameterså‚æ•°ä¿å­˜å‡½æ•°å½¢å‚çš„åŸå˜é‡å‘½åï¼Œç„¶ååœ¨ä»£ç ä¸­å¯é€šè¿‡åå°„è·å¾—å‡½æ•°çš„å˜é‡å‘½åã€‚ç¤ºä¾‹å¦‚ä¸‹:123456789public class JVMs &#123; public static void main(String[] args) throws NoSuchMethodException &#123; Method method = JVMs.class.getMethod(\"main\", String[].class); for (final Parameter parameter : method.getParameters()) &#123; System.out.println(String.format(\"%s æ£€æµ‹åˆ°åŸå˜é‡å\", parameter.isNamePresent() ? \"å¯ä»¥\": \"ä¸å¯ä»¥\")); System.out.println(String.format(\"å‚æ•°: %s\", parameter.getName())); &#125; &#125;&#125; Java æ–°å¢ç±»åº“Optional ç”¨äºè§£å†³ NullPointerException123456789101112public class OptionalMain &#123; public static void main(String[] args) &#123; // Null å€¼ Optional&lt;String&gt; optional = Optional.empty(); System.out.println(String.format(\"æ˜¯å¦ä¸ºnull: %s\", !optional.isPresent() ? \"æ˜¯\" : \"å¦\")); System.out.println(optional.orElseGet(() -&gt; \"æ— å€¼å›è°ƒè¯¥å‡½æ•°()\")); // é Null å€¼ optional = Optional.of(\"hocgin\"); System.out.println(optional.map(s -&gt; String.format(\"å€¼: %s\", s)).orElse(\"é»˜è®¤å€¼: 10086\")); &#125;&#125; Stream API å‡½æ•°å¼ç¼–ç¨‹ï¼Œç®€åŒ–äº†ä¹‹å‰ç¹ççš„ä»£ç ç¼–å†™æ–¹å¼ã€‚12345678910111213141516171819202122232425262728public class SteamMain &#123; public static void main(String[] args) &#123; // é›†åˆä¸­ä½¿ç”¨ Stream API Collection&lt;String&gt; collections = Arrays.asList( \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\" ); collections.stream() .filter(i -&gt; Integer.valueOf(i) &gt; 3) .limit(3) .forEach(System.out::println); // æ–‡ä»¶æµä¸­ä½¿ç”¨ Stream API final Path path = new File(\"filePath\").toPath(); try (Stream&lt;String&gt; lines = Files.lines(path, StandardCharsets.UTF_8)) &#123; lines.onClose(() -&gt; System.out.println(\"è¯»å–å®Œæˆ\")).forEach(System.out::println); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125;&#125; æ³¨: æ­¤å¤„ try ä¸­å¯åœ¨æ–‡ä»¶æµè¯»å–å®Œè¿›è¡Œè‡ªåŠ¨å…³é—­æµçš„å¤„ç†ã€‚ Date/Time API åŠ å¼ºäº†å¯¹æ—¶é—´ä¸æ—¥æœŸçš„å¤„ç†ã€‚12345678910111213141516171819202122232425public class DateAndTimeMain &#123; public static void main(String[] args) &#123; // æ—¥æœŸç›¸å…³ LocalDate nowDate = LocalDate.now(); // æ—¶é—´ç›¸å…³ LocalTime nowTime = LocalTime.now(); // æ—¥æœŸ&amp;æ—¶é—´ç›¸å…³ LocalDateTime now = LocalDateTime.now(); // è·å–æŒ‡å®šæ—¶åŒºçš„å½“å‰æ—¶åˆ» Clock clock = Clock.systemUTC(); // è·å–æŸæ—¶åŒºçš„å½“å‰æ—¶é—´ ZonedDateTime zonedDateTime = ZonedDateTime.now(ZoneId.of(\"Asia/Shanghai\")); System.out.println(String.format(\"å½“å‰æ—¥æœŸ: %s\", nowDate)); System.out.println(String.format(\"å½“å‰æ—¶é—´: %s\", nowTime)); System.out.println(String.format(\"å½“å‰æ—¥æœŸ&amp;æ—¶é—´: %s\", now)); System.out.println(String.format(\"å½“å‰æ—¶é—´æˆ³: %s\", clock.millis())); // === System.currentTimeMillis() System.out.println(String.format(\"ä¸Šæµ·æ—¶é—´: %s\", zonedDateTime)); // ç”¨äºè®¡ç®—ä¸¤ä¸ªæ—¥æœŸé—´çš„é—´éš” ZonedDateTime zonedDateTime2 = ZonedDateTime.now(ZoneId.of(\"Asia/Shanghai\")); Duration duration = Duration.between(zonedDateTime, zonedDateTime2); System.out.println(duration.abs().getNano()); &#125;&#125; JavaScriptå¼•æ“(Nashorn) å…è®¸ Java ä¸ JavaScript ç›¸äº’è°ƒç”¨ã€‚ 12345678public class NashornMain &#123; public static void main(String[] args) throws ScriptException &#123; ScriptEngineManager manager = new ScriptEngineManager(); ScriptEngine engine = manager.getEngineByName(\"JavaScript\"); System.out.println(engine.getClass().getName()); System.out.println(\"Result:\" + engine.eval(\"function f() &#123; return 1; &#125;; f() + 1;\")); &#125;&#125; Base64åœ¨ java8 ä¸­, åŠ å…¥äº†ï¼ŒBase64ç¼–ç ã€‚1234567891011121314public class Base64Main &#123; public static void main(String[] args) &#123; final String text = \"Base64 finally in Java 8!\"; final String encoded = Base64 .getEncoder() .encodeToString(text.getBytes(StandardCharsets.UTF_8)); System.out.println(encoded); final String decoded = new String( Base64.getDecoder().decode(encoded), StandardCharsets.UTF_8); System.out.println(decoded); &#125;&#125; å¹¶è¡Œæ•°ç»„åœ¨ java8 ä¸­, å¯¹æ•°ç»„è¿›è¡Œå¹¶è¡Œå¤„ç†, æå¤§æé«˜åœ¨å¤šæ ¸æœºå­ä¸Šçš„å¤„ç†é€Ÿåº¦ã€‚123456789101112131415161718192021222324public class ParallelMain &#123; public static void main(String[] args) &#123; long[] arrayOfLong = new long[20000]; // è¿›è¡Œèµ‹å€¼æ“ä½œ Arrays.parallelSetAll(arrayOfLong, index -&gt; ThreadLocalRandom.current().nextInt(1000000)); Arrays.stream(arrayOfLong).limit(10).forEach( i -&gt; System.out.print(i + \" \")); System.out.println(); // è¿›è¡Œæ•°ç»„æ’åº Arrays.parallelSort(arrayOfLong); Arrays.stream(arrayOfLong).limit(10).forEach( i -&gt; System.out.print(i + \" \")); System.out.println(); // è¿›è¡Œæ•°ç»„æ“ä½œ, ç»“æœ: [a1, a1+a2, a1+a2+a3,..] Arrays.parallelPrefix(arrayOfLong, (x, y) -&gt; x + y); Arrays.stream(arrayOfLong).limit(10).forEach( i -&gt; System.out.print(i + \" \")); System.out.println(); &#125;&#125; å¹¶å‘ çº¿ç¨‹æ± ExecutorService/ScheduledExecutorServiceæ”¯æŒä½¿ç”¨Stream API. æ–°å¢ StampedLock ç”¨äºæ›¿ä»£ ReadWriteLock 1234567StampedLock lock = new StampedLock();lock.writeLock();try &#123; // ä»£ç ..&#125; finally &#123; lock.unlockWrite(stamp);&#125; åŸå­æ“ä½œ(java.concurrent.atomic) ConcurrentMap ç»§æ‰¿è‡ªMapæ¥å£ ForkJoinPool é¢„ç½®å¹¶è¡Œæœºåˆ¶ æ–°å¢çš„ Java å·¥å…· Nashornå¼•æ“å‘½ä»¤è¡Œå·¥å…· jjs 12jjs # å›è½¦(function()&#123;return 1+1&#125;)() ç±»ä¾èµ–åˆ†æå™¨å‘½ä»¤è¡Œå·¥å…· jdeps 123456# .class æ–‡ä»¶jdeps Base64Main.class# .jar æ–‡ä»¶jdeps demo.jar# æ–‡ä»¶å¤¹jdeps jdk8 JVM æ–°ç‰¹æ€§ PermGen è¢«ç§»é™¤ JVMé€‰é¡¹-XX:PermSizeä¸-XX:MaxPermSizeåˆ†åˆ«è¢«-XX:MetaSpaceSizeä¸-XX:MaxMetaspaceSizeæ‰€ä»£æ›¿ ç›¸å…³Java 8","categories":[{"name":"Java","slug":"Java","permalink":"https://hocg.in/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://hocg.in/tags/Java/"},{"name":"è¯­æ³•","slug":"è¯­æ³•","permalink":"https://hocg.in/tags/è¯­æ³•/"}],"keywords":[{"name":"Java","slug":"Java","permalink":"https://hocg.in/categories/Java/"}]},{"title":"Javaçº¿ç¨‹æ± å’Œé”-å°è®°","slug":"Java çº¿ç¨‹æ±  å’Œ é” å°è®°","date":"2017-10-06T17:03:29.000Z","updated":"2018-05-05T13:02:21.829Z","comments":true,"path":"2017/10/07/Java çº¿ç¨‹æ±  å’Œ é” å°è®°/","link":"","permalink":"https://hocg.in/2017/10/07/Java çº¿ç¨‹æ±  å’Œ é” å°è®°/","excerpt":"æå–æƒ³è¦çš„apkï¼Œ ä¾‹å¦‚CM ROMåŒ…ä¸­çš„å«å¤©æ°”çš„æ—¶é’Ÿä¸é”™ï¼","text":"æå–æƒ³è¦çš„apkï¼Œ ä¾‹å¦‚CM ROMåŒ…ä¸­çš„å«å¤©æ°”çš„æ—¶é’Ÿä¸é”™ï¼ å¹¶å‘çº¿ç¨‹æ±  ExecutorService 123456789101112131415161718192021public class ConcurrencyMain &#123; public static void main(String[] args) throws InterruptedException &#123;ExecutorService executor = Executors.newWorkStealingPool(); List&lt;Callable&lt;String&gt;&gt; callables = Arrays.asList( () -&gt; \"task1\", () -&gt; \"task2\", () -&gt; \"task3\"); executor.invokeAll(callables) .stream() .map(future -&gt; &#123; try &#123; return future.get(); &#125; catch (Exception e) &#123; throw new IllegalStateException(e); &#125; &#125;) .forEach(System.out::println); &#125;&#125; ScheduledExecutorService 12345678910111213public class ConcurrencyMain &#123; public static void main(String[] args) throws InterruptedException &#123; ScheduledExecutorService executor = Executors.newScheduledThreadPool(3); ScheduledFuture&lt;?&gt; future = executor.schedule(() -&gt; System.out.println(\"æ‰§è¡Œå»¶è¿Ÿä»»åŠ¡\"), 2, TimeUnit.SECONDS); TimeUnit.MILLISECONDS.sleep(1000); long remainingDelay = future.getDelay(TimeUnit.MILLISECONDS); System.out.println(String.format(\"å‰©ä½™å»¶è¿Ÿæ—¶é—´: %sms\", remainingDelay)); &#125;&#125; åŒºåˆ« ä¸¤è€…çš„åŒºåˆ«æ˜¯ScheduledExecutorServiceæ˜¯å¯å»¶è¿Ÿæ‰§è¡Œã€‚ åŒæ­¥(Synchronized) å¯¹è±¡é”è¯­æ³•: 1234567891011121314151617181920212223242526272829303132333435363738public class SynchronizedMain &#123; public static void main(String[] args) &#123; // ==[æµ‹è¯•ä¸€:åŒä¸€å¯¹è±¡]== // ç»“æœ: 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 Test t1 = new Test(); Thread runnable1 = new Thread(() -&gt; t1.exec()); Thread runnable2 = new Thread(() -&gt; t1.exec()); runnable1.start(); runnable2.start(); // ==[æµ‹è¯•äºŒ:ä¸åŒä¸€å¯¹è±¡]== // ç»“æœ: 0 0 1 2 3 4 5 6 7 1 2 3 4 5 6 7 8 9 8 9 Test t2 = new Test(); Thread runnable3 = new Thread(() -&gt; t1.exec()); Thread runnable4 = new Thread(() -&gt; t2.exec()); runnable3.start(); runnable4.start(); &#125;&#125;// ä»¥ä¸‹ä¸¤ç§æ–¹å¼ç­‰ä»·ï¼Œä»…ä½œç”¨èŒƒå›´ä¸ä¸€æ ·ã€‚class Test &#123; public synchronized void exec() &#123; for (int i = 0; i &lt; 10; i++) &#123; System.out.printf(i + \" \"); &#125; &#125; public void exec() &#123; synchronized (this) &#123; for (int i = 0; i &lt; 10; i++) &#123; System.out.printf(i + \" \"); &#125; &#125; &#125;&#125; ç»“è®º: åŒä¸€å¯¹è±¡è°ƒç”¨è¯¥æ–¹æ³•æ˜¯é”å®šçš„ï¼Œä¸åŒå¯¹è±¡ä¸ä¼šè¿›è¡Œé”å®šã€‚ ç±»é”12345678910111213141516171819202122232425262728293031323334353637383940public class SynchronizedMain &#123; public static void main(String[] args) &#123; // ==[æµ‹è¯•ä¸€:åŒä¸€å¯¹è±¡]== // ç»“æœ: 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 Test t1 = new Test(); Thread runnable1 = new Thread(() -&gt; t1.exec()); Thread runnable2 = new Thread(() -&gt; t1.exec()); runnable1.start(); runnable2.start(); // ==[æµ‹è¯•äºŒ:ä¸åŒä¸€å¯¹è±¡]== // ç»“æœ: 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 Test t2 = new Test(); Thread runnable3 = new Thread(() -&gt; t1.exec()); Thread runnable4 = new Thread(() -&gt; t2.exec()); runnable3.start(); runnable4.start(); &#125;&#125;// ä»¥ä¸‹ä¸¤ç§æ–¹å¼ç­‰ä»·class Test &#123; private static Object lock = new Object(); public void exec() &#123; synchronized (lock) &#123; for (int i = 0; i &lt; 10; i++) &#123; System.out.printf(i + \" \"); &#125; &#125; &#125; public void exec() &#123; synchronized (Test.class) &#123; for (int i = 0; i &lt; 10; i++) &#123; System.out.printf(i + \" \"); &#125; &#125; &#125;&#125; ç»“è®º: è¯¥æ–¹å¼é”çš„ä½œç”¨èŒƒå›´æ˜¯æ•´ä¸ªç±»ã€‚ æŒ‡å®šé”è¯­æ³•: 1234567891011121314151617181920212223242526272829303132public class SynchronizedMain &#123; private static Object lock = new Object(); public static void main(String[] args) &#123; // ==[æµ‹è¯•ä¸€:åŒä¸€å¯¹è±¡]== // ç»“æœ: 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 Test t1 = new Test(); Thread runnable1 = new Thread(() -&gt; t1.exec(lock)); Thread runnable2 = new Thread(() -&gt; t1.exec(lock)); runnable1.start(); runnable2.start(); // ==[æµ‹è¯•äºŒ:ä¸åŒä¸€å¯¹è±¡]== // ç»“æœ: 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 Test t2 = new Test(); Thread runnable3 = new Thread(() -&gt; t1.exec(lock)); Thread runnable4 = new Thread(() -&gt; t2.exec(lock)); runnable3.start(); runnable4.start(); &#125;&#125;class Test &#123; public void exec(Object lock) &#123; synchronized (lock) &#123; for (int i = 0; i &lt; 10; i++) &#123; System.out.printf(i + \" \"); &#125; &#125; &#125;&#125; ç»“è®º: è¯¥æ–¹å¼å–å†³äºä¼ å…¥çš„é”ã€‚å½“å¯¹è±¡å±æ€§å‘ç”Ÿæ”¹å˜æ—¶ï¼Œé”å°±å¤±å»äº†ä½œç”¨ã€‚ å¯¹äº Java8 ä¸­ï¼ŒReentrantLock å¯å®ç°é”çš„ä½œç”¨ã€‚","categories":[{"name":"Java","slug":"Java","permalink":"https://hocg.in/categories/Java/"}],"tags":[{"name":"Tips","slug":"Tips","permalink":"https://hocg.in/tags/Tips/"},{"name":"Java","slug":"Java","permalink":"https://hocg.in/tags/Java/"}],"keywords":[{"name":"Java","slug":"Java","permalink":"https://hocg.in/categories/Java/"}]},{"title":"è§£å†³ WebView ç‚¹å‡»æ—¶ç½‘é¡µä¸æ–­é—ªè€€","slug":"TextView æ»šåŠ¨é—®é¢˜","date":"2017-09-28T13:47:21.000Z","updated":"2017-09-28T15:05:10.868Z","comments":true,"path":"2017/09/28/TextView æ»šåŠ¨é—®é¢˜/","link":"","permalink":"https://hocg.in/2017/09/28/TextView æ»šåŠ¨é—®é¢˜/","excerpt":"è§£å†³é«˜ç‰ˆæœ¬ WebView ç‚¹å‡»æ—¶ç½‘é¡µä¸æ–­é—ªè€€çš„é—®é¢˜ ğŸ¤—","text":"è§£å†³é«˜ç‰ˆæœ¬ WebView ç‚¹å‡»æ—¶ç½‘é¡µä¸æ–­é—ªè€€çš„é—®é¢˜ ğŸ¤— è®¾ç½® TextView è‡ªåŠ¨æ°´å¹³æ»šåŠ¨1234567891011121314&lt;TextView android:id=\"@+id/tx\" android:layout_width=\"40dp\" android:layout_height=\"wrap_content\" android:background=\"#fdf\" android:text=\"1234567890123456789012345678901234567890\" android:focusable=\"true\" android:focusableInTouchMode=\"true\" android:singleLine=\"true\" android:scrollHorizontally=\"true\" android:ellipsize=\"marquee\" android:marqueeRepeatLimit =\"marquee_forever\" /&gt; é«˜ç‰ˆæœ¬æµ‹è¯•ä¸­android:singleLine=&quot;true&quot;è™½ç„¶è¿‡æœŸäº†ï¼Œä½†ä»ä¸èƒ½ä½¿ç”¨android:maxLines=&quot;1&quot;è¿›è¡Œæ›¿æ¢ï¼Œå¦‚æœå®åœ¨å¼ºè¿«ç—‡æ‚£è€…å¯ä»¥ä½¿ç”¨tx.setSingleLine(true);æ›¿æ¢ã€‚","categories":[{"name":"Android","slug":"Android","permalink":"https://hocg.in/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"https://hocg.in/tags/Android/"},{"name":"é—®é¢˜","slug":"é—®é¢˜","permalink":"https://hocg.in/tags/é—®é¢˜/"}],"keywords":[{"name":"Android","slug":"Android","permalink":"https://hocg.in/categories/Android/"}]},{"title":"è§£å†³ WebView ç‚¹å‡»æ—¶ç½‘é¡µä¸æ–­é—ªè€€","slug":"è§£å†³WebViewç‚¹å‡»æ—¶ç½‘é¡µä¸æ–­é—ªè€€","date":"2017-09-28T13:47:21.000Z","updated":"2017-09-28T14:14:54.743Z","comments":true,"path":"2017/09/28/è§£å†³WebViewç‚¹å‡»æ—¶ç½‘é¡µä¸æ–­é—ªè€€/","link":"","permalink":"https://hocg.in/2017/09/28/è§£å†³WebViewç‚¹å‡»æ—¶ç½‘é¡µä¸æ–­é—ªè€€/","excerpt":"è§£å†³é«˜ç‰ˆæœ¬ WebView ç‚¹å‡»æ—¶ç½‘é¡µä¸æ–­é—ªè€€çš„é—®é¢˜ ğŸ¤—","text":"è§£å†³é«˜ç‰ˆæœ¬ WebView ç‚¹å‡»æ—¶ç½‘é¡µä¸æ–­é—ªè€€çš„é—®é¢˜ ğŸ¤— åŸå› ç½‘é¡µæ¸²æŸ“å¼€å¯äº†ç¡¬ä»¶åŠ é€Ÿï¼Œå¦‚æœä½ ä¹Ÿå‡ºç°äº†è¯¥é—®é¢˜ï¼Œå¯ä»¥å°è¯•å…³é—­ç¡¬ä»¶åŠ é€Ÿã€‚ æ–¹æ¡ˆæ–¹æ¡ˆä¸€: åœ¨xmlä¸­ä½¿ç”¨android:layerType=&quot;software&quot;è¿›è¡Œå…³é—­ã€‚æ¨èæ–¹æ¡ˆäºŒ: é€šè¿‡ java ä»£ç webView.setLayerType(View.LAYER_TYPE_SOFTWARE, null);è¿›è¡Œå…³é—­ã€‚ å‚è€ƒBroswerKitè¿›è¡Œæ ‡è®°çš„è¿™æ®µä»£ç è§£å†³äº†æˆ‘çš„é—ªè€€é—®é¢˜","categories":[{"name":"Android","slug":"Android","permalink":"https://hocg.in/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"https://hocg.in/tags/Android/"},{"name":"é—®é¢˜","slug":"é—®é¢˜","permalink":"https://hocg.in/tags/é—®é¢˜/"}],"keywords":[{"name":"Android","slug":"Android","permalink":"https://hocg.in/categories/Android/"}]},{"title":"è§£å†³ ProgressBar ä¸Šä¸‹å‡ºç°ç©ºç™½ç°è±¡","slug":"è§£å†³ProgressBaré¡¶éƒ¨å‡ºç°ç©ºç™½ç°è±¡","date":"2017-09-27T02:27:22.000Z","updated":"2018-10-11T13:39:15.371Z","comments":true,"path":"2017/09/27/è§£å†³ProgressBaré¡¶éƒ¨å‡ºç°ç©ºç™½ç°è±¡/","link":"","permalink":"https://hocg.in/2017/09/27/è§£å†³ProgressBaré¡¶éƒ¨å‡ºç°ç©ºç™½ç°è±¡/","excerpt":"è§£å†³ ProgressBar ä¸Šä¸‹å‡ºç°ç©ºç™½ç°è±¡ ğŸ¤ ","text":"è§£å†³ ProgressBar ä¸Šä¸‹å‡ºç°ç©ºç™½ç°è±¡ ğŸ¤  å‡ºç°é—®é¢˜ä¸€èˆ¬æƒ…å†µæˆ‘ä»¬ä½¿ç”¨å¦‚ä¸‹ä»£ç æ¥åˆ›å»ºProgressBar12345678&lt;ProgressBar android:id=\"@+id/progressBar\" style=\"?android:attr/progressBarStyleHorizontal\" android:background=\"#fff\" android:max=\"100\" android:indeterminate=\"true\" android:layout_width=\"match_parent\" android:layout_height=\"wrap_content\"/&gt; é‚£ä¹ˆå°†ä¼šå‡ºç°å¦‚ä¸‹æƒ…å†µ: è§£å†³æ–¹æ¡ˆé€šè¿‡å˜æ›´android:layout_marginBottomå’Œandroid:layout_marginTopåœ¨ç»“åˆandroid:backgroundè®¾ç½®ä¸ºé€æ˜æ¥å¤„ç†è¿™ä¸ªé—®é¢˜:12345678910&lt;ProgressBar android:id=\"@+id/progressBar\" style=\"?android:attr/progressBarStyleHorizontal\" android:layout_marginBottom=\"-7dp\" android:layout_marginTop=\"-7dp\" android:background=\"#00ffffff\" android:max=\"100\" android:indeterminate=\"true\" android:layout_width=\"match_parent\" android:layout_height=\"wrap_content\"/&gt; ä»¥ä¸‹æ˜¯å¤„ç†åçš„ç»“æœ","categories":[{"name":"Android","slug":"Android","permalink":"https://hocg.in/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"https://hocg.in/tags/Android/"},{"name":"é—®é¢˜","slug":"é—®é¢˜","permalink":"https://hocg.in/tags/é—®é¢˜/"}],"keywords":[{"name":"Android","slug":"Android","permalink":"https://hocg.in/categories/Android/"}]},{"title":"OpenWrt å…¥é—¨ç¯‡","slug":"OpenWrt-å…¥é—¨ç¯‡","date":"2017-09-18T06:32:26.000Z","updated":"2018-10-11T13:39:15.364Z","comments":true,"path":"2017/09/18/OpenWrt-å…¥é—¨ç¯‡/","link":"","permalink":"https://hocg.in/2017/09/18/OpenWrt-å…¥é—¨ç¯‡/","excerpt":"ä»Šå¤©åˆšå¥½é‡åˆ· OpenWrt å›ºä»¶ï¼Œæ•´ç†æ•´ç†","text":"ä»Šå¤©åˆšå¥½é‡åˆ· OpenWrt å›ºä»¶ï¼Œæ•´ç†æ•´ç† ä»‹ç»ä»€ä¹ˆæ˜¯ OpenWrt? å…³äºæ”¯æŒ OpenWrt çš„è·¯ç”±å™¨å¯ä»¥å» æ”¯æŒ OpenWrt çš„è·¯ç”±å™¨åˆ—è¡¨ æŸ¥çœ‹æ”¯æŒçš„è·¯ç”±å™¨, äº†è§£å…¶ CPUå‹å·(æ—¢èŠ¯ç‰‡å‹å·) RAMå®¹é‡ Flashå®¹é‡ å…³äº OpenWrt å›ºä»¶çš„ä¸‹è½½OpenWrt å®˜æ–¹ä¸‹è½½å›ºä»¶åœ°å€å…³äºä¸‹è½½åœ°å€æ ¼å¼: å…³äºå›ºä»¶ç±»å‹ åç¼€ä¸ºfactoryæ˜¯ç”¨äºä»åŸå‚å›ºä»¶åˆ·ä¸º OpenWrtã€‚ åç¼€ä¸ºsysupgradeæ˜¯ç”¨äºä» OpenWrt æ›´æ–° OpenWrtã€‚ åŸå‚åˆ· OpenWrt å›ºä»¶ å¾…è¡¥å…… ç½‘é¡µç•Œé¢ OpenWrt å¤‡ä»½ &amp; å‡çº§å›ºä»¶ OpenWrt å®‰å…¨æ¨¡å¼ å½“æˆ‘ä»¬æ— æ³•è¿›å…¥ç½‘é¡µç•Œé¢ï¼Œå¯ä»¥ä½¿ç”¨å®‰å…¨æ¨¡å¼ç®¡ç†æ¢å¤å›ºä»¶å¿…é¡»ä½¿ç”¨æœ‰çº¿ç”µç¼†è¿›è¡Œè¿æ¥ã€‚ç¯å¢ƒ: Linux or macOS è¿›å…¥OpenWrtå®‰å…¨æ¨¡å¼çš„æ–¹æ³•ï¼š ä½¿ç”¨ç½‘çº¿è¿æ¥ç”µè„‘å’Œè·¯ç”±å™¨ è®¾ç½®ç”µè„‘ç½‘å¡IP åœ°å€:192.168.1.x(xä¸º2è‡³255)å­ç½‘æ©ç :255.255.255.0 æ‰“å¼€ç»ˆç«¯è¿è¡Œå‘½ä»¤ 12# æ³¨, æ­¤å¤„ eth0 ä¸ºç½‘å¡. å¯ä½¿ç”¨ ifconfig è¿›è¡ŒæŸ¥çœ‹sudo tcpdump -Ani eth0 port 4919 and udp æ–­ç”µé‡å¯ æ‰“å¼€ç»ˆç«¯è¿è¡Œå‘½ä»¤ 1telnet 192.168.1.1 æ‰§è¡ŒæŒ‡ä»¤, ä¾‹å¦‚ 1234# é‡ç½®ç³»ç»Ÿfirstboot# é‡ç½®å¯†ç passwd é‡å¯è·¯ç”±å™¨ ä¸æ­» U-Boot å¾…è¡¥å…… ç½‘é¡µç•Œé¢ OpenWrt å®½å¸¦æ‹¨å·è®¾ç½® è¿›å…¥æ¥å£è®¾ç½®ç•Œé¢ è¿›è¡Œ WAN å£ç¼–è¾‘ å¡«å†™å®½å¸¦è´¦å· &amp; å¯†ç  æ­¤æ—¶ç”µè„‘è¿æ¥ LAN å£çš„è¯ï¼Œå³å¯è¿›è¡Œä¸Šç½‘ã€‚ WiFi è®¾ç½® è¿›å…¥ WiFi è®¾ç½®ç•Œé¢ï¼Œæ­¤å¤„ä¸ºåŒç½‘å¡ å¼€å¯WiFi è®¾ç½®WiFi åŸºç¡€çŸ¥è¯†ä»€ä¹ˆæ˜¯WANå£ï¼Ÿä»€ä¹ˆæ˜¯LANå£ï¼Ÿ è·¯ç”±å™¨é€šå¸¸æœ‰å¤šä¸ªLANå£ï¼Œä¸€ä¸ªWANå£ WAN å¹¿åŸŸç½‘ï¼ˆWANã€å…¬ç½‘ã€å¤–ç½‘ï¼‰ è®¾ç½®æ‹¨å·ä¸Šç½‘è¿æ¥äº’è”ç½‘ LAN å±€åŸŸç½‘ï¼ˆLANã€ç§ç½‘ã€å†…ç½‘) è¿æ¥æœ¬åœ°è®¡ç®—æœº PPPoE ä»¥å¤ªç½‘ä¸Šçš„ç‚¹å¯¹ç‚¹åè®®ä¸­çš„ä¸€ç§, å®½å¸¦æ¥å…¥æ–¹å¼ADSL å°±ä½¿ç”¨äº†PPPoEåè®® å…³äº WiFi 2.4G å’Œ 5G802.11n/b/g ä¸»è¦å·¥ä½œé¢‘æ®µä¸º2.4GHz802.11a/ac ä¸»è¦å·¥ä½œé¢‘æ®µä¸º5GHz","categories":[{"name":"OpenWrt","slug":"OpenWrt","permalink":"https://hocg.in/categories/OpenWrt/"}],"tags":[{"name":"Tips","slug":"Tips","permalink":"https://hocg.in/tags/Tips/"},{"name":"OpenWrt","slug":"OpenWrt","permalink":"https://hocg.in/tags/OpenWrt/"}],"keywords":[{"name":"OpenWrt","slug":"OpenWrt","permalink":"https://hocg.in/categories/OpenWrt/"}]},{"title":"åœ¨ OpenWrt éƒ¨ç½² Shadowsocks","slug":"OpenWrt-Shadowsocks","date":"2017-09-18T06:32:26.000Z","updated":"2017-09-19T01:10:23.000Z","comments":true,"path":"2017/09/18/OpenWrt-Shadowsocks/","link":"","permalink":"https://hocg.in/2017/09/18/OpenWrt-Shadowsocks/","excerpt":"","text":"å‰è¨€\bå…³äº OpenWrt è¯·çœ‹ \bOpenWrt å…¥é—¨ç¯‡å…³äº Shadowsocks è¯·çœ‹ ä»€ä¹ˆæ˜¯ Shadowsocks\bå·²æœ‰ Shadowsocks è´¦å·, åç»­å¯èƒ½ä¼šè®°å½•ã€‚é‡è¦: æœ¬æ–‡å‰æä¸ºè¯»è€…\bå·²\bè§‚çœ‹è¿‡ä»¥ä¸Š2ç¯‡æ–‡ç« ï¼Œå¦‚é˜…è¯»å¼•èµ·ä»»ä½•ä¸é€‚è¯·ç«‹å³åœæ­¢ã€‚ å…³äº Shadowsocks-libev æ¨¡å— Shadowsocks-libev å®˜ç½‘Shadowsocks-libev ä¸‹è½½åœ°å€ (æ¨èä¸‹è½½éspecç‰ˆæœ¬) ss-serverï¼šæœåŠ¡å™¨ç«¯ï¼Œéƒ¨ç½²äºæœåŠ¡å™¨ï¼Œæä¾› shadowsocks æœåŠ¡ã€‚ss-localï¼šå®¢æˆ·ç«¯ï¼Œæä¾› SOCKS ä»£ç†ss-redirï¼šå®¢æˆ·ç«¯ï¼Œæä¾›é€æ˜ä»£ç†, ä» v2.2.0 å¼€å§‹æ”¯æŒ UDPss-tunnel: å®¢æˆ·ç«¯ï¼Œæä¾›ç«¯å£è½¬å‘, å¯ç”¨äº DNS æŸ¥è¯¢ Note: ä¸‹è½½çš„æ—¶å€™è¯·æ ¹æ® CPU ç±»å‹, æŸ¥çœ‹æ–¹å¼è¯·å‚ç…§ å®‰è£… Shadowsocks-libev å°†ä¸‹è½½çš„Shadowsocks-libevç§»è‡³è·¯ç”±å™¨/tmpç›®å½• 1scp shadowsocks-libev-polarssl_2.4.8-2_ar71xx.ipk root@192.168.1.1:/tmp å®‰è£…ä¾èµ– 12opkg updateopkg install iptables-mod-nat-extra ipset libopenssl å®‰è£…Shadowsocks-libev 1opkg install /tmp/shadowsocks-libev-polarssl_2.4.8-2_ar71xx.ipk é…ç½® shadowsocks ä¿®æ”¹/etc/shadowsocks.jsonä¸ºå®é™…å‚æ•°ã€‚æ ¼å¼å¦‚ä¸‹ 12345678&#123; \"server\": \"127.0.0.1\", \"server_port\": 443, \"local_port\": 7654, \"password\": \"password\", \"timeout\": 60, \"method\": \"rc4-md5\"&#125; æ­¤å¤„, â€œlocal_portâ€: 7654 ä¸ºé‡ç‚¹ã€‚ä¸ç†è§£çš„, è¯·ä¸è¦è¿›è¡Œä¿®æ”¹æ­¤é¡¹ï¼Œåç»­ä¼šè§£é‡Šã€‚ æ³¨: /etc/shadowsocks.json ä¸ºé…ç½®æ–‡ä»¶, å­˜å‚¨ shadowsocks çš„è´¦å·ã€ å¯†ç åŠè®¾ç½®ã€‚ æŸ¥çœ‹/etc/init.d/shadowsocksã€‚å†…å®¹å¦‚ä¸‹ 123456789101112131415161718192021#!/bin/sh /etc/rc.commonSTART=95SERVICE_USE_PID=1SERVICE_WRITE_PID=1SERVICE_DAEMONIZE=1CONFIG=/etc/shadowsocks.jsonstart() &#123; service_start /usr/bin/ss-local -c $CONFIG -b 0.0.0.0 #service_start /usr/bin/ss-redir -c $CONFIG -b 0.0.0.0 #service_start /usr/bin/ss-tunnel -c $CONFIG -b 0.0.0.0 -l 5353 -L 8.8.8.8:53 -u&#125;stop() &#123; service_stop /usr/bin/ss-local #service_stop /usr/bin/ss-redir #service_stop /usr/bin/ss-tunnel&#125; æ³¨: /etc/init.d/shadowsocks ä¸ºè¿è¡Œæ–‡ä»¶, shadowsocks çš„å¯åŠ¨ã€åœæ­¢ã€é‡å¯ã€‚ è¿è¡Œæ£€æŸ¥\bé…ç½®æ˜¯å¦æ­£ç¡® 1/etc/init.d/shadowsocks restart ä½¿ç”¨ä»£ç†è¿›è¡Œ\bæ£€æŸ¥, Chrome æµè§ˆå™¨ä¸‹è½½ ExtensionProxy SwitchyOmegaï¼Œ\bå¢™å†…åœ°å€åç»­è¡¥ä¸Š..ã€‚å¯¹æ’ä»¶è¿›è¡Œå¦‚ä¸‹é…ç½®: \båœ¨ Chrome æµè§ˆå™¨ä½¿ç”¨ ExtensionProxy SwitchyOmega åˆ‡æ¢åˆ°è¯¥åè®®å¹¶è®¿é—® YouTuBeï¼Œ\béªŒè¯å…¶é…ç½®çš„æ­£ç¡®æ€§ã€‚ å…³é—­ shadowsocks 1/etc/init.d/shadowsocks stop è‡ªåŠ¨åŒ–å®‰è£… dnsmasq &amp; ipset æŸ¥çœ‹æ˜¯å¦æ”¯æŒ ipset 123456789opkg updateopkg list-installed dnsmasq -v# å¦‚æœä¸æ”¯æŒï¼Œå¸è½½æ‰å®‰è£…fullç‰ˆopkg remove dnsmasqopkg install dnsmasq-fullopkg install ipset iptables-mod-nat-extraopkg install /tmp/pdnsd_1.2.9a-par-a8e46ccba7b0fa2230d6c42ab6dcd92926f6c21d_ar71xx.ipk é™„ä»¶: pdnsd_1.2.9a-par-a8e46ccba7b0fa2230d6c42ab6dcd92926f6c21d_ar71xx.ipk ä¸‹è½½ é…ç½® dnsmasq å’Œ ipset 12vim /etc/dnsmasq.confmkdir /etc/dnsmasq.d åœ¨æœ«å°¾åŠ å…¥ 123conf-dir=/etc/dnsmasq.dcache-size=1500 #ä¿®æ”¹dnsmasqç¼“å­˜å¤§å°ï¼Œé»˜è®¤ä¸º150ã€‚min-cache-ttl=720 #ä¿®æ”¹DNSç¼“å­˜æœ€å°æœ‰æ•ˆæœŸï¼ˆç§’ï¼‰ã€‚ä»…é€‚ç”¨äºaa65535çš„dnsmasq-fullç‰ˆæœ¬ã€‚ ä¸‹è½½å›½å†…é‡è¦ç½‘ç«™åå•ï¼Œç”¨å›½å†…åŸŸåæœåŠ¡å™¨æŸ¥è¯¢iPåœ°å€ 12345cd /etc/dnsmasq.dopkg install wgetwget -4 --no-check-certificate -O /etc/dnsmasq.d/accelerated-domains.china.conf https://github.com/felixonmars/dnsmasq-china-list/raw/master/accelerated-domains.china.confwget -4 --no-check-certificate -O /etc/dnsmasq.d/bogus-nxdomain.china.conf https://github.com/felixonmars/dnsmasq-china-list/raw/master/bogus-nxdomain.china.confecho \"server=/#/127.0.0.1#3210\" &gt; gfwlist.conf ä¿®æ”¹/etc/init.d/shadowsockså¯åŠ¨æ–‡ä»¶, å†…å®¹\bå¦‚ä¸‹ 1234567891011121314151617181920212223242526272829#!/bin/sh /etc/rc.commonSTART=95SERVICE_USE_PID=1SERVICE_WRITE_PID=1SERVICE_DAEMONIZE=1CONFIG=/etc/shadowsocks.jsonstart() &#123; sed -i 's/114.114.114.114/127.0.0.1#3210/' /etc/dnsmasq.d/gfwlist.conf /etc/init.d/dnsmasq restart service_start /usr/bin/ss-redir -b 0.0.0.0 -c $CONFIG -f /var/run/shadowsocks.pid -u service_start /usr/bin/ss-tunnel -b 0.0.0.0 -c $CONFIG -l 3210 -L 8.8.8.8:53 -u /usr/bin/shadowsocks-firewall&#125;stop() &#123; sed -i 's/127.0.0.1#3210/114.114.114.114/' /etc/dnsmasq.d/gfwlist.conf /etc/init.d/dnsmasq restart service_stop /usr/bin/ss-redir service_stop /usr/bin/ss-tunnel killall ss-redir killall ss-tunnel /etc/init.d/firewall restart&#125; é…ç½® iptables é˜²ç«å¢™è½¬å‘IPå’Œç«¯å£åˆ›å»ºæ‰§è¡Œæ–‡ä»¶ /usr/bin/shadowsocks-firewall 12touch /usr/bin/shadowsocks-firewallchmod +x /usr/bin/shadowsocks-firewall /usr/bin/shadowsocks-firewall å…¶å†…å®¹å¦‚ä¸‹ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889#!/bin/sh#create a new chain named SHADOWSOCKSiptables -t nat -N SHADOWSOCKSiptables -t nat -N SHADOWSOCKS_WHITELIST# Ignore your shadowsocks server's addresses# It's very IMPORTANT, just be careful.iptables -t nat -A SHADOWSOCKS -d æ­¤å¤„ä¸ºæœåŠ¡å™¨IP -j RETURN# Ignore LANs IP addressiptables -t nat -A SHADOWSOCKS -d 0.0.0.0/8 -j RETURNiptables -t nat -A SHADOWSOCKS -d 10.0.0.0/8 -j RETURNiptables -t nat -A SHADOWSOCKS -d 127.0.0.0/8 -j RETURNiptables -t nat -A SHADOWSOCKS -d 169.254.0.0/16 -j RETURNiptables -t nat -A SHADOWSOCKS -d 172.16.0.0/12 -j RETURNiptables -t nat -A SHADOWSOCKS -d 192.168.0.0/16 -j RETURNiptables -t nat -A SHADOWSOCKS -d 224.0.0.0/4 -j RETURNiptables -t nat -A SHADOWSOCKS -d 240.0.0.0/4 -j RETURN# Check whitelistiptables -t nat -A SHADOWSOCKS -j SHADOWSOCKS_WHITELISTiptables -t nat -A SHADOWSOCKS -m mark --mark 1 -j RETURN#for hulu.comiptables -t nat -A SHADOWSOCKS -p tcp --dport 1935 -j REDIRECT --to-ports 7654iptables -t nat -A SHADOWSOCKS -p udp --dport 1935 -j REDIRECT --to-ports 7654# for Chrome browser and youtube.comiptables -t nat -A SHADOWSOCKS -p udp --dport 443 -j REDIRECT --to-ports 7654# Anything else should be redirected to shadowsocks's local portiptables -t nat -A SHADOWSOCKS -p tcp -j REDIRECT --to-ports 7654# Apply the rulesiptables -t nat -A PREROUTING -p tcp -j SHADOWSOCKS# Ignore China IP address# for white_ip in `cat /etc/chinadns_chnroute.txt`;# do# iptables -t nat -A SHADOWSOCKS_WHITELIST -d \"$&#123;white_ip&#125;\" -j MARK --set-mark 1# done# Ignore Asia IP addressiptables -t nat -A SHADOWSOCKS_WHITELIST -d 1.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 14.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 27.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 36.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 39.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 42.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 49.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 58.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 59.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 60.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 61.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 101.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 103.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 106.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 110.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 111.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 112.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 113.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 114.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 115.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 116.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 117.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 118.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 119.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 120.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 121.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 122.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 123.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 124.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 125.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 126.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 169.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 175.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 180.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 182.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 183.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 202.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 203.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 210.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 211.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 218.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 219.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 220.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 221.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 222.0.0.0/8 -j MARK --set-mark 1iptables -t nat -A SHADOWSOCKS_WHITELIST -d 223.0.0.0/8 -j MARK --set-mark 1 é‡è¦: æ­¤å¤„ä¸ºæœåŠ¡å™¨IPæ›´æ¢ä¸º\bå®é™…IPã€‚ Ignore Asia IP addressä¸ºäºšæ´²IPåœ°å€æ®µã€‚å¦‚æœ\bè·¯ç”±å™¨å†…å­˜å¤Ÿå¤§çš„è¯ï¼Œå¯å¼€å¯Ignore China IP addressã€‚chinadns_chnroute.txt æ–‡ä»¶ä¸‹è½½ --to-ports 7654å³/etc/shadowsocks.json\bä¸­çš„ â€œlocal_portâ€: 7654shadowsocks æ§åˆ¶1234/etc/init.d/shadowsocks stop/etc/init.d/shadowsocks start/etc/init.d/shadowsocks enable/etc/init.d/shadowsocks disable","categories":[{"name":"OpenWrt","slug":"OpenWrt","permalink":"https://hocg.in/categories/OpenWrt/"}],"tags":[{"name":"Tips","slug":"Tips","permalink":"https://hocg.in/tags/Tips/"},{"name":"OpenWrt","slug":"OpenWrt","permalink":"https://hocg.in/tags/OpenWrt/"}],"keywords":[{"name":"OpenWrt","slug":"OpenWrt","permalink":"https://hocg.in/categories/OpenWrt/"}]},{"title":"å…³äº Android Studio å¯åŠ¨ Android æ¨¡æ‹Ÿå™¨å¤±è´¥é—®é¢˜","slug":"å…³äºAndroid Studio å¯åŠ¨Androidæ¨¡æ‹Ÿå™¨å¤±è´¥é—®é¢˜","date":"2017-07-02T13:07:00.000Z","updated":"2017-07-02T13:07:55.000Z","comments":true,"path":"2017/07/02/å…³äºAndroid Studio å¯åŠ¨Androidæ¨¡æ‹Ÿå™¨å¤±è´¥é—®é¢˜/","link":"","permalink":"https://hocg.in/2017/07/02/å…³äºAndroid Studio å¯åŠ¨Androidæ¨¡æ‹Ÿå™¨å¤±è´¥é—®é¢˜/","excerpt":"èµ·å› Android Studio å¯åŠ¨è™šæ‹Ÿæœºä¸€ç›´é—ªé€€ï¼Œä¸æ˜¾ç¤ºä»»ä½•æŠ¥é”™ä¿¡æ¯","text":"èµ·å› Android Studio å¯åŠ¨è™šæ‹Ÿæœºä¸€ç›´é—ªé€€ï¼Œä¸æ˜¾ç¤ºä»»ä½•æŠ¥é”™ä¿¡æ¯ æ’æŸ¥é—®é¢˜ å°è¯•ç”¨å‘½ä»¤å¯åŠ¨æ¨¡æ‹Ÿå™¨, æ–¹ä¾¿æŸ¥çœ‹å…¶é”™è¯¯æ—¥å¿—1234567891011121314# æŸ¥çœ‹ä½ åˆ›å»ºçš„è®¾å¤‡emulator -list-avds# å¯åŠ¨å‘½ä»¤emulator -netdelay none -netspeed full -avd New_Device_API_2# ä»¥ä¸‹ä¸ºæŠ¥é”™æ—¥å¿—Hax is enabledHax ram_size 0x60000000HAX is working and emulator runs in fast virt mode.Failed to sync vcpu regFailed to sync vcpu regFailed to sync vcpu regFailed to sync vcpu regFailed to sync vcpu regFailed to sync HAX vcpu contextInternal error: Initial hax sync failed vcpuæ— æ³•è¿›è¡ŒåŒæ­¥?? What??å°è¯•è¿›è¡Œäº† Googleï¼ŒHow do I fix â€œFailed to sync vcpu regâ€ error? å¥½å§, docker ä¹‹ç±»çš„è™šæ‹Ÿæœºå¼•èµ·äº†å†²çª è§£å†³åŠæ³•å…³æ‰ç”¨ä¸ç€çš„è™šæ‹Ÿæœºå¦‚ docker ..","categories":[{"name":"Android","slug":"Android","permalink":"https://hocg.in/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"https://hocg.in/tags/Android/"},{"name":"Mac","slug":"Mac","permalink":"https://hocg.in/tags/Mac/"}],"keywords":[{"name":"Android","slug":"Android","permalink":"https://hocg.in/categories/Android/"}]},{"title":"Google ä½¿ç”¨æŠ€å·§","slug":"Google-ä½¿ç”¨æŠ€å·§","date":"2017-06-18T03:24:06.000Z","updated":"2018-10-11T13:39:15.412Z","comments":true,"path":"2017/06/18/Google-ä½¿ç”¨æŠ€å·§/","link":"","permalink":"https://hocg.in/2017/06/18/Google-ä½¿ç”¨æŠ€å·§/","excerpt":"æ‘©æ“¦ Google åˆ©å™¨ã€‚","text":"æ‘©æ“¦ Google åˆ©å™¨ã€‚ å‰æä½¿ç”¨ https://www.google.com/ncr æ¨¡å¼å¹¶ä¸”æ˜¯è‹±æ–‡ç‰ˆã€‚ æŠ€å·§åŒå¼•å· å®Œå…¨åŒ¹é…æœç´¢ å‡å· ä½¿ç”¨è¿™ä¸ªæŒ‡ä»¤æ—¶å‡å·å‰é¢å¿…é¡»æ˜¯ç©ºæ ¼ï¼Œå‡å·åé¢æ²¡æœ‰ç©ºæ ¼ï¼Œç´§è·Ÿç€éœ€è¦æ’é™¤ç‰¹å®šçš„è¯ã€‚ æ˜Ÿå· å·ä»£è¡¨ä»»ä½•æ–‡å­—ï¼Œå³*æ¨¡ç³Šæœç´¢ ï½ åŒ¹é… è¯¥å…³é”®è¯ æˆ– è¯¥å…³é”®è¯çš„åŒä¹‰è¯ OR åŒ¹é…å…³é”®è¯hocginæˆ–è€…hocg.in + åŒ¹é…å…³é”®è¯hocginä¸hocg.inåŒæ—¶å­˜åœ¨ inurl åŒ¹é…urlè¿æ¥ä¸­åŒ…å«è¯¥è¯æ±‡ï¼Œä¾‹å¦‚ä¸Šæ–¹åŒ¹é… https://hocg.in/hocgin allinurl ç­‰ä»·äº: inurl: hocgin inurl: hocg.inåŒ¹é…urlè¿æ¥ä¸­æ—¢åŒ…å«hocginä¹ŸåŒ…å«hocg.in, ä¾‹å¦‚: https://hocg.in/hocgin inanchor åŒ¹é…aæ ‡ç­¾ä¸­çš„æ–‡å­—, ä¾‹å¦‚ä¸Šæ–¹åŒ¹é… \\hocgin\\ intitle åŒ¹é…titleæ ‡ç­¾ä¸­çš„æ–‡å­—, \\hocgin\\ allintitle ç­‰ä»·äº: intitle: hocgin intitle: hocg.inåŒ¹é…æ ‡é¢˜ä¸­æ—¢åŒ…å«hocginä¹ŸåŒ…å«hocg.in,ä¾‹å¦‚: \\hocgin çš„åšå®¢åœ°å€ hocg.in\\ filetype åŒ¹é…åŒ…å«å…³é”®è¯hocginçš„æ‰€æœ‰pdfæ–‡ä»¶ site æŸä¸ªåŸŸåçš„æœç´¢ ralated è¿”å› Google äººä¸ºç›¸å…³çš„é¡µé¢ æ··åˆä½¿ç”¨ç¤ºä¾‹å›¾ç‰‡æ¥æº å·¥å…·æŸ¥è¯¢å­—è¯çš„é‡Šä¹‰ æ•°å­¦è¿ç®— å¤©æ°”æŸ¥è¯¢ å½“å‰æ—¶é—´ æ—¥å‡º æ—¥è½ éŸ³ä¹äººæœç´¢ çœä¼š æ±‡ç‡ 200ç¾å…ƒæ¢å¤šå°‘äººæ°‘å¸ï¼Œå¯ä»¥è¿›è¡Œæ•°å­¦è¿ç®— è®¾ç½®è®¡æ—¶å™¨ Set timer XX seconds/minutes/hoursï¼ŒXXè¡¨ç¤ºå…·ä½“çš„æ•°å­—ã€‚ ä¸¤åœ°ç‚¹è·ç¦»è®¡ç®— å½“å‰ä½ç½® æ˜¾ç¤ºå½“å‰ç”µè„‘IP æ˜¾ç¤ºå›½å®¶ GDP ç»˜åˆ¶å¤šå…ƒæ–¹ç¨‹ä»¥åŠå¤æ‚çš„æ–¹ç¨‹å¼ graph + æ–¹ç¨‹å¼ æœç´¢æŸä¸ªå•è¯çš„ç”±æ¥","categories":[{"name":"Other","slug":"Other","permalink":"https://hocg.in/categories/Other/"}],"tags":[{"name":"Tips","slug":"Tips","permalink":"https://hocg.in/tags/Tips/"},{"name":"Google","slug":"Google","permalink":"https://hocg.in/tags/Google/"}],"keywords":[{"name":"Other","slug":"Other","permalink":"https://hocg.in/categories/Other/"}]},{"title":"OpenWrt å…¥é—¨ç¯‡","slug":"OpenWrt-è¿›é˜¶ç¯‡","date":"2017-05-31T06:52:26.000Z","updated":"2017-09-18T07:02:29.000Z","comments":true,"path":"2017/05/31/OpenWrt-è¿›é˜¶ç¯‡/","link":"","permalink":"https://hocg.in/2017/05/31/OpenWrt-è¿›é˜¶ç¯‡/","excerpt":"","text":"TipsæŸ¥çœ‹è·¯ç”±å™¨æ”¯æŒæ¶æ„1opkg print-architecture | awk '&#123;print $2&#125;' å¦‚ä½•æ›´æ”¹æ—¶åŒº?12345678910111213141516171819# æŸ¥çœ‹å½“å‰çš„æ—¶åŒºdate -R# Wed, 31 May 2017 07:07:28 +0000# ä¿®æ”¹æ—¶åŒºvi /etc/config/system# è¿›è¡Œä¿®æ”¹# config system# option hostname 'Openwrt'# option timezone 'CST-8'# option zonename 'Asia/Shanghai'# é‡å¯reboot# æŸ¥çœ‹æ˜¯å¦æˆåŠŸdate -R# Wed, 31 May 2017 15:08:01 +0800# åŒæ­¥ç³»ç»Ÿæ—¶é—´ntpd -n -q -p 0.asia.pool.ntp.org å¦‚ä½•åœ¨ OpenWrt ä¸Šæ­å»º PHP ç¯å¢ƒ?12345678# æ›´æ–°ç´¢å¼•opkg update# å®‰è£…å¿…é¡»çš„ç¯å¢ƒopkg install php5 php5-mod-gd php5-mod-curl php5-mod-session php5-mod-pdo php5-mod-mcrypt php5-mod-mbstring php5-fastcgi php5-cgi php5-mod-ctype php5-mod-exif php5-mod-iconv php5-mod-json php5-mod-sockets php5-mod-sqlite3 php5-mod-tokenizer php5-mod-zip# é…ç½®æ–‡ä»¶ç›®å½•# /etc/httpd.conf# é‡å¯httpæœåŠ¡/etc/init.d/uhttpd restart","categories":[{"name":"OpenWrt","slug":"OpenWrt","permalink":"https://hocg.in/categories/OpenWrt/"}],"tags":[{"name":"Tips","slug":"Tips","permalink":"https://hocg.in/tags/Tips/"},{"name":"OpenWrt","slug":"OpenWrt","permalink":"https://hocg.in/tags/OpenWrt/"}],"keywords":[{"name":"OpenWrt","slug":"OpenWrt","permalink":"https://hocg.in/categories/OpenWrt/"}]},{"title":"å­—ç¬¦ä¸²ç¼–ç ç¯‡","slug":"å­—ç¬¦ä¸²ç¼–ç ç¯‡","date":"2017-05-12T13:09:03.000Z","updated":"2017-11-11T15:11:01.049Z","comments":true,"path":"2017/05/12/å­—ç¬¦ä¸²ç¼–ç ç¯‡/","link":"","permalink":"https://hocg.in/2017/05/12/å­—ç¬¦ä¸²ç¼–ç ç¯‡/","excerpt":"å­—ç¬¦ç¼–ç çš„æ¥å†..","text":"å­—ç¬¦ç¼–ç çš„æ¥å†.. ASCII æœ€æ—©åªæœ‰127ä¸ªå­—ç¬¦è¢«ç¼–ç åˆ°è®¡ç®—æœºé‡Œï¼Œä¹Ÿå°±æ˜¯å¤§å°å†™è‹±æ–‡å­—æ¯ã€æ•°å­—å’Œä¸€äº›ç¬¦å· å ä½: 1ä¸ªå­—èŠ‚ GB2312 ä¸­æ–‡æ˜¾ç„¶ä¸€ä¸ªå­—èŠ‚æ˜¯ä¸å¤Ÿçš„ï¼Œè‡³å°‘éœ€è¦ä¸¤ä¸ªå­—èŠ‚ï¼Œè€Œä¸”è¿˜ä¸èƒ½å’ŒASCIIç¼–ç å†²çª Unicode \\u[16è¿›åˆ¶] UnicodeæŠŠæ‰€æœ‰è¯­è¨€éƒ½ç»Ÿä¸€åˆ°ä¸€å¥—ç¼–ç é‡Œï¼Œè¿™æ ·å°±ä¸ä¼šå†æœ‰ä¹±ç é—®é¢˜äº†ã€‚ å ä½: é€šå¸¸æ˜¯2ä¸ªå­—èŠ‚ UTF-8 æœ¬ç€èŠ‚çº¦çš„ç²¾ç¥ï¼Œåˆå‡ºç°äº†æŠŠUnicodeç¼–ç è½¬åŒ–ä¸ºâ€œå¯å˜é•¿ç¼–ç â€Note: UTF-8ç¼–ç æŠŠä¸€ä¸ªUnicodeå­—ç¬¦æ ¹æ®ä¸åŒçš„æ•°å­—å¤§å°ç¼–ç æˆ1-6ä¸ªå­—èŠ‚ï¼Œå¸¸ç”¨çš„è‹±æ–‡å­—æ¯è¢«ç¼–ç æˆ1ä¸ªå­—èŠ‚ï¼Œæ±‰å­—é€šå¸¸æ˜¯3ä¸ªå­—èŠ‚ï¼Œåªæœ‰å¾ˆç”Ÿåƒ»çš„å­—ç¬¦æ‰ä¼šè¢«ç¼–ç æˆ4-6ä¸ªå­—èŠ‚","categories":[{"name":"Other","slug":"Other","permalink":"https://hocg.in/categories/Other/"}],"tags":[{"name":"Tips","slug":"Tips","permalink":"https://hocg.in/tags/Tips/"}],"keywords":[{"name":"Other","slug":"Other","permalink":"https://hocg.in/categories/Other/"}]},{"title":"Wireshark çš„ä½¿ç”¨","slug":"Wiresharkçš„ä½¿ç”¨","date":"2017-04-20T11:34:05.000Z","updated":"2017-11-11T15:11:01.049Z","comments":true,"path":"2017/04/20/Wiresharkçš„ä½¿ç”¨/","link":"","permalink":"https://hocg.in/2017/04/20/Wiresharkçš„ä½¿ç”¨/","excerpt":"æŠ½ç©ºæ•´ç†ä¸€ä¸‹, è™½ç„¶Charleså¾ˆå¥½ç”¨, ä½†æ˜¯æŸäº›æƒ…å†µä¸‹è¯¥è½¯ä»¶ä¹Ÿæ˜¯ä¸å¯æ›¿ä»£çš„.","text":"æŠ½ç©ºæ•´ç†ä¸€ä¸‹, è™½ç„¶Charleså¾ˆå¥½ç”¨, ä½†æ˜¯æŸäº›æƒ…å†µä¸‹è¯¥è½¯ä»¶ä¹Ÿæ˜¯ä¸å¯æ›¿ä»£çš„. å…³äºWiresharké€‚åˆç ”ç©¶ TCP,UDP ç­‰åè®®. å› ä¸ºé™åˆ¶å¹¶ä¸èƒ½æ”¹åŒ…æˆ–æ¨¡æ‹Ÿå‘åŒ…ï¼Œåªèƒ½åˆ†æåè®®è‹¥, ç ”ç©¶HTTP,HTTPSæ¨èä½¿ç”¨Charles or Fiddler å…³äºæŠ“åŒ…äº”é¢œå…­è‰²çš„æ„ä¹‰ æ›´å¤šè¯¦æƒ…æŸ¥çœ‹ View - Coloring Rules ç»¿è‰²èƒŒæ™¯ï¼ˆé»‘å­—ï¼‰HTTPåŒ… ç°è‰²èƒŒæ™¯ï¼ˆé»‘å­—ï¼‰TCPåŒ… è“è‰²èƒŒæ™¯ (é»‘å­—) DNSåŒ… é»‘è‰²èƒŒæ™¯ (çº¢å­—) TCPé”™è¯¯åŒ…æˆ–è€…æ ¡éªŒé”™è¯¯åŒ… Wiresharkä¸»çª—å£ ä»ä¸Šè‡³ä¸‹ èœå•æ : ç”¨äºå¼€å§‹æ“ä½œã€‚ ä¸»å·¥å…·æ : æä¾›å¿«é€Ÿè®¿é—®èœå•ä¸­ç»å¸¸ç”¨åˆ°çš„é¡¹ç›®çš„åŠŸèƒ½ã€‚ è¿‡æ»¤å·¥å…·æ : æä¾›å¤„ç†å½“å‰æ˜¾ç¤ºè¿‡æ»¤å¾—æ–¹æ³•ã€‚ æ‹¦æˆªçš„æ•°æ®åŒ…åˆ—è¡¨(Packet list): æ˜¾ç¤ºæ‰“å¼€æ–‡ä»¶çš„æ¯ä¸ªåŒ…çš„æ‘˜è¦ã€‚ç‚¹å‡»é¢æ¿ä¸­çš„å•ç‹¬æ¡ç›®ï¼ŒåŒ…çš„å…¶ä»–æƒ…å†µå°†ä¼šæ˜¾ç¤ºåœ¨å¦å¤–ä¸¤ä¸ªé¢æ¿ä¸­ã€‚ é€‰ä¸­çš„æ•°æ®åŒ…ä¿¡æ¯(Packet details): æ˜¾ç¤ºæ‚¨åœ¨Packet listé¢æ¿ä¸­é€‰æ‹©çš„åŒ…çš„æ›´å¤šè¯¦æƒ…ã€‚ é€‰ä¸­çš„æ•°æ®åŒ…å­—èŠ‚ç : æ˜¾ç¤ºæ‚¨åœ¨Packet listé¢æ¿é€‰æ‹©çš„åŒ…çš„æ•°æ®ï¼Œä»¥åŠåœ¨Packet detailsé¢æ¿é«˜äº®æ˜¾ç¤ºçš„å­—æ®µã€‚ çŠ¶æ€æ : æ˜¾ç¤ºå½“å‰ç¨‹åºçŠ¶æ€ä»¥åŠæ•æ‰æ•°æ®çš„æ›´å¤šè¯¦æƒ…ã€‚ é€‰ä¸­çš„æ•°æ®åŒ…ä¿¡æ¯ Frame: ç‰©ç†å±‚çš„æ•°æ®å¸§æ¦‚å†µ Ethernet II: æ•°æ®é“¾è·¯å±‚ä»¥å¤ªç½‘å¸§å¤´éƒ¨ä¿¡æ¯ Internet Protocol Version 4: äº’è”ç½‘å±‚IPåŒ…å¤´éƒ¨ä¿¡æ¯ Transmission Control Protocol: ä¼ è¾“å±‚Tçš„æ•°æ®æ®µå¤´éƒ¨ä¿¡æ¯ï¼Œæ­¤å¤„æ˜¯TCP Hypertext Transfer Protocol: åº”ç”¨å±‚çš„ä¿¡æ¯ï¼Œæ­¤å¤„æ˜¯HTTPåè®® è¿‡æ»¤è¡¨è¾¾å¼ åè®®è¿‡æ»¤ tcp upd .. ip è¿‡æ»¤ æ¥æº ip.src == 192.168.1.1ç›®çš„åœ° ip.dst == 192.168.1.1 ç«¯å£ tcp.port == 8080ä»…æ˜¾ç¤ºæ¥æºä¸º8080çš„ tcp.srcport == 8080 Httpæ¨¡å¼ http.request.method==â€GETâ€ é€»è¾‘è¿ç®—ç¬¦ä¸º and or","categories":[{"name":"IDE","slug":"IDE","permalink":"https://hocg.in/categories/IDE/"}],"tags":[{"name":"Tips","slug":"Tips","permalink":"https://hocg.in/tags/Tips/"},{"name":"Wireshark","slug":"Wireshark","permalink":"https://hocg.in/tags/Wireshark/"}],"keywords":[{"name":"IDE","slug":"IDE","permalink":"https://hocg.in/categories/IDE/"}]},{"title":"SQLçš„é‡æ–°æ¢³ç†","slug":"SQLé‡æ–°æ¢³ç†","date":"2017-04-07T01:19:09.000Z","updated":"2017-11-11T15:11:01.049Z","comments":true,"path":"2017/04/07/SQLé‡æ–°æ¢³ç†/","link":"","permalink":"https://hocg.in/2017/04/07/SQLé‡æ–°æ¢³ç†/","excerpt":"æŒç»­ç§¯ç´¯..","text":"æŒç»­ç§¯ç´¯.. å…³äº SQL æ‰§è¡Œé¡ºåºèµ„æ–™å‚è€ƒ ä¾‹å¥123456select * from t_1 join t_2on t_1.id = t_2.fidwhere 1=1group by t_1.classNamehaving t_1.className = '1ç­'order by id desc; è¿™æ˜¯ä¸€æ¡ç®€å•/è§„èŒƒçš„åŸºæœ¬SQLã€‚ æ³¨æ„ SQLä¸‰ä¸ªå¾ˆé‡è¦çš„ä½ç½®on/where/havingå®ƒä»¬åˆ†åˆ«å¯¹åº”ç€ join/from/group å½¢æˆåçš„è™šè¡¨è¿›è¡Œç­›é€‰ã€‚ selectéƒ¨åˆ†å¹¶ä¸æ˜¯ä¸€å¼€å§‹å°±æ‰§è¡Œçš„ï¼Œè€Œæ˜¯è¡¨æ•°æ®ç¡®è®¤å®Œæ¯•ï¼Œåªå·®æ’åºçš„æ—¶å€™æ‰§è¡Œçš„ã€‚å¹¶ä¸”selectä¸­çš„å‡½æ•°/DISTINCT/TOPä¹Ÿæ˜¯åœ¨selectæ‰§è¡Œé˜¶æ®µæ‰§è¡Œçš„ èšåˆå‡½æ•°éœ€Groupåæ‰å¯æ‰§è¡Œ, æ™®é€šå‡½æ•°éšæ‰§è¡Œæ­¥éª¤æ‰§è¡Œ(æ­£å¸¸æ‰§è¡Œ) å…·ä½“é¡ºåº FROM FROMåé¢çš„è¡¨æ ‡è¯†äº†è¿™æ¡è¯­å¥è¦æŸ¥è¯¢çš„æ•°æ®æºã€‚å’Œä¸€äº›å­å¥å¦‚ï¼Œï¼ˆ1-J1ï¼‰ç¬›å¡å°”ç§¯ï¼Œï¼ˆ1-J2ï¼‰ONè¿‡æ»¤ï¼Œï¼ˆ1-J3ï¼‰æ·»åŠ å¤–éƒ¨åˆ—ï¼Œæ‰€è¦åº”ç”¨çš„å¯¹è±¡ã€‚FROMè¿‡ç¨‹ä¹‹åä¼šç”Ÿæˆä¸€ä¸ªè™šæ‹Ÿè¡¨VT1ã€‚(1-J1)ç¬›å¡å°”ç§¯ è¿™ä¸ªæ­¥éª¤ä¼šè®¡ç®—ä¸¤ä¸ªç›¸å…³è”è¡¨çš„ç¬›å¡å°”ç§¯(CROSS JOIN) ï¼Œç”Ÿæˆè™šæ‹Ÿè¡¨VT1-J1ã€‚(1-J2)ONè¿‡æ»¤ è¿™ä¸ªæ­¥éª¤åŸºäºè™šæ‹Ÿè¡¨VT1-J1è¿™ä¸€ä¸ªè™šæ‹Ÿè¡¨è¿›è¡Œè¿‡æ»¤ï¼Œè¿‡æ»¤å‡ºæ‰€æœ‰æ»¡è¶³ON è°“è¯æ¡ä»¶çš„åˆ—ï¼Œç”Ÿæˆè™šæ‹Ÿè¡¨VT1-J2ã€‚(1-J3)æ·»åŠ å¤–éƒ¨è¡Œ å¦‚æœä½¿ç”¨äº†å¤–è¿æ¥(å¤–è¿æ¥æ‰ä¼šåŠ å…¥å­—æ®µ/æ•°æ®)ï¼Œä¿ç•™è¡¨ä¸­çš„ä¸ç¬¦åˆONæ¡ä»¶çš„åˆ—ä¹Ÿä¼šè¢«åŠ å…¥åˆ°VT1-J2ä¸­ï¼Œä½œä¸ºå¤–éƒ¨è¡Œï¼Œç”Ÿæˆè™šæ‹Ÿè¡¨VT1-J3ã€‚æ­¤æ—¶ ä¸ç¬¦åˆONçš„ä¼šè¢«åŠ å…¥å›æ¥ WHERE å¯¹VT1è¿‡ç¨‹ä¸­ç”Ÿæˆçš„ä¸´æ—¶è¡¨è¿›è¡Œè¿‡æ»¤ï¼Œæ»¡è¶³whereå­å¥çš„åˆ—è¢«æ’å…¥åˆ°VT2è¡¨ä¸­ã€‚ æ•°æ®ç°åœ¨è¿˜æ²¡æœ‰è¢«åˆ†ç»„ï¼Œå› æ­¤ç°åœ¨ä½ ä¸èƒ½ä½¿ç”¨èšåˆè¿ç®—- GROUP BY è¿™ä¸ªå­å¥ä¼šæŠŠVT2ä¸­ç”Ÿæˆçš„è¡¨æŒ‰ç…§GROUP BYä¸­çš„åˆ—è¿›è¡Œåˆ†ç»„ã€‚ç”ŸæˆVT3è¡¨ã€‚æ¯ä¸€ä¸ªåˆ†ç»„å¿…é¡»åªèƒ½è¿”å›ä¸€è¡Œ(é™¤éè¢«è¿‡æ»¤æ‰)ï¼Œå³æ¯ä¸€è¡Œæ•´ä½“éƒ½æ— é‡å¤ï¼Œå¯¹äºæ²¡æœ‰å‡ºç°GROUP BYåé¢çš„åˆ—å¿…é¡»ä½¿ç”¨èšåˆå‡½æ•°(å¦‚ MAX ,MIN,COUNT,AVGç­‰)ï¼Œä¿è¯æ¯ä¸€ä¸ªGROUPåªè¿”å›ä¸€è¡Œ HAVING è¿™ä¸ªå­å¥å¯¹VT3è¡¨ä¸­çš„ä¸åŒçš„ç»„è¿›è¡Œè¿‡æ»¤ï¼Œæ»¡è¶³HAVINGæ¡ä»¶çš„å­å¥è¢«åŠ å…¥åˆ°VT4è¡¨ä¸­ã€‚ SELECT è¿™ä¸ªå­å¥å¯¹SELECTå­å¥ä¸­çš„å…ƒç´ è¿›è¡Œå¤„ç†ï¼Œç”ŸæˆVT5è¡¨ã€‚(5-1)è®¡ç®—è¡¨è¾¾å¼ è®¡ç®—SELECT å­å¥ä¸­çš„è¡¨è¾¾å¼ï¼Œç”ŸæˆVT5-1 å¦‚æœè¿™ä¸ªsqlè¯­å¥æ˜¯ä¸€ä¸ªèšåˆæŸ¥è¯¢ï¼Œåœ¨GROUP BYä¹‹åï¼Œä½ åªèƒ½ä½¿ç”¨GROUP BYä¸­çš„åˆ—ï¼Œå¯¹ä¸å±äºGROUPé›†åˆä¸­çš„åˆ—å¿…é¡»ä½¿ç”¨èšåˆè¿ç®—(5-2)DISTINCT å¯»æ‰¾VT5-1ä¸­çš„é‡å¤åˆ—ï¼Œå¹¶åˆ æ‰ï¼Œç”ŸæˆVT5-2(5-3)TOP ä»ORDER BYå­å¥å®šä¹‰çš„ç»“æœä¸­ï¼Œç­›é€‰å‡ºç¬¦åˆæ¡ä»¶çš„åˆ—ã€‚ç”ŸæˆVT5-3è¡¨ ORDER BY ä»VT5-3ä¸­çš„è¡¨ä¸­ï¼Œæ ¹æ®ORDER BY å­å¥çš„æ¡ä»¶å¯¹ç»“æœè¿›è¡Œæ’åºï¼Œç”ŸæˆVC6è¡¨ã€‚å”¯ä¸€ä¸€ä¸ªå¯ä»¥ä½¿ç”¨SELECTå­å¥åˆ›å»ºçš„åˆ«åçš„åœ°æ–¹ èšåˆå‡½æ•°æ˜¯å¯¹ä¸€ç»„å€¼æ‰§è¡Œè®¡ç®—å¹¶è¿”å›å•ä¸€çš„å€¼çš„å‡½æ•° 1234567SELECT C.customerid, COUNT(O.orderid) AS numordersFROM dbo.Customers AS C LEFT OUTER JOIN dbo.Orders AS O ON C.customerid = O.customeridWHERE C.city = 'Madrid'GROUP BY C.customeridHAVING COUNT(O.orderid) å…³äº è¡¨ Joins Joins å­å¥ç”¨äºç»“åˆä¸¤ä¸ªæˆ–å¤šä¸ªæ•°æ®åº“ä¸­è¡¨çš„è®°å½•, ä¹Ÿå°±æ˜¯è¯´æ˜¯é€šè¿‡æŸç§è”ç³»å»ºç«‹è¡¨ä¹‹é—´çš„å…³è”, å¹¶å½¢æˆä¸€å¼ æ–°è¡¨ SQL å®šä¹‰äº†ä¸‰ç§ä¸»è¦ç±»å‹çš„è¿æ¥ äº¤å‰è¿æ¥ ( CROSS JOIN ), åˆç§° ç¬›å¡å°”ç§¯ ä¼šå½¢æˆåºå¤§çš„è¡¨, å› æ­¤æ…ç”¨ã€‚å‡è®¾: è¡¨t1(5è¡Œæ•°æ®, 3åˆ—), è¡¨t2(4è¡Œæ•°æ®, 2åˆ—)SQL: select from t1 cross join t2ç»“æœ: æ•°æ®æ•°é‡ä¸º20è¡Œæ•°æ®(5 4), 5åˆ— å†…è¿æ¥ ( INNER JOIN ), é€šå¸¸å¯çœç•¥ inner é€šè¿‡ on æˆ– where å»ºç«‹è¡¨ä¹‹é—´çš„è”ç³»æˆ–è€…è¯´è¡¨å½¢æˆçš„æ¡ä»¶å‡è®¾: è¡¨t1(5è¡Œæ•°æ®, 3åˆ—), è¡¨t2(4è¡Œæ•°æ®, 2åˆ—)SQL: select from t1 inner join t2 on t1.sid = t2.sid*ç»“æœ: æŸ¥è¯¢æ“ä½œåˆ—å‡ºä¸è¿æ¥æ¡ä»¶åŒ¹é…çš„æ•°æ®è¡Œ, 5åˆ— å¤–è¿æ¥ ( OUTER JOIN ) å¤–è¿æ¥ä¸ºå†…è¿æ¥çš„æ‰©å±•, ä¸»è¦åŒºåˆ«åœ¨äºå“ªè¾¹ä¸ºåŸºå‡†, ä½¿ç”¨ on è¿›è¡Œæ•°æ®å…³è”å¤–è¿æ¥åˆ†ä¸º: å·¦å¤–è¿æ¥ã€å³å¤–è¿æ¥ã€å…¨å¤–è¿æ¥éƒ¨åˆ†SQLè¯­è¨€å¹¶ä¸åŒ…å«å…¨éƒ¨ç§ç±», ä¾‹å¦‚SQLite ä¹‹åŒ…å« å·¦å¤–è¿æ¥ å·¦å¤–è¿æ¥ ( LEFT JOIN )å‡è®¾: è¡¨t1(5è¡Œæ•°æ®, 3åˆ—), è¡¨t2(4è¡Œæ•°æ®, 2åˆ—)SQL: select from t1 left join t2 on t1.sid = t2.sid*ç»“æœ: ä»¥å·¦è¡¨ä¸ºåŸºå‡†, å°†æ•°æ®æŒ‰æ¡ä»¶è¿›è¡Œè¿æ¥, å·¦è¡¨è¡Œå…¨éƒ¨æ˜¾ç¤º, è‹¥å³è¡¨æ²¡æœ‰æ»¡è¶³æ¡ä»¶çš„è¡Œåˆ™æ˜¾ç¤ºä¸ºNULL, 5åˆ— å³å¤–è¿æ¥ ( RIGHT JOIN ) å‡è®¾: è¡¨t1(5è¡Œæ•°æ®, 3åˆ—), è¡¨t2(4è¡Œæ•°æ®, 2åˆ—)SQL: select from t1 right join t2 on t1.sid = t2.sid*ç»“æœ: ä»¥å³è¡¨ä¸ºåŸºå‡†, å°†æ•°æ®æŒ‰æ¡ä»¶è¿›è¡Œè¿æ¥, å³è¡¨è¡Œå…¨éƒ¨æ˜¾ç¤º, è‹¥å·¦è¡¨æ²¡æœ‰æ»¡è¶³æ¡ä»¶çš„è¡Œåˆ™æ˜¾ç¤ºä¸ºNULL, 5åˆ— å…¨å¤–è¿æ¥ ( FULL JOIN ) å‡è®¾: è¡¨t1(5è¡Œæ•°æ®, 3åˆ—), è¡¨t2(4è¡Œæ•°æ®, 2åˆ—)SQL: select from t1 full join t2 on t1.sid = t2.sid*ç»“æœ: å®Œæ•´çš„æ˜¾ç¤ºä¸¤è¡¨çš„æ•°æ®, å°†æ•°æ®æŒ‰æ¡ä»¶è¿›è¡Œè¿æ¥, å½“æ²¡æœ‰è¢«å…³è”çš„è¡¨ä¸­æ²¡æœ‰å­˜åœ¨æ»¡è¶³æ¡ä»¶çš„è¡Œæ—¶, åˆ™æ˜¾ç¤ºä¸ºNULL, 5åˆ—","categories":[{"name":"Server","slug":"Server","permalink":"https://hocg.in/categories/Server/"}],"tags":[{"name":"Tips","slug":"Tips","permalink":"https://hocg.in/tags/Tips/"},{"name":"SQL","slug":"SQL","permalink":"https://hocg.in/tags/SQL/"}],"keywords":[{"name":"Server","slug":"Server","permalink":"https://hocg.in/categories/Server/"}]},{"title":"Vue.jsé¡¹ç›® éƒ¨ä»¶ç®€ä»‹ (æœªå®Œå¾…ç»­)","slug":"Vue.jsé¡¹ç›®-éƒ¨ä»¶ç®€ä»‹","date":"2017-03-31T07:32:36.000Z","updated":"2017-03-31T13:15:33.000Z","comments":true,"path":"2017/03/31/Vue.jsé¡¹ç›®-éƒ¨ä»¶ç®€ä»‹/","link":"","permalink":"https://hocg.in/2017/03/31/Vue.jsé¡¹ç›®-éƒ¨ä»¶ç®€ä»‹/","excerpt":"ğŸ¦‹ ç›®å‰å›½å†…å‰ç«¯MVVMæœ€ç«çš„æ¡†æ¶.. å‰æ®µæ—¶é—´å†™äº†ä¸€ä¸ªAbouté¡µé¢, è¿™å‡ å¤©é¡ºå¸¦æ•´ç†ä¸€ä¸‹çŸ¥è¯†ç‚¹.","text":"ğŸ¦‹ ç›®å‰å›½å†…å‰ç«¯MVVMæœ€ç«çš„æ¡†æ¶.. å‰æ®µæ—¶é—´å†™äº†ä¸€ä¸ªAbouté¡µé¢, è¿™å‡ å¤©é¡ºå¸¦æ•´ç†ä¸€ä¸‹çŸ¥è¯†ç‚¹. Vue.js Vue.jsæ˜¯å½“ä¸‹å¾ˆç«çš„ä¸€ä¸ªJavaScript MVVMåº“ï¼Œå®ƒæ˜¯ä»¥æ•°æ®é©±åŠ¨å’Œç»„ä»¶åŒ–çš„æ€æƒ³æ„å»ºçš„.ç±»ä¼¼çš„æœ‰Angular.js. å¯ä»¥å»ºç«‹DOMå’Œæ•°æ®ä¹‹é—´çš„ç»‘å®š å¯ä»¥æŒ‰åŠŸèƒ½/ç»„ä»¶æŠ½ç¦»HTMLä»£ç  ç›¸å…³Vue é¡¹ç›®å®è·µ - æŒç»­æ›´æ–° åŠŸèƒ½éƒ¨åˆ†åŸºç¡€ æ•°å€¼é»˜è®¤åŒå‘ç»‘å®š æ”¯æŒ æ¡ä»¶è¯­æ³•ç‰¹æ€§/åŠŸèƒ½å‡½æ•°/ç”Ÿå‘½å‘¨æœŸ åŠ¨æ€è®¾å®šstyle/class æ†ç»‘event æ¸²æŸ“ç”Ÿå‘½å‘¨æœŸé«˜çº§ å•é¡µé¢ç»„ä»¶ è‡ªå®šä¹‰æŒ‡ä»¤ å•å…ƒæµ‹è¯• æ’ä»¶ å•æ–‡ä»¶ç»„ä»¶.vueå®šä¹‰:12345678&lt;template&gt; &lt;h1&gt;This is title&lt;/h1&gt;&lt;/template&gt;&lt;script&gt; export default &#123; name: 'Title' &#125;&lt;/script&gt; ä½¿ç”¨:123456789101112131415&lt;template&gt; &lt;div id=\"app\"&gt; &lt;img src=\"./assets/logo.png\"&gt; &lt;Title&gt;&lt;/Title&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt; import Title from './components/Title' export default &#123; name: 'app', components: &#123; Title &#125; &#125;&lt;/script&gt; Vue Router æ‰©å±• VueæŒ‰å­—é¢æ„æ€æ¥çœ‹ä¸ºVue è·¯ç”±å…¶å®è´¨ä¹Ÿå°±æ˜¯ç”¨äºå•é¡µåº”ç”¨ç®¡ç†é¡µé¢è·³è½¬, è´Ÿè´£è·¯å¾„è§£æ. 123456789101112131415import Vue from 'vue'import Router from 'vue-router'import Hello from '@/components/Hello'Vue.use(Router)export default new Router(&#123; routes: [ &#123; path: '/', name: 'Hello', component: Hello &#125; ]&#125;) Vuex æ‰©å±• Vueå½“å¼€å‘å¤§å‹é¡¹ç›®æ—¶, ä¸ºé˜²æ­¢ Vue å¤ªè¿‡è‡ƒè‚¿, ä½¿ç”¨ Vuex ç®¡ç†æ•°æ®çŠ¶æ€. webpack ä¸€æ¬¾æ¨¡å—åŠ è½½å™¨å…¼æ‰“åŒ…å·¥å…·ä½¿ç”¨æ¨¡å—çš„ç†å¿µæ¥å¤„ç† JS/CSS/å›¾ç‰‡ç­‰èµ„æºæ–‡ä»¶ æŒ‡ä»¤123456789# å®‰è£…npm install webpack --save-dev# æ‰§è¡Œwebpack --display-error-details # è¾“å‡ºè¯¦ç»†é”™è¯¯ --watch # å®æ—¶ç›‘å¬å¹¶è‡ªåŠ¨æ‰“åŒ… --config &lt;file&gt; # æŒ‡å®šé…ç½®æ–‡ä»¶æ‰“åŒ… -p # å‹ç¼©æ‰“åŒ… -d # ç”Ÿæˆmapæ˜ å°„æ–‡ä»¶ é…ç½®(webpack.config.js)12345678910111213141516171819module.exports = &#123; // æ’ä»¶ plugins: [], // é¡µé¢å…¥å£ entry: &#123;&#125;, // å…¥å£æ–‡ä»¶è¾“å‡ºä½ç½®, å³å¤„ç†åçš„æ–‡ä»¶å­˜æ”¾ä½ç½® output: &#123;&#125;, module: &#123; // æ–‡ä»¶å¤„ç†åŠ è½½å™¨ rules: [] &#125;, // é¢å¤–å¤„ç† resolve: &#123; // è‡ªåŠ¨æ‰©å±•æ–‡ä»¶åç¼€, requireæ—¶å¯ä»¥è¿›è¡Œçœç•¥ extensions: [], // æ¨¡å—å®šä¹‰åˆ«å, requireæ—¶å¯ä»¥è¿›è¡Œè·¯å¾„çœç•¥, ç›´æ¥ä½¿ç”¨åˆ«å alias: &#123;&#125; &#125;&#125; å…¥å£æ–‡ä»¶(main.js)1234567891011121314151617181920import Vue from 'vue'import App from './App'import router from './router'import store from './store/index'// å¼•å…¥js, åŠ è½½å™¨ä¼šè‡ªåŠ¨è¿›è¡Œå¤„ç†import holderjs from 'holderjs'// å¼•å…¥ css/scss, åŠ è½½å™¨ä¼šè‡ªåŠ¨è¿›è¡Œå¤„ç†import appScss from './assets/app.scss'import fontAwesomeCss from './assets/font-awesome-4.7.0/css/font-awesome.css'Vue.config.productionTip = false/* eslint-disable no-new */new Vue(&#123; el: '#app', router, store, template: '&lt;App/&gt;', components: &#123; App &#125;&#125;) æœªå®Œå¾…ç»­ing","categories":[{"name":"Coder","slug":"Coder","permalink":"https://hocg.in/categories/Coder/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://hocg.in/tags/JavaScript/"},{"name":"HTML5","slug":"HTML5","permalink":"https://hocg.in/tags/HTML5/"},{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://hocg.in/tags/å‰ç«¯/"}],"keywords":[{"name":"Coder","slug":"Coder","permalink":"https://hocg.in/categories/Coder/"}]},{"title":"Vue é¡¹ç›®å®è·µ - æŒç»­æ›´æ–°","slug":"Vue.js-é¡¹ç›®å®è·µ","date":"2017-03-26T07:40:08.000Z","updated":"2017-06-01T13:20:00.000Z","comments":true,"path":"2017/03/26/Vue.js-é¡¹ç›®å®è·µ/","link":"","permalink":"https://hocg.in/2017/03/26/Vue.js-é¡¹ç›®å®è·µ/","excerpt":"ğŸŒ ç›®å‰å›½å†…å‰ç«¯MVVMæœ€ç«çš„æ¡†æ¶.. é¡¹ç›®å®è·µè®°å½•ä¸€äº›æµç¨‹","text":"ğŸŒ ç›®å‰å›½å†…å‰ç«¯MVVMæœ€ç«çš„æ¡†æ¶.. é¡¹ç›®å®è·µè®°å½•ä¸€äº›æµç¨‹ ç›¸å…³ vue vue-router ç»™vueä½¿ç”¨çš„è·¯ç”± vuex ä¸€ä¸ªä¸“ä¸º Vue.js åº”ç”¨ç¨‹åºå¼€å‘çš„çŠ¶æ€ç®¡ç†æ¨¡å¼ webpack å¿«é€Ÿæ­å»ºé¡¹ç›®12345678910111213141516171819# æ„å»ºé¡¹ç›®npm install -g vue-clivue init webpack &lt;project-name&gt;# è¯•è¡Œcd iPagenpm installnpm run dev# å®‰è£… vuexnpm install vuex -S# å®‰è£… sass å¼€å‘æ”¯æŒnpm install --save-dev sass-loadernpm install --save-dev node-sassnpm install --save-dev css-loadernpm install --save-dev style-loader# ç¼–è¯‘ç”Ÿæˆé™æ€æ–‡ä»¶npm run build ç›®å½•ç»“æ„12345678910111213141516. â”œâ”€â”€ README.md â”œâ”€â”€ build â”œâ”€â”€ config â”œâ”€â”€ index.html â”œâ”€â”€ node_modules â”œâ”€â”€ package.json â”œâ”€â”€ src // æºç | â”œâ”€â”€ App.vue // çˆ¶ç»„ä»¶ | â”œâ”€â”€ assets // é™æ€æ–‡ä»¶ | â”œâ”€â”€ components // å…¬å…±ç»„ä»¶ | â”œâ”€â”€ main.js // webpackæ‰“åŒ…å…¥å£æ–‡ä»¶ | â””â”€â”€ router | â””â”€â”€ index.js // é¡µé¢è·¯ç”± â”œâ”€â”€ static â””â”€â”€ test é‡åˆ°çš„é—®é¢˜","categories":[{"name":"Coder","slug":"Coder","permalink":"https://hocg.in/categories/Coder/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://hocg.in/tags/JavaScript/"},{"name":"HTML5","slug":"HTML5","permalink":"https://hocg.in/tags/HTML5/"},{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://hocg.in/tags/å‰ç«¯/"}],"keywords":[{"name":"Coder","slug":"Coder","permalink":"https://hocg.in/categories/Coder/"}]},{"title":"å…³äº Objective-C çš„å°ç¬”è®°","slug":"å…³äº Objective-C çš„å°ç¬”è®°","date":"2017-03-20T00:07:00.000Z","updated":"2018-10-11T13:39:15.368Z","comments":true,"path":"2017/03/20/å…³äº Objective-C çš„å°ç¬”è®°/","link":"","permalink":"https://hocg.in/2017/03/20/å…³äº Objective-C çš„å°ç¬”è®°/","excerpt":"ä¹‹å‰å­¦ swift3 é¡ºå¸¦æ•´ç†çš„å°ç¬”è®°","text":"ä¹‹å‰å­¦ swift3 é¡ºå¸¦æ•´ç†çš„å°ç¬”è®° Objective-Cä»‹ç» æ–‡ä»¶åç¼€ æ–‡ä»¶ç±»å‹ *.h å¤´æ–‡ä»¶ã€‚å¤´æ–‡ä»¶åŒ…å«ç±»ï¼Œç±»å‹ï¼Œå‡½æ•°å’Œå¸¸æ•°çš„å£°æ˜ã€‚ *.m æºä»£ç æ–‡ä»¶ã€‚è¿™æ˜¯å…¸å‹çš„æºä»£ç æ–‡ä»¶æ‰©å±•åï¼Œå¯ä»¥åŒ…å« Objective-C å’Œ C ä»£ç  *.mm æºä»£ç æ–‡ä»¶ã€‚å¸¦æœ‰è¿™ç§æ‰©å±•åçš„æºä»£ç æ–‡ä»¶ï¼Œé™¤äº†å¯ä»¥åŒ…å«Objective-Cå’ŒCä»£ç ä»¥å¤–è¿˜å¯ä»¥åŒ…å«C++ä»£ç ã€‚ä»…åœ¨ä½ çš„Objective-Cä»£ç ä¸­ç¡®å®éœ€è¦ä½¿ç”¨C++ç±»æˆ–è€…ç‰¹æ€§çš„æ—¶å€™æ‰ç”¨è¿™ç§æ‰©å±•åã€‚ è¯´æ˜ å…³é”®è¯ è¯´æ˜ #import å¼•å…¥æ–‡ä»¶, å¹¶ç¡®ä¿ç›¸åŒçš„æ–‡ä»¶åªä¼šè¢«åŒ…å«ä¸€æ¬¡ NSString* say = @â€Hello Worldâ€ åˆ›å»ºNSStringå¯¹è±¡ @interface/@implementation objective-c ä¸€ä¸ªç±»æ˜¯ç”±:å®šä¹‰å’Œå®ç°æ¥æ„æˆçš„, @interface ç”¨äºå®šä¹‰, @implementationç”¨äºå®ç°ç»†èŠ‚. @propertyä¸@synthesize @propertyç”¨äºåœ¨@interfaceå£°æ˜getterä¸setterå‡½æ•°, @synthesizeç”¨äºåœ¨@implementationå®ç°getterä¸setterå‡½æ•°, äºŒè€…æ˜¯æ­é…å£å‘³é«˜ç‰ˆæœ¬(Xcode4.5)å¯çœç•¥@synthesize åŸºç¡€æ¡†æ¶ å®ƒåŒ…æ‹¬ NSArrayï¼ŒNSDictionaryä¸­çš„NSSetç­‰æ‰©å±•æ•°æ®ç±»å‹çš„åˆ—è¡¨ã€‚ å®ƒç”±ä¸€ç»„ä¸°å¯Œçš„æ“ä½œæ–‡ä»¶çš„å‡½æ•°ï¼Œå­—ç¬¦ä¸²ï¼Œç­‰ç­‰ã€‚ URLå¤„ç†å®ƒæä¾›çš„åŠŸèƒ½ï¼Œå¦‚æ—¥æœŸæ ¼å¼ï¼Œæ•°æ®å¤„ç†ï¼Œé”™è¯¯å¤„ç†ç­‰å®ç”¨å·¥å…· è¯­æ³•è¯­æ³•é€Ÿè¯»123456789101112131415161718192021222324252627282930313233/* é¢„å¤„ç†(å¯¼åŒ…) */#import &lt;Foundation/Foundation.h&gt;/* å®šä¹‰æ¥å£(ç»§æ‰¿:NSObject) */@interface SampleClass:NSObject- (void)sampleMethod;@end/* å®ç°æ¥å£(SampleClass) */@implementation SampleClass- (void)sampleMethod&#123; NSLog(@&quot;Hello, World!&quot;);&#125;@end/* ä¸»å‡½æ•° */int main() &#123; /* my first program in Objective-C */ SampleClass *sampleClass = [[SampleClass alloc]init]; /* - è°ƒç”¨å‡½æ•° C: sampleClass.sampleMethod(args); OC: [å¯¹è±¡ å‡½æ•°å: å‚æ•°] */ [sampleClass sampleMethod: args]; return 0;&#125; ç±»çš„è¯­æ³• ç±»åˆ†ä¸º: ç±»çš„å®šä¹‰(.h) å’Œ ç±»çš„å®ç°(.m) å®šä¹‰ ( *.h )123456789101112131415@interface MyObject : NSObject&#123; // æ­¤å¤„å˜é‡é»˜è®¤ä¸ºå—ä¿æŠ¤(protected) int memberVar1; // å®ä½“å˜é‡ id memberVar2;&#125;+(return_type) class_method; // &quot;+&quot; è¡¨ç¤º ç±»æ–¹æ³•-(return_type) instance_method1; // &quot;-&quot; è¡¨ç¤º å®ä¾‹æ–¹æ³•-(return_type) instance_method2: (int) p1;// è¿™é‡Œçš„è°ƒç”¨æ–¹å¼ä¸º: [obj instance_method3: 1 andPar: 2];// andPar ç›¸å½“äºå¤–éƒ¨çš„å¦å¤–ä¸€ä¸ªåˆ«å-(return_type) instance_method3: (int) p1 andPar: (int) p2;@end å®ç° ( *.m )12345678910111213141516171819@implementation MyObject&#123; // æ­¤å¤„å˜é‡ä¸ºç§æœ‰(private) int memberVar3; //ç§æœ‰å®ä½“å˜é‡&#125;+(return_type) class_method &#123; .... //method implementation&#125;-(return_type) instance_method1 &#123; ....&#125;-(return_type) instance_method2: (int) p1 &#123; ....&#125;-(return_type) instance_method3: (int) p1 andPar: (int) p2 &#123; ....&#125;@end åˆ›å»ºå¯¹è±¡1234// æ³¨: alloc ä¸ init éƒ½å±äº NSObject é‡Œçš„å‡½æ•°MyObject * my = [[MyObject alloc] init];// æ— å‚æ„å»º, ä¹Ÿå¯é‡‡ç”¨ä»¥ä¸‹æ–¹å¼ (Objective-C 2.0)MyObject * my = [MyObject new]; Note: { } éœ€å¦‚æ–‡è¿™æ ·æ ‡è¯†, æ‰å¯è¡¨è¾¾å‡ºå‡†ç¡®çš„è¯­ä¹‰, è¯»è€…è‡ªè¡Œé¢†æ‚Ÿ. å‡½æ•°è¯­æ³• å‡½æ•°åˆ†ä¸º: ç±»å‡½æ•° å’Œ å¯¹è±¡å‡½æ•° 12345678910111213// å¦‚ä¸Š// å®šä¹‰è¯­æ³•: èŒƒå›´æ ‡è¯† (è¿”å›å€¼)å‡½æ•°å:å¤–éƒ¨å½¢å‚åˆ«å:(å‚æ•°ç±»å‹) å½¢å‚å å¤–éƒ¨å½¢å‚åˆ«å:(å‚æ•°ç±»å‹) å½¢å‚å// æ³¨: ç¬¬ä¸€ä¸ª å¤–éƒ¨å½¢å‚åˆ«å å¯çœç•¥- (void)insertObject:(id)anObject atIndex:(NSUInteger) index+ (void)insertObject:(id)anObject atIndex:(NSUInteger) index// è°ƒç”¨// å¯¹è±¡è°ƒç”¨ [å¯¹è±¡ å‡½æ•°å: å‚æ•°1 å¤–éƒ¨å½¢å‚åˆ«å: å‚æ•°2][obj insertObject: arg1 atIndex: arg2]// ç±»è°ƒç”¨ [ç±»å å‡½æ•°å: å‚æ•°1 å¤–éƒ¨å½¢å‚åˆ«å: å‚æ•°2][Object insertObject: arg1 atIndex: arg2]// æ³¨:) ç±»è°ƒç”¨ å’Œ å¯¹è±¡è°ƒç”¨ çš„å½¢å¼æ˜¯ä¸€æ ·çš„ å±æ€§è¯­æ³•12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758@interface Person : NSObject&#123;/*ç›¸å½“äº @public è‡³ @private ä¹‹é—´çš„å±æ€§è¢«æš´éœ²å‡ºå»å¯é€šè¿‡å®ä¾‹ç›´æ¥è®¿é—®, ä¾‹å¦‚: obj-&gt;name*/@public NSString *name;@private int age;&#125;/* å‚è€ƒ: http://justcoding.iteye.com/blog/1444548 ä½¿ç”¨èŒƒå›´: @interface, @protocol, @category å¯å£°æ˜ç‰¹æ€§: è¯»å†™å±æ€§ï¼š ï¼ˆreadwrite/readonlyï¼‰ setterè¯­æ„ï¼šï¼ˆassign/retain/copyï¼‰ åŸå­æ€§ï¼š ï¼ˆatomicity/nonatomicï¼‰ ä½¿ç”¨æ•ˆæœ(å£°æ˜ä¸€ä¸ªsetterä¸getteræ–¹æ³•): - (NSString*)name; - (void)setName: (NSString*)newName; */@property(copy) NSString *name;@property(readonly) int age;-(id)initWithAge:(int)age;@end@implementation Person/* ä½¿ç”¨èŒƒå›´: @implementation ä½¿ç”¨æ•ˆæœ(è‡ªåŠ¨å®ç°ä¸€ä¸ªsetterä¸getteræ–¹æ³•): - (NSString*)name &#123; return name; &#125; - (void)setName: (NSString*)newName &#123; name = newName; &#125; */@synthesize name;/* @dynamic ä»…ä»…æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨è¿™ä¸¤ä¸ªæ–¹æ³•åœ¨è¿è¡ŒæœŸä¼šæœ‰çš„ï¼Œæ— éœ€äº§ç”Ÿè­¦å‘Š */@dynamic age;-(id)initWithAge:(int)initAge&#123; age = initAge; // æ³¨æ„ï¼šç›´æ¥èµ‹ç»™æˆå‘˜å˜é‡ï¼Œè€Œéå±æ€§ return self;&#125;-(int)age&#123; return 29; // æ³¨æ„ï¼šå¹¶éè¿”å›çœŸæ­£çš„å¹´é¾„&#125;@end ç±»æˆ–åè®®çš„å±æ€§å¯ä»¥è¢«åŠ¨æ€çš„è¯»å– ç±»ä¼¼åå°„æœºåˆ¶ , ç•¥è¿‡.. å¿«é€Ÿæšä¸¾ ä¸€ç§çœå†…å­˜çš„å¾ªç¯éå† , ç•¥è¿‡.. åè®®è¯­æ³• ç±»ä¼¼ Java ä¸­çš„æ¥å£123456789101112131415161718192021/*å®šä¹‰åè®®*/@protocol Locking- (void)lock;- (void)unlock;@end/*ç±»çš„@interface å®£ç§°ä½¿ç”¨ åè®®*/@interface SomeClass : SomeSuperClass &lt;Locking&gt;@end/*ç±»çš„@implementation å®ç° åè®® ç»†èŠ‚*/@implementation SomeClass- (void)lock &#123; // å®ç°lockæ–¹æ³•...&#125;- (void)unlock &#123; // å®ç°unlockæ–¹æ³•...&#125;@end åŠ¨æ€ç±»å‹ id ç›¸å½“äº Java ä¸­çš„ Object, å³ ä»»æ„å¯¹è±¡ ç±»åˆ« (Category) è¯­æ³• åˆ†ç±»ä¸ä»…å¯ä»¥å¢åŠ ç±»çš„æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ä»£æ›¿åŸæœ‰çš„å‡½æ•°, å¹¶ä¸èƒ½æ–°å¢å˜é‡åŠ¨æ€å¢åŠ å’Œæ›¿æ¢å‡½æ•°, å¼ºå¾—ä¸€åŒ¹ 123456789101112131415161718192021222324252627282930313233/* è¯´æ˜: å®šä¹‰æ‰©å±• Integerç±» æ¥å£, æ–°å¢/è¦†ç›– å‡½æ•° showstars ä¸ showint è¯­æ³•: #import &quot;å¾…æ‰©å±•ç±»æ¥å£æ–‡ä»¶.h&quot; @interface å¾…æ‰©å±•ç±»(æ‰©å±•ç±») // å‡½æ•°å®šä¹‰ @end*/#import &quot;Integer.h&quot;@interface Integer(Display)- (id) showstars;- (id) showint;@end/* è¯´æ˜: å®ç°æ‰©å±• Integerç±» æ¥å£, æ–°å¢/è¦†ç›– å‡½æ•° showstars ä¸ showint è¯­æ³•: #import &quot;æ‰©å±•ç±»æ¥å£æ–‡ä»¶.h&quot; @implementation å¾…æ‰©å±•ç±»(æ‰©å±•ç±») // å‡½æ•°å®ç° @end*/#import &quot;Display.h&quot;@implementation Integer(Display)- (id) showstars &#123; ..&#125;- (id) showint &#123; ..&#125;@end NOTE: ä½¿ç”¨æ—¶éœ€#import å¾…æ‰©å±•ç±»ä¸æ‰©å±•ç±»çš„æ¥å£æ–‡ä»¶(.h) åˆ’é‡ç‚¹ NSString*/NSObject*ç­‰ è¡¨ç¤ºå¯¹è±¡ self æŸç§ç¨‹åº¦ç›¸å½“äº this nil åŸºæœ¬ä¸Šç­‰åŒäº NULL è°ƒç”¨å±æ€§ self-&gt;name ä¸€èˆ¬(.h å­˜æ”¾@interfaceæ–‡ä»¶, .m å­˜æ”¾@implementationæ–‡ä»¶). è¿›è¡Œ#importæ—¶, åªéœ€#import .hæ–‡ä»¶","categories":[{"name":"Mac","slug":"Mac","permalink":"https://hocg.in/categories/Mac/"}],"tags":[{"name":"è¯­æ³•","slug":"è¯­æ³•","permalink":"https://hocg.in/tags/è¯­æ³•/"},{"name":"Objective-C","slug":"Objective-C","permalink":"https://hocg.in/tags/Objective-C/"}],"keywords":[{"name":"Mac","slug":"Mac","permalink":"https://hocg.in/categories/Mac/"}]},{"title":"PHP Laravel å¿«é€Ÿå…¥é—¨","slug":"PHP-laravel-å¿«é€Ÿå…¥é—¨","date":"2017-03-01T06:59:38.000Z","updated":"2018-10-11T13:39:15.417Z","comments":true,"path":"2017/03/01/PHP-laravel-å¿«é€Ÿå…¥é—¨/","link":"","permalink":"https://hocg.in/2017/03/01/PHP-laravel-å¿«é€Ÿå…¥é—¨/","excerpt":"PHP æ¡†æ¶ Laravel æ­å»ºå¼€å§‹, æ…¢æ…¢æ›´æ–°~ ğŸ˜œğŸ˜œğŸ˜œğŸ˜œ","text":"PHP æ¡†æ¶ Laravel æ­å»ºå¼€å§‹, æ…¢æ…¢æ›´æ–°~ ğŸ˜œğŸ˜œğŸ˜œğŸ˜œ Quit Startä¸€. å®‰è£…composer, ç”¨äºç®¡ç†ä¾èµ– 123456# å…¨å±€å®‰è£… macOSbrew updatebrew tap josegonzalez/homebrew-phpbrew tap homebrew/versionsbrew install php55-intlbrew install josegonzalez/php/composer äºŒ. ä¸‹è½½laravel 1composer global require \"laravel/installer\" ä¸‰. åˆ›å»ºé¡¹ç›® 1composer create-project laravel/laravel --prefer-dist å››. å…³äºå¦‚ä½•ä½¿ç”¨PhpStorm é»˜è®¤å·²ç»é…ç½®å¥½PHPå¼€å‘ç¯å¢ƒäº†! 4.0.1 ç›¸å…³æ’ä»¶ Laravel Plugin [Optional] PHP Annotations Plugin [Optional] Symfony2 Plugin 4.1 é…ç½®Composer å³é”®é¡¹ç›®æ ¹èŠ‚ç‚¹ -&gt; Composer -&gt; init composer, é…ç½®PHPè§£é‡Šå™¨å’ŒComposerè·¯å¾„ å³é”®é¡¹ç›®æ ¹èŠ‚ç‚¹ -&gt; Composer -&gt; add dependency, æ·»åŠ barryvdh/laravel-ide-helper æˆ–è€… 1composer require barryvdh/laravel-ide-helper 4.2 ç¼–è¾‘config/app.phpæ–‡ä»¶, åœ¨providersèŠ‚ç‚¹ä¸‹é¢æ·»åŠ  4.3 æ‰©å±•å‘½ä»¤å·¥å…· Preferences -&gt; Tools -&gt; Command Line Tool Support ä½¿ç”¨: Tools -&gt; Run Command(âŒ˜ + â‡§ + X) 4.4 é…ç½® php-xdebug12# æ£€æŸ¥æ˜¯å¦å®‰è£…php-xdebugphp -m å®‰è£…åï¼Œä¿®æ”¹ä¸‹php.iniæŠŠxdebug.soå‰çš„æ³¨é‡Šâ€™;â€™å»æ‰ äº”. é…ç½®å¯åŠ¨ å…­. é…ç½®Debug å¹¶ä¸”åœ¨æ ¹ç›®å½•åŠ å…¥debug.ini 123456789101112xdebug.remote_enable = Onxdebug.remote_autostart = Onupload_max_filesize = 1000Mpost_max_size = 1005Mmax_execution_time = 120;xdebug.profiler_enable = On;xdebug.profiler_enable_trigger = Off;xdebug.profiler_output_dir = ./xdebug;xdebug.profiler_aggregate = On;xdebug.profiler_append = On;xdebug.profiler_output_name = &quot;cachegrind.out.%R.%u.%p&quot; èµ„æºLaravel Live Templates for PhpStormLaravel æ’ä»¶è§†é¢‘ æ ‡ç­¾ ç»§æ‰¿@extends å­˜åœ¨æ›¿æ¢@yield(&#39;content&#39;)@section@endsection å¢åŠ @stack(&quot;appendCSS&quot;)@push(&#39;appendCSS&#39;)@endpush æ³¨å…¥@inject(&quot;xx&quot;, &quot;xx[Name]&quot;)","categories":[{"name":"Server","slug":"Server","permalink":"https://hocg.in/categories/Server/"}],"tags":[{"name":"Mac","slug":"Mac","permalink":"https://hocg.in/tags/Mac/"},{"name":"PHP","slug":"PHP","permalink":"https://hocg.in/tags/PHP/"}],"keywords":[{"name":"Server","slug":"Server","permalink":"https://hocg.in/categories/Server/"}]},{"title":"Nginx éƒ¨ç½²","slug":"Nginx-éƒ¨ç½²","date":"2017-02-24T01:12:22.000Z","updated":"2018-10-11T13:39:15.402Z","comments":true,"path":"2017/02/24/Nginx-éƒ¨ç½²/","link":"","permalink":"https://hocg.in/2017/02/24/Nginx-éƒ¨ç½²/","excerpt":"ğŸ½ Nginx æ˜¯ä¸€ä¸ªå¾ˆå¼ºå¤§çš„é«˜æ€§èƒ½Webå’Œåå‘ä»£ç†æœåŠ¡å™¨","text":"ğŸ½ Nginx æ˜¯ä¸€ä¸ªå¾ˆå¼ºå¤§çš„é«˜æ€§èƒ½Webå’Œåå‘ä»£ç†æœåŠ¡å™¨ å‰è¨€ç¯å¢ƒOS: Ubuntu-16 å®‰è£…ä¾èµ– PCRE zlib nginx ç›®å½•ç»“æ„/opt|â€“ nginx-1.10.1|â€“ pcre-8.38`â€“ zlib-1.2.8 shell ä»¥ä¸‹æ“ä½œå‡åœ¨/optç›®å½• 123# tar -zxvf nginx-1.10.1.tar.gz# cd nginx-1.10.1# ./configure ERROR:12345checking for OS + Linux 2.6.32-042stab113.21 x86_64checking for C compiler ... not found./configure: error: C compiler cc is not found ç¼ºå¤±ç¼–è¯‘éƒ¨ä»¶, è§£å†³åŠæ³•å¦‚ä¸‹:12# apt-get install build-essential libtool# ./configure Error:1234./configure: error: the HTTP rewrite module requires the PCRE library.You can either disable the module by using --without-http_rewrite_moduleoption, or install the PCRE library into the system, or build the PCRE librarystatically from the source with nginx by using --with-pcre=&lt;path&gt; option. ç¼ºå¤±PCRE, ç§»æ­¥å®˜ç½‘ä¸‹è½½(é¡¶éƒ¨æœ‰é“¾æ¥), æˆ‘æ˜¯åœ¨/optç›®å½•ä¸­è§£å‹æ³¨: pcre æ²¡æœ‰ 2 ä»¥ä¸‹æ“ä½œå‡åœ¨/optç›®å½• 123# tar -jxvf pcre-8.38.tar.bz2# cd pcre-8.38# ./configure &amp;&amp; make &amp;&amp; make install å›åˆ°/opt/nginx-1.10.1ç›®å½•ç»§ç»­è¿›è¡Œ1# ./configure --with-pcre=/opt/pcre-8.38 Error:1234./configure: error: the HTTP gzip module requires the zlib library.You can either disable the module by using --without-http_gzip_moduleoption, or install the zlib library into the system, or build the zlib librarystatically from the source with nginx by using --with-zlib=&lt;path&gt; option. åŸå› æ˜¯ç¼ºå¤±zlib,ç§»æ­¥å®˜ç½‘ä¸‹è½½(é¡¶éƒ¨æœ‰é“¾æ¥), åŒæ ·æ˜¯åœ¨/optç›®å½•ä¸­è§£å‹ ä»¥ä¸‹æ“ä½œå‡åœ¨/optç›®å½• 123# tar -zxvf zlib-1.2.8.tar.gz# cd zlib-1.2.8# ./configure &amp;&amp; make &amp;&amp; make install å›åˆ°/opt/nginx-1.10.1ç›®å½•ç»§ç»­è¿›è¡Œ 123# ./configure --with-pcre=/opt/pcre-8.38 --with-zlib=/opt/zlib-1.2.8# make# make install è‡³æ­¤ï¼Œå®‰è£…ç»“æŸã€‚å¯æŸ¥çœ‹ls /usr/local/nginx/ç›®å½•æ˜¾ç¤ºå¦‚ä¸‹æ–‡ä»¶:/usr/local/nginx/ åŸºç¡€å‘½ä»¤ ä»¥ä¸‹å‘½ä»¤å‡åœ¨/usr/local/nginxç›®å½•ä¸‹è¿è¡Œ 12345678# å¯åŠ¨./sbin/nginx# æ£€æŸ¥é…ç½®./sbin/nginx -t# é‡æ–°åŠ è½½é…ç½®./sbin/nginx -s reload# æŸ¥çœ‹é…ç½®æ–‡ä»¶cat ./conf/nginx.conf æ‰©å±•nginx.confé…ç½®å­—æ®µè¯¦è§£ æ¨¡å—å¾…ç»­ing","categories":[{"name":"Server","slug":"Server","permalink":"https://hocg.in/categories/Server/"}],"tags":[{"name":"Ubuntu","slug":"Ubuntu","permalink":"https://hocg.in/tags/Ubuntu/"}],"keywords":[{"name":"Server","slug":"Server","permalink":"https://hocg.in/categories/Server/"}]},{"title":"å…³äºChrome æ’ä»¶å¼€å‘çš„ä¸€äº›çŸ¥è¯†ç‚¹","slug":"å…³äºChromeæ’ä»¶å¼€å‘çš„ä¸€äº›çŸ¥è¯†ç‚¹","date":"2017-02-04T05:20:51.000Z","updated":"2017-11-10T12:48:33.137Z","comments":true,"path":"2017/02/04/å…³äºChromeæ’ä»¶å¼€å‘çš„ä¸€äº›çŸ¥è¯†ç‚¹/","link":"","permalink":"https://hocg.in/2017/02/04/å…³äºChromeæ’ä»¶å¼€å‘çš„ä¸€äº›çŸ¥è¯†ç‚¹/","excerpt":"èº«ä¸ºChromeé‡åº¦æ‚£è€…ï¼Œç”Ÿæ´»å’Œå·¥ä½œå¤„å¤„ä¸ç¦»ï¼Œè¿™ç¯‡å¹¶ä¸æ˜¯å…¥é—¨æ•™ç¨‹ï¼Œè€Œæ˜¯å¼€å‘ä¸­çš„ä¸€äº›å°Tipçš„è®°å½•.","text":"èº«ä¸ºChromeé‡åº¦æ‚£è€…ï¼Œç”Ÿæ´»å’Œå·¥ä½œå¤„å¤„ä¸ç¦»ï¼Œè¿™ç¯‡å¹¶ä¸æ˜¯å…¥é—¨æ•™ç¨‹ï¼Œè€Œæ˜¯å¼€å‘ä¸­çš„ä¸€äº›å°Tipçš„è®°å½•. æˆ‘å¼€å‘çš„Chrome æ’ä»¶ å¤©æ°”é¢„æŠ¥ æ•°æ®å­˜å‚¨ HTML5 localStorage å­˜å‚¨åœ¨è§£æé¡µé¢å½“å‰èŒƒå›´å’Œç½‘ç«™å…±äº«localStorage Chrome API chrome.storage å­˜å‚¨åœ¨ç³»ç»Ÿç£ç›˜ï¼Œé€‚åˆå°‘é‡æ•°æ® Web SQL Database å­˜å‚¨åœ¨ç³»ç»Ÿç£ç›˜ï¼Œé€‚åˆå¤§é‡æ•°æ® è„šæœ¬è¿è¡ŒèŒƒå›´ background æµè§ˆå™¨æ‰“å¼€åè¿è¡Œ, ä¼šä¸€ç›´å­˜åœ¨äºåå°, å› æ­¤å¼€å‘æ—¶æ›´æ”¹åå¿…é¡»âŒ˜+Ré‡æ–°åŠ è½½ content_scripts åœ¨ç½‘é¡µåŠ è½½åè¿è¡Œ htmlå†…å¯¼å…¥çš„è„šæœ¬ è¿è¡Œäºè¯¥htmlé¡µé¢, ä¾‹å¦‚: optioné¡µé¢å’Œpopupé¡µé¢ Note: popup.js äºbackground.js æ˜¯å¯ä»¥è¿›è¡Œå…±é€šçš„.ä½¿ç”¨var BG = chrome.extension.getBackgroundPage(); BGä¾¿æ˜¯background.jsçš„windowå¯¹è±¡ Action å…¥å£ åœ°å€æ å³ä¾§å›¾æ ‡å¤– browser_action å¯æ˜¾ç¤ºbadge å³é”®èœå• chrome.contextMenus å¯åœ¨backgroundä¸­åˆ›å»º åœ°å€æ å³ä¾§å›¾æ ‡å†…å¤– page_action æ–°ç‰ˆçš„å·²æ›´æ”¹æ˜¾ç¤ºåœ¨å¤–å›´ PageAction API å¤šåŠŸèƒ½æ¡† omnibox å¯¹åœ°å€æ¡†è¿›è¡Œç›‘å¬ overrides å¦‚, ç®¡ç†ä¹¦ç­¾/å†å²è®°å½•/æ–°æ ‡ç­¾é¡µç­‰ (ä¸€ä¸ªæ‰©å±•åªèƒ½æ›¿æ¢ä¸€ä¸ªé¡µé¢) æ¡Œé¢æé†’ webkitNotifications.createNotification æƒé™ ç›¸å½“ä¸€éƒ¨åˆ†Chrome API ä½¿ç”¨éœ€è¦åœ¨Manifestç”³æ˜æƒé™ é¡µé¢é—´é€šä¿¡ popup ä¸ background é€šä¿¡ ä½¿ç”¨ä¸Šé¢æåˆ°çš„å…±é€šçš„ç‰¹æ€§ã€‚ ä½¿ç”¨ chrome.extension.onMessage.addListenerè¿›è¡Œé€šä¿¡ç›‘å¬ ä¸ ä½¿ç”¨chrome.extension.sendMessageè¿›è¡Œè§¦å‘ option ä¸ (popup æˆ–è€… background) é€šä¿¡ ä½¿ç”¨ chrome.extension.onMessage.addListenerè¿›è¡Œé€šä¿¡ç›‘å¬ ä¸ ä½¿ç”¨chrome.extension.sendMessageè¿›è¡Œè§¦å‘ (popup æˆ–è€… background) ä¸ option é€šä¿¡ ä½¿ç”¨ chrome.extension.onMessage.addListenerè¿›è¡Œé€šä¿¡ç›‘å¬, è§¦å‘æ–¹å¼æ¯”è¾ƒéº»çƒ¦, æŸ¥çœ‹ä»¥ä¸‹ä¾‹å­:12345678chrome.tabs.query(&#123;active: true, currentWindow: true&#125;, function (tabs) &#123; if (!!tabs &amp;&amp; tabs.length &gt; 0) &#123; chrome.tabs.sendMessage(tabs[0].id, &#123; //message.. &#125;, callback); &#125; &#125;); i18 CSS __MSG_@@key JS chrome.i18n.getMessage(â€˜keyâ€™); å…³äºæ‰“åŒ… &amp; å‘å¸ƒ æ‰©å±•ç¨‹åºä¸­è¿›è¡Œæ‰“åŒ…ï¼Œç”Ÿæˆ.crx(æ‰©å±•ç¨‹åº) &amp; .pem(ç§˜é’¥é‡è¦) å‰å¾€Chrome å¼€å‘è€…ä¸­å¿ƒ è®¤è¯éœ€æ”¯ä»˜5ç¾å…ƒç”¨äºè®¤è¯ æŠŠ.pemæ›´åä¸ºkey.pemå¹¶æ”¾å…¥æºç æ–‡ä»¶å¤¹ä¸­ï¼Œæ‰“åŒ…ä¸º.zipæ–‡ä»¶ ä¸Šä¼  å¹¶ç¼–è¾‘ (å¿…å¡« (æ‰©å±•æè¿°ã€ICON(128x128)ã€æ‰©å±•æˆªå›¾(1280x800 or 640x400)ã€ç±»åˆ«ã€è¯­è¨€)) å¦‚æœ‰é—æ¼æˆ–é”™è¯¯æ¬¢è¿è¡¥å……..","categories":[{"name":"IDE","slug":"IDE","permalink":"https://hocg.in/categories/IDE/"}],"tags":[{"name":"HTML5","slug":"HTML5","permalink":"https://hocg.in/tags/HTML5/"},{"name":"Chrome","slug":"Chrome","permalink":"https://hocg.in/tags/Chrome/"}],"keywords":[{"name":"IDE","slug":"IDE","permalink":"https://hocg.in/categories/IDE/"}]},{"title":"å…³äºlog4jæŠ¥é”™","slug":"å…³äºlog4jæŠ¥é”™","date":"2017-01-16T00:09:27.000Z","updated":"2017-02-04T05:57:15.000Z","comments":true,"path":"2017/01/16/å…³äºlog4jæŠ¥é”™/","link":"","permalink":"https://hocg.in/2017/01/16/å…³äºlog4jæŠ¥é”™/","excerpt":"Javaå¼€å‘ä¸­ç»å¸¸é‡åˆ°æ—¥å¿—å†²çªæˆ–è€…å¼‚å¸¸, å½»åº•çš„æ¥æ­¤è¿½æ ¹ç©¶åº•.","text":"Javaå¼€å‘ä¸­ç»å¸¸é‡åˆ°æ—¥å¿—å†²çªæˆ–è€…å¼‚å¸¸, å½»åº•çš„æ¥æ­¤è¿½æ ¹ç©¶åº•. æ—¥å¿—å†å² log4j JCL + log4j SLF4J slf4j-XXX-version.jar [XXXæŒ‡ä»£log4j12, jdk14, jcl, nop ç­‰] slf4j-api v1 log4j æ—©æœŸç›´æ¥å®ç°æ—¥å¿—æ‰“å°v2 JCL + log4j åŠ¨æ€ç»‘å®š, é¢å‘JCL æ¥å£å®ç°çš„log4jv3 slf4j-api æä¾› SLF4Jæ¥å£ é¢å‘å¯¹è±¡ç¼–ç¨‹slf4j-XXX-version.jar å¯¹æ¥å£å’ŒæŒ‡å®šXXXç§ç±»æ—¥å¿—çš„å…·ä½“å®ç° slf4j ä¸¾ä¾‹jar log4j-over-slf4j.jar æŠŠlog4jè½¬ä¸ºslf4j slf4j-log4j12.jar ä»¥slf4jæ ‡å‡†å®ç°çš„log4j12 XXX-over-slf4j.jar æŠŠæ—¥å¿—é‡å®šå‘åˆ°slf4j eg.jcl-over-slf4j.jar æ€»ç»“å³.Component | | log to Apache Commons Logging V jcl-over-slf4j.jar â€” (redirect) â€”&gt; SLF4j â€”&gt; slf4j-log4j12-version.jar â€”&gt; log4j.jar â€”&gt; è¾“å‡ºæ—¥å¿—è§£é‡Š:JCLå®ç°çš„é‡å®šå‘ä¸ºSLF4Jæ—¥å¿—å½¢å¼, ç„¶åSLF4Jè½¬ä¸ºLog4j12è¾“å‡º!","categories":[{"name":"Coder","slug":"Coder","permalink":"https://hocg.in/categories/Coder/"}],"tags":[{"name":"JAVA","slug":"JAVA","permalink":"https://hocg.in/tags/JAVA/"}],"keywords":[{"name":"Coder","slug":"Coder","permalink":"https://hocg.in/categories/Coder/"}]},{"title":"Redis ç›¸å…³","slug":"Redis-ç›¸å…³","date":"2016-10-20T01:11:48.000Z","updated":"2017-08-24T09:48:34.000Z","comments":true,"path":"2016/10/20/Redis-ç›¸å…³/","link":"","permalink":"https://hocg.in/2016/10/20/Redis-ç›¸å…³/","excerpt":"Redis çš„éƒ¨ç½²å’Œéƒ¨ä½è®¾è®¡çš„å®è·µ, è¿˜æœ‰å¸¸è§é—®é¢˜çš„æ¢³ç†! ğŸ’ª","text":"Redis çš„éƒ¨ç½²å’Œéƒ¨ä½è®¾è®¡çš„å®è·µ, è¿˜æœ‰å¸¸è§é—®é¢˜çš„æ¢³ç†! ğŸ’ª å‰è¨€å®˜ç½‘ è¯¦æƒ…é»˜è®¤é¡¹ ç«¯å£ 6379 ç›®å½•ç»“æ„redis-3.2.4/|â€“ redis.conf redisé…ç½®æ–‡ä»¶-- srcç¼–è¯‘åç›®å½•|-- redis-serverå¯åŠ¨bitæ–‡ä»¶`-- redis-cliç»ˆç«¯bitæ–‡ä»¶` å®‰è£… ä»¥ä¸‹æ“ä½œå‡åœ¨/opt1234567# ä¸‹è½½wget http://download.redis.io/releases/redis-3.2.4.tar.gz# è§£å‹tar -zxvf redis-3.2.4.tar.gzcd redis-3.2.4# ç¼–è¯‘ï¼Œ ç”Ÿæˆ`src`ç›®å½•make æŒ‡ä»¤ ä»¥ä¸‹æ“ä½œå‡åœ¨/opt1234# é»˜è®¤é…ç½®è¿è¡Œ./redis-3.2.4/src/redis-server# æŒ‡å®šé…ç½®æ–‡ä»¶è¿è¡Œ./redis-3.2.4/src/redis-server [config file] ç–‘é—®ï¼Ÿ å¦‚ä½•ä½¿redisåå°è¿è¡Œ? æ›´æ”¹é…ç½®æ–‡ä»¶, æ‰¾åˆ°daemonizeå­—æ®µ,æ›´æ”¹noä¸ºyes, é‡å¯redis åˆ‡è®°ï¼è¦æŒ‡å®šé…ç½®æ–‡ä»¶ å¦‚ä½•æ›´æ”¹redisé»˜è®¤6379ç«¯å£? æ›´æ”¹é…ç½®æ–‡ä»¶, æ‰¾åˆ°portå­—æ®µ,æ›´æ”¹ä¸ºæŒ‡å®šç«¯å£, é‡å¯redis åˆ‡è®°ï¼è¦æŒ‡å®šé…ç½®æ–‡ä»¶ å¦‚ä½•è®¾ç½®redisçš„éªŒè¯å¯†ç ? æ›´æ”¹é…ç½®æ–‡ä»¶, æ‰¾åˆ°requirepasså­—æ®µ, è®¾ç½®ç›¸åº”çš„éªŒè¯å¯†ç , é‡å¯redis åˆ‡è®°ï¼è¦æŒ‡å®šé…ç½®æ–‡ä»¶ç”±äºå¢åŠ äº†éªŒè¯å¯†ç ï¼Œå› æ­¤å®¢æˆ·ç«¯è¿æ¥å‘½ä»¤ä¸ºredis-cli â€“a [upassword]","categories":[{"name":"Server","slug":"Server","permalink":"https://hocg.in/categories/Server/"}],"tags":[{"name":"Tips","slug":"Tips","permalink":"https://hocg.in/tags/Tips/"},{"name":"Redis","slug":"Redis","permalink":"https://hocg.in/tags/Redis/"}],"keywords":[{"name":"Server","slug":"Server","permalink":"https://hocg.in/categories/Server/"}]},{"title":"Ubuntu ä¸‹çš„ Oh My ZSH!","slug":"Ubuntuä¸‹çš„OhMyZSH!","date":"2016-09-30T08:18:09.000Z","updated":"2017-09-22T12:48:41.000Z","comments":true,"path":"2016/09/30/Ubuntuä¸‹çš„OhMyZSH!/","link":"","permalink":"https://hocg.in/2016/09/30/Ubuntuä¸‹çš„OhMyZSH!/","excerpt":"å·ç§°ç»ˆæshell :)","text":"å·ç§°ç»ˆæshell :) å‰è¨€ä»€ä¹ˆæ˜¯zshï¼Ÿshellçš„ä¸€ç§,cat /etc/shellsæŸ¥çœ‹å½“å‰ç³»ç»Ÿæ”¯æŒçš„shell ç›¸å…³Linkä¸ºä»€ä¹ˆè¯´ zsh æ˜¯ shell ä¸­çš„æå“ï¼Ÿ ç¯å¢ƒOS: Ubuntu 16.04 x86_64 ç›®å½•ç»“æ„ ~/.zshrc æ–‡ä»¶zshé…ç½®æ–‡ä»¶ å¯ç”¨æ¥æ›´æ”¹Theme åŠ è½½Plugin ~/.oh-my-zsh oh-my-zshç›®å½• å®‰è£…12345678910# å®‰è£…zsh$ sudo apt-get install zsh# å®‰è£…oh-my-zsh$ sudo apt-get install wget git$ wget --no-check-certificate https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh -O - | sh# æ›¿æ¢zshä¸ºç³»ç»Ÿshell$ chsh -s /bin/zsh# é€€å‡º&amp;é‡æ–°ç™»å…¥$ exit# æŸ¥çœ‹æ˜¯å¦æˆåŠŸ é…ç½®æ–‡ä»¶zsh.config æ³¨æ„ éœ€æ›´æ”¹.oh-my-zshçš„ç›®å½• æ’ä»¶ä»‹ç» git;å¤„äºgité¡¹ç›®ä¸‹å‡ºç°æç¤º autojump; ç›®å½•è‡ªåŠ¨æç¤º, éœ€è¦Linux é¢å¤–å®‰è£… 12# ~/.bashrc è¿½åŠ [[ -s ~/.autojump/etc/profile.d/autojump.sh ]] &amp;&amp; . ~/.autojump/etc/profile.d/autojump.sh git;å¤„äºgité¡¹ç›®ä¸‹å‡ºç°æç¤º zsh-syntax-highlighting;é«˜äº®å¯ç”¨å‘½ä»¤ 12$ git clone git://github.com/jimmijj/zsh-syntax-highlighting ~/.oh-my-zsh/custom/plugins/zsh-syntax-highlightingplugins=(zsh-syntax-highlighting) colored-man-pages; å¸®åŠ©æ–‡æ¡£é«˜äº® colorize;æ›´å¤šä»£ç é«˜äº® copydir; æ•´ä¸ªç›®å½•æ‹·è´ command-not-found;å‘½ä»¤è¡Œæ™ºèƒ½æç¤º history;æŸ¥çœ‹è¾“å…¥å†å² z; autojumpåŒç±» ä¸»é¢˜ ys å°æŠ€å·§ è½¬æ¢è·¯å¾„æ—¶å¯ä»¥çœå»cdå‘½ä»¤ï¼Œç›´æ¥è¾“å…¥è·¯å¾„å³å¯ d å¯ä»¥æŸ¥çœ‹è®¿é—®è¿‡çš„è·¯å¾„ï¼Œç„¶åè¾“å…¥æ•°å­—å°±å¯ä»¥ç›´æ¥åˆ‡æ¢ è¾“å…¥ä¸å®Œæ•´çš„è·¯å¾„/æ–‡ä»¶/å‘½ä»¤ï¼ŒæŒ‰ä¸‹tabé”®å¯ä»¥å‡ºç°æç¤ºï¼Œå†æŒ‰tabåˆ™å¯ä»¥å®ç°è·¯å¾„è¡¥å…¨ æ™®é€šå‘½ä»¤ä½¿ç”¨ä¸¤æ¬¡tabå¯è¿›å…¥é€‰æ‹©æ¨¡å¼ï¼Œ ctrl+f/b/n/p å¯ä»¥å‘å‰åå·¦å³åˆ‡æ¢ kill + tab å¼ºå¼ºå¼º alias -s xx=â€™xxxâ€™ å¿«æ·é…ç½® ç›¸å…³è®¾ç½® cat ä»£ç é«˜äº®123pip install Pygments# å¢åŠ ä»¥ä¸‹alias# alias ccat='pygmentize -g' åç»­Oh My ZSH!","categories":[{"name":"IDE","slug":"IDE","permalink":"https://hocg.in/categories/IDE/"}],"tags":[{"name":"Ubuntu","slug":"Ubuntu","permalink":"https://hocg.in/tags/Ubuntu/"},{"name":"Tips","slug":"Tips","permalink":"https://hocg.in/tags/Tips/"},{"name":"Oh My ZSH","slug":"Oh-My-ZSH","permalink":"https://hocg.in/tags/Oh-My-ZSH/"}],"keywords":[{"name":"IDE","slug":"IDE","permalink":"https://hocg.in/categories/IDE/"}]},{"title":"Glup è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·","slug":"Glup-è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·","date":"2016-09-20T00:10:29.000Z","updated":"2017-09-22T12:55:01.000Z","comments":true,"path":"2016/09/20/Glup-è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·/","link":"","permalink":"https://hocg.in/2016/09/20/Glup-è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·/","excerpt":"Gulp.js æ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–æ„å»ºå·¥å…· ğŸ˜œ","text":"Gulp.js æ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–æ„å»ºå·¥å…· ğŸ˜œ æ¥æºGlup æ•´åˆ Glup Glupç”¨è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·å¢å¼ºä½ çš„å·¥ä½œæµç¨‹ï¼ å®‰è£…12$ npm install gulp -g$ npm install gulp --save-dev æ’ä»¶ ç¼–è¯‘Sass (gulp-ruby-sass) Autoprefixer (gulp-autoprefixer) ç¼©å°åŒ–(minify)CSS (gulp-minify-css) JSHint (gulp-jshint) æ‹¼æ¥ (gulp-concat) ä¸‘åŒ–(Uglify) (gulp-uglify) å›¾ç‰‡å‹ç¼© (gulp-imagemin) å³æ—¶é‡æ•´(LiveReload) (gulp-livereload) æ¸…ç†æ¡£æ¡ˆ (gulp-clean) å›¾ç‰‡å¿«å–ï¼Œåªæœ‰æ›´æ”¹è¿‡å¾—å›¾ç‰‡ä¼šè¿›è¡Œå‹ç¼© (gulp-cache) æ›´åŠ¨é€šçŸ¥ (gulp-notify)1$ npm install gulp-ruby-sass gulp-autoprefixer gulp-minify-css gulp-jshint gulp-concat gulp-uglify gulp-imagemin gulp-clean gulp-notify gulp-rename gulp-livereload gulp-cache --save-dev","categories":[{"name":"Coder","slug":"Coder","permalink":"https://hocg.in/categories/Coder/"}],"tags":[{"name":"NodeJS","slug":"NodeJS","permalink":"https://hocg.in/tags/NodeJS/"},{"name":"Ubuntu","slug":"Ubuntu","permalink":"https://hocg.in/tags/Ubuntu/"},{"name":"Tips","slug":"Tips","permalink":"https://hocg.in/tags/Tips/"}],"keywords":[{"name":"Coder","slug":"Coder","permalink":"https://hocg.in/categories/Coder/"}]},{"title":"Ngrokä½¿ç”¨æŒ‡å—","slug":"Ngrokä½¿ç”¨æŒ‡å—","date":"2016-08-30T23:15:24.000Z","updated":"2017-02-04T05:39:31.000Z","comments":true,"path":"2016/08/31/Ngrokä½¿ç”¨æŒ‡å—/","link":"","permalink":"https://hocg.in/2016/08/31/Ngrokä½¿ç”¨æŒ‡å—/","excerpt":"Ngrok æ˜¯ä¸€æ¬¾å†…éƒ¨ç«¯å£è½¬å‘ï¼Œå¯¹äºå¾®ä¿¡ç±»ä¼¼çš„å¼€å‘å¾ˆæœ‰ç”¨çš„ğŸ˜†å¯å‚ç…§å¢™å†…(èŠ±ç”Ÿå£³ or nat123)","text":"Ngrok æ˜¯ä¸€æ¬¾å†…éƒ¨ç«¯å£è½¬å‘ï¼Œå¯¹äºå¾®ä¿¡ç±»ä¼¼çš„å¼€å‘å¾ˆæœ‰ç”¨çš„ğŸ˜†å¯å‚ç…§å¢™å†…(èŠ±ç”Ÿå£³ or nat123) æ¦‚è¿°ç¼–è¯‘ç¯å¢ƒ:Go 1.4.1 å¼ºçƒˆå»ºè®®æ ¹åŸŸå: web.hocg.in,å³ç”Ÿæˆçš„åŸŸåä¸º*.web.hocg.inæ–‡ä»¶ç»“æ„:ngrok â”œâ”€â”€ bin â”‚ â””â”€â”€ ngrok.cfg â”œâ”€â”€ client.sh â”œâ”€â”€ code.sh â””â”€â”€ server.shéƒ¨ç½²ç¯å¢ƒ:æœåŠ¡å™¨OS: Ubuntu-15å®¢æˆ·ç«¯OS: Ubuntu-16 å®‰è£…ç¯å¢ƒä¾èµ–åŠæºç ä¸‹è½½ ä»¥ä¸‹å‘½ä»¤æ ¹ç›®å½•ç»Ÿä¸€åœ¨/opt 12345# ç¯å¢ƒä¾èµ–sudo apt-get install build-essential golang mercurial git# è·å– ngrok æºç git clone https://github.com/tutumcloud/ngrok.git ngrokcd ngrok ç”Ÿæˆè¯ä¹¦ &amp;&amp; ç¼–è¯‘ ä»¥ä¸‹å‘½ä»¤æ ¹ç›®å½•ç»Ÿä¸€åœ¨/opt/ngrok code.shæ–‡ä»¶ ç”Ÿæˆè¯ä¹¦ &amp;&amp; ç¼–è¯‘æœåŠ¡ç«¯DOMAIN ä¸ºé…ç½®çš„æ ¹åŸŸå, ç”¨äºç­¾å. 1234567891011121314151617181920212223#!/bin/bashecho \"å¼€å§‹æ¸…é™¤..\"rm -rf assets/client/tls/ngrokroot.crtrm -rf assets/server/tls/snakeoil.crtrm -rf assets/server/tls/snakeoil.keyrm -rf device.*rm -rf rootCA.*DOMAIN=web.hocg.inecho \"è®¾ç½®åŸŸåä¸º[*.$DOMAIN]\"echo \"å¼€å§‹ç”Ÿæˆç§˜é’¥..\"openssl genrsa -out rootCA.key 2048openssl req -x509 -new -nodes -key rootCA.key -subj \"/CN=$DOMAIN\" -days 5000 -out rootCA.pemopenssl genrsa -out device.key 2048openssl req -new -key device.key -subj \"/CN=$DOMAIN\" -out device.csropenssl x509 -req -in device.csr -CA rootCA.pem -CAkey rootCA.key -CAcreateserial -out device.crt -days 5000echo \"å¼€å§‹è¿ç§»ç§˜é’¥..\"cp -rf rootCA.pem assets/client/tls/ngrokroot.crtcp -rf device.crt assets/server/tls/snakeoil.crtcp -rf device.key assets/server/tls/snakeoil.keyecho \"å¼€å§‹ç¼–è¯‘..\"make release-server å®¢æˆ·ç«¯ å‰ç½®æ¡ä»¶: Goéœ€å…ˆå¢åŠ å¯¹è¿™äº›å¹³å°äº¤å‰ç¼–è¯‘çš„æ”¯æŒ Windowsgoçš„srcç›®å½• 1GOOS=windows GOARCH=amd64 ./make.bash nginxç›®å½•,ç¼–è¯‘1GOOS=windows GOARCH=amd64 make release-client macOSgoçš„srcç›®å½• 1GOOS=darwin GOARCH=amd64 ./make.bash nginxç›®å½•,ç¼–è¯‘1GOOS=darwin GOARCH=amd64 make release-client Linuxnginxç›®å½•,ç¼–è¯‘1make release-client é…ç½®æ–‡ä»¶ngrok.cfgæ–‡ä»¶ server_addr ä¸ºé…ç½®çš„æ ¹åŸŸåï¼Œ 4443ä¸ºé»˜è®¤ç«¯å£ 12server_addr: web.hocg.in:4443trust_host_root_certs: false è¿è¡Œæ–‡ä»¶server.shæ–‡ä»¶ æœåŠ¡å™¨è¿è¡ŒDOMAIN ä¸ºé…ç½®çš„æ ¹åŸŸå.æ³¨é‡Šçš„é‚£ä¸€å¥ç”¨äºåå°è¿è¡Œ 1234567#!/bin/bash# $1 HTTP# $2 HTTPSkillall ngrokdDOMAIN=web.hocg.in# nohup ./bin/ngrokd -domain=\"$DOMAIN\" -httpAddr=\":$1\" -httpsAddr=\":$2\" &gt;/tmp/ngrok.log 2&gt;&amp;1 &amp;./bin/ngrokd -domain=\"$DOMAIN\" -httpAddr=\":$1\" -httpsAddr=\":$2\" client.shæ–‡ä»¶ å®¢æˆ·ç«¯è¿è¡Œ, default:linuxå…·ä½“ç¯å¢ƒä¿®æ”¹å…·ä½“å†…å®¹ 1234#!/bin/bash# $1 Port# $2 domain./bin/ngrok -subdomain $2 -proto=http -config=./bin/ngrok.cfg $1 ä½¿ç”¨ è‹¥éœ€å˜æ›´åŸŸå, éœ€ä¿®æ”¹code.shçš„DOMAINã€server.shçš„DOMAINä¸./bin/ngrok.cfgçš„server_addr ç¼–è¯‘1sh code.sh æˆåŠŸ æ£€æŸ¥ngrok/binæ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨ngrok and ngrokd æœåŠ¡ç«¯1sh server.sh 8888 9999 å®¢æˆ·ç«¯1sh client.sh 8080 dm æ£€éªŒè®¿é—®:http://dm.web.hocg.in:8888 é‡è¦å…³äºåŸŸåè§£æeg. *.web.hocg.inè·¯å¾„è§£æéœ€é…ç½®*.web and web ä¸¤ä¸ªAè®°å½• å…³äºç­¾åæœ€å¥½åœ¨åŒä¸€ç¯å¢ƒè¿›è¡ŒæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„ç¼–è¯‘ å°æŠ€å·§ å¦‚ä½•è®©æœåŠ¡ç«¯çš„ngrokåå°è¿è¡Œ æ­£å¸¸çš„nohupæˆ–&amp;æ˜¯æ— æ³•ä½¿ngrokåå°è¿è¡Œçš„éœ€ä½¿ç”¨screen 123456789# å®‰è£…\\# apt-get install screen# ä½¿ç”¨screen -S [å‘½å] [éœ€æ”¾å…¥åå°çš„å‘½ä»¤]# ä½¿ç”¨ ctrl+A+D è®©å…¶è¿è¡Œåœ¨åå°# æŸ¥çœ‹screen åå°è¿›ç¨‹screen -ls# é‡æ–°è¿æ¥åå°è¿›ç¨‹screen -r [è¿›ç¨‹id] å¯èƒ½é‡åˆ°çš„å¼‚å¸¸ Go-1.2.1è¯­è¨€ç‰ˆæœ¬ä¸æ”¯æŒgo version12345# github.com/gorilla/websocketsrc/github.com/gorilla/websocket/client.go:361: unknown tls.Config field 'GetCertificate' in struct literalsrc/github.com/gorilla/websocket/client.go:370: unknown tls.Config field 'ClientSessionCache' in struct literalsrc/github.com/gorilla/websocket/client.go:373: unknown tls.Config field 'CurvePreferences' in struct literalmake: *** [client] Error 2 å®˜æ–¹Go-64çš„å®‰è£… Goç¼–è¯‘å™¨æ‰¾ä¸åˆ°go-bindata123GOOS=\"\" GOARCH=\"\" go get github.com/jteeuwen/go-bindata/go-bindata/bin/sh: 1: go: not foundmake: *** [bin/go-bindata] Error 127 è¯·æ³¨æ„é…ç½®å¥½GOROOTå’ŒGOPATH GOROOTä¸ºå®‰è£…GOçš„ç›®å½•GOPATHè‡ªå®šä¹‰ä¸€ä¸ªGOæ’ä»¶ä¸‹è½½ç›®å½• æ‰§è¡Œä»¥ä¸‹shellä¸‹è½½æ’ä»¶ 1go get -u github.com/jteeuwen/go-bindata/... END:)","categories":[{"name":"Server","slug":"Server","permalink":"https://hocg.in/categories/Server/"}],"tags":[{"name":"Ngrok","slug":"Ngrok","permalink":"https://hocg.in/tags/Ngrok/"},{"name":"Tip","slug":"Tip","permalink":"https://hocg.in/tags/Tip/"}],"keywords":[{"name":"Server","slug":"Server","permalink":"https://hocg.in/categories/Server/"}]},{"title":"Nexus å…¥é—¨","slug":"Nexuså…¥é—¨","date":"2016-08-24T11:03:01.000Z","updated":"2016-10-26T09:01:49.000Z","comments":true,"path":"2016/08/24/Nexuså…¥é—¨/","link":"","permalink":"https://hocg.in/2016/08/24/Nexuså…¥é—¨/","excerpt":"é€‚åˆnexuså…¥é—¨ï¼Œä¸æ˜¯æ‰‹æœºï¼Œä¸æ˜¯æ‰‹æœºï¼Œä¸æ˜¯æ‰‹æœº ï¼ï¼ï½ï¼ˆâ•¯â–¡â•°ï¼‰ï½","text":"é€‚åˆnexuså…¥é—¨ï¼Œä¸æ˜¯æ‰‹æœºï¼Œä¸æ˜¯æ‰‹æœºï¼Œä¸æ˜¯æ‰‹æœº ï¼ï¼ï½ï¼ˆâ•¯â–¡â•°ï¼‰ï½ ç¯å¢ƒ Ubuntu-14.04.1 jdk1.8.0_102 nexus-2.12.0-01|å®˜ç½‘ åŸŸå:nexus.hocg.in å‰ç½®æ¡ä»¶ å®‰è£…å®Œjdkå¹¶é…ç½®å¥½ç¯å¢ƒå˜é‡ eg: javaæŸ¥çœ‹æ˜¯å¦æˆåŠŸ å®‰è£…æ¸©é¦¨æç¤º: ä»¥ä¸‹æ“ä½œéƒ½æ˜¯åœ¨/optç›®å½•ä¸‹ ä¸‹è½½&amp;è§£å‹123456# ä¸‹è½½wget https://sonatype-download.global.ssl.fastly.net/nexus/oss/nexus-2.12.0-01-bundle.tar.gz# è§£å‹tar -zxvf nexus-2.12.0-01-bundle.tar.gz# æ¸…ç†rm -rf *.gz æ–‡ä»¶/ç›®å½•è¯¦è§£ nexus-2.12.0-01 ç¨‹åºç›®å½• sonatype-work ä»“åº“ç›®å½•(å†…åŒ…å«ä»“åº“é…ç½®åŠjaråŒ…ä»“åº“) åŸºæœ¬æ“ä½œ1./nexus-2.12.0-01/bin/nexus &#123; console | start | stop | restart | status | dump &#125; è®¿é—® http://nexus.hocg.in:8081/nexus é»˜è®¤è´¦å·:admin é»˜è®¤å¯†ç : admin123 å¦‚ä½•ä½¿ç”¨Maven ä¸­é…ç½®ä»“åº“1234567&lt;repositories&gt; &lt;repository&gt; &lt;id&gt;Nexus&lt;/id&gt; &lt;name&gt;Nexus&lt;/name&gt; &lt;url&gt;http://nexus.hocg.in:8081/nexus/content/groups/public/&lt;/url&gt; &lt;/repository&gt; &lt;/repositories&gt; é—®é¢˜å¦‚ä½•ä¿®æ”¹é»˜è®¤8081ç«¯å£12vim /opt/nexus-2.12.0-01/conf/nexus.properties# ä¿®æ”¹application-port=8081é¡¹ å¦‚ä½•åˆ›å»ºç”¨æˆ·ç™»é™†ç³»ç»Ÿåï¼Œå·¦ä¾§Security &gt; Usersä¸­åˆ›å»º å¦‚ä½•ä½¿ç”¨æ„å»ºè´¦å·ä¿®æ”¹Settings.xmlæ–‡ä»¶ (Maven)1234567&lt;servers&gt; &lt;server&gt; &lt;id&gt;nexus.hocg.in&lt;/id&gt; &lt;username&gt;admin&lt;/username&gt; &lt;password&gt;admin123&lt;/password&gt; &lt;/server&gt;&lt;/servers&gt; å¦‚ä½•ä¿®æ”¹ç”¨æˆ·å¯†ç ç™»é™†ç³»ç»Ÿåï¼Œé¡¶éƒ¨ç‚¹å‡»ç”¨æˆ·å &gt; Profileä¸­ä¿®æ”¹ å¦‚ä½•å»ºç«‹ä¸ä¸­å¤®ä»“åº“çš„ç´¢å¼• Note: Nexusä¼šè‡ªåŠ¨å»ºç«‹ä»»åŠ¡è®¡åˆ’,ä¸€èˆ¬è¿œç¨‹ä»“åº“éƒ½æ¯”è¾ƒå¤§ï¼Œæ„å»ºä¼šæ¯”è¾ƒå¤šï¼Œå› æ­¤ç´¢å¼•æ–‡ä»¶ä¼šå¾ˆå¤§ï¼Œè¯·ç¡®ä¿ç£ç›˜å¤§å°å……è¶³. å¯èƒ½å‡ºç°çš„æŠ¥é”™ 1 WARNING - NOT RECOMMENDED TO RUN AS ROOT , åŸå› æ˜¯æé†’ä½ æ˜¯å¦ç¡®è®¤ç”¨rootç”¨æˆ·è¿è¡Œ12345678\\# ./nexus-2.12.0-01/bin/nexus restart****************************************WARNING - NOT RECOMMENDED TO RUN AS ROOT****************************************Stopping Nexus OSS...Nexus OSS was not running.Starting Nexus OSS...Started Nexus OSS. è§£å†³:1234567891011vim ./nexus-2.12.0-01/bin/nexus# åŠ å…¥ç³»ç»Ÿå˜é‡vi /etc/profile# åŠ å…¥export RUN_AS_USER=root# ä¿®æ”¹RUN_AS_USER=root# å¯åŠ¨./nexus-2.12.0-01/bin/nexus start# æŸ¥çœ‹æ˜¯å¦å¯åŠ¨æˆåŠŸ./nexus-2.12.0-01/bin/nexus status# ç¨ç­‰å‡ åˆ†é’Ÿå†è®¿é—®","categories":[{"name":"Server","slug":"Server","permalink":"https://hocg.in/categories/Server/"}],"tags":[{"name":"Tips","slug":"Tips","permalink":"https://hocg.in/tags/Tips/"},{"name":"Nexus","slug":"Nexus","permalink":"https://hocg.in/tags/Nexus/"}],"keywords":[{"name":"Server","slug":"Server","permalink":"https://hocg.in/categories/Server/"}]},{"title":"Android L åŠä»¥ä¸Šç‰ˆæœ¬RomåŒ…ä¸­æå–apk","slug":"Android-L-åŠä»¥ä¸Šç‰ˆæœ¬RomåŒ…ä¸­æå–apk","date":"2016-08-07T11:19:29.000Z","updated":"2018-10-11T13:39:15.397Z","comments":true,"path":"2016/08/07/Android-L-åŠä»¥ä¸Šç‰ˆæœ¬RomåŒ…ä¸­æå–apk/","link":"","permalink":"https://hocg.in/2016/08/07/Android-L-åŠä»¥ä¸Šç‰ˆæœ¬RomåŒ…ä¸­æå–apk/","excerpt":"æå–æƒ³è¦çš„apkï¼Œ ä¾‹å¦‚CM ROMåŒ…ä¸­çš„å«å¤©æ°”çš„æ—¶é’Ÿä¸é”™ï¼","text":"æå–æƒ³è¦çš„apkï¼Œ ä¾‹å¦‚CM ROMåŒ…ä¸­çš„å«å¤©æ°”çš„æ—¶é’Ÿä¸é”™ï¼ ä»¥å¾€ç‰ˆæœ¬ Android RomåŒ…åªéœ€è§£å‹åï¼Œå–å‡ºsystemåŒ…å³å¯å–å‡ºå†…éƒ¨apk Now è§£å‹åå¯ä»¥å‘ç°ï¼Œæ–‡ä»¶å‘ç”Ÿäº†æ”¹å˜å¹¶ä¸”system.new.datæ­¤æ–‡ä»¶æ˜¯ä¸æ”¯æŒç›´æ¥è§£å‹çš„ã€‚ ç¯å¢ƒç³»ç»Ÿ: win10å·¥å…·: ä¸‹è½½ ç¯å¢ƒè‡ªå¤‡ æ“ä½œæ­¥éª¤ æ™®é€šæ–¹å¼è§£å‹ROM è¿è¡Œä¸‹è½½å·¥å…·ä¸­.batæ–‡ä»¶Extractor.bat æ ¹æ®æç¤ºé€‰æ‹©1ï¼Œå¹¶å¤åˆ¶system.new.dat, system.transfer.listï¼Œfile_contextsä¸‰ä¸ªæ–‡ä»¶åˆ°batæ–‡ä»¶æ‰€åœ¨ç›®å½• æŒ‰ä»»æ„é”®ç»§ç»­ å®Œæˆåå¯ä»¥å¾—åˆ°ä¸€ä¸ªsystemæ–‡ä»¶å¤¹ å˜¿å˜¿å˜¿.. é—®é¢˜! æœ‰å¯èƒ½åœ¨ä½ å®‰è£…apkçš„æ—¶å€™å‡ºç°åº”ç”¨æœªå®‰è£…çš„æƒ…å†µ å¯ä»¥å°è¯•é‡æ–°å¯¹apkè¿›è¡Œç­¾å æ£€æŸ¥æ˜¯å¦å·²ç»å®‰è£…è¿‡è¯¥apk End","categories":[{"name":"Android","slug":"Android","permalink":"https://hocg.in/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"https://hocg.in/tags/Android/"},{"name":"æ‰‹æœº","slug":"æ‰‹æœº","permalink":"https://hocg.in/tags/æ‰‹æœº/"}],"keywords":[{"name":"Android","slug":"Android","permalink":"https://hocg.in/categories/Android/"}]},{"title":"æ¨¡å—è®¾è®¡ä¹‹å¯¹æ¥åŒæ­¥è®¢å•æ¨¡å—","slug":"æ¨¡å—è®¾è®¡ä¹‹å¯¹æ¥åŒæ­¥è®¢å•æ¨¡å—","date":"2016-08-02T02:47:06.000Z","updated":"2018-10-11T13:39:15.427Z","comments":true,"path":"2016/08/02/æ¨¡å—è®¾è®¡ä¹‹å¯¹æ¥åŒæ­¥è®¢å•æ¨¡å—/","link":"","permalink":"https://hocg.in/2016/08/02/æ¨¡å—è®¾è®¡ä¹‹å¯¹æ¥åŒæ­¥è®¢å•æ¨¡å—/","excerpt":"å®ä¹ æœŸé—´è®¾è®¡çš„å¯¹æ¥åŒæ­¥è®¢å•çš„æŸå—, ç¼…æ€€..è®¾è®¡æ—¥æœŸ(2016.6)","text":"å®ä¹ æœŸé—´è®¾è®¡çš„å¯¹æ¥åŒæ­¥è®¢å•çš„æŸå—, ç¼…æ€€..è®¾è®¡æ—¥æœŸ(2016.6) å‰è¨€ #å¯¹æ¥åŒæ­¥è®¢å•æ¨¡å—# è¯¥éƒ¨åˆ†æ˜¯æˆ‘å…¥èŒåè‡ªä¸»è®¾è®¡çš„ä¸€ä¸ªæ¨¡å—ï¼Œå› ä¸ºåˆæœŸé¢„è®¡å¯¹æ¥5å®¶å¹³å°çš„è®¢å•ï¼Œå¹¶è€ƒè™‘åˆ°åæœŸå¯èƒ½å¯¹æ¥æ›´å¤šå¹³å°å’Œå¹³å°è®¢å•æ•°é‡ç­‰ï¼Œæ‰€ä»¥æ‰©å±•æ€§å’Œæ€§èƒ½æ–¹é¢æ˜¯å¾ˆå€¼å¾—æ·±æ€çš„é—®é¢˜ã€‚ å¼€å‘å‘¨æœŸ (20day) å‰æœŸéœ€æ±‚çš„å¤šæ¬¡å˜æ›´ï¼Œå¤§å¤§çš„æµªè´¹äº†å¼€å‘å‘¨æœŸ. åº“è¡¨è®¾è®¡ æ¥å£æ•´ç†å’Œæ•´åˆè®¾è®¡(ä¸»è¦æ˜¯å¯¹æ¥å¹³å°çš„æ¥å£æ•´åˆç­‰) ä»£ç ç¼–å†™ ä¸šåŠ¡æµç¨‹å›¾è¡¨ å•†å“è¡¨,å­˜å‚¨å•†å“ä¿¡æ¯, ä¸»è¦é…åˆæ–¹æ¡ˆåŒ¹é… æˆæƒè¡¨,å­˜å‚¨ç”¨æˆ·æˆæƒä¿¡æ¯ï¼Œä¸»è¦ç”¨äºtokenç®¡ç† å¹³å°é…ç½®è¡¨,å­˜å‚¨å¹³å°keyä¿¡æ¯ æ–¹æ¡ˆè¡¨,å·²å­˜åœ¨ï¼Œå­˜å‚¨æ–¹æ¡ˆä¿¡æ¯ v1ç‰ˆæ€è·¯å›¾ ä¸šåŠ¡å›¾ åŸå…ˆï¼Œè¯¥éƒ¨åˆ†è®¾è®¡æ˜¯ä¸è€ƒè™‘å¯¹è®¢å•æ•°æ®è¿›è¡Œç¼“å­˜å¤„ç†çš„ï¼Œä½†åæœŸéœ€æ±‚å¤šæ¬¡å˜æ›´è¢«è¿«è¿›è¡Œæ•°æ®ç¼“å­˜ï¼Œå› æ­¤å†åŸå…ˆçš„åŸºç¡€ä¸Šå»ºç«‹äº†çº¿ç¨‹æ± å¹¶å¯¹åŒæ­¥è®¢å•éƒ¨åˆ†è¿›è¡Œå¼‚æ­¥çº¿ç¨‹å¤„ç†ï¼Œå› æ­¤å¢åŠ äº†ä¸€å¼ è®¢å•ç¼“å­˜è¡¨å’Œäº‹ä»¶é˜Ÿåˆ—è¡¨ã€‚ v2ç‰ˆæ€è·¯å›¾ ä¸šåŠ¡å›¾ åé¢åˆå¯¹ç¼“å­˜è¡¨è¿›è¡Œäº†æ•°æ®å»é‡é˜²æ­¢è¡¨æ•°æ®çˆ†ç‚¸æ€§å¢é•¿ã€‚ æ€»ç»“ æŠŠå…¬å…±æŠ½ç¦»å‡ºæ¥ï¼Œä¸­é—´æ–°å¢è½¬åŒ–å±‚å¯ä»¥å¾ˆå¥½çš„è§£å†³ä»£ç å¤ç”¨çš„é—®é¢˜.","categories":[{"name":"Coder","slug":"Coder","permalink":"https://hocg.in/categories/Coder/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://hocg.in/tags/Java/"},{"name":"è®¾è®¡æ€è·¯","slug":"è®¾è®¡æ€è·¯","permalink":"https://hocg.in/tags/è®¾è®¡æ€è·¯/"}],"keywords":[{"name":"Coder","slug":"Coder","permalink":"https://hocg.in/categories/Coder/"}]},{"title":"æ¨¡å—è®¾è®¡ä¹‹æ¶ˆæ¯æ¨¡å—","slug":"æ¨¡å—è®¾è®¡ä¹‹æ¶ˆæ¯æ¨¡å—","date":"2016-07-30T11:25:56.000Z","updated":"2018-10-11T13:39:15.422Z","comments":true,"path":"2016/07/30/æ¨¡å—è®¾è®¡ä¹‹æ¶ˆæ¯æ¨¡å—/","link":"","permalink":"https://hocg.in/2016/07/30/æ¨¡å—è®¾è®¡ä¹‹æ¶ˆæ¯æ¨¡å—/","excerpt":"æ–°æ‰‹ä¸Šè·¯ï¼Œå°å¿ƒæ’è½¦..","text":"æ–°æ‰‹ä¸Šè·¯ï¼Œå°å¿ƒæ’è½¦.. å‰è¨€ #æ¶ˆæ¯æ¨¡å—# è¿™æ˜¯æˆ‘åˆšå…¥èŒæ—¶æ‰€æ¥è§¦çš„ç¬¬ä¸€ä¸ªæ¨¡å—ï¼Œä¹Ÿç®—æ˜¯æ¯”è¾ƒå¤§çš„æ¨¡å—äº†ã€‚è¿™ä¸ªæ¨¡å—çš„ä¸šåŠ¡æ˜¯è´Ÿè´£æ•´ä¸ªé¡¹ç›®æ‰€æœ‰çš„æ¶ˆæ¯å‡ºå…¥å£ï¼ŒåŒ…å«çŸ­ä¿¡å‘é€ï¼ŒAPPæ¨é€ï¼Œé‚®ä»¶å‘é€ä»¥åŠå‰åç«¯äººå‘˜ç«™å†…æ¶ˆæ¯ã€‚å½“æ—¶è®¾è®¡çš„æ—¶å€™éœ€æ±‚æ¶æ„æ¯”è¾ƒç®€å•è€Œä¸”æ—¶é—´ç´§è¿«(Ï€__Ï€)ï¼Œæ²¡æœ‰ä»æ ¹æœ¬ç†æ¸…ä¸šåŠ¡å’ŒåŠŸèƒ½åæœŸå­˜åœ¨çš„æ‰©å±•ã€‚å› æ­¤ï¼Œè¿™ç¯‡æ–‡ç« æ˜¯è®°å½•å½“æ—¶æ¶æ„çš„æ€è·¯å’Œéœ€è¦æ”¹å–„çš„åœ°æ–¹ã€‚ å¼€å‘å‘¨æœŸ (10day) åº“è¡¨è®¾è®¡ æ¥å£æ•´ç†å’Œæ•´åˆè®¾è®¡(çŸ­ä¿¡&amp;å‹ç›Ÿ&amp;é‚®ä»¶ç­‰) ä»£ç ç¼–å†™ ä¸šåŠ¡æµç¨‹å›¾è¡¨ æ¶ˆæ¯è®°å½•è¡¨, ä¸»è¦è´Ÿè´£æ¶ˆæ¯å‡ºå…¥å£è®°å½• äº‹ä»¶è§¦å‘è¡¨, ä¸»è¦å¯¹æ¶ˆæ¯è¿›è¡Œæ§åˆ¶ï¼Œä¾‹å¦‚: è§¦å‘è®¢å•å˜æ›´æ¨é€åˆ°ç”¨æˆ·/è¿è¥äººå‘˜ and so on æ¶ˆæ¯çŠ¶æ€è¡¨, ä¸»è¦è´Ÿè´£æ¶ˆæ¯å‘é€çš„çŠ¶æ€ï¼ŒåŒ…å«å®šæ—¶å‘é€ï¼Œæ’¤é”€å‘é€ and so on å›¾ ç±»æµç¨‹å›¾ å¦‚å›¾ï¼Œæ­¤æ¨¡å¼ä¸»è¦æ˜¯åˆ©ç”¨å·¥å‚æ¨¡å¼, æä¾›å¤šç§æ¶ˆæ¯é€šé“å®ä¾‹ï¼Œç”±ä¸åŒçš„æ¶ˆæ¯é€šé“å¯¹è‡ªèº«é€šé“æ¶ˆæ¯è¿›è¡Œå¤„ç†ï¼Œç±»ä¼¼äºæŠŠè¥¿ç“œï¼Œç‰›è‚‰ï¼Œç™½èœç­‰é€å…¥ä¸åŒçš„å·¥å‚è¿›è¡ŒåŠ å·¥ï¼Œä½†æ˜¯åˆç”±é£Ÿå“è´¨é‡æ§åˆ¶ä¸­å¿ƒå¯¹å…¶è¿›è¡Œè®°å½•å’Œæ£€éªŒã€‚ ä¼˜ç‚¹: åæœŸä¾¿äºæ‰©å±•æ›´å¤šçš„é€šé“æ¨¡å¼ç¼ºç‚¹: å„ä¸ªæ¨¡å¼æ˜¯é ç±»å‹åŒºåˆ«çš„ï¼Œä¸ä¾¿äºè¿›è¡Œç»†èŠ‚åŒ–å¤„ç†(ä¾‹å¦‚ï¼Œå¯¹æŸéƒ¨åˆ†APPæ¨é€è¿›è¡Œå®šåˆ¶åŒ–ï¼Œè¿›å…¥æŸä¸ªActivityç­‰ç»†èŠ‚åŒ–å®šåˆ¶) è¿›ä¸€æ­¥ä¼˜åŒ–ç±»æµç¨‹å›¾ ä½¿ç”¨Routeè¿›è¡Œæ›´ç»†èŠ‚çš„å®šåˆ¶åŒ–å¤„ç†æ›´å¤šå®æˆ˜ï¼Œæ¨è å›¾ å›§ï¼Œå•çœ‹å›¾å¯èƒ½ç»†åˆ†ä¸å‡ºä¸¤è€…çš„å·®åˆ«ï¼Œé™„ä¸Šä¸€æ®µä»£ç å®ä¾‹ 123456789101112131415// è·¯ç”±è§„åˆ™åˆå§‹åŒ–ï¼Œç”¨äºå®šä¹‰åŒ¹é…è§„åˆ™NoticeRouter router = new NoticeRouter();route.rule() .noticeType(Notice.SMS) // ... æ›´å¤šç»†èŠ‚è§„åˆ™åŒ¹é… .handler(smsHandler) .end() .rule() .noticeType(Notice.EMail) // ... æ›´å¤šç»†èŠ‚è§„åˆ™åŒ¹é… .handler(emailHandler) .end()// å°†é€šçŸ¥å®ä½“é€šçŸ¥è·¯ç”±å¤„ç†router.route(message) æ€»ç»“ å……åˆ†è€ƒè™‘åæœŸä¸šåŠ¡éœ€æ±‚ (å°±ç®—éå¿…é¡»çš„ä¸šåŠ¡éœ€æ±‚) ä¸è¦å¦„æƒ³éœ€æ±‚æ˜¯æ’ä¹…ä¸å˜çš„ï¼Œéœ€æ±‚=å°ä¸‰ï¼Œæ‰©å±•=çœŸçˆ±","categories":[{"name":"Coder","slug":"Coder","permalink":"https://hocg.in/categories/Coder/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://hocg.in/tags/Java/"},{"name":"è®¾è®¡æ€è·¯","slug":"è®¾è®¡æ€è·¯","permalink":"https://hocg.in/tags/è®¾è®¡æ€è·¯/"}],"keywords":[{"name":"Coder","slug":"Coder","permalink":"https://hocg.in/categories/Coder/"}]},{"title":"Macçš„ä½¿ç”¨","slug":"Mac-ä½¿ç”¨","date":"2016-07-02T02:47:06.000Z","updated":"2016-08-27T05:29:43.000Z","comments":true,"path":"2016/07/02/Mac-ä½¿ç”¨/","link":"","permalink":"https://hocg.in/2016/07/02/Mac-ä½¿ç”¨/","excerpt":"ç•™å‘ï¼Œåˆšåˆšèµ·æ­¥ï¼Œæ¢³ç†ä¸­ingã€‚","text":"ç•™å‘ï¼Œåˆšåˆšèµ·æ­¥ï¼Œæ¢³ç†ä¸­ingã€‚ å°æŠ€å·§ åœ¨Dock éšè— iTerm2éšè—:1/usr/libexec/PlistBuddy -c \"Add :LSUIElement bool true\" /Applications/iTerm.app/Contents/Info.plist æ˜¾ç¤º:1/usr/libexec/PlistBuddy -c \"Delete :LSUIElement\" /Applications/iTerm.app/Contents/Info.plist","categories":[{"name":"OS","slug":"OS","permalink":"https://hocg.in/categories/OS/"}],"tags":[{"name":"Tips","slug":"Tips","permalink":"https://hocg.in/tags/Tips/"},{"name":"Mac","slug":"Mac","permalink":"https://hocg.in/tags/Mac/"}],"keywords":[{"name":"OS","slug":"OS","permalink":"https://hocg.in/categories/OS/"}]},{"title":"è°ˆJVMï¼Œå„ç§è¿‡ç¨‹","slug":"è°ˆJVM-å„ç§è¿‡ç¨‹","date":"2016-06-12T11:37:49.000Z","updated":"2018-10-11T13:39:15.358Z","comments":true,"path":"2016/06/12/è°ˆJVM-å„ç§è¿‡ç¨‹/","link":"","permalink":"https://hocg.in/2016/06/12/è°ˆJVM-å„ç§è¿‡ç¨‹/","excerpt":"è°ˆè°ˆJVM å„ç§è¿‡ç¨‹ï¼Œ XMindç­‰æˆ‘æ•´ç†ä¸€ä¸‹ï¼Œç¨åè´´å‡º å›§ï½æ¬¢è¿æŒ‡æ•™..update: 2016-08-03 14:44:12 æ›´æ–°äº†å›¾","text":"è°ˆè°ˆJVM å„ç§è¿‡ç¨‹ï¼Œ XMindç­‰æˆ‘æ•´ç†ä¸€ä¸‹ï¼Œç¨åè´´å‡º å›§ï½æ¬¢è¿æŒ‡æ•™..update: 2016-08-03 14:44:12 æ›´æ–°äº†å›¾ æ€»æ€è·¯ç¼–è¯‘è¿‡ç¨‹ -&gt; è¿è¡Œè¿‡ç¨‹[ç±»åŠ è½½å™¨è¿‡ç¨‹(ç±»çš„è£…è½½è¿‡ç¨‹) -&gt; æ‰§è¡Œè¿‡ç¨‹] å›¾ ç¼–è¯‘è¿‡ç¨‹.javaæ–‡ä»¶ -javacç¼–è¯‘-&gt; .classæ–‡ä»¶ {-JITç¼–è¯‘(è½¬åŒ–+ä¼˜åŒ–)-&gt; æœ¬åœ°æ–¹æ³•}[æ‰§è¡Œè¿‡ç¨‹ï¼Œå½“æ–¹æ³•æ‰§è¡Œé¢‘ç‡é«˜] å›¾ è¿è¡Œè¿‡ç¨‹ç±»åŠ è½½å™¨ -&gt; (æ‰§è¡Œå¼•æ“ -&gt; æœ¬åœ°åº“æ¥å£)[Java è¿è¡Œæ—¶æ•°æ®åŒº] -&gt; æœ¬åœ°æ–¹æ³•åº“ å›¾ ç±»åŠ è½½å™¨è¿‡ç¨‹[å¯åŠ¨]ç±»åŠ è½½å™¨(JNI) -&gt; [æ‰©å±•]ç±»åŠ è½½å™¨ -&gt; [ç³»ç»Ÿ]ç±»åŠ è½½å™¨ -&gt; [è‡ªå®šä¹‰]ç±»åŠ è½½å™¨ å›¾ ç±»è£…è½½è¿‡ç¨‹åŠ è½½æ–‡ä»¶åˆ°JVMå†…å­˜ -&gt; (æ ¡éªŒè¯­è¨€è§„èŒƒ -&gt; åˆ†é…ç»“æ„å­˜å‚¨ç±»çš„ä¿¡æ¯ -&gt; è¯¥ç±»å¸¸é‡æ± ä¸­ç¬¦å·æ›´æ”¹ä¸ºç›´æ¥å¼•ç”¨)[Linking] -&gt; ç±»åˆå§‹åŒ– å›¾ æ‰§è¡Œå¼•æ“æ‰§è¡Œè¿‡ç¨‹(é€è¡Œè¯»å–æŒ‡ä»¤)Threadå¯åŠ¨ -ç”Ÿæˆ-&gt; JVMæ ˆ -æ‰§è¡Œæ–¹æ³•-&gt; å‹å…¥æ ˆå¸§(åŒ…å« å±€éƒ¨å˜é‡æ•°ç»„&amp;æ“ä½œæ•°æ ˆ&amp;è¿è¡Œæ—¶å¸¸é‡æ± ) -&gt; é€è¡Œè¯»å–æŒ‡ä»¤&amp;&amp;è§£é‡Š(JVMæ ˆå¸§ ç¨‹åºè®¡æ•°å™¨å­˜æ”¾ä¸‹ä¸€æ¡æŒ‡ä»¤) -&gt; {JIT(è½¬åŒ–+ä¼˜åŒ–)-&gt; æœ¬åœ°æ–¹æ³•}[å½“æ–¹æ³•æ‰§è¡Œé¢‘ç‡é«˜] -æ‰§è¡Œ&amp;è¿ç®—-&gt; ç»“æœ(å­˜æ”¾ æ“ä½œæ•°æ ˆä¸­) -&gt; æ¨å‡ºæ ˆå¸§ å›¾ Java è¿è¡Œæ—¶æ•°æ®åŒº(è´¯ç©¿æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹)å…±äº«å‹æ•°æ®åŒºï¼šæ–¹æ³•åŒº(å«è¿è¡Œæ—¶å¸¸é‡æ± [å­˜æ”¾æ–¹æ³•&amp;å˜é‡çš„å®é™…åœ°å€])ã€å †(å­˜æ”¾å¯¹è±¡å®ä¾‹)éš”ç¦»å‹æ•°æ®åŒºï¼šJVM æ ˆã€æœ¬åœ°æ–¹æ³•æ ˆ(JNI)ã€ç¨‹åºè®¡æ•°å™¨ å›¾","categories":[{"name":"Coder","slug":"Coder","permalink":"https://hocg.in/categories/Coder/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://hocg.in/tags/Java/"},{"name":"JVM","slug":"JVM","permalink":"https://hocg.in/tags/JVM/"}],"keywords":[{"name":"Coder","slug":"Coder","permalink":"https://hocg.in/categories/Coder/"}]},{"title":"è°ˆJVMï¼Œå­—èŠ‚ç ","slug":"è°ˆJVM-å­—èŠ‚ç ","date":"2016-06-12T11:37:49.000Z","updated":"2016-08-27T05:35:58.000Z","comments":true,"path":"2016/06/12/è°ˆJVM-å­—èŠ‚ç /","link":"","permalink":"https://hocg.in/2016/06/12/è°ˆJVM-å­—èŠ‚ç /","excerpt":"è°ˆè°ˆJVMï¼Œæœ€è¿‘åœ¨ç ”ç©¶ç ´è§£jarï¼Œæœ‰è¿™æ–¹é¢ç»éªŒçš„éº»çƒ¦æŒ‡å¯¼ä¸€ä¸‹æ€è·¯..","text":"è°ˆè°ˆJVMï¼Œæœ€è¿‘åœ¨ç ”ç©¶ç ´è§£jarï¼Œæœ‰è¿™æ–¹é¢ç»éªŒçš„éº»çƒ¦æŒ‡å¯¼ä¸€ä¸‹æ€è·¯.. å‚è€ƒå‚è€ƒ1æŒ‡ä»¤æ•´ç† å¸¸ç”¨æŒ‡ä»¤123# åç¼–è¯‘æŸ¥çœ‹`ç±»æ–‡ä»¶`æ‰€æœ‰ä¿¡æ¯javap -verbose [class] å±€éƒ¨å˜é‡ç±»å‹ ç‰¹æ®Šå­—ç¬¦è¡¨ç¤º ç±»å‹ æè¿° c char charç±»å‹ i int intç±»å‹ l long longç±»å‹ s short shortç±»å‹ b byte byteç±»å‹ f float floatç±»å‹ z boolean å¸ƒå°”ç±»å‹ a reference å¼•ç”¨ æ–¹æ³•ä¿¡æ¯12345L1 LOCALVARIABLE this LMain; L0 L1 0 LOCALVARIABLE a I L0 L1 1 MAXSTACK = 0 MAXLOCALS = 2 å±€éƒ¨å˜é‡å‚æ•° LOCALVARIABLEå±€éƒ¨è¡¨å¤§å° MAXLOCALSæ“ä½œæ•°æ ˆå¤§å° MAXSTACK æŒ‡ä»¤è¿ç®—æŒ‡ä»¤ ç®—æœ¯æŒ‡ä»¤ç”¨äºå¯¹ä¸¤ä¸ªæ“ä½œæ•°æ ˆä¸Šçš„å€¼è¿›è¡ŒæŸç§ç‰¹å®šè¿ç®—ï¼Œå¹¶æŠŠç»“æœé‡æ–°å­˜å…¥åˆ°æ“ä½œæ ˆé¡¶ã€‚ åŠ æ³•æŒ‡ä»¤:iadd,ladd,fadd,dadd å‡æ³•æŒ‡ä»¤:isub,lsub,fsub,dsub ä¹˜æ³•æŒ‡ä»¤:imul,lmul,fmul,dmul é™¤æ³•æŒ‡ä»¤:idiv,ldiv,fdiv,ddiv æ±‚ä½™æŒ‡ä»¤:irem,lrem,frem,drem å–åæŒ‡ä»¤:ineg,leng,fneg,dneg ä½ç§»æŒ‡ä»¤:ishl,ishr,iushr,lshl,lshr,lushr æŒ‰ä½æˆ–æŒ‡ä»¤:ior,lor æŒ‰ä½ä¸æŒ‡ä»¤:iand,land æŒ‰ä½å¼‚æˆ–æŒ‡ä»¤:ixor,lxor å±€éƒ¨å˜é‡è‡ªå¢æŒ‡ä»¤:iinc æ¯”è¾ƒæŒ‡ä»¤:dcmpg,dcmpl,fcmpg,fcmpl,lcmp åŠ è½½å’Œå­˜å‚¨æŒ‡ä»¤ ç”¨äºå±€éƒ¨å˜é‡è¡¨å’Œæ“ä½œæ•°æ ˆä¹‹é—´æ¥å›ä¼ è¾“ å°†ä¸€ä¸ªå±€éƒ¨å˜é‡åŠ è½½åˆ°æ“ä½œæ•°æ ˆçš„æŒ‡ä»¤åŒ…æ‹¬ï¼šiload,iload_&lt;n&gt;ï¼Œlloadã€lload_&lt;n&gt;ã€floatã€fload_&lt;n&gt;ã€dloadã€dload_&lt;n&gt;ï¼Œaloadã€aload_&lt;n&gt;ã€‚ å°†ä¸€ä¸ªæ•°å€¼ä»æ“ä½œæ•°æ ˆå­˜å‚¨åˆ°å±€éƒ¨å˜é‡æ ‡çš„æŒ‡ä»¤ï¼šistore,istore_&lt;n&gt;,lstore,lstore_&lt;n&gt;,fstore,fstore_&lt;n&gt;,dstore,dstore_&lt;n&gt;,astore,astore_&lt;n&gt; å°†å¸¸é‡åŠ è½½åˆ°æ“ä½œæ•°æ ˆçš„æŒ‡ä»¤ï¼šbipush,sipush,ldc,ldc_w,ldc2_w,aconst_null,iconst_ml,iconst_&lt;i&gt;,lconst_&lt;l&gt;,fconst_&lt;f&gt;,dconst_&lt;d&gt; å±€éƒ¨å˜é‡è¡¨çš„è®¿é—®ç´¢å¼•æŒ‡ä»¤:wide ä¸€éƒ¨åˆ†ä»¥å°–æ‹¬å·ç»“å°¾çš„æŒ‡ä»¤ä»£è¡¨äº†ä¸€ç»„æŒ‡ä»¤ï¼Œå¦‚iload_&lt;i&gt;ï¼Œä»£è¡¨äº†iload_0,iload_1ç­‰ï¼Œè¿™å‡ ç»„æŒ‡ä»¤éƒ½æ˜¯å¸¦æœ‰ä¸€ä¸ªæ“ä½œæ•°çš„é€šç”¨æŒ‡ä»¤ã€‚ è¿ç®—æŒ‡ä»¤ å¯¹ä¸¤ä¸ªæ“ä½œæ•°æ ˆä¸Šçš„å€¼è¿›è¡ŒæŸç§ç‰¹å®šè¿ç®—ï¼Œå¹¶æŠŠç»“æœé‡æ–°å­˜å…¥åˆ°æ“ä½œæ ˆé¡¶ åŠ æ³•æŒ‡ä»¤:iadd,ladd,fadd,dadd å‡æ³•æŒ‡ä»¤:isub,lsub,fsub,dsub ä¹˜æ³•æŒ‡ä»¤:imul,lmul,fmul,dmul é™¤æ³•æŒ‡ä»¤:idiv,ldiv,fdiv,ddiv æ±‚ä½™æŒ‡ä»¤:irem,lrem,frem,drem å–åæŒ‡ä»¤:ineg,leng,fneg,dneg ä½ç§»æŒ‡ä»¤:ishl,ishr,iushr,lshl,lshr,lushr æŒ‰ä½æˆ–æŒ‡ä»¤:ior,lor æŒ‰ä½ä¸æŒ‡ä»¤:iand,land æŒ‰ä½å¼‚æˆ–æŒ‡ä»¤:ixor,lxor å±€éƒ¨å˜é‡è‡ªå¢æŒ‡ä»¤:iinc æ¯”è¾ƒæŒ‡ä»¤:dcmpg,dcmpl,fcmpg,fcmpl,lcmp ç±»å‹è½¬æ¢æŒ‡ä»¤ å°†ä¸¤ç§Javaè™šæ‹Ÿæœºæ•°å€¼ç±»å‹ç›¸äº’è½¬æ¢ JVMæ”¯æŒå®½åŒ–ç±»å‹è½¬æ¢(å°èŒƒå›´ç±»å‹å‘å¤§èŒƒå›´ç±»å‹è½¬æ¢)ï¼š intç±»å‹åˆ°long,float,doubleç±»å‹ longç±»å‹åˆ°float,doubleç±»å‹ floatåˆ°doubleç±»å‹ å¯¹è±¡åˆ›å»ºä¸æ“ä½œ è™½ç„¶ç±»å®ä¾‹å’Œæ•°ç»„éƒ½æ˜¯å¯¹è±¡ï¼ŒJavaè™šæ‹Ÿæœºå¯¹ç±»å®ä¾‹å’Œæ•°ç»„çš„åˆ›å»ºä¸æ“ä½œä½¿ç”¨äº†ä¸åŒçš„å­—èŠ‚ç æŒ‡ä»¤ã€‚ åˆ›å»ºå®ä¾‹çš„æŒ‡ä»¤:new åˆ›å»ºæ•°ç»„çš„æŒ‡ä»¤:newarray,anewarray,multianewarray è®¿é—®å­—æ®µæŒ‡ä»¤:getfield,putfield,getstatic,putstatic æŠŠæ•°ç»„å…ƒç´ åŠ è½½åˆ°æ“ä½œæ•°æ ˆæŒ‡ä»¤:baload,caload,saload,iaload,laload,faload,daload,aaload å°†æ“ä½œæ•°æ ˆçš„æ•°å€¼å­˜å‚¨åˆ°æ•°ç»„å…ƒç´ ä¸­æ‰§è¡Œ:bastore,castore,castore,sastore,iastore,fastore,dastore,aastore å–æ•°ç»„é•¿åº¦æŒ‡ä»¤:arraylength æ£€æŸ¥å®ä¾‹ç±»å‹æŒ‡ä»¤:instanceof,checkcast æ“ä½œæ•°æ ˆç®¡ç†æŒ‡ä»¤ç›´æ¥æ“ä½œæ“ä½œæ•°æ ˆçš„æŒ‡ä»¤ï¼špop,pop2,dup,dup2,dup_x1,dup2_x1,dup_x2,dup2_x2å’Œswap NOTE: å‹å…¥æ ˆé¡¶(DUP)/å¼¹å‡ºæ ˆé¡¶(POP) æ§åˆ¶è½¬ç§»æŒ‡ä»¤ æ¡ä»¶åˆ†æ”¯:ifeq,iflt,ifle,ifne,ifgt,ifge,ifnull,ifnotnull,if_cmpeq,if_icmpne,if_icmlt,if_icmpgtç­‰ å¤åˆæ¡ä»¶åˆ†æ”¯:tableswitch,lookupswitch æ— æ¡ä»¶åˆ†æ”¯:goto,goto_w,jsr,jsr_w,ret æ–¹æ³•è°ƒç”¨å’Œè¿”å›æŒ‡ä»¤ invokevirtualæŒ‡ä»¤:è°ƒç”¨å¯¹è±¡çš„å®ä¾‹æ–¹æ³•ï¼Œæ ¹æ®å¯¹è±¡çš„å®é™…ç±»å‹è¿›è¡Œåˆ†æ´¾(è™šæ‹Ÿæœºåˆ†æ´¾)ã€‚ invokeinterfaceæŒ‡ä»¤:è°ƒç”¨æ¥å£æ–¹æ³•ï¼Œåœ¨è¿è¡Œæ—¶æœç´¢ä¸€ä¸ªå®ç°è¿™ä¸ªæ¥å£æ–¹æ³•çš„å¯¹è±¡ï¼Œæ‰¾å‡ºåˆé€‚çš„æ–¹æ³•è¿›è¡Œè°ƒç”¨ã€‚ invokespecial:è°ƒç”¨éœ€è¦ç‰¹æ®Šå¤„ç†çš„å®ä¾‹æ–¹æ³•ï¼ŒåŒ…æ‹¬å®ä¾‹åˆå§‹åŒ–æ–¹æ³•ï¼Œç§æœ‰æ–¹æ³•å’Œçˆ¶ç±»æ–¹æ³• invokestatic:è°ƒç”¨ç±»æ–¹æ³•(static) æ–¹æ³•è¿”å›æŒ‡ä»¤æ˜¯æ ¹æ®è¿”å›å€¼çš„ç±»å‹åŒºåˆ†çš„ï¼ŒåŒ…æ‹¬ireturn(è¿”å›å€¼æ˜¯boolean,byte,char,shortå’Œint),lreturn,freturn,drturnå’Œareturnï¼Œå¦å¤–ä¸€ä¸ªreturnä¾›voidæ–¹æ³•ï¼Œå®ä¾‹åˆå§‹åŒ–æ–¹æ³•ï¼Œç±»å’Œæ¥å£çš„ç±»åˆå§‹åŒ–iæ–¹æ³•ä½¿ç”¨ã€‚ åŒæ­¥Eg:123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566// class version 52.0 (52)// access flags 0x21public class Main &#123; // compiled from: Main.java // access flags 0x11 public final I simpleField = 100 // access flags 0x0 &lt;init&gt;()V L0 LINENUMBER 12 L0 ALOAD 0 INVOKESPECIAL java/lang/Object.&lt;init&gt; ()V L1 LINENUMBER 10 L1 ALOAD 0 BIPUSH 100 PUTFIELD Main.simpleField : I L2 LINENUMBER 13 L2 GETSTATIC java/lang/System.out : Ljava/io/PrintStream; BIPUSH 100 INVOKEVIRTUAL java/io/PrintStream.print (I)V L3 LINENUMBER 14 L3 RETURN L4 LOCALVARIABLE this LMain; L0 L4 0 MAXSTACK = 2 MAXLOCALS = 1 // access flags 0x9 public static main([Ljava/lang/String;)V L0 LINENUMBER 16 L0 NEW Main DUP INVOKESPECIAL Main.&lt;init&gt; ()V ASTORE 1 L1 LINENUMBER 17 L1 GETSTATIC java/lang/System.out : Ljava/io/PrintStream; LDC &quot;--&gt;&quot; INVOKEVIRTUAL java/io/PrintStream.println (Ljava/lang/String;)V L2 LINENUMBER 19 L2 RETURN L3 LOCALVARIABLE args [Ljava/lang/String; L0 L3 0 LOCALVARIABLE main LMain; L1 L3 1 MAXSTACK = 2 MAXLOCALS = 2 // access flags 0x21 public synchronized a(I)V throws java/lang/Exception L0 LINENUMBER 23 L0 RETURN L1 LOCALVARIABLE this LMain; L0 L1 0 LOCALVARIABLE a I L0 L1 1 MAXSTACK = 0 MAXLOCALS = 2&#125;","categories":[{"name":"Coder","slug":"Coder","permalink":"https://hocg.in/categories/Coder/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://hocg.in/tags/Java/"},{"name":"JVM","slug":"JVM","permalink":"https://hocg.in/tags/JVM/"}],"keywords":[{"name":"Coder","slug":"Coder","permalink":"https://hocg.in/categories/Coder/"}]},{"title":"å…³äºHTTPS","slug":"Https-ç­¾è¯","date":"2016-06-02T03:22:43.000Z","updated":"2017-02-04T05:37:54.000Z","comments":true,"path":"2016/06/02/Https-ç­¾è¯/","link":"","permalink":"https://hocg.in/2016/06/02/Https-ç­¾è¯/","excerpt":"è¿™æ˜¯ä¸€ç¯‡å…³äºHTTPSçš„æ—¥å¸¸ä½¿ç”¨è®°å½•ï¼Œä¾‹å¦‚:åšå®¢HTTPSåŒ–~æ¥å§!å¹´è½»äºº!è£…é€¼HTTPSæ—¶ä»£åˆ°äº†","text":"è¿™æ˜¯ä¸€ç¯‡å…³äºHTTPSçš„æ—¥å¸¸ä½¿ç”¨è®°å½•ï¼Œä¾‹å¦‚:åšå®¢HTTPSåŒ–~æ¥å§!å¹´è½»äºº!è£…é€¼HTTPSæ—¶ä»£åˆ°äº† å…³äºhttpsä»€ä¹ˆæ˜¯HTTPS ? é€šä¿—çš„è®²ï¼šéšç§å®‰å…¨ GitHub page ä½¿ç”¨httpsä¸»è¦æ˜¯ä½¿ç”¨ Kloudsec ç”³è¯·è´¦å·ï¼Œå¡«å…¥å¾…è§£æçš„åŸŸå æŠŠDNSè§£æè½¬åˆ°è¯¥ç½‘ç«™æä¾›çš„åœ°å€ éªŒè¯é‚®ç®±å¹¶å¡«å…¥GitHub page IP å¼€å¯ç›¸å…³æœåŠ¡ PROTECTION -&gt; SSL Encryption PLUGIN STOREæˆå“NOTE: 2016å¹´09æœˆ04æ—¥ å‘ç°Kloudsecå·²ç»å€’é—­äº†ç°åœ¨ä½¿ç”¨çš„æ˜¯Cloudflareå…·ä½“ä½¿ç”¨æ³¨å†Œæ—¶æœ‰å¼•å¯¼æ•™ç¨‹(éœ€æŠŠåŸŸåè§£ææœåŠ¡å™¨æ”¹ä¸ºcloudflareçš„). è‡ªå·±æ­å»ºçš„blogå…è´¹çš„ä½¿ç”¨ Startsslæˆå“ TOMCAT é…ç½®httpsç¯å¢ƒ keytool æ•™ç¨‹å¤–ç½‘å›è°ƒå¯å°è¯•ä½¿ç”¨nat123 è‡ªå·±VPSä½¿ç”¨HTTPSLetâ€™s Encrypt :)","categories":[{"name":"Server","slug":"Server","permalink":"https://hocg.in/categories/Server/"}],"tags":[{"name":"HTTPS","slug":"HTTPS","permalink":"https://hocg.in/tags/HTTPS/"}],"keywords":[{"name":"Server","slug":"Server","permalink":"https://hocg.in/categories/Server/"}]},{"title":"ES6 æ–°ç‰¹æ€§","slug":"ES6-æ–°ç‰¹æ€§","date":"2016-05-10T02:28:29.000Z","updated":"2017-09-22T12:53:46.000Z","comments":true,"path":"2016/05/10/ES6-æ–°ç‰¹æ€§/","link":"","permalink":"https://hocg.in/2016/05/10/ES6-æ–°ç‰¹æ€§/","excerpt":"NodeJS çš„æ„å»ºå·¥å…·å±‚å‡ºä¸ç©·ï¼Œå› æ­¤äº†è§£ä¸€ä¸‹é™ˆæ—§äº‹ç‰©çš„è¿›å±•ã€‚","text":"NodeJS çš„æ„å»ºå·¥å…·å±‚å‡ºä¸ç©·ï¼Œå› æ­¤äº†è§£ä¸€ä¸‹é™ˆæ—§äº‹ç‰©çš„è¿›å±•ã€‚ ç®€ä»‹es6: ecmscript6 æ–°ç‰¹æ€§ let å—çº§ä½œç”¨åŸŸ, æ³¨: es5ä¸­varå£°æ˜çš„ä¸Šå…¨å±€èŒƒå›´çš„ const å¸¸é‡ class ç±» extends ç»§æ‰¿ super æŒ‡ä»£çˆ¶ç±»çš„å®ä¾‹ arrow functions è¯­æ³•ç³– 12345/** * è¯­æ³•: (å‚æ•°) =&gt; &#123;æ‰§è¡Œä»£ç &#125; **/function(i)&#123; return i + 1; &#125; //ES5(i) =&gt; &#123; i + 1 &#125; //ES6 template string æ¨¡ç‰ˆå­—ç¬¦ 1234567/** * è¯­æ³•: `$&#123;å˜é‡&#125;` **/ const name = 'hocgin'; console.log(`this is template strnig &lt;b&gt;$&#123;name&#125;&lt;/b&gt; `); destructuring 12345678let cat = 'ken'let dog = 'lili'let zoo = &#123;cat, dog&#125;console.log(zoo) //Object &#123;cat: \"ken\", dog: \"lili\"&#125;let dog = &#123;type: 'animal', many: 2&#125;let &#123; type, many&#125; = dogconsole.log(type, many) //animal 2 default é»˜è®¤å€¼ 12345678910/** * è¯­æ³•: * function &lt;method name&gt;(param = &lt;default value&gt;) &#123; * ... * &#125; **/ function animal(type = 'cat')&#123; console.log(type) &#125; animal(); rest å¯å˜å‚æ•° 12345678910/** * è¯­æ³•: * function &lt;method name&gt;(...params) &#123; * ... * &#125; **/ function animals(...types)&#123; console.log(types) &#125; animals('cat', 'dog', 'fish'); import export æ¨¡å—è®¾è®¡ es6 æŠŠä¸€ä¸ªæ–‡ä»¶å½“ä½œä¸€ä¸ªæ¨¡å—, ä¸€ä¸ªæ¨¡å—å¯exportå¤šä¸ªå˜é‡, å› æ­¤ä¸åŒçš„exportå¯å¯¹åº”ä¸åŒçš„import 12345678910111213141516171819// å¯¼å‡ºæ¨¡å—export animal// å¯¼å…¥æ¨¡å— - å˜é‡ä¸º animalimport animal from './content'//--------------------// å¯¼å‡ºæ¨¡å—export &#123;dog, cat&#125;// å¯¼å…¥æ¨¡å— - å˜é‡ä¸º [dog, cat]import &#123;dog, cat&#125; from './content'//--------------------export &#123;dog, cat&#125;// å…¨éƒ¨å¯¼å…¥import * as animal from './content'// ormodule animal form './content'//--------------------// é»˜è®¤å¯¼å‡º, ä¸€ä¸ªæ¨¡å—åªèƒ½ä½¿ç”¨ export default ä¸€æ¬¡export default 'dog dog'import animal from './content'","categories":[{"name":"Coder","slug":"Coder","permalink":"https://hocg.in/categories/Coder/"}],"tags":[{"name":"NodeJS","slug":"NodeJS","permalink":"https://hocg.in/tags/NodeJS/"},{"name":"Ubuntu","slug":"Ubuntu","permalink":"https://hocg.in/tags/Ubuntu/"},{"name":"Tips","slug":"Tips","permalink":"https://hocg.in/tags/Tips/"}],"keywords":[{"name":"Coder","slug":"Coder","permalink":"https://hocg.in/categories/Coder/"}]},{"title":"ä½¿ç”¨Mavenä¸‹è½½jaråŒ… linuxç‰ˆ","slug":"ä½¿ç”¨Mavenä¸‹è½½jaråŒ…-linuxç‰ˆ","date":"2016-04-25T01:38:49.000Z","updated":"2017-02-04T05:43:57.000Z","comments":true,"path":"2016/04/25/ä½¿ç”¨Mavenä¸‹è½½jaråŒ…-linuxç‰ˆ/","link":"","permalink":"https://hocg.in/2016/04/25/ä½¿ç”¨Mavenä¸‹è½½jaråŒ…-linuxç‰ˆ/","excerpt":"è¿™åªæ˜¯å­¦ä¹ Shellçš„å°è„šæœ¬, ç»ƒæ‰‹å·¥å…·ç½¢äº†.. æŠ˜è…¾!æŠ˜è…¾å•Š","text":"è¿™åªæ˜¯å­¦ä¹ Shellçš„å°è„šæœ¬, ç»ƒæ‰‹å·¥å…·ç½¢äº†.. æŠ˜è…¾!æŠ˜è…¾å•Š ç›®å½•ç»“æ„123Green4nodeJSâ”œâ”€â”€ down.sh // ä¸‹è½½shellï¼Œo(â•¯â–¡â•°)oå…¶å®å°±æ˜¯ä¸€æ¡shellâ””â”€â”€ pom.xml // æ­£å¸¸mavené…ç½® æ–‡ä»¶å†…å®¹down.sh å†…å®¹ï¼š1234567891011#!/bin/sh# Author: hocgin@gmail.com# -------------Use--------------# sh down.sh# ------------------------------# è¿è¡Œpom.xml ä¸‹è½½jarNOW_PATH=$(cd \"$(dirname \"$0\")\"; pwd)POM_XML=$NOW_PATH\"/pom.xml\"TARGET_DIR=$NOW_PATH\"/target\"mvn -f $POM_XML dependency:copy-dependenciessudo chmod -R 777 $TARGET_DIR pom.xml å†…å®¹ï¼š æ­£å¸¸mavençš„pom.xmlå†…å®¹ 1234567891011121314151617181920&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt; &lt;!-- é¡¹ç›®çš„åç§° start --&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;temp.download&lt;/groupId&gt; &lt;artifactId&gt;temp-download&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;!-- é¡¹ç›®çš„åç§° end --&gt; &lt;dependencies&gt; &lt;!-- è¦ä¸‹è½½çš„jar start --&gt; &lt;dependency&gt; &lt;groupId&gt;org.json&lt;/groupId&gt; &lt;artifactId&gt;json&lt;/artifactId&gt; &lt;version&gt;20160212&lt;/version&gt; &lt;/dependency&gt; &lt;!-- è¦ä¸‹è½½çš„jar end --&gt; &lt;/dependencies&gt;&lt;/project&gt; å®Œæˆ ä½¿ç”¨æ–¹æ³•123456source init.sh# Or. init.shcd hocgin.github.io# å°½æƒ…hexoå§ End","categories":[{"name":"Coder","slug":"Coder","permalink":"https://hocg.in/categories/Coder/"}],"tags":[{"name":"Tips","slug":"Tips","permalink":"https://hocg.in/tags/Tips/"},{"name":"Maven","slug":"Maven","permalink":"https://hocg.in/tags/Maven/"},{"name":"Shell","slug":"Shell","permalink":"https://hocg.in/tags/Shell/"}],"keywords":[{"name":"Coder","slug":"Coder","permalink":"https://hocg.in/categories/Coder/"}]},{"title":"ç»¿åŒ–NodeJS for linuxç‰ˆ","slug":"ç»¿åŒ–nodejs-for-linuxç‰ˆ","date":"2016-04-25T01:38:49.000Z","updated":"2016-08-27T05:35:32.000Z","comments":true,"path":"2016/04/25/ç»¿åŒ–nodejs-for-linuxç‰ˆ/","link":"","permalink":"https://hocg.in/2016/04/25/ç»¿åŒ–nodejs-for-linuxç‰ˆ/","excerpt":"èµ·å› ï¼Œä¸ºäº†æ–¹ä¾¿hexoå‘å¸ƒåšå®¢ï¼Œæ‰€ä»¥æƒ³æŠŠNodeJSç»¿åŒ–åœ¨Uç›˜ä¸Š..è°å«ç½‘ä¸Šåªæœ‰winç‰ˆçš„å‘¢ï¼è‡ªå·±ç èµ·æ¥ï½ç»¿åŒ– o(â•¯â–¡â•°)o","text":"èµ·å› ï¼Œä¸ºäº†æ–¹ä¾¿hexoå‘å¸ƒåšå®¢ï¼Œæ‰€ä»¥æƒ³æŠŠNodeJSç»¿åŒ–åœ¨Uç›˜ä¸Š..è°å«ç½‘ä¸Šåªæœ‰winç‰ˆçš„å‘¢ï¼è‡ªå·±ç èµ·æ¥ï½ç»¿åŒ– o(â•¯â–¡â•°)o ç›®å½•ç»“æ„12345678Green4nodeJSâ”œâ”€â”€ hocgin.github.io // githubåšå®¢ç›®å½•â”œâ”€â”€ node // nodejsåŸºæœ¬ç›®å½•â”‚ â”œâ”€â”€ node-linux // nodejsæºæ–‡ä»¶â”‚ â”œâ”€â”€ cache // åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ï¼Œå³å¯â”‚ â”œâ”€â”€ init-module // åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ï¼Œå³å¯â”‚ â””â”€â”€ userconfig // åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ï¼Œå³å¯â””â”€â”€ init.sh // åˆå§‹åŒ–shellæ–‡ä»¶ *é‡è¦ åˆå§‹åŒ–æ–‡ä»¶ ä¸»è¦æ˜¯åŠ è½½é…ç½®ç¯å¢ƒï¼Œåˆå§‹åŒ–å˜é‡ init.sh å†…å®¹123456789101112131415161718#!/bin/bash# Author: hocgin@gmail.com# -------------Use--------------# source init.sh or . init.sh# ------------------------------NOW_PATH=$(cd \"$(dirname \"$0\")\"; pwd)NODE_NAME=\"node-linux\"NODE_HOME=$NOW_PATH\"/node/\"$NODE_NAMENODE_PATH=$NODE_HOME\"/bin\"NPM_PATH=$NODE_HOME\"/lib/node_modules/npm/bin\"sudo chmod +x -R $NPM_PATH\"/.\"export PATH=$PATH:$NODE_PATH:$NPM_PATH# \"/home/hocgin/.npmrc\"npm set userconfig $NOW_PATH\"/node/userconfig\"# \"/home/hocgin/.npm-init.js\"npm set init-module $NOW_PATH\"/node/init-module\"# \"/home/hocgin/.npm\"npm set cache $NOW_PATH\"/node/cache\" ä¿®æ”¹ /node/node-linux/lib/node_modules/npm/bin/npm æ–‡ä»¶12# NPM_CLI_JS=\"$basedir/node_modules/npm/bin/npm-cli.js\"NPM_CLI_JS=\"$basedir/npm-cli.js\" å®Œæˆ ä½¿ç”¨æ–¹æ³•123456source init.sh# Or. init.shcd hocgin.github.io# å°½æƒ…hexoå§ æ³¨: å®‰è£…moduleæ—¶è¯·åŠ ä¸Š -g End","categories":[{"name":"Coder","slug":"Coder","permalink":"https://hocg.in/categories/Coder/"}],"tags":[{"name":"NodeJS","slug":"NodeJS","permalink":"https://hocg.in/tags/NodeJS/"},{"name":"Ubuntu","slug":"Ubuntu","permalink":"https://hocg.in/tags/Ubuntu/"},{"name":"Tips","slug":"Tips","permalink":"https://hocg.in/tags/Tips/"}],"keywords":[{"name":"Coder","slug":"Coder","permalink":"https://hocg.in/categories/Coder/"}]},{"title":"hexo åŠŸèƒ½æ‰©å±•","slug":"hexo-åŠŸèƒ½æ‰©å±•","date":"2016-03-26T05:44:28.000Z","updated":"2018-10-11T13:39:15.392Z","comments":true,"path":"2016/03/26/hexo-åŠŸèƒ½æ‰©å±•/","link":"","permalink":"https://hocg.in/2016/03/26/hexo-åŠŸèƒ½æ‰©å±•/","excerpt":"è¿™æ˜¯è‡ªå·±å‚ç…§hexoè¿›è¡Œç§äººè®¢åˆ¶çš„æ•™ç¨‹ï¼Œä¹Ÿæ˜¯å®æˆ˜çš„è®°å½•ï¼Œæ„Ÿè§‰è¿˜ä¸é”™ï¼Œæˆå“å¯å‚ç…§æœ¬åšå®¢.. ï¼ˆå¦‚æœæˆ‘ä»¥åæ²¡æ¢çš„è¯ğŸ˜¶ï¼‰","text":"è¿™æ˜¯è‡ªå·±å‚ç…§hexoè¿›è¡Œç§äººè®¢åˆ¶çš„æ•™ç¨‹ï¼Œä¹Ÿæ˜¯å®æˆ˜çš„è®°å½•ï¼Œæ„Ÿè§‰è¿˜ä¸é”™ï¼Œæˆå“å¯å‚ç…§æœ¬åšå®¢.. ï¼ˆå¦‚æœæˆ‘ä»¥åæ²¡æ¢çš„è¯ğŸ˜¶ï¼‰ é¡»çŸ¥ç«™ç‚¹ç›®å½•: /ä¸»é¢˜ç›®å½•: /themes/[ä¸»é¢˜å]ä¸»é¢˜é…ç½®æ–‡ä»¶: /themes/[ä¸»é¢˜å]/_config.ymlç«™ç‚¹é…ç½®æ–‡ä»¶: /_config.yml æ·»åŠ å¾®ä¿¡å…¬ä¼—å·äºŒç»´ç é¦–å…ˆï¼Œæ‰“å¼€ä¸»é¢˜ç›®å½•ä¸‹çš„ layout/_macro/post.swigç„¶åï¼Œæ‰¾åˆ°èŠ‚ç‚¹footeråŠ å…¥ä»¥ä¸‹ä»£ç 1234567891011121314&lt;! -- æ·»åŠ å¾®ä¿¡å›¾æ ‡ start --&gt; &#123;% if theme.wechat_subscriber.enable %&#125; &#123;% if !is_home() %&#125; &lt;div class=\"hocgin-container\"&gt; &lt;div class=\"folder\"&gt; &lt;div class=\"paper\"&gt; &lt;img width=\"100%\" src=\"&#123;&#123; theme.wechat_subscriber.qcode &#125;&#125;\"/&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=\"hocgin-description\"&gt;&#123;&#123; theme.wechat_subscriber.description &#125;&#125;&lt;/div&gt; &#123;% endif %&#125; &#123;% endif %&#125;&lt;! -- æ·»åŠ å¾®ä¿¡å›¾æ ‡ end --&gt; å…¶æ¬¡ï¼Œåˆ°ä¸»é¢˜ç›®å½•ä¸‹çš„source/cssåˆ›å»ºæ–‡ä»¶å¤¹_hocginå¹¶åœ¨å®ƒä¹‹ä¸‹åˆ›å»ºcssæ–‡ä»¶customize-hocgin.cssä»¥ä¸‹æ˜¯æ–‡ä»¶å†…å®¹ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849.hocgin-container *, *:before, *:after &#123; box-sizing: border-box;&#125;.hocgin-container &#123; position: relative; width: 100%; height: 100%;&#125;.hocgin-container &gt; .folder &#123; width: 220px; height: 180px; left: calc(50% - 110px); top: calc(70% - 90px); position: relative;&#125;.hocgin-container &gt; .folder &gt; .paper &#123; opacity: 1; position: absolute; overflow: hidden; width: 200px; height: 200px; top: calc(50% - 111px); left: calc(50% - 100px); transition: top 0.5s, opacity 0.4s; font-family: Verdana, Tahoma, sans-serif; font-size: 0.1em; padding: 1em; color: #644812; background-color: #fde1ab; -moz-box-shadow: 10px 10px rgba(0, 0, 0, 0.2); -webkit-box-shadow: 10px 10px rgba(0, 0, 0, 0.2); box-shadow: 10px 10px rgba(0, 0, 0, 0.2); -moz-border-radius: 5px; -webkit-border-radius: 5px; border-radius: 5px;&#125;.hocgin-container &gt; .folder:hover &gt; .paper &#123; top: calc(50% - 150px);&#125;.hocgin-container &gt; .folder.opened &gt; .paper &#123; top: calc(-250px); opacity: .9;&#125;.hocgin-description &#123; text-align: center; margin-top: 4px;&#125; ä¿å­˜åï¼Œæ‰¾åˆ°ä¸»é¢˜ç›®å½•ä¸‹source/css/main.styl(æ³¨ï¼šåˆ«çš„ä¸»é¢˜å¯èƒ½ä¸ä¸€æ ·) è¿½åŠ 12// --------------------------------------------------@import \"_hocgin/customize-hocgin.css\"; æœ€åï¼Œä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶ è¿½åŠ 12345# Customize args -- Hocginwechat_subscriber: enable: true qcode: [url] description: æ¬¢è¿æ‚¨æ‰«ä¸€æ‰«ä¸Šé¢çš„å¾®ä¿¡å…¬ä¼—å·ï¼Œè®¢é˜…æˆ‘çš„åšå®¢ï¼ æ•ˆæœhttp://hocg.in åº•éƒ¨åŠ å…¥æ‰“èµåŠŸèƒ½é¦–å…ˆï¼Œæ‰“å¼€ä¸»é¢˜ç›®å½•ä¸‹çš„ layout/_macro/post.swigç„¶åï¼Œæ‰¾åˆ°èŠ‚ç‚¹footeråŠ å…¥ä»¥ä¸‹ä»£ç 12345678910111213141516171819 &lt;! -- æ·»åŠ æ‰“èµå›¾æ ‡ start --&gt; &#123;% if theme.pay_money.enable %&#125; &#123;% if !is_home() %&#125; &lt;div class=\"hocgin-money\"&gt;&lt;div class=\"money-reward\"&gt; èµ &lt;div class=\"money-pay\"&gt; &lt;img width=\"100%\" src=\"&#123;&#123; theme.pay_money.weixin_qcode &#125;&#125;\"/&gt; &lt;/div&gt; &lt;div class=\"money-pay\"&gt; &lt;img width=\"100%\" src=\"&#123;&#123; theme.pay_money.alipay_qcode &#125;&#125;\"/&gt; &lt;/div&gt;&lt;/div&gt; &lt;/div&gt; &lt;br/&gt; &lt;br/&gt; &#123;% endif %&#125; &#123;% endif %&#125; &lt;! -- æ·»åŠ æ‰“èµå›¾æ ‡ end --&gt; å…¶æ¬¡ï¼Œåˆ°ä¸»é¢˜ç›®å½•ä¸‹çš„source/cssåˆ›å»ºæ–‡ä»¶å¤¹_hocginå¹¶åœ¨å®ƒä¹‹ä¸‹åˆ›å»ºcssæ–‡ä»¶money-customize-hocgin.cssä»¥ä¸‹æ˜¯æ–‡ä»¶å†…å®¹ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859.hocgin-money *, *:before, *:after &#123; box-sizing: border-box;&#125;.hocgin-money &gt; .money-reward &#123; font-size: 2.4rem; line-height: 4.6rem; display: block; width: 4.6rem; height: 4.6rem; margin: 0 auto; padding: 0; -webkit-user-select: none; text-align: center; vertical-align: middle; color: #fff; border: 1px solid #f1b60e; border-radius: 50%; background: #fccd60; background: -webkit-gradient(linear, left top, left bottom, color-stop(0, #fccd60), color-stop(100%, #fbae12), color-stop(100%, #2989d8), color-stop(100%, #207cca)); background: -webkit-linear-gradient(top, #fccd60 0, #fbae12 100%, #2989d8 100%, #207cca 100%); background: linear-gradient(to bottom, #fccd60 0, #fbae12 100%, #2989d8 100%, #207cca 100%); position: relative;&#125;.hocgin-money &gt; .money-reward &gt; .money-pay &#123; position: absolute; overflow: hidden; width: 200px; height: 200px; visibility: hidden; top: calc(50% - 100px); left: calc(50% - 100px); opacity: 0; transition: top 0.5s, opacity 0.4s; font-family: Verdana, Tahoma, sans-serif; font-size: 0.1em; padding: 1em; color: #644812; background-color: #fff; -moz-box-shadow: 0 1px 1px 1px #efefef; -webkit-box-shadow: 0 1px 1px 1px #efefef; box-shadow: 0 1px 1px 1px #efefef; border: 1px solid #e6e6e6;&#125;.hocgin-money &gt; .money-reward:hover &gt; .money-pay &#123; visibility: visible; opacity: 1; z-index: 10;&#125;.hocgin-money &gt; .money-reward:hover &gt; .money-pay:nth-child(1) &#123; top: calc(50% - 250px);&#125;.hocgin-money &gt; .money-reward:hover &gt; .money-pay:nth-child(2) &#123; top: calc(50% + 50px);&#125; ä¿å­˜åï¼Œæ‰¾åˆ°ä¸»é¢˜ç›®å½•ä¸‹source/css/main.styl(æ³¨ï¼šåˆ«çš„ä¸»é¢˜å¯èƒ½ä¸ä¸€æ ·) è¿½åŠ 12// --------------------------------------------------@import \"_hocgin/money-customize-hocgin.css\"; æœ€åï¼Œä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶ è¿½åŠ 12345# Customize args -- Hocginpay_money: enable: true weixin_qcode: http://cdn.hocgin.top/img/un/ali.pay.500.png alipay_qcode: http://cdn.hocgin.top/img/un/ali.pay.500.png å·²çŸ¥bug å› ä¸ºæ²¡ä½¿ç”¨js(ä¹Ÿä¸æƒ³ä½¿ç”¨)ï¼Œå®‰å“è®¾å¤‡éœ€è¦é•¿æŒ‰æ‰èƒ½å‡ºç°æ•ˆæœï¼Œè€Œè‹¹æœè®¾å¤‡æ— æ³•æ˜¾ç¤ºæ•ˆæœï¼Œæ¬¢è¿å¤§å®¶ä¿®å¤ã€‚â”Œ|*Â´âˆ€ï½€|â”˜ æ•ˆæœhttp://hocg.in é˜²æ­¢ç™¾åº¦è½¬ç ä¸»é¢˜ç›®å½•ä¸‹ \\layout\\_partials\\head.swig12&lt;meta http-equiv=â€Cache-Controlâ€ content=â€no-transformâ€ /&gt;&lt;meta http-equiv=â€Cache-Controlâ€ content=â€no-siteappâ€ /&gt; æ·»åŠ æœç´¢åŠŸèƒ½ 2016å¹´06æœˆ04æ—¥ å®‰è£…hexoæ•°æ®ç”Ÿæˆæ’ä»¶ Jsonæ ¼å¼çš„ï¼Œæœ‰åˆ©äºè‡ªä¸»ç¼–å†™(æš‚æ—¶åªä»‹ç»åŸç”Ÿæ”¯æŒçš„ï¼Œå¦‚æœæƒ³è‡ªå·±ç¼–å†™ä¸‹é¢çš„å¯ä»¥ä¸ç”¨çœ‹) hexo-generator-json-content1$ npm i -S hexo-generator-json-content NexT åŸç”Ÿæ”¯æŒï¼Œä¸æƒ³æŠ˜è…¾çš„å¯ä»¥ä½¿ç”¨ hexo-generator-search1$ npm install hexo-generator-search --save ç«™ç‚¹é…ç½®æ–‡ä»¶ æ–°å¢1234# Searchsearch: path: search.xml field: post OKï¼ å¾…ç»­ing ç»“åˆæœåŠ¡å™¨ï¼Œå®ç°è‡ªåŠ¨éƒ¨ç½² å¤šè¯´cssç¾åŒ–","categories":[{"name":"Web","slug":"Web","permalink":"https://hocg.in/categories/Web/"}],"tags":[{"name":"HTML5","slug":"HTML5","permalink":"https://hocg.in/tags/HTML5/"},{"name":"Hexo","slug":"Hexo","permalink":"https://hocg.in/tags/Hexo/"},{"name":"CSS3","slug":"CSS3","permalink":"https://hocg.in/tags/CSS3/"}],"keywords":[{"name":"Web","slug":"Web","permalink":"https://hocg.in/categories/Web/"}]},{"title":"å®‰è£…å®ŒUbuntuå,æˆ‘è¯¥åšä»€ä¹ˆ","slug":"å®‰è£…å®ŒUbuntuå-æˆ‘è¯¥åšä»€ä¹ˆ","date":"2016-03-20T06:34:20.000Z","updated":"2018-10-11T13:39:15.380Z","comments":true,"path":"2016/03/20/å®‰è£…å®ŒUbuntuå-æˆ‘è¯¥åšä»€ä¹ˆ/","link":"","permalink":"https://hocg.in/2016/03/20/å®‰è£…å®ŒUbuntuå-æˆ‘è¯¥åšä»€ä¹ˆ/","excerpt":"è¿™æ˜¯ä¸€ç¯‡æˆ‘å¯¹Ubuntuæ—¥å¸¸ä½¿ç”¨å’Œä¼˜åŒ–çš„æ•´ç†ï¼Œä¹Ÿæ˜¯ä¸€ç¯‡å€Ÿé‰´å‰äººçš„æ–‡ç« ï¼Œè¿˜æœ‰ä¸€äº›å¯èƒ½ä¼šé‡åˆ°çš„ç–‘éš¾æ‚ç—…çš„â€œåæ–¹â€ï¼Œå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©:)update: æ–°å¢undistract-meç»ˆç«¯å‘½ä»¤å®Œæˆæé†’æ’ä»¶","text":"è¿™æ˜¯ä¸€ç¯‡æˆ‘å¯¹Ubuntuæ—¥å¸¸ä½¿ç”¨å’Œä¼˜åŒ–çš„æ•´ç†ï¼Œä¹Ÿæ˜¯ä¸€ç¯‡å€Ÿé‰´å‰äººçš„æ–‡ç« ï¼Œè¿˜æœ‰ä¸€äº›å¯èƒ½ä¼šé‡åˆ°çš„ç–‘éš¾æ‚ç—…çš„â€œåæ–¹â€ï¼Œå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©:)update: æ–°å¢undistract-meç»ˆç«¯å‘½ä»¤å®Œæˆæé†’æ’ä»¶ yuanè·å–å®˜æ–¹åˆ—è¡¨ï¼š http://wiki.ubuntu.org.cn/%E6%BA%90%E5%88%97%E8%A1%A8ç½‘æ˜“163ï¼š http://mirrors.163.com/.help/ubuntu.html ç§»é™¤ åˆ é™¤libreoffice 1sudo apt-get remove libreoffice-common åˆ é™¤Amazonçš„é“¾æ¥s 1sudo apt-get remove unity-webapps-common åˆ æ‰åŸºæœ¬ä¸ç”¨çš„è‡ªå¸¦è½¯ä»¶ 12sudo apt-get remove thunderbird totem rhythmbox empathy brasero simple-scan gnome-mahjongg aisleriot gnome-mines cheese transmission-common gnome-orca webbrowser-app gnome-sudoku landscape-client-ui-installsudo apt-get remove onboard deja-dup shang xia zuoyou 12sudo apt-get remove vim-commonsudo apt-get install vim å­—ä½“monacoè‹¹æœå­—ä½“https://github.com/cstrap/monaco-font1curl -kL https://raw.github.com/cstrap/monaco-font/master/install-font-ubuntu.sh | bash consolaså¾®è½¯å­—ä½“ Gnome3å®‰è£…1.å®‰è£…Gnome3æ¡Œé¢12345678910# å®‰è£…sudo add-apt-repository ppa:gnome3-team/gnome3sudo apt-get updatesudo apt-get install ppa-purgesudo ppa-purge ppa:gnome3-team/gnome3sudo apt-get dist-upgradesudo apt-get install gnome-themes-standard ubuntu-desktop gnome-shell# åˆ é™¤sudo apt-get install ppa-purgesudo ppa-purge ppa:gnome3-team/gnome3 2.Gnome3ç³»ç»Ÿä¸‹è½½ ä¸»é¢˜ä¸»é¢˜æ–‡ä»¶ä½ç½®ï¼š~/.themes æˆ– /usr/share/themes 1.Paper1234# ä¸‹æ‹‰gitgit clone https://github.com/snwh/paper-gtk-theme.git# è¿è¡Œå®‰è£…è„šæœ¬sh ./install-gtk-theme.sh 2.Numix-Circle å¾ˆèµ 1234# å®‰è£…sudo apt-add-repository ppa:numix/ppasudo apt-get updatesudo apt-get install numix-icon-theme-circle æ’ä»¶æ”¯æŒ gnome-tweak-tool Gnome3çš„è°ƒèŠ‚è½¯ä»¶å¯ç›´æ¥ç®¡ç†æ’ä»¶ 1sudo apt-get install gnome-tweak-tool æ’ä»¶ä¸‹è½½ç½‘ç«™: https://extensions.gnome.org/ ä½¿ç”¨Chrome æ’ä»¶ ç³»ç»Ÿå®‰è£…chrome-gnome-shell 1234sudo add-apt-repository ppa:ne0sight/chrome-gnome-shell# trustysudo apt-get updatesudo apt-get install chrome-gnome-shell æ’ä»¶åˆ—è¡¨ åç§° æè¿° æ¨è Autohide battery å¯ä»¥åœ¨ç”µæ± å……æ»¡çš„æƒ…å†µä¸‹éšè—ç”µæ± å›¾æ ‡ æ¨è Battery status å¯ä»¥æ˜¾ç¤ºå½“å‰ç”µæ± ç”µé‡ä»¥åŠå¯ä»¥ä½¿ç”¨çš„æ—¶é—´ æ¨è Dash to dock åœ¨å±å¹•å·¦è¾¹æ˜¾ç¤ºä¸€ä¸ªå¿«é€Ÿå¯åŠ¨æ¡ æ¨è Freon æ˜¾ç¤ºå½“å‰ç£ç›˜ï¼Œæ˜¾å¡ï¼ŒCPUç­‰ç­‰æ¸©åº¦ ä¸æ¨èï¼Œæ¨èSysPeek Lock Keys æ˜¾ç¤ºå½“å‰çš„ Num Lock, Caps Lock çš„çŠ¶æ€ æ¨è Refesh wifi connections åœ¨ wifi åˆ—è¡¨ä¸Šæ˜¾ç¤ºä¸€ä¸ªåˆ·æ–°å›¾æ ‡ æ¨è status title bar è®²çŠ¶æ€æ¡ä¸Šçš„æ ‡é¢˜æ”¹ä¸ºå½“å‰çª—å£çš„æ ‡é¢˜ æ¨è Coverflow Alt-Tab ç±»ä¼¼WIN 7åˆ‡æ¢ç‰¹æ•ˆ å¤ªæ˜¾çœ¼ï¼Œä¸æ¨è OpenWeather å¤©æ°”é¢„æŠ¥ æ¨è NetSpeed æ˜¾ç¤ºç½‘é€Ÿ ä¸æ¨èï¼Œæ¨èSysPeek system-monitor æ˜¾ç¤ºå½“å‰ç³»ç»Ÿä¿¡æ¯ å¤ªæ˜¾çœ¼ï¼Œä¸æ¨è Dynamic Top Bar åœ¨å½“å‰æ²¡æœ‰æœ€å¤§åŒ–çª—å£æ—¶ä½¿é¡¶æ é€æ˜ æ¨è Impatience Gnome Shell åŠ¨ç”»æé€Ÿ æ¨è Better Volume Indicator é€è¿‡é¼ æ ‡æ»šè½®æ“ä½œæ›´ä¾¿æ·åœ°è°ƒæ•´éŸ³é‡ æ¨è Media player indicator æ˜¾ç¤ºéŸ³ä¹æ’­æ”¾å™¨çš„çŠ¶æ€ æ¨è Workspaces-to-dock å°†å·¥ä½œåŒºè½¬å˜ä¸ºä¸€ä¸ªå¯è‡ªåŠ¨éšè—çš„åœé æ  æ¨è Panel OSD ä¿®æ”¹é€šçŸ¥æ˜¾ç¤ºä½ç½® æ¨è Clipboard Indicator å‰ªè´´æ¿æŒ‡ç¤ºå™¨ æ¨è Caffeine ç¦æ­¢è‡ªåŠ¨æŒ‚èµ·æˆ–é”å± æ¨è Transmission Daemon Indicator Transmissioné¢æ¿æŒ‡ç¤ºå™¨ æ¨èï¼Œéœ€è¦Transmission Daemon Icon Hider æ˜¾ç¤º/éšè—é¡¶æ å›¾æ ‡ æ¨è Top Panel Workspace Scroll åœ¨é¡¶æ ä¸Šæ»šåŠ¨é¼ æ ‡ä¸­é”®æ¥å¿«é€Ÿåˆ‡æ¢å·¥ä½œåŒºã€‚åœ¨topbaræŒ‰ä½shift+æ»šè½® æ¨è Drop Down Terminal ç»ˆç«¯å¿«æ·æ–¹å¼ æ¨è Windows Blur Effects ç»™æœªæ¿€æ´»çš„çª—å£æ·»åŠ æ¨¡ç³Šæ•ˆæœ ä¸æ¨è Modern Calc åŠŸèƒ½é½å…¨çš„è®¡ç®—å™¨æ‰©å±• æ²¡æ‰¾åˆ° EasyScreenCast å½•å±å·¥å…· æ¨è Place status indicator å¿«é€Ÿè®¿é—®ä¸€äº›æ–‡ä»¶å¤¹ æ¨èï¼Œæ²¡è£…ä¸Š Removable drive menu æ˜¾ç¤ºè¿æ¥åˆ°ç”µè„‘çš„usbè®¾å¤‡ æ¨è User themes ç”¨æ¥å¯ç”¨è‡ªå®šä¹‰çš„shellä¸»é¢˜ æ¨èï¼Œæ²¡è£…ä¸Š Workspace indicator åœ¨é¡¶æ æ˜¾ç¤ºå½“å‰ç¤ºå·¥ä½œåŒºçš„åºå· æ¨è touchpad-indicator æ’å…¥é¼ æ ‡æ—¶è‡ªåŠ¨ä½¿è§¦æ‘¸æ¿å¤±æ•ˆ æ¨è å£çº¸1234567# 1.å®‰è£…archiboldcurl -L -O http://archibold.io/sh/archiboldchmod +x archiboldsudo mv archibold /usr/bin# 2.æ‰§è¡Œarchibold login-background [å£çº¸çš„ä½ç½®] æ­¤å¤–è¿˜å¯ä»¥è®©æ¡Œé¢å’Œé”å±ç•Œé¢ä½¿ç”¨åŠ¨æ€å£çº¸ï¼ŒåŠ¨æ€å£çº¸ç”±ä¸€ä¸ªxmlæ–‡ä»¶æ„æˆï¼Œå°±åƒè¿™æ ·ï¼š12345678910111213141516171819202122232425262728293031323334&lt;background&gt; &lt;starttime&gt; &lt;year&gt;2011&lt;/year&gt; &lt;month&gt;11&lt;/month&gt; &lt;day&gt;24&lt;/day&gt; &lt;hour&gt;7&lt;/hour&gt; &lt;minute&gt;00&lt;/minute&gt; &lt;second&gt;00&lt;/second&gt; &lt;/starttime&gt; &lt;static&gt; &lt;duration&gt;3600.0&lt;/duration&gt; &lt;file&gt;picture1.jpg&lt;/file&gt; &lt;/static&gt; &lt;transition type=\"overlay\"&gt; &lt;duration&gt;18000.0&lt;/duration&gt; &lt;from&gt;picture1.jpg&lt;/from&gt; &lt;to&gt;/picture2.jpg&lt;/to&gt; &lt;/transition&gt; &lt;static&gt; &lt;duration&gt;18000.0&lt;/duration&gt; &lt;file&gt;picture2.jpg&lt;/file&gt; &lt;/static&gt; &lt;transition type=\"overlay\"&gt; &lt;duration&gt;21600.0&lt;/duration&gt; &lt;from&gt;picture2.jpg&lt;/from&gt; &lt;to&gt;picture1.jpg&lt;/to&gt; &lt;/transition&gt;&lt;/background&gt; ç®€å•è§£é‡Šä»¥ä¸‹è¿™ä¸ªxmlæ–‡ä»¶çš„å«ä¹‰ï¼š starttimeï¼šè¿™ä¸ªéƒ¨åˆ†è§„å®šäº†å£çº¸åˆ‡æ¢èµ·å§‹æ—¶é—´ï¼Œè®¾ç½®æˆè¿‡å»çš„æŸä¸ªæ—¶é—´å³å¯(è®¾ç½®æˆ2020å¹´å°±è¦ç­‰åˆ°2020å¹´æ‰ä¼šæœ‰æ•ˆæœ)staticï¼šè¿™ä¸ªéƒ¨åˆ†è¡¨ç¤ºåœ¨durationè§„å®šçš„æ—¶é—´(ä»¥ç§’ä¸ºå•ä½)ä¸­å£çº¸éƒ½æ˜¯fileä¸­ç»™å®šçš„é‚£å¼ å›¾ç‰‡transitionï¼šè¿™ä¸ªéƒ¨åˆ†è¡¨ç¤ºåœ¨durationè§„å®šçš„æ—¶é—´å†…å£çº¸ä»fromä¸­çš„å›¾ç‰‡åˆ‡æ¢åˆ°toä¸­çš„å›¾ç‰‡ä½ å¯ä»¥æ·»åŠ ä»»æ„å¤šä¸ªstatic+transitionçš„ç»„åˆï¼Œåªéœ€è¦æœ€åä¸€ä¸ªtransitionåˆ‡æ¢å›æœ€åˆçš„staticé‚£å¼ å›¾ç‰‡å°±å¯ä»¥å¾ªç¯æ›´æ¢å£çº¸äº†ã€‚ é‚£ä¹ˆå¦‚ä½•å¯ç”¨è¿™æ ·çš„xmlæ–‡ä»¶å‘¢ï¼Œå•å‡­ç³»ç»Ÿè®¾ç½®æ— æ³•åŠåˆ°ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨dconfç³»ç»Ÿé…ç½®ç¼–è¾‘å™¨ã€‚é¦–å…ˆæ‰“å¼€dconfç¼–è¾‘å™¨ï¼Œå±•å¼€orgâ€“gnomeâ€“desktopâ€“backgroundè¿™ä¸€é¡¹ï¼Œå¯ä»¥çœ‹åˆ°å…¶ä¸­çš„picture-uriä¿®è¿™ä¸€é¡¹çš„é»˜è®¤å€¼æ˜¯file:///usr/share/backgrounds/gnome/adwaita-timed.xmlï¼Œè¿™ä¸ªå°±æ˜¯ä½ åˆšè£…å¥½æ¡Œé¢æ˜¯çš„é»˜è®¤å£çº¸å•¦ï¼Œå°†å…¶æ”¹æˆä½ çš„xmlæ–‡ä»¶å°±å¯ä»¥äº†ã€‚é”å±ç•Œé¢çš„å£çº¸æ›´æ¢æ–¹æ³•ä¹Ÿä¸€æ ·ï¼Œåªä¸è¿‡æŠŠorgâ€“gnomeâ€“desktopâ€“backgroundæ”¹æˆorgâ€“gnomeâ€“desktopâ€“screensaverè€Œå·² è½¯ä»¶å®‰è£…æŒ‡ä»¤å®‰è£… å‘½ä»¤é¢æ¿å°æç¤º 1234# å®‰è£…sudo apt updatesudo apt install python3-dev python3-pipsudo -H pip3 install thefuck ç§‘å­¦ä¸Šç½‘ Client-SS 123456789# å®‰è£…sudo add-apt-repository ppa:hzwhuang/ss-qt5sudo apt-get updatesudo apt-get install shadowsocks-qt5# å®‰è£… pipsudo pip install genpac# ä¸‹è½½è‡ªåŠ¨ç¿»å¢™åˆ—è¡¨genpac -p \"SOCKS5 127.0.0.1:1080\" --gfwlist-proxy=\"SOCKS5 127.0.0.1:1080\" --output=\"~/Documents/autoproxy.pac\" --gfwlist-url=\"https://autoproxy-gfwlist.googlecode.com/svn/trunk/gfwlist.txt\" --user-rule-from=\"user-rules.txt\" æ·»åŠ å¼€æœºå¯åŠ¨commandï¼š/usr/bin/ss-qt5 å±å¹•æˆªå›¾ Shutter 12345# å®‰è£…sudo apt-get install Shutter# æ‰“å¼€# æœç´¢ Shutter éŸ³è§†é¢‘è§£ç  ubuntu-restricted extras 12# å®‰è£…sudo apt-get install ubuntu-restricted-extras ç»ˆç«¯å‘½ä»¤æ‰§è¡Œå®Œæˆæé†’ 1234567891011# å®‰è£…sudo apt-get install undistract-me# é…ç½®vim ~/.bashrc# æ–°å¢å¦‚ä¸‹ä¸¤è¡Œ# . /usr/share/undistract-me/long-running.bash# notify_when_long_running_commands_finish_install# ç”Ÿæ•ˆsource ~/.bashrc# æµ‹è¯•sleep 11 GNOME MPV ä»£æ›¿VLCæ’­æ”¾å™¨ 1234# å®‰è£…sudo add-apt-repository ppa:xuzhen666/gnome-mpvsudo apt-get updatesudo apt-get install gnome-mpv è§†é¢‘æ’­æ”¾ VLCæ’­æ”¾å™¨ 123456# å®‰è£…sudo add-apt-repository ppa:videolan/master-dailysudo apt-get updatesudo apt-get install vlc# ä½¿ç”¨# æœç´¢ vlc Grubå¼•å¯¼ Grub Customizerå¯é…ç½®å¯åŠ¨ç•Œé¢ï¼Œå¯åŠ¨é¡¹ç­‰ 123456# å®‰è£…sudo add-apt-repository ppa:danielrichter2007/grub-customizersudo apt-get updatesudo apt-get install grub-customizer# ä½¿ç”¨# æœç´¢ Grub Customizer Office WPS 12# å®‰è£…sudo apt-get install wps-office [å°æ’ä»¶]æŒ‡ç¤ºå™¨æ€§èƒ½ SysPeek 1234# å®‰è£…sudo add-apt-repository ppa:nilarimogard/webupd8 sudo apt-get updatesudo apt-get install syspeeka Synapse å¿«é€Ÿå¯åŠ¨å™¨ 123sudo add-apt-repository ppa:synapse-core/testingsudo apt-get updatesudo apt-get install synapse Ugetä¸€æ¬¾ä¸‹è½½å·¥å…·ï¼Œé…åˆ aria2 æ’ä»¶ä½¿ç”¨æ•ˆæœå‡ºè‰²curl + area2 + axel åœ°å€ï¼šå‚è€ƒ 1234# å®‰è£…sudo add-apt-repository ppa:plushuang-tw/uget-stablesudo apt-get updatesudo apt-get install uget redshiftç±»ä¼¼ f.lux çš„å±å¹•è‰²æ¸©è°ƒæ•´å·¥å…· 12# å®‰è£…sudo apt-get install redshift-gtk æ·»åŠ å¼€æœºå¯åŠ¨commandï¼šredshift-gtk -l 39.92:116.46 -t 5500:4500 Go For It ä¸€æ¬¾æ•´åˆäº†å¾…åŠäº‹é¡¹ä¸è®¡æ—¶å™¨çš„ç”Ÿäº§åŠ›åº”ç”¨ã€‚ 1234# å®‰è£…sudo add-apt-repository ppa:mank319/go-for-itsudo apt-get updatesudo apt-get install go-for-it Catfish ä¸€æ¬¾ä¼˜é›…è¿…æ·çš„æ–‡ä»¶æœç´¢å·¥å…·12# å®‰è£…sudo apt-get install catfish ç¥çº§å‘½ä»¤è¡Œè½¯ä»¶ Tmux è¯´æ˜1sudo apt-get install tmux catä»£ç é«˜äº®12# å®‰è£…pip install pygments é…ç½®ï½/.bashrcåŠ å…¥alias cat=&#39;pygmentize -O style=monokai -f console256 -g&#39; è½¯ä»¶åŒ…å®‰è£…ç³»ç»Ÿç®¡ç† UbuntuTweakæ‰“å¼€ï¼šæœç´¢ Ubuntu TweakåŒæ­¥è½¯ä»¶ åšæœäº‘æ‰“å¼€ï¼šæœç´¢ Nutstoreç™¾åº¦ç½‘ç›˜æ¡Œé¢å®¢æˆ·ç«¯ BCloudä¾¿ç­¾MarkDownç¼–è¾‘è½¯ä»¶ HarooPadå¯†ç ç®¡ç†å™¨ keepass2æœç‹—è¾“å…¥æ³•æœ‰é“è¯å…¸VMware WorkstationChromeç½‘æ˜“éŸ³ä¹æ•°æ®åº“è®¾è®¡è½¯ä»¶ DBdesigner4 - é—®é¢˜1 å¬èµ·æ¥ä¸é”™ Deluge Bittorrent å®¢æˆ·ç«¯ Nuttyç½‘ç»œç›‘æµ‹å·¥å…·ã€‚ Synaptic æ–°ç«‹å¾—è½¯ä»¶åŒ…ç®¡ç†å™¨ UNetbootinå¯åŠ¨ç›˜åˆ¶ä½œå·¥å…· Gpickæ‹¾è‰²å™¨ã€‚ gpaint å¾®è½¯ç”»å›¾ ddm é©±åŠ¨ç®¡ç†å™¨ Navicat o(â•¯â–¡â•°)o ç«Ÿç„¶æ˜¯wineçš„ XMind å°æŠ€å·§å…³é—­ç³»ç»Ÿæ£€æµ‹æŠ¥å‘Š12sudo gedit /etc/default/apport# ä¿®æ”¹enabled=0 å¼€æœºè‡ªåŠ¨å¼€å¯æ•°å­—é”®1234567sudo apt-get install numlockxsudo vim /etc/gdm/Init/Default# -----------# åœ¨æ–‡ä»¶æœ€åexit 0çš„å‰é¢æ·»åŠ ï¼š if [ -x /usr/bin/numlockx ]; then numlockx on fi é‡å¯å³å¯ æ’å…¥é¼ æ ‡æ—¶è‡ªåŠ¨ä½¿è§¦æ‘¸æ¿å¤±æ•ˆå®‰è£…Touchpad Indicator (è§¦æ‘¸æ¿å¼€å…³ï¼‰123sudo add-apt-repository ppa:atareao/atareao sudo apt-get update sudo apt-get install touchpad-indicator æœç´¢ touchpad indicator é‡åˆ°æ˜¾ç¤ºä¿©ä¸ªè¾“å…¥æ³•å›¾æ ‡æƒ…å†µæœ‰ä¸€å®šåŸå› æ˜¯è‡ªå¯é¡¹å¯åŠ¨äº†ä¸€ä¸ª é»‘å±95% æ˜¯å’Œæ˜¾å¡é©±åŠ¨æœ‰å…³ Chrome æ¯æ¬¡æ‰“å¼€éƒ½è¦æ±‚è¾“å…¥å¯†ç ä¸€ã€åˆ é™¤ç°åœ¨çš„å¯†é’¥ç¯ è§†å›¾-&gt;æ ¹æ®å¯†ç ç¯ åœ¨å¯†ç åŒºä¼šæœ‰ä¸€ä¸ªâ€œç™»å½•â€ä¸ºåå­—çš„å¯†é’¥ç¯ï¼Œå³å‡»å°†å…¶åˆ é™¤ã€‚äºŒã€æ·»åŠ æ–°çš„å¯†é’¥ç¯ ç»ˆç«¯è¾“å…¥seahorseæ‰“å¼€ç®¡ç†å¯†é’¥ç¯çš„è½¯ä»¶ï¼Œæ–‡ä»¶-&gt;æ–°å»º-&gt;å¯†ç å’Œå¯†é’¥-&gt;è¾“å…¥åå­—(è¿™é‡Œæ˜¯ä»¥â€chromeâ€ä¸ºä¾‹)ã€‚å¯†ç è®¾ç½®ä¸ºç©º æ·»åŠ æºå®‰è£…åï¼Œnot fount XXä¸€ã€ è¯•ç€è®¿é—®è¯¥é“¾æ¥äºŒã€å¦‚æœå¯ä»¥æ‰‹åŠ¨æ‰¾åˆ°è¯¥è·¯å¾„ï¼Œé‚£ä¾¿å¯ä»¥ä¿®æ”¹/etc/apt/source.list.d/ç›®å½•ä¸‹ä½ æ·»åŠ çš„å®‰è£…æºæ–‡ä»¶ä¾‹å¦‚1234vim /etc/apt/sources.list.d/sogoupinyin.list# æ˜¾ç¤ºå†…å®¹# deb http://archive.ubuntukylin.com:10006/ubuntukylin trusty main# å¯ä¿®æ”¹é“¾æ¥éƒ¨åˆ†ã€‚ ç½‘å¡é©±åŠ¨ Realtek RTL8723AE æ— çº¿ç½‘å¡é©±åŠ¨ç¬¬ä¸€ç§(é—­æºé©±åŠ¨)ï¼š 1sudo apt-get install linux-firmware-nonfree ç¬¬äºŒç§(ç¬¬ä¸‰æ–¹é©±åŠ¨ï¼ŒPPAå®‰è£…)ï¼š 123sudo add-apt-repository ppa:hanipouspilot/rtlwifisudo apt-get updatesudo apt-get install rtlwifi-new-dkms å½“é‡åˆ°äº§å“æ— æ³•è¾“å…¥ä¸­æ–‡çš„æ—¶å€™å…ˆå°è¯•å¸è½½ibusï¼Œå¦‚æœè¿˜æ˜¯ä¸å¯ä»¥è¯•è¯•åœ¨xxx.shçš„å¯åŠ¨è„šæœ¬ä¸­æ·»åŠ å¦‚ä¸‹ï¼š 12XMODIFIERS=\"@im=fcitx\"export XMODIFIERS åˆ° 123# ---------------------------------------------------------------------# Run the IDE.# --------------------------------------------------------------------- ä¹‹å‰ã€‚é€šç”¨1sudo mv /usr/bin/ibus-daemon /usr/bin/ibus-daemon.fix è§£å†³LC_CTYPE: cannot change locale (en_US.UTF-8) é”™è¯¯12# å¢åŠ en_US.UTF-8locale-gen en_US.UTF-8 ä¿®å¤VMwareæ•…éšœï¼Œé—ªé€€ ä¸‹è½½Uefi.privã€fix.shã€Uefi.derè‡³äºåŒä¸€ç›®å½•. æ‰§è¡Œ 1sh fix.sh","categories":[{"name":"OS","slug":"OS","permalink":"https://hocg.in/categories/OS/"}],"tags":[{"name":"Ubuntu","slug":"Ubuntu","permalink":"https://hocg.in/tags/Ubuntu/"},{"name":"Tips","slug":"Tips","permalink":"https://hocg.in/tags/Tips/"},{"name":"Gnome","slug":"Gnome","permalink":"https://hocg.in/tags/Gnome/"}],"keywords":[{"name":"OS","slug":"OS","permalink":"https://hocg.in/categories/OS/"}]},{"title":"hexo ä½¿ç”¨å°è®°","slug":"hexo-ä½¿ç”¨","date":"2016-03-15T13:31:42.000Z","updated":"2017-01-12T02:37:02.000Z","comments":true,"path":"2016/03/15/hexo-ä½¿ç”¨/","link":"","permalink":"https://hocg.in/2016/03/15/hexo-ä½¿ç”¨/","excerpt":"è¿™æ˜¯ä¸€ç¯‡å…³äºå¦‚ä½•ä½¿ç”¨hexoçš„æ”¶é›†Box &gt; ä¸å®šæœŸæ›´æ–°å§ï¼ update 2017å¹´01æœˆ12æ—¥10:33:55","text":"è¿™æ˜¯ä¸€ç¯‡å…³äºå¦‚ä½•ä½¿ç”¨hexoçš„æ”¶é›†Box &gt; ä¸å®šæœŸæ›´æ–°å§ï¼ update 2017å¹´01æœˆ12æ—¥10:33:55 å‚ç…§ hexo å®˜æ–¹æ–‡æ¡£å‚ç…§ next ä¸»é¢˜å‚ç…§ next ä¸»é¢˜ for githubå‚ç…§ æ›´å¤šæ‰©å±•ä½¿ç”¨ mdæ–‡æ¡£å¤´éƒ¨ å‚æ•° æè¿° é»˜è®¤å€¼ layout å¸ƒå±€ æœ‰å“ªäº›layoutå‘¢ï¼Œè¯·åˆ° scaffolds ç›®å½•ä¸‹æŸ¥çœ‹ï¼Œè¿™äº›æ–‡ä»¶åç§°å°±æ˜¯layoutåç§° title æ ‡é¢˜ date å»ºç«‹æ—¥æœŸ æ–‡ä»¶å»ºç«‹æ—¥æœŸ updated æ›´æ–°æ—¥æœŸ æ–‡ä»¶æ›´æ–°æ—¥æœŸ comments å¼€å¯æ–‡ç« çš„è¯„è®ºåŠŸèƒ½ true tags æ ‡ç­¾ï¼ˆä¸é€‚ç”¨äºåˆ†é¡µï¼‰ categories åˆ†ç±»ï¼ˆä¸é€‚ç”¨äºåˆ†é¡µï¼‰ permalink è¦†ç›–æ–‡ç« ç½‘å€ description æ·»åŠ æœ¬é¡µæè¿° é»˜è®¤æ‰€æœ‰ photos æ·»åŠ å›¾ç‰‡ hexo åŸºç¡€å‘½ä»¤1234567891011121314# æ¸…é™¤$ hexo clean# ä¸Šä¼  GitHub$ hexo deploy# æ–°å»ºæ–‡ç« $ hexo new \"postName\"# æ–°å»ºé¡µé¢hexo new page \"pageName\"# ç”Ÿæˆé™æ€é¡µé¢è‡³publicç›®å½•hexo generate# å¼€å¯é¢„è§ˆè®¿é—®ç«¯å£ï¼ˆé»˜è®¤ç«¯å£4000ï¼Œ'ctrl + c'å…³é—­serverï¼‰hexo server# å°†.deployç›®å½•éƒ¨ç½²åˆ°GitHubhexo deploy .md æ‰©å±• æ‰©å¤§å›¾ç‰‡å®½åº¦ 1&#123;% fi image-url, alt, title %&#125; æ˜¾ç¤º æ›´å¤šæŒ‰é’® 123ä»¥ä¸Šæ˜¯æ‘˜è¦&lt;!--more--&gt;ä»¥ä¸‹æ˜¯ä½™ä¸‹å…¨æ–‡ ä½¿ç”¨æ ‡ç­¾åˆ«å 1&#123;% cq %&#125; æ ‡ç­¾åˆ«å &#123;% endcq %&#125; å¯èƒ½é‡åˆ°çš„é—®é¢˜ å½“ä½ å‘å¸ƒçš„.mdæ–‡ä»¶ä¸­æºå¸¦é€—å·,(å·²çŸ¥)ï¼Œåœ¨å¤šè¯´è¯„è®ºæ’ä»¶ä¸­å°†æ— æ³•è¯†åˆ«è¯„è®ºæ¡æ•°(å°±æ˜¯æ–‡ç« é¡¶éƒ¨é‚£ä¸ª) å€Ÿé‰´åŠæ³•ï¼šæ›¿æ¢æ–‡ä»¶å‘½åï¼Œå°†é€—å·å·²_æˆ– åˆ†éš” æ¢ç”µè„‘å, å¦‚ä½•è¿ç§»ï¼Ÿ123456// ä¸ºäº†ä½¿ç”¨hexo dæ¥éƒ¨ç½²åˆ°gitä¸Šï¼Œéœ€è¦å®‰è£…npm install hexo-deployer-git --save// ä¸ºäº†å»ºç«‹RSSè®¢é˜…ï¼Œéœ€è¦å®‰è£…npm install hexo-generator-feed --save// ä¸ºäº†å»ºç«‹ç«™ç‚¹åœ°å›¾ï¼Œéœ€è¦å®‰è£…npm install hexo-generator-sitemap --save å¯èƒ½ä¼šé‡åˆ° â€˜./build/Release/DTraceProviderBindingsâ€™] code: â€˜MODULE_NOT_FOUNDâ€™ 1npm install hexo --no-optional End","categories":[{"name":"Other","slug":"Other","permalink":"https://hocg.in/categories/Other/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"https://hocg.in/tags/Hexo/"}],"keywords":[{"name":"Other","slug":"Other","permalink":"https://hocg.in/categories/Other/"}]}]}